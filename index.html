
<!DOCTYPE html>

<html>

  <head>
    <meta http-equiv="Content-type" content="text/html" charset="UTF-8">
    <title>Earl Grey</title>
    <link rel="stylesheet" type="text/css" href="/style/style.css">
    </head>

  <body>





<div id="nav-container" class="container"><div id="nav">
    <div id="logo" class="navlink"><a href="/"><img src="/assets/earlgrey-text.svg" height="70px" alt="Earl Grey"></a></div>
    <div id="use" class="navlink"><a href="/use.html">use</a></div>
    <div id="doc" class="navlink"><a href="/doc.html">learn</a></div>
    <div id="repl" class="navlink"><a href="/repl">try it!</a></div>
    <div id="source" class="navlink"><a href="https://github.com/breuleux/earl-grey">source</a></div></div></div>



<div id="main-container" class="container"><div id="main">


<script>document.getElementById("logo").className = "navlink curnav"</script>



<p><strong>Earl Grey</strong> is a neat little language that compiles to
JavaScript. Here's what it has to offer:</p>

<ul><li><strong><a href="#pythonlikesyntax">Python-like syntax</a></strong></li><li>Fully <strong><a href="#compatible">compatible</a></strong> with the node.js ecosystem</li><li>Generators and <strong><a href="#asyncawait">async/await</a></strong> (no callback hell!)</li><li>Powerful, deeply integrated <strong><a href="#patternmatching">pattern matching</a></strong>
  <ul><li>Used for assignment, function declaration, looping, exceptions...</li></ul></li><li>A <strong><a href="#documentbuilding">document-building DSL</a></strong> with customizable behavior!</li><li>A very powerful hygienic <strong><a href="#macrosystem">macro</a></strong> system!
  <ul><li>Define your own control structures or DSLs</li><li>Macros integrate seamlessly with the language</li><li>Macro libraries! Test with <strong><a href="https://github.com/breuleux/earl-mocha">earl-mocha</a></strong>, build with <strong><a href="https://github.com/breuleux/earl-gulp,">earl-gulp,</a></strong>
    make dynamic pages with <strong><a href="https://github.com/breuleux/earl-react">earl-react</a></strong>, etc.</li></ul></li><li>And <strong><a href="#andmuchmore">much more!</a></strong></li></ul>


<h2 id="pythonlikesyntax">Python-like syntax</h2>

<p>Like Python, EG uses indent to define blocks and line breaks to
separate statements, which reduces punctuation noise. Several control
structures, for instance conditionals and <code>while</code> loops, will be
perfectly familiar to Python users:</p>

<pre class="hl"><span class="hljs-keyword">var </span>i <span class="hljs-operator">=</span> <span class="hljs-number">10</span>
<span class="hljs-keyword">while </span>i <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span><span class="hljs-punctuation">:</span>
   <span class="hljs-keyword">if </span>i <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-punctuation">:</span>
      <span class="hljs-keyword">print </span><span class="hljs-string">"Blast off!"</span>
   <span class="hljs-keyword">else</span><span class="hljs-punctuation">:</span>
      <span class="hljs-keyword">print </span>i</pre>

<p>The rest of the language is less similar but retains a simple feel and
consistent, minimalist syntax:</p>

<pre class="hl">fib<span class="hljs-punctuation">(</span>n<span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span>
   <span class="hljs-keyword">var </span><span class="hljs-punctuation">{</span>a<span class="hljs-punctuation">,</span> b<span class="hljs-punctuation">}</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">}</span>
   <span class="hljs-keyword">for </span>i <span class="hljs-wordop">of</span> <span class="hljs-number">1</span><span class="hljs-operator">..</span>n<span class="hljs-punctuation">:</span>
      <span class="hljs-punctuation">{</span>a<span class="hljs-punctuation">,</span> b<span class="hljs-punctuation">}</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">{</span>b<span class="hljs-punctuation">,</span> a <span class="hljs-operator">+</span> b<span class="hljs-punctuation">}</span>
   a

<span class="hljs-number">1</span><span class="hljs-operator">..</span><span class="hljs-number">10</span> <span class="hljs-wordop">each</span> i <span class="hljs-operator">-&gt;</span>
   <span class="hljs-keyword">print </span>fib<span class="hljs-punctuation">(</span>i<span class="hljs-punctuation">)</span></pre>

<p>EG's features are too numerous to list here, but you can read about
them in the <a href="/doc.html">documentation</a>.</p>


<h2 id="compatible">Compatible</h2>

<p>One of EG's primary goals is to be as compatible as possible with
existing JavaScript libraries and frameworks and the node/iojs
ecosystem.</p>

<p>Any package in npm's wide selection can thus be imported and used
without issue. The same goes for jQuery, canvas/SVG libraries, or
frameworks such as React. Conversely, EG can be used to create
packages that JavaScript code may import and use.</p>

<p>EG has support for source maps. Plugins exist for a few existing
frameworks: <strong><a href="https://github.com/breuleux/gulp-earl">gulp-earl</a></strong> for gulp, <strong><a href="https://github.com/breuleux/earlify">earlify</a></strong> for browserify.</p>


<h2 id="asyncawait">async/await</h2>

<p>EG makes asynchronous code a breeze. EG's implementation is based on
Promises as defined by ECMAScript version 6 and many libraries already
implement this interface. For the rest, existing callback-based
functionality can be converted to Promises using <code>promisify</code>.</p>

<p>Here's an example to give you an idea:</p>

<pre class="hl"><span class="hljs-keyword">require</span><span class="hljs-punctuation">:</span> request
g <span class="hljs-operator">=</span> promisify<span class="hljs-punctuation">(</span>request<span class="hljs-string">.get</span><span class="hljs-punctuation">)</span>

<span class="hljs-keyword">async </span>getXKCD<span class="hljs-punctuation">(</span>n <span class="hljs-operator">=</span> <span class="hljs-string">""</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span>
   response <span class="hljs-operator">=</span> <span class="hljs-keyword">await </span>g<span class="hljs-punctuation">(</span><span class="hljs-string">'http://xkcd.com/{n}/info.0.json'</span><span class="hljs-punctuation">)</span>
   JSON<span class="hljs-string">.parse</span><span class="hljs-punctuation">(</span>response<span class="hljs-string">.body</span><span class="hljs-punctuation">)</span>

<span class="hljs-keyword">async</span><span class="hljs-punctuation">:</span>
   requests <span class="hljs-operator">=</span> <span class="hljs-keyword">await </span><span class="hljs-keyword">all </span><span class="hljs-number">1</span><span class="hljs-operator">..</span><span class="hljs-number">10</span> <span class="hljs-wordop">each</span> i <span class="hljs-operator">-&gt;</span> getXKCD<span class="hljs-punctuation">(</span>i<span class="hljs-punctuation">)</span>
   requests <span class="hljs-wordop">each</span> req <span class="hljs-operator">-&gt;</span> <span class="hljs-keyword">print </span>req<span class="hljs-string">.alt</span></pre>

<p>Calls to <code>getXKCD</code> or <code>g</code> are asynchronous, which means that they don't
block. The code above will therefore fetch the data for the first ten
XKCD comics in parallel*, not sequentially. <code>await</code> all` collects the
results for us, returning only when everything is done (and then we
can print them in order).</p>

<p>* Do note that this is only IO parallelism, not <em>true</em>
parallelism. You cannot use async/await to run ten matrix
multiplications in parallel on different threads or different
processors unless you explicitly create these threads (or web
workers), or use a library that does.</p>


<h2 id="patternmatching">Pattern matching</h2>

<p>Pattern matching is the kind of feature that you can't tolerate not
having, once you have a taste of it. A lot of languages implement
crippled versions of it (usually as destructuring assignment). EG
gives you <em>everything</em> (short of actual static guarantees, but I'm
thinking about it):</p>

<pre class="hl">repeat<span class="hljs-punctuation">(</span>String<span class="hljs-operator">?</span> thing <span class="hljs-wordop">or</span> Array<span class="hljs-operator">!</span> thing<span class="hljs-punctuation">,</span> Number<span class="hljs-operator">?</span> <span class="hljs-keyword">match</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span>
   <span class="hljs-number">0</span> <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
   n <span class="hljs-operator">-&gt;</span> thing <span class="hljs-operator">++</span> repeat<span class="hljs-punctuation">(</span>thing<span class="hljs-punctuation">,</span> n <span class="hljs-operator">-</span> <span class="hljs-number">1</span><span class="hljs-punctuation">)</span>

repeat<span class="hljs-punctuation">(</span><span class="hljs-string">"hello"</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">)</span>      <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">"hellohellohellohello"</span>
repeat<span class="hljs-punctuation">(</span><span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">)</span>       <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">}</span>
repeat<span class="hljs-punctuation">(</span><span class="hljs-number">6</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span>            <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> <span class="hljs-punctuation">{</span><span class="hljs-number">6</span><span class="hljs-punctuation">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span> <span class="hljs-number">6</span><span class="hljs-punctuation">}</span>
repeat<span class="hljs-punctuation">(</span><span class="hljs-string">"apple"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"pie"</span><span class="hljs-punctuation">)</span>  <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> ERROR</pre>

<p>More exhaustive documentation can be found
<a href="/doc.html#patternmatching">here</a>.</p>


<h2 id="documentbuilding">Document building</h2>

<p>Earl Grey's <code>%</code> operator can be used to easily build HTML, DOM,
virtual DOM, and other things:</p>

<pre class="hl">mul-table <span class="hljs-operator">=</span>
   div<span class="hljs-punctuation">[</span><span class="hljs-struct">#multiplication-table</span><span class="hljs-punctuation">]</span> <span class="hljs-operator">%</span>
      h1 <span class="hljs-operator">%</span> <span class="hljs-string">"Multiplication table"</span>
      table <span class="hljs-operator">%</span> <span class="hljs-number">1</span><span class="hljs-operator">..</span><span class="hljs-number">10</span> <span class="hljs-wordop">each</span> i <span class="hljs-operator">-&gt;</span>
         tr <span class="hljs-operator">%</span> <span class="hljs-number">1</span><span class="hljs-operator">..</span><span class="hljs-number">10</span> <span class="hljs-wordop">each</span> j <span class="hljs-operator">-&gt;</span>
            td <span class="hljs-operator">%</span> i <span class="hljs-operator">*</span> j</pre>

<p>The resulting data structure can then be transformed in various ways.
For instance, you may use the <code>/html</code> and <code>/dom</code> standard packages.</p>

<p><code>html</code> builds a string of HTML that you can print or save in a file:</p>

<pre class="hl"><span class="hljs-keyword">require</span><span class="hljs-punctuation">:</span> <span class="hljs-operator">/</span>html
<span class="hljs-keyword">print </span>html<span class="hljs-punctuation">(</span>mul-table<span class="hljs-punctuation">)</span></pre>

<p><code>dom</code> builds a DOM element that you can append somewhere in your page:</p>

<pre class="hl"><span class="hljs-keyword">require</span><span class="hljs-punctuation">:</span> <span class="hljs-operator">/</span>dom
document<span class="hljs-string">.get-element-by-id</span><span class="hljs-punctuation">(</span><span class="hljs-string">"target"</span><span class="hljs-punctuation">)</span><span class="hljs-string">.append-child</span><span class="hljs-punctuation">(</span>dom<span class="hljs-punctuation">(</span>mul-table<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span></pre>

<p>Alternatively, you can import a special <code>%</code> operator:</p>

<pre class="hl"><span class="hljs-keyword">require-macros</span><span class="hljs-punctuation">:</span> <span class="hljs-operator">/</span>html <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">%</span><span class="hljs-punctuation">)</span>
<span class="hljs-keyword">print </span>strong <span class="hljs-operator">%</span> <span class="hljs-string">"Hello world"</span> <span class="hljs-comment">;; ==&gt; "&lt;strong&gt;Hello world&lt;/strong&gt;"</span></pre>

<h3 id="react">React</h3>

<p>In addition to HTML and plain DOM conversions, there is also a
<strong><a href="https://facebook.github.io/react/">react</a></strong> package for Earl Grey called <strong><a href="https://github.com/breuleux/earl-react">earl-react</a></strong> from which
you can import a <code>%</code> operator that builds React virtual DOM nodes:</p>



<pre class="hl"><span class="hljs-keyword">require</span><span class="hljs-punctuation">:</span> earl-react <span class="hljs-wordop">as</span> React
<span class="hljs-keyword">require-macros</span><span class="hljs-punctuation">:</span> earl-react <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">%</span><span class="hljs-punctuation">,</span> component<span class="hljs-punctuation">)</span>
<span class="hljs-keyword">component </span>HelloMessage:
   render<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> div <span class="hljs-operator">%</span> <span class="hljs-string">'Hello {@props.name}'</span>
React<span class="hljs-string">.render</span><span class="hljs-punctuation">(</span>HelloMessage <span class="hljs-operator">%</span> name <span class="hljs-operator">=</span> <span class="hljs-string">"Balthazar"</span><span class="hljs-punctuation">,</span> mount-node<span class="hljs-punctuation">)</span></pre>

<p>It would be straightforward to define <code>%</code> for other frameworks, or
for new ones, or to generate other languages such as LaTeX.</p>


<h2 id="macrosystem">Macro system</h2>

<p>EG's macro system permits the definition of new control structures
that look native to the language. Macros are fairly easy to write and
can make code terser and more readable:</p>

<pre class="hl"><span class="hljs-keyword">inline-macro </span>W<span class="hljs-punctuation">{</span>expr<span class="hljs-punctuation">}</span><span class="hljs-punctuation">:</span>
   <span class="hljs-quote">`(^expr).split(" ")`</span>

W<span class="hljs-string">"apples bananas cantaloupes"</span> <span class="hljs-comment">;; ==&gt; {"apples", "bananas", "cantaloupes"}</span></pre>


<pre class="hl"><span class="hljs-keyword">inline-macro </span>unless<span class="hljs-punctuation">{</span><span class="hljs-quote">`{^test, ^body}`</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">:</span>
   <span class="hljs-quote">`if{not ^test, ^body}`</span>

<span class="hljs-keyword">unless </span><span class="hljs-number">1</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-number">2</span><span class="hljs-punctuation">:</span>
   <span class="hljs-keyword">print </span><span class="hljs-string">"Everything is fine!"</span></pre>

<p>At the moment I have not yet well documented the macro system, but
keep tuned, I'll get around to it! There's just... a <em>lot</em> of stuff to
document.</p>


<h3 id="macrolibraries">Macro libraries</h3>

<p>It is possible to define macro libraries with macros importable via
<code>require-macros</code>.</p>

<p>In fact, there are <em>already</em> macro libraries for many existing
JavaScript or node libraries! Here are some of them:</p>


<h3 id="testwithearlmocha">Test with earl-mocha</h3>

<p><strong><a href="https://github.com/breuleux/earl-mocha">earl-mocha</a></strong> defines a certain amount of macros to help you write
tests for your applications:</p>

<pre class="hl"><span class="hljs-keyword">require-macros</span><span class="hljs-punctuation">:</span>
   earl-mocha <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">(</span>describe<span class="hljs-punctuation">,</span> it<span class="hljs-punctuation">,</span> assert<span class="hljs-punctuation">,</span> expect-error<span class="hljs-punctuation">)</span>

<span class="hljs-keyword">describe </span><span class="hljs-string">"Array"</span><span class="hljs-punctuation">:</span>

   <span class="hljs-keyword">it </span><span class="hljs-string">"#concat"</span><span class="hljs-punctuation">:</span>
      <span class="hljs-keyword">assert </span><span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">}</span><span class="hljs-string">.concat</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">{</span><span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">}</span>

   <span class="hljs-keyword">it </span><span class="hljs-string">"#map"</span><span class="hljs-punctuation">:</span>
      <span class="hljs-keyword">assert </span><span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">}</span><span class="hljs-string">.map</span><span class="hljs-punctuation">(</span>x <span class="hljs-operator">-&gt;</span> x <span class="hljs-operator">*</span> x<span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span><span class="hljs-operator">=</span> <span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span> <span class="hljs-number">9</span><span class="hljs-punctuation">}</span>
      <span class="hljs-keyword">expect-error </span>TypeError:
         <span class="hljs-punctuation">{</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-number">3</span><span class="hljs-punctuation">}</span><span class="hljs-string">.map</span><span class="hljs-punctuation">(</span><span class="hljs-string">"huh"</span><span class="hljs-punctuation">)</span></pre>


<h3 id="buildwithearlgulp">Build with earl-gulp</h3>

<p>Using <strong><a href="https://github.com/breuleux/earl-gulp">earl-gulp</a></strong>, you can define gulp tasks like this:</p>

<pre class="hl"><span class="hljs-keyword">require-macros</span><span class="hljs-punctuation">:</span> earl-gulp <span class="hljs-operator">-&gt;</span> task

<span class="hljs-keyword">require</span><span class="hljs-punctuation">:</span> gulp<span class="hljs-punctuation">,</span> gulp-sass<span class="hljs-punctuation">,</span> gulp-earl<span class="hljs-punctuation">,</span> gulp-sourcemaps

<span class="hljs-keyword">task </span>sass:
   <span class="hljs-keyword">chain </span>gulp:
      <span class="hljs-member">@src</span><span class="hljs-punctuation">(</span><span class="hljs-string">"./content/**/*.sass"</span><span class="hljs-punctuation">)</span>
      <span class="hljs-member">@pipe</span><span class="hljs-punctuation">(</span>gulp-sass<span class="hljs-punctuation">(</span>indented-syntax <span class="hljs-operator">=</span> true<span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
      <span class="hljs-member">@pipe</span><span class="hljs-punctuation">(</span>gulp<span class="hljs-string">.dest</span><span class="hljs-punctuation">(</span><span class="hljs-string">"./output"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

<span class="hljs-keyword">task </span>earl:
   <span class="hljs-keyword">chain </span>gulp:
      <span class="hljs-member">@src</span><span class="hljs-punctuation">(</span><span class="hljs-string">"./content/**/*.eg"</span><span class="hljs-punctuation">)</span>
      <span class="hljs-member">@pipe</span><span class="hljs-punctuation">(</span>gulp-sourcemaps<span class="hljs-string">.init</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
      <span class="hljs-member">@pipe</span><span class="hljs-punctuation">(</span>gulp-earl<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
      <span class="hljs-member">@pipe</span><span class="hljs-punctuation">(</span>gulp-sourcemaps<span class="hljs-string">.write</span><span class="hljs-punctuation">(</span><span class="hljs-string">"./"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>
      <span class="hljs-member">@pipe</span><span class="hljs-punctuation">(</span>gulp<span class="hljs-string">.dest</span><span class="hljs-punctuation">(</span><span class="hljs-string">"./output"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span>

<span class="hljs-keyword">task </span>default <span class="hljs-operator">&lt;</span> <span class="hljs-punctuation">{</span>earl<span class="hljs-punctuation">,</span> sass<span class="hljs-punctuation">}</span></pre>


<h3 id="makepageswithearlreact">Make pages with earl-react</h3>

<p>React has its own little language called JSX to define components, but
there's no need for this when you have <strong><a href="https://github.com/breuleux/earl-react">earl-react</a></strong>:</p>

<pre class="hl"><span class="hljs-keyword">require</span><span class="hljs-punctuation">:</span> earl-react <span class="hljs-wordop">as</span> React
<span class="hljs-keyword">require-macros</span><span class="hljs-punctuation">:</span> earl-react <span class="hljs-operator">-&gt;</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">%</span><span class="hljs-punctuation">,</span> component<span class="hljs-punctuation">)</span>
<span class="hljs-keyword">globals</span><span class="hljs-punctuation">:</span> document

<span class="hljs-keyword">component </span>TodoList:
   render<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span>
      ul <span class="hljs-operator">%</span> enumerate<span class="hljs-punctuation">(</span><span class="hljs-member">@props</span><span class="hljs-string">.items</span><span class="hljs-punctuation">)</span> <span class="hljs-wordop">each</span> <span class="hljs-punctuation">{</span>i<span class="hljs-punctuation">,</span> item<span class="hljs-punctuation">}</span> <span class="hljs-operator">-&gt;</span>
         li <span class="hljs-operator">%</span> item

<span class="hljs-keyword">component </span>TodoApp:
   get-initial-state<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">{</span>items <span class="hljs-operator">=</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> text <span class="hljs-operator">=</span> <span class="hljs-string">""</span><span class="hljs-punctuation">}</span>
   render<span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span>
      div <span class="hljs-operator">%</span>
         h3 <span class="hljs-operator">%</span> <span class="hljs-string">"TODO"</span>
         TodoList <span class="hljs-operator">%</span> items <span class="hljs-operator">=</span> <span class="hljs-member">@state</span><span class="hljs-string">.items</span>
         form <span class="hljs-operator">%</span>
            on-submit<span class="hljs-punctuation">(</span>e<span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span>
               e<span class="hljs-string">.prevent-default</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span>
               <span class="hljs-member">@set-state</span> <span class="hljs-wordop">with</span> <span class="hljs-punctuation">{</span>
                  items <span class="hljs-operator">=</span> <span class="hljs-member">@state</span><span class="hljs-string">.items</span><span class="hljs-string">.concat</span><span class="hljs-punctuation">(</span><span class="hljs-punctuation">{</span><span class="hljs-member">@state</span><span class="hljs-string">.text</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">)</span>
                  text <span class="hljs-operator">=</span> <span class="hljs-string">""</span>
               <span class="hljs-punctuation">}</span>
            input <span class="hljs-operator">%</span>
               value <span class="hljs-operator">=</span> <span class="hljs-member">@state</span><span class="hljs-string">.text</span>
               on-change<span class="hljs-punctuation">(</span>e<span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span>
                  <span class="hljs-member">@set-state</span> <span class="hljs-wordop">with</span> <span class="hljs-punctuation">{</span>text <span class="hljs-operator">=</span> e<span class="hljs-string">.target</span><span class="hljs-string">.value</span><span class="hljs-punctuation">}</span>
            button <span class="hljs-operator">%</span> <span class="hljs-string">'Add #{@state.items.length + 1}'</span>

React<span class="hljs-string">.render</span><span class="hljs-punctuation">(</span>TodoApp <span class="hljs-operator">%</span> <span class="hljs-punctuation">(</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">,</span> document<span class="hljs-string">.get-element-by-id</span><span class="hljs-punctuation">(</span><span class="hljs-string">"mount"</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">)</span></pre>


<h1 id="andmuchmore">And much more!</h1>

<p>Well, I don't know about "much", really, it just flows well.</p>

<ul><li><strong><a href="/use.html">Install Earl Grey</a></strong>.</li><li>Go through the <strong><a href="/repl">interactive tutorial</a></strong>. It
  runs in your browser, no need to install anything!</li><li>See the <strong><a href="/doc.html">documentation</a></strong> for an overview of
  all of EG's features.</li></ul>

</div></div>


<div id="foot-container" class="container"><div id="foot"><span class="footlink"></span></div></div>
</body></html>

