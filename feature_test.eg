

<> "Operator priority"

<> with
   [1 + 2 * 3] == 7
   [1 * 2 + 3] == 5
   [70 / 10 / 7] == 1
   [2 ** 3 ** 2] == 512



<> "Fibonacci"

fib{n} =
   n |>
      0 -> 0
      1 -> 1
      n -> fib{n - 1} + fib{n - 2}

<> with
   fib{3} == 2
   fib{30} == 832040



<> "Cond"

positivity{x} =
   cond:
      [x > 0] => .positive
      [x < 0] => .negative
      [x == 0] => .zero

<> with
   positivity{0} == .zero
   positivity{11} == .positive
   positivity{-41} == .negative



<> "Pattern matching"

compare{x, threshold} =
   x |>
      [> threshold] -> "above"
      [< threshold] -> "below"
      [== threshold] -> "equal"

<> with
   compare{-41, 0} == "below"
   compare{11, 0} == "above"
   compare{9, 9} == "equal"


calc{expr} =
   expr |>
      Number? n -> n
      #add{m, n} -> calc{m} + calc{n}
      #sub{m, n} -> calc{m} - calc{n}
      #mul{m, n} -> calc{m} * calc{n}
      #div{m, n} -> calc{m} / calc{n}
      #sub{n} -> -calc{n}

<> with
   [calc{x} == 10] where x = #mul{5, 2}
   [calc{x} == -7] where x = #div{#add{1, 13}, #sub{2}}


{{a, b}, c} = {{1, 2}, 3}

<> with
   [a + b + c] == 6

