
'use strict';require('earlgrey-runtime/6');let $targ$1;let $targ$0;let $0$0;let __lt____lt____colon__$0;let $1$0;let camelCase$0;let $2$0;let expr_mac$0;let var_operator$0;let overridable$0;let pattern_handlers$0;let Body$0;let $3$0;let PatternCompiler$0;$0$0=require("../location");__lt____lt____colon__$0=getProperty($0$0,"<<:","../location");$1$0=require("../util");camelCase$0=getProperty($1$0,"camelCase","../util");$2$0=require("./helpers");expr_mac$0=getProperty($2$0,"expr_mac","./helpers");var_operator$0=getProperty($2$0,"var_operator","./helpers");overridable$0=getProperty($2$0,"overridable","./helpers");pattern_handlers$0=getProperty($2$0,"pattern_handlers","./helpers");Body$0=getProperty($2$0,"Body","./helpers");$3$0=require("../pattern");PatternCompiler$0=getProperty($3$0,"PatternCompiler","../pattern");if((typeof(module)==="undefined")){$targ$1=undefined;(global["module"]=$targ$1);(void 0);}$targ$0=(function(mac$0){let m$0;let acc$0;let temp$0;let defns$0;let $targ$16;let accum$0;let $targ$17;let accum$1;let t0$6;let t0$8;let t1$4;let t0$11;let t1$7;let t0$26;let t1$15;let t0$29;let t0$31;let t0$48;let errf_macro$0;let t0$50;let t0$53;let t0$55;let t0$57;let t0$61;let ChainHandler$0;let $targ$2;let chain_mac$0;let $targ$3;let using_mac$0;let $targ$4;let do_mac$0;let $targ$5;let buildnode_mac$0;let $targ$6;let S_mac$0;let $targ$7;let print_mac$0;let $targ$8;let class_mac$0;let $targ$9;let E_mac$0;let $targ$10;let outer_mac$0;let $targ$11;let tagscope_mac$0;let $targ$12;let usescope_mac$0;let $targ$13;let maysend_mac$0;let exports$0;exports$0=({});defns$0=({"@":var_operator$0("$it")});acc$0=[];temp$0=null;m$0=null;$4:for(m$0 of items(defns$0)){let k$0;let v$0;let t0$0;let t1$0;t0$0=m$0;if((Array.isArray(t0$0)&&((t1$0=t0$0.length),(t1$0===2)))){k$0=t0$0[0];v$0=t0$0[1];temp$0=mac$0(k$0)(v$0);acc$0.push(temp$0);}else{___match_error(m$0);}}ChainHandler$0=(function ChainHandler(temp$1$0){let $targ$14;let $it$0;if((!getChecker(ChainHandler$0)(this))){$it$0=Object.create(ChainHandler$0.prototype);}else{$it$0=this;}($it$0["env"]=temp$1$0);$targ$14=2;($it$0["wrapOrder"]=$targ$14);return $it$0;});(ChainHandler$0.prototype["expand"]=(function expand(info$0){let $targ$15;let $it$1;let self$0;$it$1=this;self$0=this;$targ$15=$it$1.env.mark(["symbol",info$0.gensym("ph")]);($it$1["placeholder"]=$targ$15);return $it$1.placeholder;}));(ChainHandler$0.prototype["wrap"]=(function wrap(expr$0,info$1,opt$0){let $it$2;let self$1;$it$2=this;self$1=this;return ["send",["symbol","chain"],["data",$it$2.placeholder,expr$0]];}));__amp____colon__(ChainHandler$0,__amp____colon__((($targ$16="ChainHandler"),(accum$0=({})),(accum$0["::name"]=$targ$16),accum$0),(($targ$17=true),(accum$1=({})),(accum$1["::egclass"]=$targ$17),accum$1)));$targ$2=(function(ph$0$0,info$2,form$0,expr$1){let x$0;let other$0;let t0$1;let m$1$0;let t0$2;let t0$3;let t0$4;let t1$1;let t2$0;let t3$0;let t4$0;let t5$0;let $targ$18;let defn$0;let env$0;let body$0;let it$0;let construct$0;let bridge$$13284$0;if(((x$0=ph$0$0),((x$0 instanceof Array)&&(x$0[0]==="pattern")))){m$1$0=expr$1;if((Array.isArray(m$1$0)&&((t0$1=m$1$0.length),((t0$1===1)&&(m$1$0[0]==="void"))))){return ["special",ChainHandler$0(form$0.env)];}else{other$0=m$1$0;return ["all",__lt____lt____colon__$0(other$0,expr$1),__lt____lt____colon__$0(["special",ChainHandler$0(form$0.env)],form$0)];}}else{bridge$$13284$0=ph$0$0;if(((Array.isArray(bridge$$13284$0)&&((t0$2=bridge$$13284$0.length),((t0$2===2)&&((bridge$$13284$0[0]==="expr")&&(bridge$$13284$0[1]==="expr")))))||(Array.isArray(bridge$$13284$0)&&((t0$3=bridge$$13284$0.length),((t0$3===2)&&((bridge$$13284$0[0]==="expr")&&(bridge$$13284$0[1]==="head"))))))){$targ$18=expr$1;t0$4=$targ$18;if((Array.isArray(t0$4)&&((t1$1=t0$4.length),((t1$1===3)&&((t0$4[0]==="data")&&((t2$0=t0$4[1]),(defn$0=t2$0),(___hasprop(t2$0,"env")&&((env$0=t2$0.env),(t3$0=getProjector(Body$0)(t0$4[2])),(t3$0[0]&&((t4$0=t3$0[1]),(t5$0=t4$0.length),(t5$0>=0))))))))))){body$0=Array.prototype.slice.call(t4$0,0);}else{___match_error($targ$18,"#data{defn and {=> env}, Body! {*body}}");}[defn$0,env$0,body$0];it$0=__amp__(["symbol","@"],({"env":env$0}));construct$0=(function construct(ph$1$0){let x$2;let rest$0;let x$1;let $$13383$0;let $$13384$0;let t0$5;let t1$2;t0$5=ph$1$0;t1$2=t0$5.length;if((t1$2===1)){x$1=t0$5[0];return x$1;}else{if((t1$2>=1)){x$2=t0$5[0];rest$0=Array.prototype.slice.call(t0$5,1);return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$0,x$2]],construct$0(rest$0)]];}else{return ___match_error(ph$1$0,"{x, *rest}");}}});return construct$0([defn$0].concat(body$0));}else{return ["nostep",form$0];}}});t0$6=getProjector(mac$0("chain"))($targ$2);if(t0$6[0]){chain_mac$0=t0$6[1];}else{___match_error($targ$2,"mac{\"chain\"}! chain_mac{match, info, form, expr}");}$targ$3=(function(temp$2$0,form$1,temp$3$0){let t0$7;let t1$3;let t2$1;let it$1;let defn$1;let env$1;let body$1;t0$7=temp$3$0;if((Array.isArray(t0$7)&&((t1$3=t0$7.length),((t1$3===3)&&((t0$7[0]==="data")&&((t2$1=t0$7[1]),(defn$1=t2$1),___hasprop(t2$1,"env"))))))){env$1=t2$1.env;body$1=t0$7[2];}else{___match_error(temp$3$0);}it$1=__amp__(["symbol","@"],({"env":env$1}));return ["send",["symbol","let"],["data",["send",["symbol","="],["data",it$1,defn$1]],body$1]];});t0$8=getProjector(expr_mac$0)($targ$3);if((t0$8[0]&&((t1$4=getProjector(mac$0("using"))(t0$8[1])),t1$4[0]))){using_mac$0=t1$4[1];}else{___match_error($targ$3,"expr_mac! mac{\"using\"}! using_mac{_, form, #data{defn and {=> env}, body}}");}$targ$4=(function(ph$2$0,temp$4$0,form$2,temp$5$0){let t0$9;let t1$5;let x$3;let x$4;let t0$10;let t1$6;let t2$2;let $targ$19;let stmts$0;let x$5;let body$2;t0$9=temp$5$0;if((Array.isArray(t0$9)&&((t1$5=t0$9.length),((t1$5===2)&&(t0$9[0]==="data"))))){body$2=t0$9[1];}else{___match_error(temp$5$0);}if(((x$3=ph$2$0),((x$3 instanceof Array)&&(x$3[0]==="clause")))){return ["block",body$2];}else{if(((x$4=ph$2$0),((x$4 instanceof Array)&&(x$4[0]==="test")))){$targ$19=body$2;t0$10=getProjector(Body$0)($targ$19);if((t0$10[0]&&((t1$6=t0$10[1]),(t2$2=t1$6.length),(t2$2>=0)))){stmts$0=Array.prototype.slice.call(t1$6,0);}else{___match_error($targ$19,"Body! {*stmts}");}return ["do",["splice"].concat(stmts$0)];}else{if(((x$5=ph$2$0),((x$5 instanceof Array)&&(x$5[0]==="expr")))){return ["multi",body$2];}else{return ___match_error(ph$2$0,"#expr");}}}});t0$11=getProjector(overridable$0)($targ$4);if((t0$11[0]&&((t1$7=getProjector(mac$0("do"))(t0$11[1])),t1$7[0]))){do_mac$0=t1$7[1];}else{___match_error($targ$4,"overridable! mac{\"do\"}! do_mac{match, _, form, #data{body}}");}$targ$5=(function(context$0,temp$6$0,form$3,temp$7$0){let t0$12;let t0$13;let t1$8;let x$6;let x$7;let bridge$$13568$0;let m$2$0;let m$3;let m$8;let x$13;let t0$25;let m$7$0;let xs$0;let x$14;let pair$1;let k$2;let v$2;let args$1;let $$13908$0;let $$13909$0;let t0$23;let t1$13;let t2$5;let t3$2;let t4$2;let m$6$0;let inner__minus__scope$0;let wrap$0;let tags$0;let kv$0;let parse$0;let node$0;let info$3;let env$2;let descr$0;let contents$0;t0$12=temp$6$0;info$3=t0$12;if(___hasprop(t0$12,"env")){env$2=t0$12.env;}else{___match_error(temp$6$0);}t0$13=temp$7$0;if((Array.isArray(t0$13)&&((t1$8=t0$13.length),((t1$8===3)&&(t0$13[0]==="data"))))){descr$0=t0$13[1];contents$0=t0$13[2];}else{___match_error(temp$7$0);}m$2$0=context$0;bridge$$13568$0=m$2$0;if((((x$6=bridge$$13568$0),((x$6 instanceof Array)&&(x$6[0]==="check")))||((x$7=bridge$$13568$0),((x$7 instanceof Array)&&(x$7[0]==="project"))))){return ["nostep",form$3];}else{undefined;}inner__minus__scope$0=info$3.scope.fork();m$3=(function m(){let x$8;let t0$14;let t1$9;let t2$3;let m$4$0;m$4$0=arguments;t0$14=m$4$0.length;if(((t0$14>=1)&&(Array.prototype.slice.call(m$4$0,0,-1),(t1$9=m$4$0[(t0$14-1)]),(Array.isArray(t1$9)&&((t2$3=t1$9.length),((t2$3===2)&&(t1$9[0]==="data"))))))){x$8=t1$9[1];return x$8;}else{return ___match_error(m$4$0,"{*, `{^x}`}");}});env$2.bind(inner__minus__scope$0,"wrap-quote",["macro",m$3]);wrap$0=(function wrap(x$9){return ["use",inner__minus__scope$0,x$9];});tags$0=["data"];kv$0=["data",["symbol","="]];parse$0=(function parse(temp$8$0){let t0$15;let t0$17;let t0$18;let t1$11;let t0$19;let t0$20;let t1$12;let t0$21;let t0$22;let m$5;let acc$1;let temp$9;let args$0;let expr$3;let rest$1;let expr$2;let x$12;let x$11;let x$10;let s$0;let $$13668$0;let $$13669$0;let $$13670$0;let $$13671$0;let $$13672$0;let $$13673$0;let $$13674$0;let $$13675$0;let $$13676$0;let t0$16;let t1$10;let t2$4;let t3$1;let t4$1;let t5$1;let t6$0;let t7$0;let bridge$$13660$0;let bridge$$13662$0;let bridge$$13667$0;let whole$0;let ph$3$0;t0$15=temp$8$0;whole$0=t0$15;ph$3$0=t0$15;t0$16=ph$3$0;t1$10=t0$16.length;if(((t1$10===1)&&(t0$16[0]==="void"))){return null;}else{if((($$13670$0=(t1$10===2))&&(t0$16[0]==="symbol"))){s$0=t0$16[1];return tags$0.push(["value",s$0]);}else{if(($$13670$0&&((t0$16[0]==="value")&&((t2$4=[true,String(t0$16[1])]),t2$4[0])))){x$10=t2$4[1];return tags$0.push(["value",x$10]);}else{if((($$13670$0=(t1$10===3))&&(($$13671$0=(t0$16[0]==="send"))&&((t2$4=t0$16[1]),(($$13673$0=Array.isArray(t2$4))&&((t3$1=t2$4.length),(($$13675$0=(t3$1===2))&&(($$13676$0=(t2$4[0]==="symbol"))&&((t2$4[1]===".")&&((t4$1=t0$16[2]),(Array.isArray(t4$1)&&((t5$1=t4$1.length),((t5$1===3)&&((t4$1[0]==="data")&&((t6$0=t4$1[1]),(Array.isArray(t6$0)&&((t7$0=t6$0.length),((t7$0===1)&&((t6$0[0]==="void")&&((bridge$$13660$0=t4$1[2]),((Array.isArray(bridge$$13660$0)&&((t0$17=bridge$$13660$0.length),((t0$17===2)&&((bridge$$13660$0[0]==="symbol")&&((x$11=bridge$$13660$0[1]),true)))))||(Array.isArray(bridge$$13660$0)&&((t0$18=bridge$$13660$0.length),((t0$18===2)&&((bridge$$13660$0[0]==="value")&&((t1$11=[true,String(bridge$$13660$0[1])]),(t1$11[0]&&((x$11=t1$11[1]),true)))))))))))))))))))))))))))){return tags$0.push(["value",("."+x$11)]);}else{if(($$13676$0&&((t2$4[1]==="#")&&((t4$1=t0$16[2]),(Array.isArray(t4$1)&&((t5$1=t4$1.length),((t5$1===3)&&((t4$1[0]==="data")&&((t6$0=t4$1[1]),(Array.isArray(t6$0)&&((t7$0=t6$0.length),((t7$0===1)&&((t6$0[0]==="void")&&((bridge$$13662$0=t4$1[2]),((Array.isArray(bridge$$13662$0)&&((t0$19=bridge$$13662$0.length),((t0$19===2)&&((bridge$$13662$0[0]==="symbol")&&((x$12=bridge$$13662$0[1]),true)))))||(Array.isArray(bridge$$13662$0)&&((t0$20=bridge$$13662$0.length),((t0$20===2)&&((bridge$$13662$0[0]==="value")&&((t1$12=[true,String(bridge$$13662$0[1])]),(t1$12[0]&&((x$12=t1$12[1]),true)))))))))))))))))))))){return tags$0.push(["value",("#"+x$12)]);}else{if(($$13676$0&&((t2$4[1]==="^")&&((t4$1=t0$16[2]),(Array.isArray(t4$1)&&((t5$1=t4$1.length),((t5$1===3)&&((t4$1[0]==="data")&&((t6$0=t4$1[1]),(Array.isArray(t6$0)&&((t7$0=t6$0.length),((t7$0===1)&&(t6$0[0]==="void"))))))))))))){expr$2=t4$1[2];return tags$0.push(expr$2);}else{if(($$13676$0&&((t2$4[1]==="=")&&((t4$1=t0$16[2]),(Array.isArray(t4$1)&&((t5$1=t4$1.length),((t5$1===3)&&(t4$1[0]==="data")))))))){t4$1[1];t4$1[2];return kv$0.push(whole$0);}else{if($$13671$0){expr$3=t0$16[1];rest$1=t0$16[2];parse$0(expr$3);return parse$0(rest$1);}else{bridge$$13667$0=ph$3$0;if(((Array.isArray(bridge$$13667$0)&&((t0$21=bridge$$13667$0.length),((t0$21>=1)&&((bridge$$13667$0[0]==="multi")&&((args$0=Array.prototype.slice.call(bridge$$13667$0,1)),true)))))||(Array.isArray(bridge$$13667$0)&&((t0$22=bridge$$13667$0.length),((t0$22>=1)&&((bridge$$13667$0[0]==="data")&&((args$0=Array.prototype.slice.call(bridge$$13667$0,1)),true))))))){acc$1=[];temp$9=null;m$5=null;$5:for(m$5 of args$0){let arg$0;arg$0=m$5;temp$9=parse$0(arg$0);acc$1.push(temp$9);}return acc$1;}else{return ___match_error(ph$3$0,"#multi{*args} or #data{*args}");}}}}}}}}}});parse$0(descr$0);m$6$0=contents$0;if((($$13908$0=Array.isArray(m$6$0))&&((t0$23=m$6$0.length),((t0$23===1)&&(m$6$0[0]==="void"))))){contents$0=["array"];}else{if(($$13908$0&&((t0$23>=1)&&(m$6$0[0]==="multi")))){args$1=Array.prototype.slice.call(m$6$0,1);xs$0=[];m$8=null;$6:for(m$8 of args$1){let other$1;let spl$0;let pair$0;let k$1;let v$1;let $$13936$0;let t0$24;let t1$14;let t2$6;let t3$3;let t4$3;let t5$2;let t6$1;let t7$1;t0$24=m$8;pair$0=t0$24;if((Array.isArray(t0$24)&&((t1$14=t0$24.length),((t1$14===3)&&((t0$24[0]==="send")&&((t2$6=t0$24[1]),(Array.isArray(t2$6)&&((t3$3=t2$6.length),((t3$3===2)&&((t2$6[0]==="symbol")&&((t2$6[1]==="=")&&((t4$3=t0$24[2]),(Array.isArray(t4$3)&&((t5$2=t4$3.length),((t5$2===3)&&(t4$3[0]==="data")))))))))))))))){k$1=t4$3[1];v$1=t4$3[2];kv$0.push(pair$0);}else{spl$0=t0$24;if((Array.isArray(t0$24)&&((t1$14=t0$24.length),((t1$14===3)&&((t0$24[0]==="send")&&((t2$6=t0$24[1]),(Array.isArray(t2$6)&&((t3$3=t2$6.length),((t3$3===2)&&((t2$6[0]==="symbol")&&((t2$6[1]==="**")&&((t4$3=t0$24[2]),(Array.isArray(t4$3)&&((t5$2=t4$3.length),((t5$2===3)&&((t4$3[0]==="data")&&((t6$1=t4$3[1]),(Array.isArray(t6$1)&&((t7$1=t6$1.length),((t7$1===1)&&(t6$1[0]==="void"))))))))))))))))))))){t4$3[2];kv$0.push(spl$0);}else{other$1=m$8;xs$0.push(wrap$0(other$1));}}}m$7$0=xs$0;if((Array.isArray(m$7$0)&&((t0$25=m$7$0.length),(t0$25===1)))){x$13=m$7$0[0];contents$0=x$13;}else{contents$0=["array"].concat(xs$0);}}else{pair$1=m$6$0;if((Array.isArray(m$6$0)&&((t0$23=m$6$0.length),((t0$23===3)&&((m$6$0[0]==="send")&&((t1$13=m$6$0[1]),(Array.isArray(t1$13)&&((t2$5=t1$13.length),((t2$5===2)&&((t1$13[0]==="symbol")&&((t1$13[1]==="=")&&((t3$2=m$6$0[2]),(Array.isArray(t3$2)&&((t4$2=t3$2.length),((t4$2===3)&&(t3$2[0]==="data")))))))))))))))){k$2=t3$2[1];v$2=t3$2[2];kv$0.push(pair$1);contents$0=["array"];}else{x$14=m$6$0;contents$0=wrap$0(x$14);}}}node$0=form$3.env.mark(["symbol","ENode"]);return ["send",node$0,["data",tags$0,kv$0,contents$0]];});t0$26=getProjector(overridable$0)($targ$5);if((t0$26[0]&&((t1$15=getProjector(mac$0("%"))(t0$26[1])),t1$15[0]))){buildnode_mac$0=t1$15[1];}else{___match_error($targ$5,"overridable! mac{\"%\"}! buildnode_mac{context\n                                     info and {=> env}\n                                     form\n                                     #data{descr, var contents}}");}$targ$6=(function(context$1,info$4,form$4,temp$10$0){let t0$27;let text$1;let text$0;let m$9$0;let t0$28;let t1$16;let t2$7;let t3$4;let arg$1;let ph$4$0;t0$27=temp$10$0;arg$1=t0$27;ph$4$0=t0$27;t0$28=ph$4$0;t1$16=t0$28.length;if(((t1$16===3)&&((t0$28[0]==="send")&&((t2$7=t0$28[1]),(Array.isArray(t2$7)&&((t3$4=t2$7.length),((t3$4===2)&&((t2$7[0]==="symbol")&&(t2$7[1]==="'"))))))))){t0$28[2];return ["send",["symbol","String"],["data",arg$1]];}else{return ["value",((m$9$0=info$4.gettext(arg$1)),(getChecker(RegExp("^\\[(.|\\n)*\\]$",""))(m$9$0)?((text$0=m$9$0),text$0.substring(1,(text$0.length-1))):((text$1=m$9$0),text$1)))];}});t0$29=getProjector(mac$0("S"))($targ$6);if(t0$29[0]){S_mac$0=t0$29[1];}else{___match_error($targ$6,"mac{\"S\"}! S_mac{context, info, form, match arg}");}$targ$7=(function(context$2,info$5,form$5,ph$5$0){let arg$2;let t0$30;let t1$17;t0$30=ph$5$0;t1$17=t0$30.length;if(((t1$17===1)&&(t0$30[0]==="void"))){return ["send",["send",["symbol","console"],["send",["symbol","."],["data",["void"],["symbol","log"]]]],["data"]];}else{arg$2=ph$5$0;return ["multi",["send",["symbol","="],["data",["symbol","t"],arg$2]],["send",["send",["symbol","console"],["send",["symbol","."],["data",["void"],["symbol","log"]]]],["data",["symbol","t"]]],["symbol","t"]];}});t0$31=getProjector(mac$0("print"))($targ$7);if(t0$31[0]){print_mac$0=t0$31[1];}else{___match_error($targ$7,"mac{\"print\"}! print_mac{context, info, form, match}");}$targ$8=(function(context$3,temp$11$0,form$6,expr$4){let t0$32;let t0$46;let t1$26;let t2$14;let t0$47;let name$3;let name$2;let super$3;let name$1;let super$2;let $$14188$0;let $$14189$0;let $$14190$0;let $$14191$0;let $$14192$0;let t0$45;let t1$25;let t2$13;let t3$10;let t4$8;let t5$7;let bridge$$14187$0;let stmts$3;let ph$6$0;let stmts$2;let $$14194$0;let $$14195$0;let t0$44;let t1$24;let t2$12;let t3$9;let m$10$0;let helper$0;let info$6;let env$3;t0$32=temp$11$0;info$6=t0$32;if(___hasprop(t0$32,"env")){env$3=t0$32.env;}else{___match_error(temp$11$0);}helper$0=(function helper(name$0,super$1,stmts$1){let m$13;let acc$2;let temp$12;let t0$40;let t1$23;let t0$41;let $targ$22;let env2$0;let it$3;let cls$0;let name_str$0;let t0$42;let m$11$0;let other$3;let t0$43;let m$12$0;let statics$0;let ctor$0;let new_stmts$0;let $targ$20;let ctor_args$0;let ctor_body$0;let ctor_expr$0;let node$1;statics$0=["data",["symbol","="]];ctor$0=[["data"],__amp__(["multi"],({"env":env$3}))];acc$2=[];temp$12=null;m$13=null;$7:for(m$13 of stmts$1){let t0$34;let t1$19;let t2$9;let t3$6;let t4$5;let t5$4;let t6$3;let t7$3;let t8$1;let t0$35;let t1$20;let t2$10;let t3$7;let t4$6;let t5$5;let t6$4;let t7$4;let t8$2;let t9$0;let t10$0;let t11$0;let t12$0;let accum$2;let accum$3;let accum$4;let accum$5;let opt$1;let stmt$0;let lhs$0;let rhs$0;let args$2;let body$3;let methods$0;let t0$33;let t1$18;let t2$8;let t3$5;let t4$4;let t5$3;let t6$2;let t7$2;let t8$0;let bridge$$14223$0;t0$33=m$13;if((Array.isArray(t0$33)&&((t1$18=t0$33.length),((t1$18===3)&&((t0$33[0]==="send")&&((t2$8=t0$33[1]),(Array.isArray(t2$8)&&((t3$5=t2$8.length),((t3$5===2)&&((t2$8[0]==="symbol")&&((t2$8[1]==="static")&&((t4$4=t0$33[2]),(Array.isArray(t4$4)&&((t5$3=t4$4.length),((t5$3===2)&&((t4$4[0]==="data")&&((t6$2=getProjector(Body$0)(t4$4[1])),(t6$2[0]&&((t7$2=t6$2[1]),(t8$0=t7$2.length),(t8$0>=0)))))))))))))))))))){methods$0=Array.prototype.slice.call(t7$2,0);temp$12=(statics$0=statics$0.concat(methods$0));acc$2.push(temp$12);}else{bridge$$14223$0=m$13;if(((Array.isArray(bridge$$14223$0)&&((t0$34=bridge$$14223$0.length),((t0$34===3)&&((bridge$$14223$0[0]==="send")&&((t1$19=bridge$$14223$0[1]),(Array.isArray(t1$19)&&((t2$9=t1$19.length),((t2$9===2)&&((t1$19[0]==="symbol")&&((t1$19[1]==="=")&&((t3$6=bridge$$14223$0[2]),(Array.isArray(t3$6)&&((t4$5=t3$6.length),((t4$5===3)&&((t3$6[0]==="data")&&((t5$4=t3$6[1]),(Array.isArray(t5$4)&&((t6$3=t5$4.length),((t6$3===3)&&((t5$4[0]==="send")&&((t7$3=t5$4[1]),(Array.isArray(t7$3)&&((t8$1=t7$3.length),((t8$1===2)&&((t7$3[0]==="symbol")&&((t7$3[1]==="constructor")&&((args$2=t5$4[2]),(body$3=t3$6[2]),true)))))))))))))))))))))))))))||(Array.isArray(bridge$$14223$0)&&((t0$35=bridge$$14223$0.length),((t0$35===3)&&((bridge$$14223$0[0]==="send")&&((t1$20=bridge$$14223$0[1]),(Array.isArray(t1$20)&&((t2$10=t1$20.length),((t2$10===2)&&((t1$20[0]==="symbol")&&((t1$20[1]==="=")&&((t3$7=bridge$$14223$0[2]),(Array.isArray(t3$7)&&((t4$6=t3$7.length),((t4$6===3)&&((t3$7[0]==="data")&&((t5$5=t3$7[1]),(Array.isArray(t5$5)&&((t6$4=t5$5.length),((t6$4===2)&&((t5$5[0]==="symbol")&&((t5$5[1]==="constructor")&&((t7$4=t3$7[2]),(Array.isArray(t7$4)&&((t8$2=t7$4.length),((t8$2===3)&&((t7$4[0]==="send")&&((t9$0=t7$4[1]),(Array.isArray(t9$0)&&((t10$0=t9$0.length),((t10$0===2)&&((t9$0[0]==="symbol")&&((t9$0[1]==="->")&&((t11$0=t7$4[2]),(Array.isArray(t11$0)&&((t12$0=t11$0.length),((t12$0===3)&&((t11$0[0]==="data")&&((args$2=t11$0[1]),(body$3=t11$0[2]),true)))))))))))))))))))))))))))))))))))))))){ctor$0=[args$2,body$3];temp$12=["splice"];acc$2.push(temp$12);}else{t0$33=m$13;if((Array.isArray(t0$33)&&((t1$18=t0$33.length),((t1$18===3)&&((t0$33[0]==="send")&&((t2$8=t0$33[1]),(Array.isArray(t2$8)&&((t3$5=t2$8.length),((t3$5===2)&&((t2$8[0]==="symbol")&&((t2$8[1]==="=")&&((t4$4=t0$33[2]),(Array.isArray(t4$4)&&((t5$3=t4$4.length),((t5$3===3)&&(t4$4[0]==="data")))))))))))))))){lhs$0=t4$4[1];rhs$0=t4$4[2];opt$1=__amp__(pattern_handlers$0.build_object,__amp____colon__(({"allow_nested":false}),__amp____colon__(((accum$2=({})),(accum$2["assign"]=(function assign(ph$7$0,value$0){let t0$36;let t1$21;let t0$37;let v$4;let v$3;let bridge$$14477$0;bridge$$14477$0=ph$7$0;if(((Array.isArray(bridge$$14477$0)&&((t0$36=bridge$$14477$0.length),((t0$36===2)&&((bridge$$14477$0[0]==="symbol")&&((t1$21=getProjector(camelCase$0)(bridge$$14477$0[1])),(t1$21[0]&&((v$3=t1$21[1]),true)))))))||(Array.isArray(bridge$$14477$0)&&((t0$37=bridge$$14477$0.length),((t0$37===2)&&((bridge$$14477$0[0]==="value")&&((v$3=bridge$$14477$0[1]),true))))))){return ["do",__lt____lt____colon__$0(["assign",["send",["send",name$0,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",v$3]],value$0],v$3)];}else{v$4=ph$7$0;return ["do",__lt____lt____colon__$0(["assign",["send",["send",name$0,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],v$4],value$0],v$4)];}})),accum$2),__amp____colon__(((accum$3=({})),(accum$3["declare"]=(function declare(vars$0){return [];})),accum$3),__amp____colon__(((accum$4=({})),(accum$4["wrap_target"]=(function wrap_target(ph$8$0){let t0$39;let $targ$21;let other_env$0;let it$2;let it2$0;let other$2;let args$3;let body$4;let t0$38;let t1$22;let t2$11;let t3$8;let t4$7;let t5$6;t0$38=ph$8$0;t1$22=t0$38.length;if(((t1$22===3)&&((t0$38[0]==="send")&&((t2$11=t0$38[1]),(Array.isArray(t2$11)&&((t3$8=t2$11.length),((t3$8===2)&&((t2$11[0]==="symbol")&&((t2$11[1]==="->")&&((t4$7=t0$38[2]),(Array.isArray(t4$7)&&((t5$6=t4$7.length),((t5$6===3)&&(t4$7[0]==="data")))))))))))))){args$3=t4$7[1];body$4=t4$7[2];$targ$21=body$4;t0$39=$targ$21;if(___hasprop(t0$39,"env")){other_env$0=t0$39.env;}else{___match_error($targ$21,"{env => other_env}");}it$2=__amp__(["symbol","@"],({"env":other_env$0}));it2$0=__amp__(["symbol","self"],({"env":other_env$0}));return ["send",["symbol","_lambda"],["data",args$3,["send",["symbol","splice"],["data",["multi",["send",["symbol","="],["data",["send",["symbol","let"],it$2],["symbol","this"]]],["send",["symbol","="],["data",["send",["symbol","let"],it2$0],["symbol","this"]]]]]],body$4,["value",null],["value",false]]];}else{other$2=ph$8$0;return other$2;}})),accum$4),((accum$5=({})),(accum$5["success"]=(function success(temp$13$0){return ["splice"];})),accum$5))))));temp$12=PatternCompiler$0(lhs$0,info$6,opt$1).extract_from_rhs(rhs$0);acc$2.push(temp$12);}else{stmt$0=m$13;throw ErrorFactory(["syntax","class"]).create("Illegal statement in class",({"stmt":stmt$0}));acc$2.push(temp$12);}}}}new_stmts$0=acc$2;$targ$20=ctor$0;t0$40=$targ$20;if((Array.isArray(t0$40)&&((t1$23=t0$40.length),(t1$23===2)))){ctor_args$0=t0$40[0];ctor_body$0=t0$40[1];}else{___match_error($targ$20,"{ctor_args, ctor_body}");}[ctor_args$0,ctor_body$0];$targ$22=ctor_body$0;t0$41=$targ$22;if(___hasprop(t0$41,"env")){env2$0=t0$41.env;}else{___match_error($targ$22,"{env => env2}");}it$3=__amp__(["symbol","@"],({"env":env2$0}));cls$0=["send",["symbol","_lambda"],["data",ctor_args$0,["send",["symbol","="],["data",it$3,["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["symbol","?"],["data",name$0,["symbol","this"]]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",name$0,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","this"]]]]],ctor_body$0,it$3,["value",false]]];if(super$1){ctor_expr$0=["send",["symbol","___extend"],["data",cls$0,super$1]];}else{ctor_expr$0=cls$0;}m$11$0=name$0;if((Array.isArray(m$11$0)&&((t0$42=m$11$0.length),((t0$42===2)&&(m$11$0[0]==="symbol"))))){name_str$0=m$11$0[1];statics$0.push(["send",["symbol","="],["data",["value","::name"],["value",name_str$0]]]);}else{undefined;}statics$0.push(["send",["symbol","="],["data",["value","::egclass"],["symbol","true"]]]);node$1=["splice",["send",["symbol","="],["data",["send",["symbol","let"],name$0],ctor_expr$0]]].concat(new_stmts$0).concat([["send",["symbol","&:"],["data",name$0,statics$0]],name$0]);m$12$0=context$3;if((Array.isArray(m$12$0)&&((t0$43=m$12$0.length),((t0$43===2)&&((m$12$0[0]==="expr")&&(m$12$0[1]==="multi")))))){return node$1;}else{other$3=m$12$0;return ["multi",node$1];}});m$10$0=expr$4;if((($$14194$0=Array.isArray(m$10$0))&&((t0$44=m$10$0.length),((t0$44===3)&&((m$10$0[0]==="data")&&((ph$6$0=m$10$0[1]),(t1$24=getProjector(Body$0)(m$10$0[2])),(t1$24[0]&&((t2$12=t1$24[1]),(t3$9=t2$12.length),(t3$9>=0))))))))){stmts$2=Array.prototype.slice.call(t2$12,0);t0$45=ph$6$0;if((($$14189$0=Array.isArray(t0$45))&&((t1$25=t0$45.length),(($$14191$0=(t1$25===3))&&(($$14192$0=(t0$45[0]==="send"))&&((t2$13=t0$45[1]),(Array.isArray(t2$13)&&((t3$10=t2$13.length),((t3$10===2)&&((t2$13[0]==="symbol")&&((t2$13[1]==="<")&&((t4$8=t0$45[2]),(Array.isArray(t4$8)&&((t5$7=t4$8.length),((t5$7===3)&&(t4$8[0]==="data")))))))))))))))){name$1=t4$8[1];super$2=t4$8[2];return helper$0(name$1,super$2,stmts$2);}else{if(($$14192$0&&((name$2=t0$45[1]),(t2$13=t0$45[2]),(Array.isArray(t2$13)&&((t3$10=t2$13.length),((t3$10===2)&&(t2$13[0]==="data"))))))){super$3=t2$13[1];return helper$0(name$2,super$3,stmts$2);}else{bridge$$14187$0=ph$6$0;if(((Array.isArray(bridge$$14187$0)&&((t0$46=bridge$$14187$0.length),((t0$46===3)&&((bridge$$14187$0[0]==="send")&&((name$3=bridge$$14187$0[1]),(t1$26=bridge$$14187$0[2]),(Array.isArray(t1$26)&&((t2$14=t1$26.length),((t2$14===1)&&(t1$26[0]==="data")))))))))||(Array.isArray(bridge$$14187$0)&&((t0$47=bridge$$14187$0.length),((t0$47===2)&&((bridge$$14187$0[0]==="symbol")&&(bridge$$14187$0[1],(name$3=bridge$$14187$0),true))))))){return helper$0(name$3,null,stmts$2);}else{return ___match_error(ph$6$0,"`[^name {}]` or [#symbol{_} and name]");}}}}else{if(($$14194$0&&((t0$44===2)&&((m$10$0[0]==="data")&&((t1$24=getProjector(Body$0)(m$10$0[1])),(t1$24[0]&&((t2$12=t1$24[1]),(t3$9=t2$12.length),(t3$9>=0)))))))){stmts$3=Array.prototype.slice.call(t2$12,0);return helper$0(["symbol",info$6.gensym()],null,stmts$3);}else{return ___match_error(m$10$0,"#data{Body! {*stmts}}");}}});t0$48=getProjector(mac$0("class"))($targ$8);if(t0$48[0]){class_mac$0=t0$48[1];}else{___match_error($targ$8,"mac{\"class\"}! class_mac{context, info and {=> env}, form, expr}");}errf_macro$0=(function errf_macro(tags$1){return (function(ph$9$0,temp$14$0,form$7,expr$5){let x$15;let x$16;let other$4;let args$4;let $$14851$0;let $$14852$0;let t0$49;let m$14$0;let ctx$0;let bridge$$14820$0;bridge$$14820$0=ph$9$0;if((((x$15=bridge$$14820$0),((x$15 instanceof Array)&&(x$15[0]==="check")))||((x$16=bridge$$14820$0),((x$16 instanceof Array)&&(x$16[0]==="project"))))){return ["nostep",form$7];}else{ctx$0=ph$9$0;m$14$0=expr$5;if((($$14851$0=Array.isArray(m$14$0))&&((t0$49=m$14$0.length),((t0$49===1)&&(m$14$0[0]==="void"))))){return ["send",["symbol","ErrorFactory"],["data",["data"].concat(tags$1)]];}else{if(($$14851$0&&((t0$49>=1)&&(m$14$0[0]==="data")))){args$4=Array.prototype.slice.call(m$14$0,1);return ["send",["send",["send",["symbol","ErrorFactory"],["data",["data"].concat(tags$1)]],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data"].concat(args$4)];}else{other$4=m$14$0;return ["macro",errf_macro$0(tags$1.concat([other$4]))];}}}});});$targ$9=errf_macro$0([]);t0$50=getProjector(mac$0("E"))($targ$9);if(t0$50[0]){E_mac$0=t0$50[1];}else{___match_error($targ$9,"mac{\"E\"}! E_mac");}$targ$10=(function(context$4,info$7,form$8,ph$10$0){let t0$52;let t1$28;let t2$16;let x$17;let level$0;let s$1;let t0$51;let bridge$$14884$0;let t1$27;let t2$15;t0$51=ph$10$0;bridge$$14884$0=t0$51;if((((Array.isArray(bridge$$14884$0)&&((t0$52=bridge$$14884$0.length),(((t0$52>=2)&&(t0$52<=3))&&((bridge$$14884$0[0]==="data")&&((x$17=bridge$$14884$0[1]),(t1$28=((2>=t0$52)?["value",1]:bridge$$14884$0[2])),(Array.isArray(t1$28)&&((t2$16=t1$28.length),((t2$16===2)&&((t1$28[0]==="value")&&((level$0=t1$28[1]),true))))))))))||((x$17=bridge$$14884$0),(level$0=1),true))&&((t1$27=x$17),(Array.isArray(t1$27)&&((t2$15=t1$27.length),((t2$15===2)&&(t1$27[0]==="symbol"))))))){s$1=t1$27[1];return __amp____colon__(x$17,({"level":level$0}));}else{return ___match_error(ph$10$0,"[#data{x, #value{level} = #value{1}} or x and level is 1] and #symbol{s} is x");}});t0$53=getProjector(mac$0("outer"))($targ$10);if(t0$53[0]){outer_mac$0=t0$53[1];}else{___match_error($targ$10,"mac{\"outer\"}! outer_mac{context, info, form, match}");}$targ$11=(function(context$5,info$8,form$9,temp$15$0){let t0$54;let t1$29;let t2$17;let t3$11;let name$4;let expr$6;t0$54=temp$15$0;if((Array.isArray(t0$54)&&((t1$29=t0$54.length),((t1$29===3)&&((t0$54[0]==="data")&&((t2$17=t0$54[1]),(Array.isArray(t2$17)&&((t3$11=t2$17.length),((t3$11===2)&&(t2$17[0]==="symbol")))))))))){name$4=t2$17[1];expr$6=t0$54[2];}else{___match_error(temp$15$0);}return ["tagscope",name$4,expr$6];});t0$55=getProjector(mac$0("tagscope"))($targ$11);if(t0$55[0]){tagscope_mac$0=t0$55[1];}else{___match_error($targ$11,"mac{\"tagscope\"}! tagscope_mac{context, info, form, `{^[#symbol{name}], ^expr}`}");}$targ$12=(function(context$6,info$9,form$10,temp$16$0){let t0$56;let t1$30;let t2$18;let t3$12;let name$5;let expr$7;t0$56=temp$16$0;if((Array.isArray(t0$56)&&((t1$30=t0$56.length),((t1$30===3)&&((t0$56[0]==="data")&&((t2$18=t0$56[1]),(Array.isArray(t2$18)&&((t3$12=t2$18.length),((t3$12===2)&&(t2$18[0]==="symbol")))))))))){name$5=t2$18[1];expr$7=t0$56[2];}else{___match_error(temp$16$0);}return ["use",name$5,expr$7];});t0$57=getProjector(mac$0("usescope"))($targ$12);if(t0$57[0]){usescope_mac$0=t0$57[1];}else{___match_error($targ$12,"mac{\"usescope\"}! usescope_mac{context, info, form, `{^[#symbol{name}], ^expr}`}");}$targ$13=(function(ctx$1,info$10,form$11,temp$17$0){let t0$58;let t1$31;let t2$19;let t3$13;let f$0;let x$18;t0$58=temp$17$0;if((Array.isArray(t0$58)&&((t1$31=t0$58.length),((t1$31===3)&&((t0$58[0]==="data")&&((x$18=t0$58[1]),(t2$19=t0$58[2]),(Array.isArray(t2$19)&&((t3$13=t2$19.length),((t3$13===1)&&(t2$19[0]==="void")))))))))){}else{___match_error(temp$17$0);}f$0=(function f(ctx$2,info$11,form$12,temp$18$0){let t0$59;let s$2;let t0$60;let t1$32;let msg$0;let ph$11$0;t0$59=temp$18$0;msg$0=t0$59;ph$11$0=t0$59;t0$60=ph$11$0;t1$32=t0$60.length;if(((t1$32===1)&&(t0$60[0]==="void"))){return x$18;}else{__amp____colon__(x$18,({"called":true}));s$2=__amp____colon__(["send",["symbol","tmp"],msg$0],({"called":form$12.called}));return ["multi",["send",["symbol","="],["data",["symbol","tmp"],x$18]],["send",["symbol","if"],["data",["send",["symbol","==="],["data",["symbol","tmp"],["symbol","undefined"]]],["symbol","undefined"],s$2]]];}});return ["macro",f$0];});t0$61=getProjector(mac$0("??"))($targ$13);if(t0$61[0]){maysend_mac$0=t0$61[1];}else{___match_error($targ$13,"mac{\"??\"}! maysend_mac{ctx, info, form, #data{x, #void{}}}");}return exports$0;});(module["exports"]=$targ$0);(void 0);
//# sourceMappingURL=misc.js.map

