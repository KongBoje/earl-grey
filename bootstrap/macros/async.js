
'use strict';require('earlgrey-runtime');let $targ$0;let $0$0;let expr_mac$0;let expr_mac2$0;let AssignmentHandler$0;$0$0=require("./helpers");expr_mac$0=$0$0.expr_mac;expr_mac2$0=$0$0["expr_mac2"];AssignmentHandler$0=$0$0.AssignmentHandler;$targ$0=(function(mac$0){let t0$3;let t0$7;let t0$9;let t1$3;let t0$11;let t1$5;let $targ$1;let yield_mac$0;let $targ$2;let await_mac$0;let $targ$3;let gen_mac$0;let $targ$4;let async_mac$0;let exports$0;exports$0=({});$targ$1=(function(ph$0$0,temp$0$0,form$0,arg$0){let x$0;let subp$0;let w$0;let t0$0;let t0$1;let arg$2;let arg$1;let t0$2;let t1$0;let t2$0;let m$0$0;let otherwise$0;let bridge$$5891$0;if(((x$0=ph$0$0),((x$0 instanceof Array)&&(x$0[0]==="pattern")))){if(equal(arg$0,["void"])){subp$0=null;}else{subp$0=arg$0;}w$0=(function w(ph$1){return ["send",["symbol","yield"],ph$1];});return ["special",AssignmentHandler$0(subp$0,w$0)];}else{bridge$$5891$0=ph$0$0;if((((bridge$$5891$0 instanceof Array)&&((t0$0=bridge$$5891$0.length),((t0$0===2)&&((bridge$$5891$0[0]==="expr")&&(bridge$$5891$0[1]==="expr")))))||((bridge$$5891$0 instanceof Array)&&((t0$1=bridge$$5891$0.length),((t0$1===2)&&((bridge$$5891$0[0]==="expr")&&(bridge$$5891$0[1]==="head"))))))){m$0$0=arg$0;if(((m$0$0 instanceof Array)&&((t0$2=m$0$0.length),((t0$2===3)&&((m$0$0[0]==="send")&&((t1$0=m$0$0[1]),((t1$0 instanceof Array)&&((t2$0=t1$0.length),((t2$0===2)&&((t1$0[0]==="symbol")&&(t1$0[1]==="all"))))))))))){arg$1=m$0$0[2];return ["js_yield",arg$1,["value",true]];}else{arg$2=m$0$0;return ["js_yield",arg$2,["value",false]];}}else{otherwise$0=ph$0$0;return ["nostep",form$0];}}});t0$3=getProjector(mac$0("yield"))($targ$1);if(t0$3[0]){yield_mac$0=t0$3[1];}else{___match_error($targ$1);}$targ$2=(function(ph$2$0,temp$1$0,form$1,arg$3){let x$1;let subp$1;let w$1;let t0$4;let t0$5;let arg$6;let arg$5;let arg$4;let $$6032$0;let $$6033$0;let $$6034$0;let $$6035$0;let $$6036$0;let $$6037$0;let $$6038$0;let $$6039$0;let $$6040$0;let t0$6;let t1$1;let t2$1;let m$1$0;let otherwise$1;let bridge$$5981$0;if(((x$1=ph$2$0),((x$1 instanceof Array)&&(x$1[0]==="pattern")))){if(equal(arg$3,["void"])){subp$1=null;}else{subp$1=arg$3;}w$1=(function w(ph$3){return ["send",["symbol","await"],ph$3];});return ["special",AssignmentHandler$0(subp$1,w$1)];}else{bridge$$5981$0=ph$2$0;if((((bridge$$5981$0 instanceof Array)&&((t0$4=bridge$$5981$0.length),((t0$4===2)&&((bridge$$5981$0[0]==="expr")&&(bridge$$5981$0[1]==="expr")))))||((bridge$$5981$0 instanceof Array)&&((t0$5=bridge$$5981$0.length),((t0$5===2)&&((bridge$$5981$0[0]==="expr")&&(bridge$$5981$0[1]==="head"))))))){m$1$0=arg$3;if((($$6032$0=(m$1$0 instanceof Array))&&((t0$6=m$1$0.length),(($$6034$0=(t0$6===3))&&(($$6035$0=(m$1$0[0]==="send"))&&((t1$1=m$1$0[1]),(($$6037$0=(t1$1 instanceof Array))&&((t2$1=t1$1.length),(($$6039$0=(t2$1===2))&&(($$6040$0=(t1$1[0]==="symbol"))&&(t1$1[1]==="all"))))))))))){arg$4=m$1$0[2];return ["js_yield",["send",["send",["symbol","Promise"],["send",["symbol","."],["data",["void"],["symbol","all"]]]],["data",arg$4]],["value",false]];}else{if(($$6040$0&&(t1$1[1]==="any"))){arg$5=m$1$0[2];return ["js_yield",["send",["send",["symbol","Promise"],["send",["symbol","."],["data",["void"],["symbol","race"]]]],["data",arg$5]],["value",false]];}else{arg$6=m$1$0;return ["js_yield",arg$6,["value",false]];}}}else{otherwise$1=ph$2$0;return ["nostep",form$1];}}});t0$7=getProjector(mac$0("await"))($targ$2);if(t0$7[0]){await_mac$0=t0$7[1];}else{___match_error($targ$2);}$targ$3=(function(ph$4$0){let arg$8;let pre$0;let body$1;let post$0;let arg$7;let body$0;let $$6084$0;let $$6085$0;let $$6086$0;let $$6087$0;let $$6088$0;let $$6089$0;let $$6090$0;let $$6091$0;let $$6092$0;let $$6093$0;let $$6094$0;let $$6095$0;let $$6096$0;let $$6097$0;let t0$8;let t1$2;let t2$2;let t3$0;let t4$0;let t5$0;let t6$0;let t7$0;t0$8=ph$4$0;t1$2=t0$8.length;if((($$6086$0=(t1$2===2))&&(($$6087$0=(t0$8[0]==="data"))&&((t2$2=t0$8[1]),(($$6089$0=(t2$2 instanceof Array))&&((t3$0=t2$2.length),(($$6091$0=(t3$0===3))&&(($$6092$0=(t2$2[0]==="send"))&&((t4$0=t2$2[1]),(($$6094$0=(t4$0 instanceof Array))&&((t5$0=t4$0.length),(($$6096$0=(t5$0===2))&&(($$6097$0=(t4$0[0]==="symbol"))&&((t4$0[1]==="->")&&((t6$0=t2$2[2]),((t6$0 instanceof Array)&&((t7$0=t6$0.length),((t7$0===3)&&(t6$0[0]==="data"))))))))))))))))))){arg$7=t6$0[1];body$0=t6$0[2];return ["send",["symbol","*->"],["data",arg$7,body$0]];}else{if(($$6097$0&&((t4$0[1]==="_lambda")&&((t6$0=t2$2[2]),((t6$0 instanceof Array)&&((t7$0=t6$0.length),((t7$0===6)&&(t6$0[0]==="data")))))))){arg$8=t6$0[1];pre$0=t6$0[2];body$1=t6$0[3];post$0=t6$0[4];t6$0[5];return ["send",["symbol","_lambda"],["data",arg$8,pre$0,body$1,post$0,["value",true]]];}else{return ___match_error(ph$4$0);}}});t0$9=getProjector(expr_mac2$0)($targ$3);if((t0$9[0]&&((t1$3=getProjector(mac$0("gen"))(t0$9[1])),t1$3[0]))){gen_mac$0=t1$3[1];}else{___match_error($targ$3);}$targ$4=(function(ph$5$0){let arg$10;let pre$1;let body$3;let post$1;let arg$9;let body$2;let $$6174$0;let $$6175$0;let $$6176$0;let $$6177$0;let $$6178$0;let $$6179$0;let $$6180$0;let $$6181$0;let $$6182$0;let $$6183$0;let $$6184$0;let $$6185$0;let $$6186$0;let $$6187$0;let t0$10;let t1$4;let t2$3;let t3$1;let t4$1;let t5$1;let t6$1;let t7$1;t0$10=ph$5$0;t1$4=t0$10.length;if((($$6176$0=(t1$4===2))&&(($$6177$0=(t0$10[0]==="data"))&&((t2$3=t0$10[1]),(($$6179$0=(t2$3 instanceof Array))&&((t3$1=t2$3.length),(($$6181$0=(t3$1===3))&&(($$6182$0=(t2$3[0]==="send"))&&((t4$1=t2$3[1]),(($$6184$0=(t4$1 instanceof Array))&&((t5$1=t4$1.length),(($$6186$0=(t5$1===2))&&(($$6187$0=(t4$1[0]==="symbol"))&&((t4$1[1]==="->")&&((t6$1=t2$3[2]),((t6$1 instanceof Array)&&((t7$1=t6$1.length),((t7$1===3)&&(t6$1[0]==="data"))))))))))))))))))){arg$9=t6$1[1];body$2=t6$1[2];return ["send",["symbol","->"],["data",arg$9,["send",["symbol","spawn"],["data",["send",["symbol","*->"],["data",["data"],body$2]]]]]];}else{if(($$6187$0&&((t4$1[1]==="_lambda")&&((t6$1=t2$3[2]),((t6$1 instanceof Array)&&((t7$1=t6$1.length),((t7$1===6)&&(t6$1[0]==="data")))))))){arg$10=t6$1[1];pre$1=t6$1[2];body$3=t6$1[3];post$1=t6$1[4];t6$1[5];return ["send",["symbol","_lambda"],["data",arg$10,pre$1,["send",["symbol","spawn"],["data",["send",["symbol","*->"],["data",["data"],body$3]]]],post$1,["value",false]]];}else{return ___match_error(ph$5$0);}}});t0$11=getProjector(expr_mac2$0)($targ$4);if((t0$11[0]&&((t1$5=getProjector(mac$0("async"))(t0$11[1])),t1$5[0]))){async_mac$0=t1$5[1];}else{___match_error($targ$4);}return exports$0;});(module["exports"]=$targ$0);[];
