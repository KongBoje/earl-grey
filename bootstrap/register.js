
'use strict';require('earlgrey-runtime/6');let $targ$4;let $targ$5;let eg$0;let $1$0;let Source$0;let fs$0;let path$0;let getCache$0;let load$0;let extensions$0;let install$0;eg$0=require("./earl-grey");$1$0=require("./location");Source$0=$1$0.Source;fs$0=require("fs");path$0=require("path");getCache$0=(function getCache(){let rval$0;let t0$1;let text$0;let g$1;let $targ$1;let code$0;let map$0;let t0$2;let t1$0;let cachedir$0;let cache$0;let sstat$0;let cstat$0;let $targ$0;let g$0;let compiled$0;let srcfile$0;let file$0;let opts$0;let t0$0;let m$0$0;m$0$0=arguments;t0$0=m$0$0.length;if(((t0$0>=1)&&(t0$0<=2))){file$0=m$0$0[0];if((1>=t0$0)){opts$0=({});}else{opts$0=m$0$0[1];}cachedir$0=path$0.join(path$0.dirname(file$0),"egcache");cache$0=path$0.join(cachedir$0,path$0.basename(file$0).replace(RegExp(".eg$",""),".js"));sstat$0=fs$0.statSync(file$0);rval$0=false;try{rval$0=fs$0.statSync(cache$0);rval$0;}catch(excv$0){let e$0;e$0=excv$0;rval$0=null;rval$0;}cstat$0=rval$0;if(((opts$0.lazy&&cstat$0)&&(sstat$0.mtime.getTime()<cstat$0.mtime.getTime()))){$targ$0=[null,fs$0.readFileSync(cache$0,"utf8"),cache$0];}else{text$0=fs$0.readFileSync(file$0,"utf8");g$1=eg$0.Generator(opts$0.interactive);$targ$1=g$1.generate(Source$0(text$0,file$0),__amp__(({"sourceMap":true}),opts$0));t0$1=$targ$1;if((___hasprop(t0$1,"code")&&((code$0=t0$1.code),___hasprop(t0$1,"map")))){map$0=t0$1.map;}else{___match_error($targ$1);}[code$0,map$0];try{try{fs$0.mkdirSync(cachedir$0);}catch(excv$1){let e$1;e$1=excv$1;"ignore error";}fs$0.writeFileSync(cache$0,code$0);fs$0.writeFileSync((cache$0+".map"),map$0);}catch(excv$2){let e$2;e$2=excv$2;console.err(("Failed to cache compiled version of: "+file$0));}$targ$0=[g$1,code$0,cache$0];}t0$2=$targ$0;if((Array.isArray(t0$2)&&((t1$0=t0$2.length),(t1$0===3)))){g$0=t0$2[0];compiled$0=t0$2[1];srcfile$0=t0$2[2];}else{___match_error($targ$0);}[g$0,compiled$0,srcfile$0];return [g$0,compiled$0,srcfile$0];}else{return ___match_error(m$0$0);}});load$0=(function load(lazy$0){return (function(module$0,file$1){let t0$3;let t1$1;let $targ$2;let compiled$1;let srcfile$1;$targ$2=getCache$0(file$1,({"lazy":lazy$0}));t0$3=$targ$2;if((Array.isArray(t0$3)&&((t1$1=t0$3.length),(t1$1===3)))){t0$3[0];compiled$1=t0$3[1];srcfile$1=t0$3[2];}else{___match_error($targ$2);}[compiled$1,srcfile$1];return module$0._compile(compiled$1,srcfile$1);});});extensions$0=[".eg"];install$0=(function install(){let m$2;let acc$0;let temp$0;let req$0;let lazy$1;let t0$4;let m$1$0;m$1$0=arguments;t0$4=m$1$0.length;if(((t0$4>=0)&&(t0$4<=1))){if((0>=t0$4)){lazy$1=true;}else{lazy$1=m$1$0[0];}req$0=require;acc$0=[];temp$0=null;m$2=null;$2:for(m$2 of extensions$0){let $targ$3;let ext$0;ext$0=m$2;$targ$3=load$0(lazy$1);(req$0.extensions[ext$0]=$targ$3);temp$0=[];acc$0.push(temp$0);}return acc$0;}else{return ___match_error(m$1$0);}});$targ$4=getCache$0;(exports["getCache"]=$targ$4);[];$targ$5=install$0;(exports["install"]=$targ$5);[];
//# sourceMappingURL=register.js.map

