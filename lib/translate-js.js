var τ1109=function(type){var τ1110=type["::check"];var f;if((τ1110===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ1110),true)){return function(value){return f.call(type,value);};}else{throw ["Could not find a match",τ1110];}}};
var τ1111=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};
var τ1112=function(τ1113){var τ1114=τ1113;var x;var x;var other;if((((typeof(τ1114)==="string")&&((x=τ1114),true))||((typeof(τ1114)==="number")&&((x=τ1114),true)))){return ["value",x];}else{if(((other=τ1114),true)){return other["::serialize_ast"]();}else{throw ["Could not find a match",τ1114];}}};
var send=function(obj,τ1102){var msg;var τ1101;(msg=τ1102);true;(τ1101=τ1102);var τ1103=τ1101;var other;if(((typeof(τ1103)==="string")||(typeof(τ1103)==="number"))){return obj[msg];}else{if(((other=τ1103),true)){return obj["::send"](msg);}else{throw ["Could not find a match",τ1103];}}};(Array[":::project"]=function(τ1105){var value;var τ1104;(value=τ1105);true;(τ1104=τ1105);var τ1106=τ1104;var _;if(τ1109(Array)(τ1106)){return [true,value];}else{if(((_=τ1106),true)){return [true,[value]];}else{throw ["Could not find a match",τ1106];}}});(Array.prototype["::check"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){return false;}else{null;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){var rval=this.slice(0);rval.push(value);return [true,rval];}else{null;}}return [true,value];}else{var rval=this.slice(0);rval.push(value);return [true,rval];}});(Array.prototype[":::deconstruct"]=function(value){return [true,value.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return τ1111(["array"],this.map(τ1112));});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var τ1107=value.match(this);var m;var m;if(((τ1107===null)&&((m=τ1107),true))){return [false,null];}else{if(((m=τ1107),true)){return [true,m];}else{throw ["Could not find a match",τ1107];}}});(RegExp.prototype[":::deconstruct"]=function(value){var τ1108=value.match(this);var m;var m;if(((τ1108===null)&&((m=τ1108),true))){return [false,null];}else{if(((m=τ1108),true)){return [true,m];}else{throw ["Could not find a match",τ1108];}}});(Function.prototype["::send"]=function(args){return this.apply(this,args);});
var τ1172=function(dest,values){for(k in values){if(values.hasOwnProperty(k)){(dest[k]=send(values,k));}else{null;}}return dest;};
var τ1173=function(τ1174,key){var τ1175=τ1174;var x;var x;var x;if(((τ1175===null)||(τ1175===(void 0)))){return false;}else{if(((typeof(τ1175)==="string")&&((x=τ1175),true))){return (key in String.prototype);}else{if(((typeof(τ1175)==="number")&&((x=τ1175),true))){return (key in Number.prototype);}else{if(((x=τ1175),true)){return (key in x);}else{throw ["Could not find a match",τ1175];}}}}};
var τ1176=function(){var τ1177=function(tags){var τ1178=function(){if((!τ1109(τ1177)(this))){return Object.create(τ1177.prototype);}else{return this;}}();(τ1178["tags"]=tags);return τ1178;};τ1172(τ1177);(τ1177.prototype["create"]=function(){var τ1179=Array.prototype.slice.call(arguments,0);var τp0;var message;var args;if(((τ1179 instanceof Array)&&(((τp0=τ1179.length),true)&&((τp0>=0)&&((message=function(){if((0>=τp0)){return "";}else{return τ1179[0];}}()),true,(args=τ1179.slice(1)),true))))){var τ1178=this;var e=Error(message);(e["::tags"]=τ1178.tags);(e["args"]=args);(e["name"]=["E"].concat(τ1178.tags).join("."));return e;}else{throw ["Could not find a match",τ1179];}});(τ1177.prototype["::check"]=function(e){var τ1178=this;if(((!e)||(!τ1109(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var τ1180=τ1178.tags;var τ1181=τ1180.length;for(var τ1182=0;(τ1182<τ1181);(τ1182++)){var τ1183=τ1180[τ1182];var tag;var other;if(((tag=τ1183),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=τ1183),true)){false;}else{throw ["Could not find a match",τ1183];}}}false;return true;});(τ1177.prototype["::deconstruct"]=function(e){var τ1178=this;return e.args;});return τ1177;}();var τ1115=require("./util");var items=τ1115.items;var τ1116=require("./helpers");var aslist=τ1116.aslist;var gensym=τ1116.gensym;var τ1117=require("./pp");var __lt____gt__=τ1117["<>"];var js_op_table=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"});var Translator=function(){var τ1119=Array.prototype.slice.call(arguments,0);var τp0;var prelude;if(((τ1119 instanceof Array)&&(((τp0=τ1119.length),true)&&(((τp0>=0)&&(τp0<=1))&&((prelude=function(){if((0>=τp0)){return null;}else{return τ1119[0];}}()),true))))){var τ1118=function(){if((!τ1109(Translator)(this))){return Object.create(Translator.prototype);}else{return this;}}();(τ1118["cache"]=({}));(τ1118["prepend"]=[]);if(prelude){τ1118.prepend.push(τ1118.translate(τ1112(prelude),"stmt"));}else{null;}return τ1118;}else{throw ["Could not find a match",τ1119];}};τ1172(Translator);(Translator.prototype["register_value"]=function(v,id){var τ1118=this;var τ1120=send(τ1118.cache,id);var name;if((τ1120===(void 0))){var temp=gensym();(τ1118.cache[id]=temp);τ1118.prepend.push(τ1118.translate(["declare",temp,τ1112(v)],"stmt"));return temp;}else{if(((name=τ1120),true)){return name;}else{throw ["Could not find a match",τ1120];}}});(Translator.prototype["dump_store"]=function(){var τ1118=this;var rval=τ1118.prepend.join("\n");(τ1118["prepend"]=[]);return rval;});(Translator.prototype["mangle"]=function(name){var τ1118=this;var tr=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"});var r=[];for(var i=0;(i<name.length);(++i)){var c=send(name,i);r.push((send(tr,c)||c));}return r.join("");});(Translator.prototype["body"]=function(b,mode){var τ1118=this;(orig=b);(b=aslist(b));var trst=function(stmt){return τ1118.translate(stmt,"stmt");};var τ1121=mode;var other;if((τ1121==="expr")){var x=["send",["lambda",[],orig],["array"]];return τ1118.translate(x,mode);}else{if((τ1121==="return")){var stmts=b.slice(0,(-1));var ret=send(b,(b.length-1));return (stmts.map(trst).join("")+τ1118.translate(ret,"return"));}else{if((τ1121==="stmt")){return b.map(trst).join("");}else{if(((other=τ1121),true)){throw "OopsH";}else{throw ["Could not find a match",τ1121];}}}}});(Translator.prototype["expr"]=function(x,mode){var τ1118=this;var τ1122=mode;var other;if((τ1122==="expr")){return x;}else{if((τ1122==="stmt")){return (x+";");}else{if((τ1122==="return")){return (("return "+x)+";");}else{if(((other=τ1122),true)){throw "OopsI";}else{throw ["Could not find a match",τ1122];}}}}});(Translator.prototype["op"]=function(op,a,b){var τ1118=this;var e=function(){var τ1123=[a,b];var τp0;var τp1;var τp2;var τp3;var _;var τp0;var _;var τp1;var τp2;var τp3;var _;var τ1124=false;var τ1125=false;var τ1126=false;if(((τ1124=(τ1123 instanceof Array))&&((τ1125=((τp0=τ1123.length),true))&&((τ1126=(τp0===2))&&(((τp1=τ1123[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&(((τp3=τp1[0]),(τp3==="void"))&&((_=τ1123[1]),true))))))))){return (op+τ1118.translate(b,"expr"));}else{if((τ1126&&(((_=τ1123[0]),true,(τp1=τ1123[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return (τ1118.translate(a,"expr")+op);}else{if(((_=τ1123),true)){return ((τ1118.translate(a,"expr")+op)+τ1118.translate(b,"expr"));}else{throw ["Could not find a match",τ1123];}}}}();return (("("+e)+")");});(Translator.prototype["translate"]=function(expr,mode){var τ1118=this;var τ1127=expr;var τp0;var τp1;var s;var τp0;var τp1;var τp0;var τp1;var v;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var f;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var f;var msg;var τp0;var τp1;var f;var τp2;var msg;var τp3;var τp4;var s;var τp0;var τp1;var f;var τp2;var τp3;var τp4;var args;var τp0;var τp1;var f;var msg;var τp0;var τp1;var args;var τp0;var τp1;var args;var τp0;var τp1;var bindings;var body;var τp0;var τp1;var test;var pos;var neg;var τp0;var τp1;var binding;var τp2;var τp3;var τp4;var τp5;var τp0;var τp1;var binding;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var obj;var msg;var rhs;var τp0;var τp1;var lhs;var rhs;var τp0;var τp1;var args;var τp0;var τp1;var args;var τp0;var τp1;var value;var τp0;var τp1;var τp0;var τp1;var τp0;var τp1;var value;var τp0;var τp1;var value;var τp0;var τp1;var value;var τp0;var τp1;var test;var body;var τp0;var τp1;var x;var y;var z;var body;var τp0;var τp1;var x;var y;var body;var τp0;var τp1;var attempt;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var v;var body;var τp10;var τp11;var τp12;var other;var τ1128=false;var τ1129=false;var τ1130=false;var τ1131=false;var τ1132=false;var τ1133=false;var τ1134=false;var τ1135=false;if(((τ1128=(τ1127 instanceof Array))&&((τ1129=((τp0=τ1127.length),true))&&((τp0===2)&&(((τp1=τ1127[0]),(τp1==="symbol"))&&((s=τ1127[1]),true)))))){return τ1118.expr(τ1118.mangle(s),mode);}else{if((τ1129&&((τp0===1)&&((τp1=τ1127[0]),(τp1==="void"))))){return τ1118.expr("null",mode);}else{if((τ1129&&((τp0===2)&&(((τp1=τ1127[0]),(τp1==="value"))&&((v=τ1127[1]),true))))){var r=function(){var τ1136=v;var id;var other;if((typeof(τ1136)==="string")){var repl=({"\"":"\\\"","\n":"\\n","\\":"\\\\"});(v=v.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m){return send(repl,m);}));return (("\""+v)+"\"");}else{if((τ1136===(void 0))){return "(void 0)";}else{if(((((typeof(τ1136)==="number")||(τ1136===true))||(τ1136===false))||(τ1136===null))){return String(v);}else{if((τ1173(τ1136,"::id")&&((id=τ1136["::id"]),true,id))){return τ1118.translate(τ1118.register_value(v,id),mode);}else{if(((other=τ1136),true)){throw τ1176(["cannot_serialize"]).create("Cannot serialize value",({"value":v}));}else{throw ["Could not find a match",τ1136];}}}}}}();return τ1118.expr(r,mode);}else{if((τ1129&&((τ1130=(τp0===3))&&((τ1131=((τp1=τ1127[0]),(τp1==="send")))&&((τ1132=((τp2=τ1127[1]),(τp2 instanceof Array)))&&((τ1133=((τp3=τp2.length),true))&&((τ1134=(τp3===2))&&((τ1135=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="___node"))&&(((τp6=τ1127[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===2)&&(((τp8=τp6[0]),(τp8==="value"))&&((f=τp6[1]),true)))))))))))))){return f;}else{if((τ1135&&(((τp5=τp2[1]),(τp5==="___js_fetch"))&&(((τp6=τ1127[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="array"))&&((f=τp6[1]),true,(msg=τp6[2]),true)))))))){var trf=τ1118.translate(f,"expr");var trmsg=τ1118.translate(msg,"expr");return τ1118.expr((((trf+"[")+trmsg)+"]"),mode);}else{if((τ1131&&(((f=τ1127[1]),true,(τp2=τ1127[2]),(msg=τp2),true,(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((s=τp2[1]),true))))))){if(((typeof(s)==="string")&&s.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){var trf=τ1118.translate(f,"expr");var trmsg=τ1118.translate(["symbol",s],"expr");return τ1118.expr(((trf+".")+trmsg),mode);}else{if(true){var trf=τ1118.translate(f,"expr");var trmsg=τ1118.translate(msg,"expr");return τ1118.expr((((trf+"[")+trmsg)+"]"),mode);}else{return false;}}}else{if((τ1131&&(((f=τ1127[1]),true,(τp2=τ1127[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3>=1)&&(((τp4=τp2[0]),(τp4==="array"))&&((args=τp2.slice(1)),true))))))){var op=function(){var τ1137=f;var τp0;var τp1;var x;var _;if(((τ1137 instanceof Array)&&(((τp0=τ1137.length),true)&&((τp0===2)&&(((τp1=τ1137[0]),(τp1==="symbol"))&&((x=τ1137[1]),true)))))){return send(js_op_table,x);}else{if(((_=τ1137),true)){return null;}else{throw ["Could not find a match",τ1137];}}}();if(op){return τ1118.expr(τ1118.op(op,args[0],args[1]),mode);}else{var trf=τ1118.translate(f,"expr");var trargs=function(){var τ1138=[];var τ1139=args;var τ1140=τ1139.length;for(var τ1141=0;(τ1141<τ1140);(τ1141++)){var τ1142=τ1139[τ1141];var x;var other;if(((x=τ1142),true)){τ1138.push(τ1118.translate(x,"expr"));}else{if(((other=τ1142),true)){false;}else{throw ["Could not find a match",τ1142];}}}return τ1138;}();return τ1118.expr((((trf+"(")+trargs.join(","))+")"),mode);}}else{if((τ1131&&((f=τ1127[1]),true,(msg=τ1127[2]),true))){var trf=τ1118.translate(f,"expr");var trmsg=τ1118.translate(msg,"expr");return τ1118.expr((((("send("+trf)+",")+trmsg)+")"),mode);}else{if((τ1129&&((τ1130=(τp0>=1))&&(((τp1=τ1127[0]),(τp1==="array"))&&((args=τ1127.slice(1)),true))))){var r=function(){var f=function(x){return τ1118.translate(x,"expr");};return (("["+args.map(f).join(","))+"]");}();return τ1118.expr(r,mode);}else{if((τ1130&&(((τp1=τ1127[0]),(τp1==="object"))&&((args=τ1127.slice(1)),true)))){var r=function(){var f=function(τ1143){var τp0;var τp1;var x;var y;if(((τ1143 instanceof Array)&&(((τp0=τ1143.length),true)&&((τp0===3)&&(((τp1=τ1143[0]),(τp1==="array"))&&((x=τ1143[1]),true,(y=τ1143[2]),true)))))){undefined;}else{throw τ1172(τ1176(["match"]).create("The value failed to match"),({"location":["location",(void 0),(void 0),(void 0)]}));}var a=τ1118.translate(x,"expr");var b=τ1118.translate(y,"expr");return ((a+":")+b);};return (("({"+args.map(f).join(","))+"})");}();return τ1118.expr(r,mode);}else{if((τ1129&&((τp0===3)&&(((τp1=τ1127[0]),(τp1==="lambda"))&&((bindings=τ1127[1]),true,(body=τ1127[2]),true))))){var a=function(){var τ1152=[];var τ1153=bindings;var τ1154=τ1153.length;for(var τ1155=0;(τ1155<τ1154);(τ1155++)){var τ1156=τ1153[τ1155];var x;var other;if(((x=τ1156),true)){τ1152.push(τ1118.translate(x,"expr"));}else{if(((other=τ1156),true)){false;}else{throw ["Could not find a match",τ1156];}}}return τ1152;}().join(",");var b=τ1118.body(body,"return");return τ1118.expr((((("function("+a)+"){")+b)+"}"),mode);}else{if((τ1129&&((τp0===4)&&(((τp1=τ1127[0]),(τp1==="if"))&&((test=τ1127[1]),true,(pos=τ1127[2]),true,(neg=τ1127[3]),true))))){var τ1157=mode;var other;if((τ1157==="expr")){return τ1118.body(expr,"expr");}else{if(((other=τ1157),true)){var a=τ1118.translate(test,"expr");var b=τ1118.translate(pos,mode);var c=τ1118.translate(neg,mode);return (((((("if("+a)+"){")+b)+"}else{")+c)+"}");}else{throw ["Could not find a match",τ1157];}}}else{if((τ1129&&((τ1130=(τp0===3))&&((τ1131=((τp1=τ1127[0]),(τp1==="declare")))&&(((binding=τ1127[1]),true,(τp2=τ1127[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((τp5=τp2[1]),(τp5===(void 0))))))))))){var τ1158=mode;var other;if(((τ1158==="expr")||(τ1158==="return"))){throw "Invalid in expr ctx";}else{if(((other=τ1158),true)){var a=τ1118.translate(binding,"expr");return (("var "+a)+";");}else{throw ["Could not find a match",τ1158];}}}else{if((τ1131&&((binding=τ1127[1]),true,(value=τ1127[2]),true))){var τ1159=mode;var other;if(((τ1159==="expr")||(τ1159==="return"))){throw "Invalid in expr ctx";}else{if(((other=τ1159),true)){var a=τ1118.translate(binding,"expr");var b=τ1118.translate(value,"expr");return (((("var "+a)+"=")+b)+";");}else{throw ["Could not find a match",τ1159];}}}else{if((τ1130&&((τ1131=((τp1=τ1127[0]),(τp1==="assign")))&&(((τp2=τ1127[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="send"))&&((obj=τp2[1]),true,(msg=τp2[2]),true,(rhs=τ1127[2]),true)))))))){var a=τ1118.translate(obj,"expr");var b=τ1118.translate(msg,"expr");var c=τ1118.translate(rhs,"expr");return τ1118.expr((((((("("+a)+"[")+b)+"]=")+c)+")"),mode);}else{if((τ1131&&((lhs=τ1127[1]),true,(rhs=τ1127[2]),true))){var a=τ1118.translate(lhs,"expr");var b=τ1118.translate(rhs,"expr");return τ1118.expr((((("("+a)+"=")+b)+")"),mode);}else{if((τ1129&&((τ1130=(τp0>=1))&&(((τp1=τ1127[0]),(τp1==="multi"))&&((args=τ1127.slice(1)),true))))){var isdecl=function(τ1161){var τ1162=τ1161;var τp0;var τp1;var variable;var value;var other;if(((τ1162 instanceof Array)&&(((τp0=τ1162.length),true)&&((τp0===3)&&(((τp1=τ1162[0]),(τp1==="declare"))&&((variable=τ1162[1]),true,(value=τ1162[2]),true)))))){return true;}else{if(((other=τ1162),true)){return false;}else{throw ["Could not find a match",τ1162];}}};var τ1160=null;var _;if((args.length===1)){return τ1118.translate(args[0],mode);}else{if(((mode==="expr")&&(!args.some(isdecl)))){var xs=function(){var τ1163=[];var τ1164=args;var τ1165=τ1164.length;for(var τ1166=0;(τ1166<τ1165);(τ1166++)){var τ1167=τ1164[τ1166];var x;var other;if(((x=τ1167),true)){τ1163.push(τ1118.translate(x,"expr"));}else{if(((other=τ1167),true)){false;}else{throw ["Could not find a match",τ1167];}}}return τ1163;}();return (("("+xs.join(","))+")");}else{if(((_=τ1160),true)){return τ1118.body(expr,mode);}else{throw ["Could not find a match",τ1160];}}}}else{if((τ1130&&(((τp1=τ1127[0]),(τp1==="splice"))&&((args=τ1127.slice(1)),true)))){return τ1118.translate(τ1111(["multi"],args),mode);}else{if((τ1129&&((τp0===2)&&(((τp1=τ1127[0]),(τp1==="js_new"))&&((value=τ1127[1]),true))))){return τ1118.expr((("(new "+τ1118.translate(value,"expr"))+")"),mode);}else{if((τ1129&&((τ1130=(τp0===1))&&((τp1=τ1127[0]),(τp1==="js_break"))))){if((mode==="expr")){throw "Invalid break in ctx";}else{return "break;";}}else{if((τ1130&&((τp1=τ1127[0]),(τp1==="js_continue")))){if((mode==="expr")){throw "Invalid continue in ctx";}else{return "continue;";}}else{if((τ1129&&((τ1130=(τp0===2))&&(((τp1=τ1127[0]),(τp1==="js_return"))&&((value=τ1127[1]),true))))){if((mode==="expr")){throw "Invalid return in ctx";}else{return (("return "+τ1118.translate(value,"expr"))+";");}}else{if((τ1130&&(((τp1=τ1127[0]),(τp1==="js_delete"))&&((value=τ1127[1]),true)))){if((mode==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+τ1118.translate(value,"expr"))+";");}}else{if((τ1130&&(((τp1=τ1127[0]),(τp1==="js_throw"))&&((value=τ1127[1]),true)))){if((mode==="expr")){return (("function(){throw "+τ1118.translate(value,"expr"))+";}()");}else{return (("throw "+τ1118.translate(value,"expr"))+";");}}else{if((τ1129&&((τp0===3)&&(((τp1=τ1127[0]),(τp1==="js_while"))&&((test=τ1127[1]),true,(body=τ1127[2]),true))))){var τ1168=mode;var other;if((τ1168==="expr")){return τ1118.body(expr,"expr");}else{if(((other=τ1168),true)){var a=τ1118.translate(test,"expr");var b=τ1118.translate(body,"stmt");return (((("while("+a)+"){")+b)+"}");}else{throw ["Could not find a match",τ1168];}}}else{if((τ1129&&((τp0===5)&&(((τp1=τ1127[0]),(τp1==="js_for"))&&((x=τ1127[1]),true,(y=τ1127[2]),true,(z=τ1127[3]),true,(body=τ1127[4]),true))))){var τ1169=mode;var other;if((τ1169==="expr")){return τ1118.body(expr,"expr");}else{if(((other=τ1169),true)){var a=τ1118.translate(x,"stmt");var b=τ1118.translate(y,"stmt");var c=τ1118.translate(z,"expr");var d=τ1118.translate(body,"stmt");return (((((("for("+a)+b)+c)+"){")+d)+"}");}else{throw ["Could not find a match",τ1169];}}}else{if((τ1129&&((τ1130=(τp0===4))&&(((τp1=τ1127[0]),(τp1==="js_for_in"))&&((x=τ1127[1]),true,(y=τ1127[2]),true,(body=τ1127[3]),true))))){var τ1170=mode;var other;if((τ1170==="expr")){return τ1118.body(expr,"expr");}else{if(((other=τ1170),true)){var a=τ1118.translate(x,"expr");var b=τ1118.translate(y,"expr");var c=τ1118.translate(body,"stmt");return (((((("for("+a)+" in ")+b)+"){")+c)+"}");}else{throw ["Could not find a match",τ1170];}}}else{if((τ1130&&(((τp1=τ1127[0]),(τp1==="js_try"))&&(((attempt=τ1127[1]),true,(τp2=τ1127[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="lambda"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===1)&&(((τp7=τp5[0]),(τp7 instanceof Array))&&(((τp8=τp7.length),true)&&((τp8===2)&&(((τp9=τp7[0]),(τp9==="symbol"))&&(((v=τp7[1]),true,(body=τp2[2]),true,(τp10=τ1127[3]),(τp10 instanceof Array))&&(((τp11=τp10.length),true)&&((τp11===1)&&((τp12=τp10[0]),(τp12==="void"))))))))))))))))))){var τ1171=mode;var other;if((τ1171==="expr")){return τ1118.body(expr,"expr");}else{if(((other=τ1171),true)){var a=τ1118.translate(attempt,"stmt");var b=τ1118.translate(body,"stmt");return (((((("try{"+a)+"}catch(")+v)+"){")+b)+"}");}else{throw ["Could not find a match",τ1171];}}}else{if(((other=τ1127),true)){throw other;}else{throw ["Could not find a match",τ1127];}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});Translator;var translate=function(expr,mode){var tr=Translator();var t=tr.translate(expr,mode);return (tr.dump_store()+t);};(exports["Translator"]=Translator);(exports["translate"]=translate);
