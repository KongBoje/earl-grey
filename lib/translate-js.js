var τ1114=function(type){var τ1115=type["::check"];var f;if((τ1115===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ1115),true)){return function(value){return f.call(type,value);};}else{throw ["Could not find a match",τ1115];}}};
var τ1116=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};
var τ1117=function(τ1118){var τ1119=τ1118;var x;var x;var other;if((((typeof(τ1119)==="string")&&((x=τ1119),true))||((typeof(τ1119)==="number")&&((x=τ1119),true)))){return ["value",x];}else{if(((other=τ1119),true)){return other["::serialize_ast"]();}else{throw ["Could not find a match",τ1119];}}};
var send=function(obj,τ1107){var msg;var τ1106;(msg=τ1107);true;(τ1106=τ1107);var τ1108=τ1106;var other;if(((typeof(τ1108)==="string")||(typeof(τ1108)==="number"))){return obj[msg];}else{if(((other=τ1108),true)){return obj["::send"](msg);}else{throw ["Could not find a match",τ1108];}}};(Array[":::project"]=function(τ1110){var value;var τ1109;(value=τ1110);true;(τ1109=τ1110);var τ1111=τ1109;var _;if(τ1114(Array)(τ1111)){return [true,value];}else{if(((_=τ1111),true)){return [true,[value]];}else{throw ["Could not find a match",τ1111];}}});(Array.prototype["::check"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){return false;}else{null;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){var rval=this.slice(0);rval.push(value);return [true,rval];}else{null;}}return [true,value];}else{var rval=this.slice(0);rval.push(value);return [true,rval];}});(Array.prototype[":::deconstruct"]=function(value){return [true,value.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return τ1116(["array"],this.map(τ1117));});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var τ1112=value.match(this);var m;var m;if(((τ1112===null)&&((m=τ1112),true))){return [false,null];}else{if(((m=τ1112),true)){return [true,m];}else{throw ["Could not find a match",τ1112];}}});(RegExp.prototype[":::deconstruct"]=function(value){var τ1113=value.match(this);var m;var m;if(((τ1113===null)&&((m=τ1113),true))){return [false,null];}else{if(((m=τ1113),true)){return [true,m];}else{throw ["Could not find a match",τ1113];}}});(Function.prototype["::send"]=function(args){return this.apply(this,args);});
var τ1177=function(dest,values){for(k in values){if(values.hasOwnProperty(k)){(dest[k]=send(values,k));}else{null;}}return dest;};
var τ1178=function(τ1179,key){var τ1180=τ1179;var x;var x;var x;if(((τ1180===null)||(τ1180===(void 0)))){return false;}else{if(((typeof(τ1180)==="string")&&((x=τ1180),true))){return (key in String.prototype);}else{if(((typeof(τ1180)==="number")&&((x=τ1180),true))){return (key in Number.prototype);}else{if(((x=τ1180),true)){return (key in x);}else{throw ["Could not find a match",τ1180];}}}}};
var τ1181=function(){var τ1182=function(tags){var τ1183=function(){if((!τ1114(τ1182)(this))){return Object.create(τ1182.prototype);}else{return this;}}();(τ1183["tags"]=tags);return τ1183;};τ1177(τ1182);(τ1182.prototype["create"]=function(){var τ1184=Array.prototype.slice.call(arguments,0);var τp0;var message;var args;if(((τ1184 instanceof Array)&&(((τp0=τ1184.length),true)&&((τp0>=0)&&((message=function(){if((0>=τp0)){return "";}else{return τ1184[0];}}()),true,(args=τ1184.slice(1)),true))))){var τ1183=this;var e=Error(message);(e["::tags"]=τ1183.tags);(e["args"]=args);(e["name"]=["E"].concat(τ1183.tags).join("."));return e;}else{throw ["Could not find a match",τ1184];}});(τ1182.prototype["::check"]=function(e){var τ1183=this;if(((!e)||(!τ1114(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var τ1185=τ1183.tags;var τ1186=τ1185.length;for(var τ1187=0;(τ1187<τ1186);(τ1187++)){var τ1188=τ1185[τ1187];var tag;var other;if(((tag=τ1188),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=τ1188),true)){false;}else{throw ["Could not find a match",τ1188];}}}false;return true;});(τ1182.prototype["::deconstruct"]=function(e){var τ1183=this;return e.args;});return τ1182;}();var τ1120=require("./util");var items=τ1120.items;var τ1121=require("./helpers");var aslist=τ1121.aslist;var gensym=τ1121.gensym;var τ1122=require("./pp");var __lt____gt__=τ1122["<>"];var js_op_table=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"});var Translator=function(){var τ1124=Array.prototype.slice.call(arguments,0);var τp0;var prelude;if(((τ1124 instanceof Array)&&(((τp0=τ1124.length),true)&&(((τp0>=0)&&(τp0<=1))&&((prelude=function(){if((0>=τp0)){return null;}else{return τ1124[0];}}()),true))))){var τ1123=function(){if((!τ1114(Translator)(this))){return Object.create(Translator.prototype);}else{return this;}}();(τ1123["cache"]=({}));(τ1123["prepend"]=[]);if(prelude){τ1123.prepend.push(τ1123.translate(τ1117(prelude),"stmt"));}else{null;}return τ1123;}else{throw ["Could not find a match",τ1124];}};τ1177(Translator);(Translator.prototype["register_value"]=function(v,id){var τ1123=this;var τ1125=send(τ1123.cache,id);var name;if((τ1125===(void 0))){var temp=gensym();(τ1123.cache[id]=temp);τ1123.prepend.push(τ1123.translate(["declare",temp,τ1117(v)],"stmt"));return temp;}else{if(((name=τ1125),true)){return name;}else{throw ["Could not find a match",τ1125];}}});(Translator.prototype["dump_store"]=function(){var τ1123=this;var rval=τ1123.prepend.join("\n");(τ1123["prepend"]=[]);return rval;});(Translator.prototype["mangle"]=function(name){var τ1123=this;var tr=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"});var r=[];for(var i=0;(i<name.length);(++i)){var c=send(name,i);r.push((send(tr,c)||c));}return r.join("");});(Translator.prototype["body"]=function(b,mode){var τ1123=this;(orig=b);(b=aslist(b));var trst=function(stmt){return τ1123.translate(stmt,"stmt");};var τ1126=mode;var other;if((τ1126==="expr")){var x=["send",["lambda",[],orig],["array"]];return τ1123.translate(x,mode);}else{if((τ1126==="return")){var stmts=b.slice(0,(-1));var ret=send(b,(b.length-1));return (stmts.map(trst).join("")+τ1123.translate(ret,"return"));}else{if((τ1126==="stmt")){return b.map(trst).join("");}else{if(((other=τ1126),true)){throw "OopsH";}else{throw ["Could not find a match",τ1126];}}}}});(Translator.prototype["expr"]=function(x,mode){var τ1123=this;var τ1127=mode;var other;if((τ1127==="expr")){return x;}else{if((τ1127==="stmt")){return (x+";");}else{if((τ1127==="return")){return (("return "+x)+";");}else{if(((other=τ1127),true)){throw "OopsI";}else{throw ["Could not find a match",τ1127];}}}}});(Translator.prototype["op"]=function(op,a,b){var τ1123=this;var e=function(){var τ1128=[a,b];var τp0;var τp1;var τp2;var τp3;var _;var τp0;var _;var τp1;var τp2;var τp3;var _;var τ1129=false;var τ1130=false;var τ1131=false;if(((τ1129=(τ1128 instanceof Array))&&((τ1130=((τp0=τ1128.length),true))&&((τ1131=(τp0===2))&&(((τp1=τ1128[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&(((τp3=τp1[0]),(τp3==="void"))&&((_=τ1128[1]),true))))))))){return (op+τ1123.translate(b,"expr"));}else{if((τ1131&&(((_=τ1128[0]),true,(τp1=τ1128[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return (τ1123.translate(a,"expr")+op);}else{if(((_=τ1128),true)){return ((τ1123.translate(a,"expr")+op)+τ1123.translate(b,"expr"));}else{throw ["Could not find a match",τ1128];}}}}();return (("("+e)+")");});(Translator.prototype["translate"]=function(expr,mode){var τ1123=this;var τ1132=expr;var τp0;var τp1;var s;var τp0;var τp1;var τp0;var τp1;var v;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var f;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var f;var msg;var τp0;var τp1;var f;var τp2;var msg;var τp3;var τp4;var s;var τp0;var τp1;var f;var τp2;var τp3;var τp4;var args;var τp0;var τp1;var f;var msg;var τp0;var τp1;var args;var τp0;var τp1;var args;var τp0;var τp1;var bindings;var body;var τp0;var τp1;var test;var pos;var neg;var τp0;var τp1;var binding;var τp2;var τp3;var τp4;var τp5;var τp0;var τp1;var binding;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var obj;var msg;var rhs;var τp0;var τp1;var lhs;var rhs;var τp0;var τp1;var args;var τp0;var τp1;var args;var τp0;var τp1;var value;var τp0;var τp1;var τp0;var τp1;var τp0;var τp1;var value;var τp0;var τp1;var value;var τp0;var τp1;var value;var τp0;var τp1;var test;var body;var τp0;var τp1;var x;var y;var z;var body;var τp0;var τp1;var x;var y;var body;var τp0;var τp1;var attempt;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var v;var body;var τp10;var τp11;var τp12;var other;var τ1133=false;var τ1134=false;var τ1135=false;var τ1136=false;var τ1137=false;var τ1138=false;var τ1139=false;var τ1140=false;if(((τ1133=(τ1132 instanceof Array))&&((τ1134=((τp0=τ1132.length),true))&&((τp0===2)&&(((τp1=τ1132[0]),(τp1==="symbol"))&&((s=τ1132[1]),true)))))){return τ1123.expr(τ1123.mangle(s),mode);}else{if((τ1134&&((τp0===1)&&((τp1=τ1132[0]),(τp1==="void"))))){return τ1123.expr("null",mode);}else{if((τ1134&&((τp0===2)&&(((τp1=τ1132[0]),(τp1==="value"))&&((v=τ1132[1]),true))))){var r=function(){var τ1141=v;var id;var other;if((typeof(τ1141)==="string")){var repl=({"\"":"\\\"","\n":"\\n","\\":"\\\\"});(v=v.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m){return send(repl,m);}));return (("\""+v)+"\"");}else{if((τ1141===(void 0))){return "(void 0)";}else{if(((((typeof(τ1141)==="number")||(τ1141===true))||(τ1141===false))||(τ1141===null))){return String(v);}else{if((τ1178(τ1141,"::id")&&((id=τ1141["::id"]),true,id))){return τ1123.translate(τ1123.register_value(v,id),mode);}else{if(((other=τ1141),true)){throw τ1181(["cannot_serialize"]).create("Cannot serialize value",({"value":v}));}else{throw ["Could not find a match",τ1141];}}}}}}();return τ1123.expr(r,mode);}else{if((τ1134&&((τ1135=(τp0===3))&&((τ1136=((τp1=τ1132[0]),(τp1==="send")))&&((τ1137=((τp2=τ1132[1]),(τp2 instanceof Array)))&&((τ1138=((τp3=τp2.length),true))&&((τ1139=(τp3===2))&&((τ1140=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="___node"))&&(((τp6=τ1132[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===2)&&(((τp8=τp6[0]),(τp8==="value"))&&((f=τp6[1]),true)))))))))))))){return f;}else{if((τ1140&&(((τp5=τp2[1]),(τp5==="___js_fetch"))&&(((τp6=τ1132[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="array"))&&((f=τp6[1]),true,(msg=τp6[2]),true)))))))){var trf=τ1123.translate(f,"expr");var trmsg=τ1123.translate(msg,"expr");return τ1123.expr((((trf+"[")+trmsg)+"]"),mode);}else{if((τ1136&&(((f=τ1132[1]),true,(τp2=τ1132[2]),(msg=τp2),true,(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((s=τp2[1]),true))))))){if(((typeof(s)==="string")&&s.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){var trf=τ1123.translate(f,"expr");var trmsg=τ1123.translate(["symbol",s],"expr");return τ1123.expr(((trf+".")+trmsg),mode);}else{if(true){var trf=τ1123.translate(f,"expr");var trmsg=τ1123.translate(msg,"expr");return τ1123.expr((((trf+"[")+trmsg)+"]"),mode);}else{return false;}}}else{if((τ1136&&(((f=τ1132[1]),true,(τp2=τ1132[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3>=1)&&(((τp4=τp2[0]),(τp4==="array"))&&((args=τp2.slice(1)),true))))))){var op=function(){var τ1142=f;var τp0;var τp1;var x;var _;if(((τ1142 instanceof Array)&&(((τp0=τ1142.length),true)&&((τp0===2)&&(((τp1=τ1142[0]),(τp1==="symbol"))&&((x=τ1142[1]),true)))))){return send(js_op_table,x);}else{if(((_=τ1142),true)){return null;}else{throw ["Could not find a match",τ1142];}}}();if(op){return τ1123.expr(τ1123.op(op,args[0],args[1]),mode);}else{var trf=τ1123.translate(f,"expr");var trargs=function(){var τ1143=[];var τ1144=args;var τ1145=τ1144.length;for(var τ1146=0;(τ1146<τ1145);(τ1146++)){var τ1147=τ1144[τ1146];var x;var other;if(((x=τ1147),true)){τ1143.push(τ1123.translate(x,"expr"));}else{if(((other=τ1147),true)){false;}else{throw ["Could not find a match",τ1147];}}}return τ1143;}();return τ1123.expr((((trf+"(")+trargs.join(","))+")"),mode);}}else{if((τ1136&&((f=τ1132[1]),true,(msg=τ1132[2]),true))){var trf=τ1123.translate(f,"expr");var trmsg=τ1123.translate(msg,"expr");return τ1123.expr((((("send("+trf)+",")+trmsg)+")"),mode);}else{if((τ1134&&((τ1135=(τp0>=1))&&(((τp1=τ1132[0]),(τp1==="array"))&&((args=τ1132.slice(1)),true))))){var r=function(){var f=function(x){return τ1123.translate(x,"expr");};return (("["+args.map(f).join(","))+"]");}();return τ1123.expr(r,mode);}else{if((τ1135&&(((τp1=τ1132[0]),(τp1==="object"))&&((args=τ1132.slice(1)),true)))){var r=function(){var f=function(τ1148){var τp0;var τp1;var x;var y;if(((τ1148 instanceof Array)&&(((τp0=τ1148.length),true)&&((τp0===3)&&(((τp1=τ1148[0]),(τp1==="array"))&&((x=τ1148[1]),true,(y=τ1148[2]),true)))))){undefined;}else{throw τ1177(τ1181(["match"]).create("The value failed to match"),({"location":["location",(void 0),(void 0),(void 0)]}));}var a=τ1123.translate(x,"expr");var b=τ1123.translate(y,"expr");return ((a+":")+b);};return (("({"+args.map(f).join(","))+"})");}();return τ1123.expr(r,mode);}else{if((τ1134&&((τp0===3)&&(((τp1=τ1132[0]),(τp1==="lambda"))&&((bindings=τ1132[1]),true,(body=τ1132[2]),true))))){var a=function(){var τ1157=[];var τ1158=bindings;var τ1159=τ1158.length;for(var τ1160=0;(τ1160<τ1159);(τ1160++)){var τ1161=τ1158[τ1160];var x;var other;if(((x=τ1161),true)){τ1157.push(τ1123.translate(x,"expr"));}else{if(((other=τ1161),true)){false;}else{throw ["Could not find a match",τ1161];}}}return τ1157;}().join(",");var b=τ1123.body(body,"return");return τ1123.expr((((("function("+a)+"){")+b)+"}"),mode);}else{if((τ1134&&((τp0===4)&&(((τp1=τ1132[0]),(τp1==="if"))&&((test=τ1132[1]),true,(pos=τ1132[2]),true,(neg=τ1132[3]),true))))){var τ1162=mode;var other;if((τ1162==="expr")){return τ1123.body(expr,"expr");}else{if(((other=τ1162),true)){var a=τ1123.translate(test,"expr");var b=τ1123.translate(pos,mode);var c=τ1123.translate(neg,mode);return (((((("if("+a)+"){")+b)+"}else{")+c)+"}");}else{throw ["Could not find a match",τ1162];}}}else{if((τ1134&&((τ1135=(τp0===3))&&((τ1136=((τp1=τ1132[0]),(τp1==="declare")))&&(((binding=τ1132[1]),true,(τp2=τ1132[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((τp5=τp2[1]),(τp5===(void 0))))))))))){var τ1163=mode;var other;if(((τ1163==="expr")||(τ1163==="return"))){throw "Invalid in expr ctx";}else{if(((other=τ1163),true)){var a=τ1123.translate(binding,"expr");return (("var "+a)+";");}else{throw ["Could not find a match",τ1163];}}}else{if((τ1136&&((binding=τ1132[1]),true,(value=τ1132[2]),true))){var τ1164=mode;var other;if(((τ1164==="expr")||(τ1164==="return"))){throw "Invalid in expr ctx";}else{if(((other=τ1164),true)){var a=τ1123.translate(binding,"expr");var b=τ1123.translate(value,"expr");return (((("var "+a)+"=")+b)+";");}else{throw ["Could not find a match",τ1164];}}}else{if((τ1135&&((τ1136=((τp1=τ1132[0]),(τp1==="assign")))&&(((τp2=τ1132[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="send"))&&((obj=τp2[1]),true,(msg=τp2[2]),true,(rhs=τ1132[2]),true)))))))){var a=τ1123.translate(obj,"expr");var b=τ1123.translate(msg,"expr");var c=τ1123.translate(rhs,"expr");return τ1123.expr((((((("("+a)+"[")+b)+"]=")+c)+")"),mode);}else{if((τ1136&&((lhs=τ1132[1]),true,(rhs=τ1132[2]),true))){var a=τ1123.translate(lhs,"expr");var b=τ1123.translate(rhs,"expr");return τ1123.expr((((("("+a)+"=")+b)+")"),mode);}else{if((τ1134&&((τ1135=(τp0>=1))&&(((τp1=τ1132[0]),(τp1==="multi"))&&((args=τ1132.slice(1)),true))))){var isdecl=function(τ1166){var τ1167=τ1166;var τp0;var τp1;var variable;var value;var other;if(((τ1167 instanceof Array)&&(((τp0=τ1167.length),true)&&((τp0===3)&&(((τp1=τ1167[0]),(τp1==="declare"))&&((variable=τ1167[1]),true,(value=τ1167[2]),true)))))){return true;}else{if(((other=τ1167),true)){return false;}else{throw ["Could not find a match",τ1167];}}};var τ1165=null;var _;if((args.length===1)){return τ1123.translate(args[0],mode);}else{if(((mode==="expr")&&(!args.some(isdecl)))){var xs=function(){var τ1168=[];var τ1169=args;var τ1170=τ1169.length;for(var τ1171=0;(τ1171<τ1170);(τ1171++)){var τ1172=τ1169[τ1171];var x;var other;if(((x=τ1172),true)){τ1168.push(τ1123.translate(x,"expr"));}else{if(((other=τ1172),true)){false;}else{throw ["Could not find a match",τ1172];}}}return τ1168;}();return (("("+xs.join(","))+")");}else{if(((_=τ1165),true)){return τ1123.body(expr,mode);}else{throw ["Could not find a match",τ1165];}}}}else{if((τ1135&&(((τp1=τ1132[0]),(τp1==="splice"))&&((args=τ1132.slice(1)),true)))){return τ1123.translate(τ1116(["multi"],args),mode);}else{if((τ1134&&((τp0===2)&&(((τp1=τ1132[0]),(τp1==="js_new"))&&((value=τ1132[1]),true))))){return τ1123.expr((("(new "+τ1123.translate(value,"expr"))+")"),mode);}else{if((τ1134&&((τ1135=(τp0===1))&&((τp1=τ1132[0]),(τp1==="js_break"))))){if((mode==="expr")){throw "Invalid break in ctx";}else{return "break;";}}else{if((τ1135&&((τp1=τ1132[0]),(τp1==="js_continue")))){if((mode==="expr")){throw "Invalid continue in ctx";}else{return "continue;";}}else{if((τ1134&&((τ1135=(τp0===2))&&(((τp1=τ1132[0]),(τp1==="js_return"))&&((value=τ1132[1]),true))))){if((mode==="expr")){throw "Invalid return in ctx";}else{return (("return "+τ1123.translate(value,"expr"))+";");}}else{if((τ1135&&(((τp1=τ1132[0]),(τp1==="js_delete"))&&((value=τ1132[1]),true)))){if((mode==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+τ1123.translate(value,"expr"))+";");}}else{if((τ1135&&(((τp1=τ1132[0]),(τp1==="js_throw"))&&((value=τ1132[1]),true)))){if((mode==="expr")){return (("function(){throw "+τ1123.translate(value,"expr"))+";}()");}else{return (("throw "+τ1123.translate(value,"expr"))+";");}}else{if((τ1134&&((τp0===3)&&(((τp1=τ1132[0]),(τp1==="js_while"))&&((test=τ1132[1]),true,(body=τ1132[2]),true))))){var τ1173=mode;var other;if((τ1173==="expr")){return τ1123.body(expr,"expr");}else{if(((other=τ1173),true)){var a=τ1123.translate(test,"expr");var b=τ1123.translate(body,"stmt");return (((("while("+a)+"){")+b)+"}");}else{throw ["Could not find a match",τ1173];}}}else{if((τ1134&&((τp0===5)&&(((τp1=τ1132[0]),(τp1==="js_for"))&&((x=τ1132[1]),true,(y=τ1132[2]),true,(z=τ1132[3]),true,(body=τ1132[4]),true))))){var τ1174=mode;var other;if((τ1174==="expr")){return τ1123.body(expr,"expr");}else{if(((other=τ1174),true)){var a=τ1123.translate(x,"stmt");var b=τ1123.translate(y,"stmt");var c=τ1123.translate(z,"expr");var d=τ1123.translate(body,"stmt");return (((((("for("+a)+b)+c)+"){")+d)+"}");}else{throw ["Could not find a match",τ1174];}}}else{if((τ1134&&((τ1135=(τp0===4))&&(((τp1=τ1132[0]),(τp1==="js_for_in"))&&((x=τ1132[1]),true,(y=τ1132[2]),true,(body=τ1132[3]),true))))){var τ1175=mode;var other;if((τ1175==="expr")){return τ1123.body(expr,"expr");}else{if(((other=τ1175),true)){var a=τ1123.translate(x,"expr");var b=τ1123.translate(y,"expr");var c=τ1123.translate(body,"stmt");return (((((("for("+a)+" in ")+b)+"){")+c)+"}");}else{throw ["Could not find a match",τ1175];}}}else{if((τ1135&&(((τp1=τ1132[0]),(τp1==="js_try"))&&(((attempt=τ1132[1]),true,(τp2=τ1132[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="lambda"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===1)&&(((τp7=τp5[0]),(τp7 instanceof Array))&&(((τp8=τp7.length),true)&&((τp8===2)&&(((τp9=τp7[0]),(τp9==="symbol"))&&(((v=τp7[1]),true,(body=τp2[2]),true,(τp10=τ1132[3]),(τp10 instanceof Array))&&(((τp11=τp10.length),true)&&((τp11===1)&&((τp12=τp10[0]),(τp12==="void"))))))))))))))))))){var τ1176=mode;var other;if((τ1176==="expr")){return τ1123.body(expr,"expr");}else{if(((other=τ1176),true)){var a=τ1123.translate(attempt,"stmt");var b=τ1123.translate(body,"stmt");return (((((("try{"+a)+"}catch(")+v)+"){")+b)+"}");}else{throw ["Could not find a match",τ1176];}}}else{if(((other=τ1132),true)){throw other;}else{throw ["Could not find a match",τ1132];}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});Translator;var translate=function(expr,mode){var tr=Translator();var t=tr.translate(expr,mode);return (tr.dump_store()+t);};(exports["Translator"]=Translator);(exports["translate"]=translate);
