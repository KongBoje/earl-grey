require("earlgrey-runtime");
var $31191=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});var accum$31156;var accum$31160;var $29008$29027;var gensym$29028;var Body$29029;var $29009$29030;var __lt____gt__$29031;var js_op_table2$29032;var js_op_table$29033;var Translator$29034;var translate$29035;($29008$29027=require("./util"));(gensym$29028=$29008$29027.gensym);(Body$29029=$29008$29027.Body);($29009$29030=require("./pp"));(__lt____gt__$29031=$29009$29030["<>"]);(js_op_table2$29032=({"+":"+","-":"-","*":"*","/":"/","mod":"%","&.":"&","|.":"|","^.":"^","~":"~","and":"&&","or":"||","not":"!","==":"===","!=":"!==","===":"===","!==":"!==","<":"<",">":">","<=":"<=",">=":">=","<<":"<<",">>":">>",">>>":">>>","in":" in ","instanceof":" instanceof ","++":"++","--":"--"}));(js_op_table$29033=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"}));(Translator$29034=(function(){var $29091$29103;var prelude$29081;var t0$29077;var $29068$29072;var it$0$29063;(it$0$29063=(function(){if((!getChecker(Translator$29034)(this))){return Object.create(Translator$29034.prototype);}else{return this;}})());($29068$29072=arguments);(t0$29077=$29068$29072.length);if(((t0$29077>=0)&&(t0$29077<=1))){(prelude$29081=(function(){if((0>=t0$29077)){return null;}else{return $29068$29072[0];}})());(it$0$29063["cache"]=({}));(it$0$29063["prepend"]=[]);($29091$29103=prelude$29081);if(($29091$29103===null)){undefined;}else{if((typeof($29091$29103)==="string")){it$0$29063.prepend.push(prelude$29081);}else{$29091$29103;it$0$29063.prepend.push(it$0$29063.translate(___serialize_ast(prelude$29081),"stmt"));}}}else{___match_error($29068$29072);}return it$0$29063;}));(Translator$29034.prototype["register_value"]=(function(v$29127,id$29128){var temp$29159;var name$29168;var $29141$29146;var it$0$29132;var self$29133;(it$0$29132=this);(self$29133=this);($29141$29146=$31191(it$0$29132.cache,id$29128));if(($29141$29146===(void 0))){(temp$29159=["symbol",gensym$29028()]);(it$0$29132.cache[id$29128]=temp$29159);it$0$29132.prepend.push(it$0$29132.translate(["declare",temp$29159,___serialize_ast(v$29127)],"stmt"));return temp$29159;}else{(name$29168=$29141$29146);return name$29168;}}));(Translator$29034.prototype["register_raw"]=(function(raw$29174,id$29175){var temp$29206;var name$29215;var $29188$29193;var it$0$29179;var self$29180;(it$0$29179=this);(self$29180=this);($29188$29193=$31191(it$0$29179.cache,id$29175));if(($29188$29193===(void 0))){(temp$29206=["symbol",gensym$29028()]);(it$0$29179.cache[id$29175]=temp$29206);it$0$29179.prepend.push(it$0$29179.translate(["declare",temp$29206,["raw",raw$29174]],"stmt"));return temp$29206;}else{(name$29215=$29188$29193);return name$29215;}}));(Translator$29034.prototype["dump_store"]=(function(){var rval$29236;var it$0$29224;var self$29225;(it$0$29224=this);(self$29225=this);(rval$29236=it$0$29224.prepend.join("\n"));(it$0$29224["prepend"]=[]);return rval$29236;}));(Translator$29034.prototype["mangle"]=(function(name$29247){var i$29274;var tr$29264;var r$29265;var it$0$29251;var self$29252;(it$0$29251=this);(self$29252=this);(tr$29264=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"}));(r$29265=[]);(i$29274=0);$29263:for(;(i$29274<name$29247.length);(++i$29274)){var c$29283;(c$29283=$31191(name$29247,i$29274));r$29265.push(($31191(tr$29264,c$29283)||c$29283));}return r$29265.join("");}));(Translator$29034.prototype["body"]=(function(orig$29291,mode$29292){var t0$29316;var t1$29317;var t2$29318;var x$29357;var stmts$29368;var ret$29369;var other$29382;var $29308$29345;var b$29313;var trst$29314;var it$0$29296;var self$29297;(it$0$29296=this);(self$29297=this);(t0$29316=getProjector(Body$29029)(orig$29291));if((t0$29316[0]&&(((t1$29317=t0$29316[1])),(((t2$29318=t1$29317.length)),(t2$29318>=0))))){(b$29313=Array.prototype.slice.call(t1$29317,0));}else{___match_error(orig$29291,"/home/olivier/git/eg/src/translate-js.eg",3167,3171);}(trst$29314=(function(stmt$29340){return it$0$29296.translate(stmt$29340,"stmt");}));($29308$29345=mode$29292);if(($29308$29345==="expr")){(x$29357=["send",["lambda",[],orig$29291],["array"]]);return it$0$29296.translate(x$29357,mode$29292);}else{if(($29308$29345==="return")){(stmts$29368=b$29313.slice(0,-1));(ret$29369=$31191(b$29313,(b$29313.length-1)));return (stmts$29368.map(trst$29314).join("")+it$0$29296.translate(ret$29369,"return"));}else{if(($29308$29345==="stmt")){return b$29313.map(trst$29314).join("");}else{(other$29382=$29308$29345);throw ErrorFactory(["syntax","mode"]).create("Unknown mode",({"mode":mode$29292}));}}}}));(Translator$29034.prototype["expr"]=(function(x$29388,mode$29389){var other$29429;var $29402$29409;var it$0$29393;var self$29394;(it$0$29393=this);(self$29394=this);($29402$29409=mode$29389);if(($29402$29409==="expr")){return x$29388;}else{if(($29402$29409==="stmt")){return (x$29388+";");}else{if(($29402$29409==="return")){return (("return "+x$29388)+";");}else{(other$29429=$29402$29409);throw "OopsI";}}}}));(Translator$29034.prototype["op"]=(function(op$29435,a$29436,b$29437){var $29459$29473;var $29460$29474;var $29461$29475;var t0$29469;var t1$29470;var t2$29471;var $29455$29464;var e$29452;var it$0$29441;var self$29442;(it$0$29441=this);(self$29442=this);(e$29452=((($29455$29464=[a$29436,b$29437])),(function(){if((($29459$29473=($29455$29464 instanceof Array))&&(((t0$29469=$29455$29464.length)),(($29461$29475=(t0$29469===2))&&(((t1$29470=$29455$29464[0])),((t1$29470 instanceof Array)&&(((t2$29471=t1$29470.length)),((t2$29471===1)&&(t1$29470[0]==="void"))))))))){$29455$29464[1];return (op$29435+it$0$29441.translate(b$29437,"expr"));}else{if(($29461$29475&&($29455$29464[0],(((t1$29470=$29455$29464[1])),((t1$29470 instanceof Array)&&(((t2$29471=t1$29470.length)),((t2$29471===1)&&(t1$29470[0]==="void")))))))){return (it$0$29441.translate(a$29436,"expr")+op$29435);}else{$29455$29464;return ((it$0$29441.translate(a$29436,"expr")+op$29435)+it$0$29441.translate(b$29437,"expr"));}}})()));return (("("+e$29452)+")");}));(Translator$29034.prototype["translate"]=(function(expr$29518,mode$29519){var repl$29644;var it$0$29683;var it$0$29677;var it$0$29671;var it$0$29665;var bridge$29625$29702;var bridge$29624$29695;var other$29717;var id$29711;var bridge$29623$29635;var $29618$29630;var r$29615;var t0$29756;var t0$29763;var trf$29783;var trmsg$29784;var x$29850;var x$29845;var $29832$29837;var trf$29828;var trmsg$29829;var trf$29863;var trmsg$29864;var otherwise$29858;var $29810$29815;var x$29924;var x$29914;var $29897$29909;var $29898$29910;var $29899$29911;var t0$29907;var $29893$29902;var $index$29964;var $length$29958;var temp$29952;var acc$29946;var trf$29934;var trargs$29935;var op$29890;var code$30003;var code$30017;var t0$29995;var t1$29996;var trf$30024;var trmsg$30025;var codevar$29993;var f$30044;var r$30039;var f$30119;var f$30165;var v$30159;var all_strings$30061;var r$30062;var $index$30252;var $length$30246;var temp$30240;var acc$30234;var a$30219;var b$30220;var name$30212;var a$30316;var b$30317;var other$30311;var $30294$30299;var a$30354;var b$30355;var c$30356;var other$30348;var $30331$30336;var a$30409;var other$30405;var bridge$30384$30393;var $30382$30388;var a$30447;var b$30448;var other$30442;var bridge$30421$30430;var $30419$30425;var a$30476;var b$30477;var c$30478;var a$30497;var b$30498;var $index$30608;var $length$30602;var temp$30596;var acc$30590;var $index$30654;var $length$30648;var temp$30642;var acc$30636;var xs$30582;var $30520$30570;var $30516$30564;var isdecl$30521;var $index$30724;var $length$30718;var temp$30712;var acc$30706;var decls$30698;var f$30757;var r$30752;var x$30855;var y$30856;var t0$30851;var $30841$30846;var other$30905;var $30888$30893;var a$30935;var b$30936;var other$30930;var $30913$30918;var a$30975;var b$30976;var c$30977;var d$30978;var other$30968;var $30951$30956;var a$31021;var b$31022;var c$31023;var other$31015;var $30998$31003;var t0$31067;var t0$31075;var a$31113;var b$31114;var other$31108;var $31091$31096;var other$31142;var t0$31129;var $31085$31124;var r$31088;var other$31151;var x$31146;var attempt$31035;var v$31036;var body$31037;var finally$31038;var x$30993;var y$30994;var body$30995;var x$30945;var y$30946;var z$30947;var body$30948;var test$30909;var body$30910;var label$30874;var body$30875;var value$30869;var value$30838;var value$30833;var label$30818;var label$30803;var value$30798;var args$30747;var vars$30692;var body$30693;var s$30687;var args$30682;var args$30511;var lhs$30490;var rhs$30491;var obj$30457;var msg$30458;var rhs$30459;var binding$30415;var value$30416;var binding$30368;var test$30326;var pos$30327;var neg$30328;var test$30278;var pos$30279;var bindings$30206;var body$30207;var args$30055;var args$30034;var f$29987;var msg$29988;var f$29873;var args$29874;var f$29793;var msg$29794;var s$29795;var f$29747;var msg$29748;var f$29722;var v$29610;var s$29596;var $29571$29590;var $29572$29591;var $29573$29592;var $29574$29593;var t0$29582;var t1$29583;var t2$29584;var t3$29585;var t4$29586;var bridge$29538$29587;var bridge$29568$29588;var $29532$29577;var it$0$29523;var self$29524;(it$0$29523=this);(self$29524=this);($29532$29577=expr$29518);if((($29571$29590=($29532$29577 instanceof Array))&&(((t0$29582=$29532$29577.length)),((t0$29582===2)&&($29532$29577[0]==="symbol"))))){(s$29596=$29532$29577[1]);return it$0$29523.expr(it$0$29523.mangle(s$29596),mode$29519);}else{if(($29571$29590&&((t0$29582===1)&&($29532$29577[0]==="void")))){return it$0$29523.expr("null",mode$29519);}else{if(($29571$29590&&((t0$29582===2)&&($29532$29577[0]==="value")))){(v$29610=$29532$29577[1]);(r$29615=((($29618$29630=v$29610)),(function(){if((typeof($29618$29630)==="string")){(repl$29644=({"\"":"\\\"","\n":"\\n","\\":"\\\\"}));(v$29610=v$29610.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),(function(m$29652){return $31191(repl$29644,m$29652);})));return (("\""+v$29610)+"\"");}else{if(($29618$29630===(void 0))){return "(void 0)";}else{if(getChecker(RegExp)($29618$29630)){(it$0$29665=String(v$29610));(it$0$29671=it$0$29665.slice(1,-1));(it$0$29677=it$0$29671.replace(RegExp("/","g"),"\\/"));(it$0$29683=it$0$29677.replace(RegExp("\\n","g"),"\\n"));return "/".concat(it$0$29683).concat("/");}else{(bridge$29623$29635=$29618$29630);if(((((bridge$29624$29695=bridge$29623$29635)),((((bridge$29625$29702=bridge$29624$29695)),((typeof(bridge$29625$29702)==="number")||(bridge$29625$29702===true)))||(bridge$29624$29695===false)))||(bridge$29623$29635===null))){return String(v$29610);}else{if((___hasprop($29618$29630,"::id")&&((id$29711=$29618$29630["::id"]),id$29711))){return it$0$29523.translate(it$0$29523.register_value(v$29610,id$29711),mode$29519);}else{(other$29717=$29618$29630);throw ErrorFactory(["cannot_serialize"]).create("Cannot serialize value",({"value":v$29610}));}}}}}})()));return it$0$29523.expr(r$29615,mode$29519);}else{if(($29571$29590&&(($29573$29592=(t0$29582===3))&&(($29574$29593=($29532$29577[0]==="send"))&&(((t1$29583=$29532$29577[1])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===2)&&((t1$29583[0]==="variable")&&((t1$29583[1]==="___node")&&(((t3$29585=$29532$29577[2])),((t3$29585 instanceof Array)&&(((t4$29586=t3$29585.length)),((t4$29586===2)&&(t3$29585[0]==="value"))))))))))))))){(f$29722=t3$29585[1]);return f$29722;}else{if(($29574$29593&&(((bridge$29538$29587=$29532$29577[1])),((((bridge$29538$29587 instanceof Array)&&(((t0$29756=bridge$29538$29587.length)),((t0$29756===2)&&((bridge$29538$29587[0]==="symbol")&&(bridge$29538$29587[1]==="___js_fetch")))))||((bridge$29538$29587 instanceof Array)&&(((t0$29763=bridge$29538$29587.length)),((t0$29763===2)&&((bridge$29538$29587[0]==="variable")&&(bridge$29538$29587[1]==="___js_fetch"))))))&&(((t1$29583=$29532$29577[2])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===3)&&(t1$29583[0]==="array"))))))))){(f$29747=t1$29583[1]);(msg$29748=t1$29583[2]);(trf$29783=it$0$29523.translate(f$29747,"expr"));(trmsg$29784=it$0$29523.translate(msg$29748,"expr"));return it$0$29523.expr((((trf$29783+"[")+trmsg$29784)+"]"),mode$29519);}else{if(($29574$29593&&((f$29793=$29532$29577[1]),(((t1$29583=$29532$29577[2])),((msg$29794=t1$29583),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===2)&&(t1$29583[0]==="value"))))))))){(s$29795=t1$29583[1]);($29810$29815=null);$29810$29815;if(((typeof(s$29795)==="string")&&s$29795.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){(trf$29828=((($29832$29837=it$0$29523.translate(f$29793,"expr"))),(function(){if(getChecker(RegExp("^\\d+$",""))($29832$29837)){(x$29845=$29832$29837);return (("("+x$29845)+")");}else{(x$29850=$29832$29837);return x$29850;}})()));(trmsg$29829=it$0$29523.translate(["symbol",s$29795],"expr"));return it$0$29523.expr(((trf$29828+".")+trmsg$29829),mode$29519);}else{(otherwise$29858=$29810$29815);(trf$29863=it$0$29523.translate(f$29793,"expr"));(trmsg$29864=it$0$29523.translate(msg$29794,"expr"));return it$0$29523.expr((((trf$29863+"[")+trmsg$29864)+"]"),mode$29519);}}else{if(($29574$29593&&((f$29873=$29532$29577[1]),(((t1$29583=$29532$29577[2])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584>=1)&&(t1$29583[0]==="array")))))))){(args$29874=Array.prototype.slice.call(t1$29583,1));(op$29890=((($29893$29902=f$29873)),(function(){if((($29897$29909=($29893$29902 instanceof Array))&&(((t0$29907=$29893$29902.length)),(($29899$29911=(t0$29907===2))&&($29893$29902[0]==="symbol"))))){(x$29914=$29893$29902[1]);return $31191(js_op_table$29033,x$29914);}else{if(($29899$29911&&($29893$29902[0]==="variable"))){(x$29924=$29893$29902[1]);return $31191(js_op_table2$29032,x$29924);}else{$29893$29902;return null;}}})()));if(op$29890){return it$0$29523.expr(it$0$29523.op(op$29890,args$29874[0],args$29874[1]),mode$29519);}else{(trf$29934=it$0$29523.translate(f$29873,"expr"));(trargs$29935=(((acc$29946=[])),(((temp$29952=args$29874)),((($length$29958=temp$29952.length)),((($index$29964=0)),(function(){$29941:for(;($index$29964<$length$29958);($index$29964++)){var x$29981;var m$29973;(m$29973=temp$29952[$index$29964]);(x$29981=m$29973);acc$29946.push(it$0$29523.translate(x$29981,"expr"));}})()))),acc$29946));return it$0$29523.expr((((trf$29934+"(")+trargs$29935.join(","))+")"),mode$29519);}}else{if($29574$29593){(f$29987=$29532$29577[1]);(msg$29988=$29532$29577[2]);(t0$29995=(((code$30003="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$29523.register_raw(code$30003,"~send")));if(((t0$29995 instanceof Array)&&(((t1$29996=t0$29995.length)),((t1$29996===2)&&(t0$29995[0]==="symbol"))))){(codevar$29993=t0$29995[1]);}else{___match_error((((code$30017="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$29523.register_raw(code$30017,"~send")),"/home/olivier/git/eg/src/translate-js.eg",6885,7095);}(trf$30024=it$0$29523.translate(f$29987,"expr"));(trmsg$30025=it$0$29523.translate(msg$29988,"expr"));return it$0$29523.expr((((((codevar$29993+"(")+trf$30024)+",")+trmsg$30025)+")"),mode$29519);}else{if(($29571$29590&&(($29573$29592=(t0$29582>=1))&&($29532$29577[0]==="array")))){(args$30034=Array.prototype.slice.call($29532$29577,1));(r$30039=(((f$30044=(function(x$30049){return it$0$29523.translate(x$30049,"expr");}))),(("["+args$30034.map(f$30044).join(","))+"]")));return it$0$29523.expr(r$30039,mode$29519);}else{if(($29573$29592&&($29532$29577[0]==="object"))){(args$30055=Array.prototype.slice.call($29532$29577,1));(all_strings$30061=args$30055.every((function($30066$30069){var t0$30077;var t1$30078;var other$30112;var v$30102;var t0$30098;var $30071$30093;var ph$30074;var y$30075;(t0$30077=$30066$30069);if(((t0$30077 instanceof Array)&&(((t1$30078=t0$30077.length)),((t1$30078===3)&&(t0$30077[0]==="array"))))){(ph$30074=t0$30077[1]);(y$30075=t0$30077[2]);}else{___match_error($30066$30069);}($30071$30093=ph$30074);if((($30071$30093 instanceof Array)&&(((t0$30098=$30071$30093.length)),((t0$30098===2)&&($30071$30093[0]==="value"))))){(v$30102=$30071$30093[1]);return true;}else{(other$30112=$30071$30093);return false;}})));(r$30062=(function(){if(all_strings$30061){(f$30119=(function($30123$30126){var t0$30131;var t1$30132;var a$30148;var b$30149;var x$30128;var y$30129;(t0$30131=$30123$30126);if(((t0$30131 instanceof Array)&&(((t1$30132=t0$30131.length)),((t1$30132===3)&&(t0$30131[0]==="array"))))){(x$30128=t0$30131[1]);(y$30129=t0$30131[2]);}else{___match_error($30123$30126);}(a$30148=it$0$29523.translate(x$30128,"expr"));(b$30149=it$0$29523.translate(y$30129,"expr"));return ((a$30148+":")+b$30149);}));return (("({"+args$30055.map(f$30119).join(","))+"})");}else{(v$30159=gensym$29028());(f$30165=(function($30169$30172){var t0$30177;var t1$30178;var a$30194;var b$30195;var x$30174;var y$30175;(t0$30177=$30169$30172);if(((t0$30177 instanceof Array)&&(((t1$30178=t0$30177.length)),((t1$30178===3)&&(t0$30177[0]==="array"))))){(x$30174=t0$30177[1]);(y$30175=t0$30177[2]);}else{___match_error($30169$30172);}(a$30194=it$0$29523.translate(x$30174,"expr"));(b$30195=it$0$29523.translate(y$30175,"expr"));return (((((v$30159+"[")+a$30194)+"]=")+b$30195)+";");}));return ((((((("(function(){"+"var ")+v$30159)+"={};")+args$30055.map(f$30165).join(""))+";return ")+v$30159)+";}())");}})());return it$0$29523.expr(r$30062,mode$29519);}else{if(($29571$29590&&((t0$29582===3)&&($29532$29577[0]==="lambda")))){(bindings$30206=$29532$29577[1]);(body$30207=$29532$29577[2]);(name$30212=(function(){if(getChecker(RegExp("^[$_a-zA-Z]*$",""))(expr$29518.name)){return (expr$29518.name+" ");}else{return "";}})());(a$30219=(((acc$30234=[])),(((temp$30240=bindings$30206)),((($length$30246=temp$30240.length)),((($index$30252=0)),(function(){$30229:for(;($index$30252<$length$30246);($index$30252++)){var x$30269;var m$30261;(m$30261=temp$30240[$index$30252]);(x$30269=m$30261);acc$30234.push(it$0$29523.translate(x$30269,"expr"));}})()))),acc$30234).join(","));(b$30220=it$0$29523.body(body$30207,"return"));return it$0$29523.expr((((((("(function"+name$30212)+"(")+a$30219)+"){")+b$30220)+"})"),mode$29519);}else{if(($29571$29590&&(($29573$29592=(t0$29582===4))&&(($29574$29593=($29532$29577[0]==="if"))&&((test$30278=$29532$29577[1]),((pos$30279=$29532$29577[2]),(((t1$29583=$29532$29577[3])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===2)&&((t1$29583[0]==="value")&&(t1$29583[1]===(void 0))))))))))))){($30294$30299=mode$29519);if(($30294$30299==="expr")){return it$0$29523.body(expr$29518,"expr");}else{(other$30311=$30294$30299);(a$30316=it$0$29523.translate(test$30278,"expr"));(b$30317=it$0$29523.translate(pos$30279,mode$29519));return (((("if("+a$30316)+"){")+b$30317)+"}");}}else{if($29574$29593){(test$30326=$29532$29577[1]);(pos$30327=$29532$29577[2]);(neg$30328=$29532$29577[3]);($30331$30336=mode$29519);if(($30331$30336==="expr")){return it$0$29523.body(expr$29518,"expr");}else{(other$30348=$30331$30336);(a$30354=it$0$29523.translate(test$30326,"expr"));(b$30355=it$0$29523.translate(pos$30327,mode$29519));(c$30356=it$0$29523.translate(neg$30328,mode$29519));return (((((("if("+a$30354)+"){")+b$30355)+"}else{")+c$30356)+"}");}}else{if(($29571$29590&&(($29573$29592=(t0$29582===3))&&(($29574$29593=($29532$29577[0]==="declare"))&&((binding$30368=$29532$29577[1]),(((t1$29583=$29532$29577[2])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===2)&&((t1$29583[0]==="value")&&(t1$29583[1]===(void 0)))))))))))){($30382$30388=mode$29519);(bridge$30384$30393=$30382$30388);if(((bridge$30384$30393==="expr")||(bridge$30384$30393==="return"))){throw "Invalid in expr ctx";}else{(other$30405=$30382$30388);(a$30409=it$0$29523.translate(binding$30368,"expr"));return (("var "+a$30409)+";");}}else{if($29574$29593){(binding$30415=$29532$29577[1]);(value$30416=$29532$29577[2]);($30419$30425=mode$29519);(bridge$30421$30430=$30419$30425);if(((bridge$30421$30430==="expr")||(bridge$30421$30430==="return"))){throw "Invalid in expr ctx";}else{(other$30442=$30419$30425);(a$30447=it$0$29523.translate(binding$30415,"expr"));(b$30448=it$0$29523.translate(value$30416,"expr"));return (((("var "+a$30447)+"=")+b$30448)+";");}}else{if(($29573$29592&&(($29574$29593=($29532$29577[0]==="assign"))&&(((t1$29583=$29532$29577[1])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===3)&&(t1$29583[0]==="send")))))))){(obj$30457=t1$29583[1]);(msg$30458=t1$29583[2]);(rhs$30459=$29532$29577[2]);(a$30476=it$0$29523.translate(obj$30457,"expr"));(b$30477=it$0$29523.translate(msg$30458,"expr"));(c$30478=it$0$29523.translate(rhs$30459,"expr"));return it$0$29523.expr((((((("("+a$30476)+"[")+b$30477)+"]=")+c$30478)+")"),mode$29519);}else{if($29574$29593){(lhs$30490=$29532$29577[1]);(rhs$30491=$29532$29577[2]);(a$30497=it$0$29523.translate(lhs$30490,"expr"));(b$30498=it$0$29523.translate(rhs$30491,"expr"));return it$0$29523.expr((((("("+a$30497)+"=")+b$30498)+")"),mode$29519);}else{if(($29571$29590&&((t0$29582===1)&&($29532$29577[0]==="multi")))){return "";}else{if(($29571$29590&&(($29573$29592=(t0$29582>=1))&&($29532$29577[0]==="multi")))){(args$30511=Array.prototype.slice.call($29532$29577,1));(isdecl$30521=(function($30525$30528){var other$30559;var variable$30548;var value$30549;var t0$30544;var $30530$30539;var ph$30533;(ph$30533=$30525$30528);($30530$30539=ph$30533);if((($30530$30539 instanceof Array)&&(((t0$30544=$30530$30539.length)),((t0$30544===3)&&($30530$30539[0]==="declare"))))){(variable$30548=$30530$30539[1]);(value$30549=$30530$30539[2]);return true;}else{(other$30559=$30530$30539);return false;}}));($30516$30564=null);$30516$30564;if((args$30511.length===1)){return it$0$29523.translate(args$30511[0],mode$29519);}else{if(((mode$29519==="expr")&&(!args$30511.some(isdecl$30521)))){(xs$30582=(((acc$30590=[])),(((temp$30596=args$30511)),((($length$30602=temp$30596.length)),((($index$30608=0)),(function(){$30585:for(;($index$30608<$length$30602);($index$30608++)){var x$30625;var m$30617;(m$30617=temp$30596[$index$30608]);(x$30625=m$30617);acc$30590.push(it$0$29523.translate(x$30625,"expr"));}})()))),acc$30590));(xs$30582=(((acc$30636=[])),(((temp$30642=xs$30582)),((($length$30648=temp$30642.length)),((($index$30654=0)),(function(){$30631:for(;($index$30654<$length$30648);($index$30654++)){var x$30671;var m$30663;(m$30663=temp$30642[$index$30654]);(x$30671=m$30663);if((x$30671!=="")){acc$30636.push(x$30671);}else{false;}}})()))),acc$30636));return (("("+xs$30582.join(","))+")");}else{return it$0$29523.body(expr$29518,mode$29519);}}}else{if(($29573$29592&&($29532$29577[0]==="splice"))){(args$30682=Array.prototype.slice.call($29532$29577,1));return it$0$29523.translate(["multi"].concat(args$30682),mode$29519);}else{if(($29571$29590&&((t0$29582===2)&&($29532$29577[0]==="variable")))){(s$30687=$29532$29577[1]);return it$0$29523.expr(it$0$29523.mangle(s$30687),mode$29519);}else{if(($29571$29590&&((t0$29582===3)&&($29532$29577[0]==="scope")))){(vars$30692=$29532$29577[1]);(body$30693=$29532$29577[2]);(decls$30698=(((acc$30706=[])),(((temp$30712=vars$30692)),((($length$30718=temp$30712.length)),((($index$30724=0)),(function(){$30701:for(;($index$30724<$length$30718);($index$30724++)){var v$30741;var m$30733;(m$30733=temp$30712[$index$30724]);(v$30741=m$30733);acc$30706.push(["declare",v$30741,["value",(void 0)]]);}})()))),acc$30706));return it$0$29523.translate(["multi"].concat(decls$30698).concat([body$30693]),mode$29519);}else{if(($29571$29590&&((t0$29582>=1)&&($29532$29577[0]==="object2")))){(args$30747=Array.prototype.slice.call($29532$29577,1));(r$30752=(((f$30757=(function($30761$30764){var t0$30769;var t1$30770;var a$30786;var b$30787;var x$30766;var y$30767;(t0$30769=$30761$30764);if(((t0$30769 instanceof Array)&&(((t1$30770=t0$30769.length)),(t1$30770===2)))){(x$30766=t0$30769[0]);(y$30767=t0$30769[1]);}else{___match_error($30761$30764);}(a$30786=it$0$29523.translate(x$30766,"expr"));(b$30787=it$0$29523.translate(y$30767,"expr"));return ((a$30786+":")+b$30787);}))),(("({"+args$30747.map(f$30757).join(","))+"})")));return it$0$29523.expr(r$30752,mode$29519);}else{if(($29571$29590&&((t0$29582===2)&&($29532$29577[0]==="js_new")))){(value$30798=$29532$29577[1]);return it$0$29523.expr((("(new "+it$0$29523.translate(value$30798,"expr"))+")"),mode$29519);}else{if(($29571$29590&&(($29573$29592=((t0$29582>=1)&&(t0$29582<=2)))&&(($29532$29577[0]==="js_break")&&(((t1$29583=(function(){if((1>=t0$29582)){return ["value",null];}else{return $29532$29577[1];}})())),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===2)&&(t1$29583[0]==="value"))))))))){(label$30803=t1$29583[1]);if((mode$29519==="expr")){throw "Invalid break in ctx";}else{return (("break"+(function(){if(label$30803){return (" "+label$30803);}else{return "";}})())+";");}}else{if(($29573$29592&&(($29532$29577[0]==="js_continue")&&(((t1$29583=(function(){if((1>=t0$29582)){return ["value",null];}else{return $29532$29577[1];}})())),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===2)&&(t1$29583[0]==="value")))))))){(label$30818=t1$29583[1]);if((mode$29519==="expr")){throw "Invalid continue in ctx";}else{return (("continue"+(function(){if(label$30818){return (" "+label$30818);}else{return "";}})())+";");}}else{if(($29571$29590&&(($29573$29592=(t0$29582===2))&&($29532$29577[0]==="js_return")))){(value$30833=$29532$29577[1]);if((mode$29519==="expr")){throw "Invalid return in ctx";}else{return (("return "+it$0$29523.translate(value$30833,"expr"))+";");}}else{if(($29573$29592&&($29532$29577[0]==="js_delete"))){(value$30838=$29532$29577[1]);if((mode$29519==="expr")){throw "Invalid delete in ctx";}else{($30841$30846=value$30838);if((($30841$30846 instanceof Array)&&(((t0$30851=$30841$30846.length)),((t0$30851===3)&&($30841$30846[0]==="send"))))){(x$30855=$30841$30846[1]);(y$30856=$30841$30846[2]);return (((("delete "+it$0$29523.translate(x$30855,"expr"))+"[")+it$0$29523.translate(y$30856,"expr"))+"];");}else{$30841$30846;throw ErrorFactory(["translate","delete"]).create("Invalid argument for delete");}}}else{if(($29573$29592&&($29532$29577[0]==="js_throw"))){(value$30869=$29532$29577[1]);if((mode$29519==="expr")){return (("function(){throw "+it$0$29523.translate(value$30869,"expr"))+";}()");}else{return (("throw "+it$0$29523.translate(value$30869,"expr"))+";");}}else{if(($29571$29590&&(($29573$29592=(t0$29582===3))&&(($29532$29577[0]==="js_label")&&(((t1$29583=$29532$29577[1])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===2)&&(t1$29583[0]==="value"))))))))){(label$30874=t1$29583[1]);(body$30875=$29532$29577[2]);($30888$30893=mode$29519);if(($30888$30893==="expr")){return it$0$29523.body(expr$29518,"expr");}else{(other$30905=$30888$30893);return ((label$30874+":")+it$0$29523.translate(body$30875,other$30905));}}else{if(($29573$29592&&($29532$29577[0]==="js_while"))){(test$30909=$29532$29577[1]);(body$30910=$29532$29577[2]);($30913$30918=mode$29519);if(($30913$30918==="expr")){return it$0$29523.body(expr$29518,"expr");}else{(other$30930=$30913$30918);(a$30935=it$0$29523.translate(test$30909,"expr"));(b$30936=it$0$29523.translate(body$30910,"stmt"));return (((("while("+a$30935)+"){")+b$30936)+"}");}}else{if(($29571$29590&&((t0$29582===5)&&($29532$29577[0]==="js_for")))){(x$30945=$29532$29577[1]);(y$30946=$29532$29577[2]);(z$30947=$29532$29577[3]);(body$30948=$29532$29577[4]);($30951$30956=mode$29519);if(($30951$30956==="expr")){return it$0$29523.body(expr$29518,"expr");}else{(other$30968=$30951$30956);(a$30975=it$0$29523.translate(x$30945,"expr"));(b$30976=it$0$29523.translate(y$30946,"expr"));(c$30977=it$0$29523.translate(z$30947,"expr"));(d$30978=it$0$29523.translate(body$30948,"stmt"));return (((((((("for("+a$30975)+";")+b$30976)+";")+c$30977)+"){")+d$30978)+"}");}}else{if(($29571$29590&&(($29573$29592=(t0$29582===4))&&($29532$29577[0]==="js_for_in")))){(x$30993=$29532$29577[1]);(y$30994=$29532$29577[2]);(body$30995=$29532$29577[3]);($30998$31003=mode$29519);if(($30998$31003==="expr")){return it$0$29523.body(expr$29518,"expr");}else{(other$31015=$30998$31003);(a$31021=it$0$29523.translate(x$30993,"expr"));(b$31022=it$0$29523.translate(y$30994,"expr"));(c$31023=it$0$29523.translate(body$30995,"stmt"));return (((((("for("+a$31021)+" in ")+b$31022)+"){")+c$31023)+"}");}}else{if(($29573$29592&&(($29532$29577[0]==="js_try")&&((attempt$31035=$29532$29577[1]),(((t1$29583=$29532$29577[2])),((t1$29583 instanceof Array)&&(((t2$29584=t1$29583.length)),((t2$29584===3)&&((t1$29583[0]==="lambda")&&(((t3$29585=t1$29583[1])),((t3$29585 instanceof Array)&&(((t4$29586=t3$29585.length)),((t4$29586===1)&&(((bridge$29568$29588=t3$29585[0])),(((bridge$29568$29588 instanceof Array)&&(((t0$31067=bridge$29568$29588.length)),((t0$31067===2)&&((bridge$29568$29588[0]==="symbol")&&((v$31036=bridge$29568$29588[1]),true)))))||((bridge$29568$29588 instanceof Array)&&(((t0$31075=bridge$29568$29588.length)),((t0$31075===2)&&((bridge$29568$29588[0]==="variable")&&((v$31036=bridge$29568$29588[1]),true)))))))))))))))))))){(body$31037=t1$29583[2]);(finally$31038=$29532$29577[3]);(r$31088=((($31091$31096=mode$29519)),(function(){if(($31091$31096==="expr")){return it$0$29523.body(expr$29518,"expr");}else{(other$31108=$31091$31096);(a$31113=it$0$29523.translate(attempt$31035,"stmt"));(b$31114=it$0$29523.translate(body$31037,"stmt"));return (((((("try{"+a$31113)+"}catch(")+v$31036)+"){")+b$31114)+"}");}})()));($31085$31124=finally$31038);if((($31085$31124 instanceof Array)&&(((t0$31129=$31085$31124.length)),((t0$31129===1)&&($31085$31124[0]==="void"))))){return r$31088;}else{(other$31142=$31085$31124);return (((r$31088+"finally{")+it$0$29523.translate(other$31142,"stmt"))+"}");}}else{if(($29571$29590&&((t0$29582===2)&&($29532$29577[0]==="raw")))){(x$31146=$29532$29577[1]);return x$31146;}else{(other$31151=$29532$29577);throw other$31151;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}));__amp____colon__(Translator$29034,__amp____colon__(((accum$31156=({})),((accum$31156["::name"]="Translator"),accum$31156)),((accum$31160=({})),((accum$31160["::egclass"]=true),accum$31160))));Translator$29034;(translate$29035=(function(expr$31167,mode$31168){var tr$31173;var t$31174;(tr$31173=Translator$29034());(t$31174=tr$31173.translate(expr$31167,mode$31168));return (tr$31173.dump_store()+t$31174);}));(exports["Translator"]=Translator$29034);(exports["translate"]=translate$29035);
