var $19136=function(type$19138){var f$19141;(f$19141=type$19138["::check"]);;if((f$19141===(void 0))){return function(value$19146){return (value$19146 instanceof type$19138);};}else{return function(value$19149){return f$19141.call(type$19138,value$19149);};}};
var $19151=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $19152=function($19153$19155){var ph$19159;(ph$19159=$19153$19155);;var $19157$19164;($19157$19164=ph$19159);;var bridge$19158$19169;var x$19173;(bridge$19158$19169=$19157$19164);if((((typeof(bridge$19158$19169)==="string")&&((x$19173=bridge$19158$19169),true))||((typeof(bridge$19158$19169)==="number")&&((x$19173=bridge$19158$19169),true)))){return ["value",x$19173];}else{var other$19180;(other$19180=$19157$19164);return other$19180["::serialize_ast"]();}};
var send$18999;(send$18999=function(obj$19004,$19002$19005){var ph$19009;var msg$19010;var t0$19012;(t0$19012=$19002$19005);(msg$19010=t0$19012);(ph$19009=t0$19012);;var $19007$19016;($19007$19016=ph$19009);;var bridge$19008$19021;(bridge$19008$19021=$19007$19016);if(((typeof(bridge$19008$19021)==="string")||(typeof(bridge$19008$19021)==="number"))){return obj$19004[msg$19010];}else{var other$19029;(other$19029=$19007$19016);return obj$19004["::send"](msg$19010);}});;(Array[":::project"]=function($19032$19034){var ph$19037;var value$19038;var t0$19040;(t0$19040=$19032$19034);(value$19038=t0$19040);(ph$19037=t0$19040);;var $19036$19044;($19036$19044=ph$19037);;if($19136(Array)($19036$19044)){return [true,value$19038];}else{$19036$19044;return [true,[value$19038]];}});(Array.prototype["::check"]=function(value$19058){if((value$19058 instanceof Array)){var i$19063;(i$19063=0);;$19061:for(;(i$19063<this.length);(i$19063++)){if(($19151(this,i$19063)!==$19151(value$19058,i$19063))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$19072){if((value$19072 instanceof Array)){var i$19077;(i$19077=0);;$19075:for(;(i$19077<this.length);(i$19077++)){if(($19151(this,i$19077)!==$19151(value$19072,i$19077))){return [true,[value$19072]];}}return [true,value$19072.slice(this.length)];}else{return [true,[value$19072]];}});(Array.prototype[":::deconstruct"]=function(value$19086){return [true,value$19086.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($19152));});(RegExp.prototype["::check"]=function(value$19091){return value$19091.match(this);});(RegExp.prototype[":::project"]=function(value$19094){var $19096$19098;($19096$19098=value$19094.match(this));;var m$19106;if(($19096$19098===null)){(m$19106=$19096$19098);return [false,null];}else{var m$19111;(m$19111=$19096$19098);return [true,m$19111];}});(RegExp.prototype[":::deconstruct"]=function(value$19114){var $19116$19118;($19116$19118=value$19114.match(this));;var m$19126;if(($19116$19118===null)){(m$19126=$19116$19118);return [false,null];}else{var m$19131;(m$19131=$19116$19118);return [true,m$19131];}});(Function.prototype["::send"]=function(args$19134){return this.apply(this,args$19134);});
var $20734=function(dest$20736,values$20737){var k$20742;(k$20742=null);$20740:for(k$20742 in values$20737){if(values$20737.hasOwnProperty(k$20742)){(dest$20736[k$20742]=values$20737[k$20742]);}}return dest$20736;};
var $20628=function(){var $20629$20631;($20629$20631=function(tags$20635){var it$0$20638;(it$0$20638=function(){if((!$19136($20629$20631)(this))){return Object.create($20629$20631.prototype);}else{return this;}}());;(it$0$20638["tags"]=tags$20635);return it$0$20638;});;($20629$20631.prototype["create"]=function(){var $20647$20649;($20647$20649=arguments);;var t0$20654;var message$20658;var args$20659;(t0$20654=$20647$20649.length);if((t0$20654>=0)){(message$20658=function(){if((0>=t0$20654)){return "";}else{return $20647$20649[0];}}());(args$20659=Array.prototype.slice.call($20647$20649,1));var it$0$20663;(it$0$20663=this);;var e$20668;(e$20668=Error(message$20658));;(e$20668["::tags"]=it$0$20663.tags);(e$20668["args"]=args$20659);(e$20668["name"]=["E"].concat(it$0$20663.tags).join("."));return e$20668;}else{$20615($20647$20649);}});($20629$20631.prototype["::check"]=function(e$20677){var it$0$20680;(it$0$20680=this);;var tags$20685;if(((!e$20677)||(!$19136(Error)(e$20677)))){return false;}(tags$20685=(e$20677["::tags"]||[]));;var temp$20693;(temp$20693=it$0$20680.tags);;var len$20698;(len$20698=temp$20693.length);;var i$20703;(i$20703=0);;$20686:for(;(i$20703<len$20698);(i$20703++)){var m$20711;(m$20711=temp$20693[i$20703]);;var tag$20719;(tag$20719=m$20711);if((tags$20685.indexOf(tag$20719)===(-1))){return false;}else{false;;}}return true;});($20629$20631.prototype["::deconstruct"]=function(e$20727){var it$0$20730;(it$0$20730=this);;return e$20727.args;});$20734($20629$20631,({}));return $20629$20631;}();
var $20615=function(value$20617,url$20618,start$20619,end$20620){var err$20623;(err$20623=$20628(["match"]).create("Could not find a match for value",({"value":value$20617})));;if(url$20618){(err$20623["location"]=["location",url$20618,start$20619,end$20620]);}throw err$20623;};
var $20746=function($20747$20749,key$20750){var ph$20754;(ph$20754=$20747$20749);;var $20752$20759;($20752$20759=ph$20754);;var bridge$20753$20764;(bridge$20753$20764=$20752$20759);if(((bridge$20753$20764===null)||(bridge$20753$20764===(void 0)))){return false;}else{var x$20772;if((typeof($20752$20759)==="string")){(x$20772=$20752$20759);return (key$20750 in String.prototype);}else{var x$20777;if((typeof($20752$20759)==="number")){(x$20777=$20752$20759);return (key$20750 in Number.prototype);}else{var x$20782;(x$20782=$20752$20759);return (key$20750 in x$20782);}}}};var $19183$19185;var items$19186;var gensym$19187;var $19184$19188;var __lt____gt__$19189;var aslist$19190;var js_op_table2$19191;var js_op_table$19192;var Translator$19193;var translate$19194;($19183$19185=require("./util"));;(items$19186=$19183$19185.items);;(gensym$19187=$19183$19185.gensym);;($19184$19188=require("./pp"));;(__lt____gt__$19189=$19184$19188["<>"]);;(aslist$19190=function($19212$19214){var other$19237;var args$19231;var t0$19227;var $19216$19222;var ph$19217;(ph$19217=$19212$19214);;($19216$19222=ph$19217);;if((($19216$19222 instanceof Array)&&((t0$19227=$19216$19222.length),((t0$19227>=1)&&($19216$19222[0]==="multi"))))){(args$19231=Array.prototype.slice.call($19216$19222,1));return args$19231;}else{(other$19237=$19216$19222);return [other$19237];}});;(js_op_table2$19191=({"+":"+","-":"-","*":"*","/":"/","mod":"%","&.":"&","|.":"|","^.":"^","~":"~","and":"&&","or":"||","not":"!","==":"===","!=":"!==","===":"===","!==":"!==","<":"<",">":">","<=":"<=",">=":">=","<<":"<<",">>":">>",">>>":">>>","in":" in ","instanceof":" instanceof ","++":"++","--":"--"}));;(js_op_table$19192=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"}));;(Translator$19193=function(){var it$0$19264;var prelude$19260;var t0$19256;var $19249$19251;($19249$19251=arguments);;(t0$19256=$19249$19251.length);if(((t0$19256>=0)&&(t0$19256<=1))){(prelude$19260=function(){if((0>=t0$19256)){return null;}else{return $19249$19251[0];}}());(it$0$19264=function(){if((!$19136(Translator$19193)(this))){return Object.create(Translator$19193.prototype);}else{return this;}}());;(it$0$19264["cache"]=({}));(it$0$19264["prepend"]=[]);if(prelude$19260){it$0$19264.prepend.push(it$0$19264.translate($19152(prelude$19260),"stmt"));}return it$0$19264;}else{$20615($19249$19251);}});;(Translator$19193.prototype["register_value"]=function(v$19277,id$19278){var temp$19298;var name$19304;var $19281$19287;var it$0$19282;(it$0$19282=this);;($19281$19287=$19151(it$0$19282.cache,id$19278));;if(($19281$19287===(void 0))){(temp$19298=["symbol",gensym$19187()]);;(it$0$19282.cache[id$19278]=temp$19298);it$0$19282.prepend.push(it$0$19282.translate(["declare",temp$19298,$19152(v$19277)],"stmt"));return temp$19298;}else{(name$19304=$19281$19287);return name$19304;}});(Translator$19193.prototype["register_raw"]=function(raw$19309,id$19310){var temp$19330;var name$19336;var $19313$19319;var it$0$19314;(it$0$19314=this);;($19313$19319=$19151(it$0$19314.cache,id$19310));;if(($19313$19319===(void 0))){(temp$19330=["symbol",gensym$19187()]);;(it$0$19314.cache[id$19310]=temp$19330);it$0$19314.prepend.push(it$0$19314.translate(["declare",temp$19330,["raw",raw$19309]],"stmt"));return temp$19330;}else{(name$19336=$19313$19319);return name$19336;}});(Translator$19193.prototype["dump_store"]=function(){var rval$19348;var it$0$19343;(it$0$19343=this);;(rval$19348=it$0$19343.prepend.join("\n"));;(it$0$19343["prepend"]=[]);return rval$19348;});(Translator$19193.prototype["mangle"]=function(name$19355){var i$19373;var tr$19364;var r$19365;var it$0$19358;(it$0$19358=this);;(tr$19364=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"}));;(r$19365=[]);;(i$19373=0);;$19363:for(;(i$19373<name$19355.length);(++i$19373)){var c$19381;(c$19381=$19151(name$19355,i$19373));;r$19365.push(($19151(tr$19364,c$19381)||c$19381));}return r$19365.join("");});(Translator$19193.prototype["body"]=function(b$19388,mode$19389){var x$19421;var stmts$19430;var ret$19431;var other$19444;var $19397$19410;var orig$19398;var trst$19399;var it$0$19392;(it$0$19392=this);;(orig$19398=b$19388);;(b$19388=aslist$19190(b$19388));(trst$19399=function(stmt$19406){return it$0$19392.translate(stmt$19406,"stmt");});;($19397$19410=mode$19389);;if(($19397$19410==="expr")){(x$19421=["send",["lambda",[],orig$19398],["array"]]);;return it$0$19392.translate(x$19421,mode$19389);}else{if(($19397$19410==="return")){(stmts$19430=b$19388.slice(0,(-1)));;(ret$19431=$19151(b$19388,(b$19388.length-1)));;return (stmts$19430.map(trst$19399).join("")+it$0$19392.translate(ret$19431,"return"));}else{if(($19397$19410==="stmt")){return b$19388.map(trst$19399).join("");}else{(other$19444=$19397$19410);throw $20628(["syntax","mode"]).create("Unknown mode",({"mode":mode$19389}));}}}});(Translator$19193.prototype["expr"]=function(x$19449,mode$19450){var other$19479;var $19453$19459;var it$0$19454;(it$0$19454=this);;($19453$19459=mode$19450);;if(($19453$19459==="expr")){return x$19449;}else{if(($19453$19459==="stmt")){return (x$19449+";");}else{if(($19453$19459==="return")){return (("return "+x$19449)+";");}else{(other$19479=$19453$19459);throw "OopsI";}}}});(Translator$19193.prototype["op"]=function(op$19484,a$19485,b$19486){var $19498$19511;var $19499$19512;var $19500$19513;var t0$19507;var t1$19508;var t2$19509;var $19497$19502;var e$19494;var it$0$19489;(it$0$19489=this);;(e$19494=((($19497$19502=[a$19485,b$19486])),function(){if((($19498$19511=($19497$19502 instanceof Array))&&((t0$19507=$19497$19502.length),(($19500$19513=(t0$19507===2))&&((t1$19508=$19497$19502[0]),((t1$19508 instanceof Array)&&((t2$19509=t1$19508.length),((t2$19509===1)&&(t1$19508[0]==="void"))))))))){$19497$19502[1];return (op$19484+it$0$19489.translate(b$19486,"expr"));}else{if(($19500$19513&&($19497$19502[0],((t1$19508=$19497$19502[1]),((t1$19508 instanceof Array)&&((t2$19509=t1$19508.length),((t2$19509===1)&&(t1$19508[0]==="void")))))))){return (it$0$19489.translate(a$19485,"expr")+op$19484);}else{$19497$19502;return ((it$0$19489.translate(a$19485,"expr")+op$19484)+it$0$19489.translate(b$19486,"expr"));}}}()));;return (("("+e$19494)+")");});(Translator$19193.prototype["translate"]=function(expr$19535,mode$19536){var repl$19606;var it$0$19637;var it$0$19632;var it$0$19627;var it$0$19622;var bridge$19592$19648;var bridge$19591$19645;var other$19659;var id$19653;var bridge$19590$19599;var $19589$19594;var r$19586;var t0$19678;var t0$19681;var trf$19687;var trmsg$19688;var trf$19719;var trmsg$19720;var trf$19732;var trmsg$19733;var otherwise$19729;var $19706$19708;var x$19776;var x$19770;var $19754$19765;var $19755$19766;var $19756$19767;var t0$19763;var $19753$19758;var i$19808;var len$19803;var temp$19798;var acc$19793;var trf$19784;var trargs$19785;var op$19750;var code$19840;var code$19848;var t0$19836;var t1$19837;var trf$19853;var trmsg$19854;var codevar$19834;var f$19871;var r$19867;var f$19889;var r$19885;var i$19946;var len$19941;var temp$19936;var acc$19931;var a$19923;var b$19924;var a$19995;var b$19996;var other$19992;var $19978$19980;var a$20027;var b$20028;var c$20029;var other$20024;var $20010$20012;var a$20066;var other$20063;var bridge$20048$20055;var $20047$20050;var a$20095;var b$20096;var other$20092;var bridge$20077$20084;var $20076$20079;var a$20113;var b$20114;var c$20115;var a$20132;var b$20133;var i$20221;var len$20216;var temp$20211;var acc$20206;var i$20257;var len$20252;var temp$20247;var acc$20242;var xs$20201;var $20151$20191;var $20150$20185;var isdecl$20152;var i$20318;var len$20313;var temp$20308;var acc$20303;var decls$20298;var f$20347;var r$20343;var other$20430;var $20416$20418;var a$20455;var b$20456;var other$20452;var $20438$20440;var a$20488;var b$20489;var c$20490;var d$20491;var other$20485;var $20471$20473;var a$20528;var b$20529;var c$20530;var other$20525;var $20511$20513;var t0$20553;var t0$20557;var a$20581;var b$20582;var other$20578;var $20564$20566;var other$20596;var x$20591;var attempt$20542;var v$20543;var body$20544;var x$20506;var y$20507;var body$20508;var x$20465;var y$20466;var z$20467;var body$20468;var test$20434;var body$20435;var label$20410;var body$20411;var value$20405;var value$20400;var value$20395;var label$20388;var label$20381;var value$20376;var args$20339;var vars$20293;var body$20294;var s$20288;var args$20283;var args$20146;var lhs$20127;var rhs$20128;var obj$20105;var msg$20106;var rhs$20107;var binding$20072;var value$20073;var binding$20041;var test$20005;var pos$20006;var neg$20007;var test$19970;var pos$19971;var bindings$19918;var body$19919;var args$19881;var args$19863;var f$19829;var msg$19830;var f$19742;var args$19743;var f$19697;var msg$19698;var s$19699;var f$19673;var msg$19674;var f$19664;var v$19582;var s$19572;var $19542$19566;var $19543$19567;var $19544$19568;var $19545$19569;var t0$19556;var t1$19557;var t2$19558;var t3$19559;var t4$19560;var bridge$19540$19561;var bridge$19541$19562;var t5$19563;var t6$19564;var $19539$19551;var it$0$19546;(it$0$19546=this);;($19539$19551=expr$19535);;if((($19542$19566=($19539$19551 instanceof Array))&&((t0$19556=$19539$19551.length),((t0$19556===2)&&($19539$19551[0]==="symbol"))))){(s$19572=$19539$19551[1]);return it$0$19546.expr(it$0$19546.mangle(s$19572),mode$19536);}else{if(($19542$19566&&((t0$19556===1)&&($19539$19551[0]==="void")))){return it$0$19546.expr("null",mode$19536);}else{if(($19542$19566&&((t0$19556===2)&&($19539$19551[0]==="value")))){(v$19582=$19539$19551[1]);(r$19586=((($19589$19594=v$19582)),function(){if((typeof($19589$19594)==="string")){(repl$19606=({"\"":"\\\"","\n":"\\n","\\":"\\\\"}));;(v$19582=v$19582.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m$19611){return $19151(repl$19606,m$19611);}));return (("\""+v$19582)+"\"");}else{if(($19589$19594===(void 0))){return "(void 0)";}else{if($19136(RegExp)($19589$19594)){(it$0$19622=String(v$19582));;(it$0$19627=it$0$19622.slice(1,(-1)));;(it$0$19632=it$0$19627.replace(RegExp("/","g"),"\\/"));;(it$0$19637=it$0$19632.replace(RegExp("\n","g"),"\\n"));;return "/".concat(it$0$19637).concat("/");}else{(bridge$19590$19599=$19589$19594);if((((bridge$19591$19645=bridge$19590$19599),(((bridge$19592$19648=bridge$19591$19645),((typeof(bridge$19592$19648)==="number")||(bridge$19592$19648===true)))||(bridge$19591$19645===false)))||(bridge$19590$19599===null))){return String(v$19582);}else{if(($20746($19589$19594,"::id")&&((id$19653=$19589$19594["::id"]),id$19653))){return it$0$19546.translate(it$0$19546.register_value(v$19582,id$19653),mode$19536);}else{(other$19659=$19589$19594);throw $20628(["cannot_serialize"]).create("Cannot serialize value",({"value":v$19582}));}}}}}}()));;return it$0$19546.expr(r$19586,mode$19536);}else{if(($19542$19566&&(($19544$19568=(t0$19556===3))&&(($19545$19569=($19539$19551[0]==="send"))&&((t1$19557=$19539$19551[1]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===2)&&((t1$19557[0]==="variable")&&((t1$19557[1]==="___node")&&((t3$19559=$19539$19551[2]),((t3$19559 instanceof Array)&&((t4$19560=t3$19559.length),((t4$19560===2)&&(t3$19559[0]==="value"))))))))))))))){(f$19664=t3$19559[1]);return f$19664;}else{if(($19545$19569&&((bridge$19540$19561=$19539$19551[1]),((((bridge$19540$19561 instanceof Array)&&((t0$19678=bridge$19540$19561.length),((t0$19678===2)&&((bridge$19540$19561[0]==="symbol")&&(bridge$19540$19561[1]==="___js_fetch")))))||((bridge$19540$19561 instanceof Array)&&((t0$19681=bridge$19540$19561.length),((t0$19681===2)&&((bridge$19540$19561[0]==="variable")&&(bridge$19540$19561[1]==="___js_fetch"))))))&&((t1$19557=$19539$19551[2]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===3)&&(t1$19557[0]==="array"))))))))){(f$19673=t1$19557[1]);(msg$19674=t1$19557[2]);(trf$19687=it$0$19546.translate(f$19673,"expr"));;(trmsg$19688=it$0$19546.translate(msg$19674,"expr"));;return it$0$19546.expr((((trf$19687+"[")+trmsg$19688)+"]"),mode$19536);}else{if(($19545$19569&&((f$19697=$19539$19551[1]),((t1$19557=$19539$19551[2]),((msg$19698=t1$19557),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===2)&&(t1$19557[0]==="value"))))))))){(s$19699=t1$19557[1]);($19706$19708=null);;$19706$19708;if(((typeof(s$19699)==="string")&&s$19699.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){(trf$19719=it$0$19546.translate(f$19697,"expr"));;(trmsg$19720=it$0$19546.translate(["symbol",s$19699],"expr"));;return it$0$19546.expr(((trf$19719+".")+trmsg$19720),mode$19536);}else{(otherwise$19729=$19706$19708);(trf$19732=it$0$19546.translate(f$19697,"expr"));;(trmsg$19733=it$0$19546.translate(msg$19698,"expr"));;return it$0$19546.expr((((trf$19732+"[")+trmsg$19733)+"]"),mode$19536);}}else{if(($19545$19569&&((f$19742=$19539$19551[1]),((t1$19557=$19539$19551[2]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558>=1)&&(t1$19557[0]==="array")))))))){(args$19743=Array.prototype.slice.call(t1$19557,1));(op$19750=((($19753$19758=f$19742)),function(){if((($19754$19765=($19753$19758 instanceof Array))&&((t0$19763=$19753$19758.length),(($19756$19767=(t0$19763===2))&&($19753$19758[0]==="symbol"))))){(x$19770=$19753$19758[1]);return $19151(js_op_table$19192,x$19770);}else{if(($19756$19767&&($19753$19758[0]==="variable"))){(x$19776=$19753$19758[1]);return $19151(js_op_table2$19191,x$19776);}else{$19753$19758;return null;}}}()));;if(op$19750){return it$0$19546.expr(it$0$19546.op(op$19750,args$19743[0],args$19743[1]),mode$19536);}else{(trf$19784=it$0$19546.translate(f$19742,"expr"));;(trargs$19785=(((acc$19793=[])),(((temp$19798=args$19743)),(((len$19803=temp$19798.length)),(((i$19808=0)),function(){$19791:for(;(i$19808<len$19803);(i$19808++)){var x$19824;var m$19816;(m$19816=temp$19798[i$19808]);;(x$19824=m$19816);acc$19793.push(it$0$19546.translate(x$19824,"expr"));}}()))),acc$19793));;return it$0$19546.expr((((trf$19784+"(")+trargs$19785.join(","))+")"),mode$19536);}}else{if($19545$19569){(f$19829=$19539$19551[1]);(msg$19830=$19539$19551[2]);(t0$19836=(((code$19840="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$19546.register_raw(code$19840,"~send")));if(((t0$19836 instanceof Array)&&((t1$19837=t0$19836.length),((t1$19837===2)&&(t0$19836[0]==="symbol"))))){(codevar$19834=t0$19836[1]);;}else{$20615((((code$19848="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$19546.register_raw(code$19848,"~send")),"/home/olivier/git/earl-grey/src/translate-js.eg",6875,7052);}(trf$19853=it$0$19546.translate(f$19829,"expr"));;(trmsg$19854=it$0$19546.translate(msg$19830,"expr"));;return it$0$19546.expr((((((codevar$19834+"(")+trf$19853)+",")+trmsg$19854)+")"),mode$19536);}else{if(($19542$19566&&(($19544$19568=(t0$19556>=1))&&($19539$19551[0]==="array")))){(args$19863=Array.prototype.slice.call($19539$19551,1));(r$19867=(((f$19871=function(x$19875){return it$0$19546.translate(x$19875,"expr");})),(("["+args$19863.map(f$19871).join(","))+"]")));;return it$0$19546.expr(r$19867,mode$19536);}else{if(($19544$19568&&($19539$19551[0]==="object"))){(args$19881=Array.prototype.slice.call($19539$19551,1));(r$19885=(((f$19889=function($19892$19894){var t0$19899;var t1$19900;var a$19906;var b$19907;var x$19896;var y$19897;(t0$19899=$19892$19894);if(((t0$19899 instanceof Array)&&((t1$19900=t0$19899.length),((t1$19900===3)&&(t0$19899[0]==="array"))))){(x$19896=t0$19899[1]);(y$19897=t0$19899[2]);;}else{$20615($19892$19894);}(a$19906=it$0$19546.translate(x$19896,"expr"));;(b$19907=it$0$19546.translate(y$19897,"expr"));;return ((a$19906+":")+b$19907);})),(("({"+args$19881.map(f$19889).join(","))+"})")));;return it$0$19546.expr(r$19885,mode$19536);}else{if(($19542$19566&&((t0$19556===3)&&($19539$19551[0]==="lambda")))){(bindings$19918=$19539$19551[1]);(body$19919=$19539$19551[2]);(a$19923=(((acc$19931=[])),(((temp$19936=bindings$19918)),(((len$19941=temp$19936.length)),(((i$19946=0)),function(){$19929:for(;(i$19946<len$19941);(i$19946++)){var x$19962;var m$19954;(m$19954=temp$19936[i$19946]);;(x$19962=m$19954);acc$19931.push(it$0$19546.translate(x$19962,"expr"));}}()))),acc$19931).join(","));;(b$19924=it$0$19546.body(body$19919,"return"));;return it$0$19546.expr((((("function("+a$19923)+"){")+b$19924)+"}"),mode$19536);}else{if(($19542$19566&&(($19544$19568=(t0$19556===4))&&(($19545$19569=($19539$19551[0]==="if"))&&((test$19970=$19539$19551[1]),((pos$19971=$19539$19551[2]),((t1$19557=$19539$19551[3]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===2)&&((t1$19557[0]==="value")&&(t1$19557[1]===(void 0))))))))))))){($19978$19980=mode$19536);;if(($19978$19980==="expr")){return it$0$19546.body(expr$19535,"expr");}else{(other$19992=$19978$19980);(a$19995=it$0$19546.translate(test$19970,"expr"));;(b$19996=it$0$19546.translate(pos$19971,mode$19536));;return (((("if("+a$19995)+"){")+b$19996)+"}");}}else{if($19545$19569){(test$20005=$19539$19551[1]);(pos$20006=$19539$19551[2]);(neg$20007=$19539$19551[3]);($20010$20012=mode$19536);;if(($20010$20012==="expr")){return it$0$19546.body(expr$19535,"expr");}else{(other$20024=$20010$20012);(a$20027=it$0$19546.translate(test$20005,"expr"));;(b$20028=it$0$19546.translate(pos$20006,mode$19536));;(c$20029=it$0$19546.translate(neg$20007,mode$19536));;return (((((("if("+a$20027)+"){")+b$20028)+"}else{")+c$20029)+"}");}}else{if(($19542$19566&&(($19544$19568=(t0$19556===3))&&(($19545$19569=($19539$19551[0]==="declare"))&&((binding$20041=$19539$19551[1]),((t1$19557=$19539$19551[2]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===2)&&((t1$19557[0]==="value")&&(t1$19557[1]===(void 0)))))))))))){($20047$20050=mode$19536);;(bridge$20048$20055=$20047$20050);if(((bridge$20048$20055==="expr")||(bridge$20048$20055==="return"))){throw "Invalid in expr ctx";}else{(other$20063=$20047$20050);(a$20066=it$0$19546.translate(binding$20041,"expr"));;return (("var "+a$20066)+";");}}else{if($19545$19569){(binding$20072=$19539$19551[1]);(value$20073=$19539$19551[2]);($20076$20079=mode$19536);;(bridge$20077$20084=$20076$20079);if(((bridge$20077$20084==="expr")||(bridge$20077$20084==="return"))){throw "Invalid in expr ctx";}else{(other$20092=$20076$20079);(a$20095=it$0$19546.translate(binding$20072,"expr"));;(b$20096=it$0$19546.translate(value$20073,"expr"));;return (((("var "+a$20095)+"=")+b$20096)+";");}}else{if(($19544$19568&&(($19545$19569=($19539$19551[0]==="assign"))&&((t1$19557=$19539$19551[1]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===3)&&(t1$19557[0]==="send")))))))){(obj$20105=t1$19557[1]);(msg$20106=t1$19557[2]);(rhs$20107=$19539$19551[2]);(a$20113=it$0$19546.translate(obj$20105,"expr"));;(b$20114=it$0$19546.translate(msg$20106,"expr"));;(c$20115=it$0$19546.translate(rhs$20107,"expr"));;return it$0$19546.expr((((((("("+a$20113)+"[")+b$20114)+"]=")+c$20115)+")"),mode$19536);}else{if($19545$19569){(lhs$20127=$19539$19551[1]);(rhs$20128=$19539$19551[2]);(a$20132=it$0$19546.translate(lhs$20127,"expr"));;(b$20133=it$0$19546.translate(rhs$20128,"expr"));;return it$0$19546.expr((((("("+a$20132)+"=")+b$20133)+")"),mode$19536);}else{if(($19542$19566&&((t0$19556===1)&&($19539$19551[0]==="multi")))){if((mode$19536==="stmt")){return ";";}else{return "";}}else{if(($19542$19566&&(($19544$19568=(t0$19556>=1))&&($19539$19551[0]==="multi")))){(args$20146=Array.prototype.slice.call($19539$19551,1));(isdecl$20152=function($20155$20157){var other$20181;var variable$20174;var value$20175;var t0$20170;var $20159$20165;var ph$20160;(ph$20160=$20155$20157);;($20159$20165=ph$20160);;if((($20159$20165 instanceof Array)&&((t0$20170=$20159$20165.length),((t0$20170===3)&&($20159$20165[0]==="declare"))))){(variable$20174=$20159$20165[1]);(value$20175=$20159$20165[2]);return true;}else{(other$20181=$20159$20165);return false;}});;($20150$20185=null);;$20150$20185;if((args$20146.length===1)){return it$0$19546.translate(args$20146[0],mode$19536);}else{if(((mode$19536==="expr")&&(!args$20146.some(isdecl$20152)))){(xs$20201=(((acc$20206=[])),(((temp$20211=args$20146)),(((len$20216=temp$20211.length)),(((i$20221=0)),function(){$20204:for(;(i$20221<len$20216);(i$20221++)){var x$20237;var m$20229;(m$20229=temp$20211[i$20221]);;(x$20237=m$20229);acc$20206.push(it$0$19546.translate(x$20237,"expr"));}}()))),acc$20206));;(xs$20201=(((acc$20242=[])),(((temp$20247=xs$20201)),(((len$20252=temp$20247.length)),(((i$20257=0)),function(){$20240:for(;(i$20257<len$20252);(i$20257++)){var x$20273;var m$20265;(m$20265=temp$20247[i$20257]);;(x$20273=m$20265);if((x$20273!=="")){acc$20242.push(x$20273);}else{false;;}}}()))),acc$20242));return (("("+xs$20201.join(","))+")");}else{return it$0$19546.body(expr$19535,mode$19536);}}}else{if(($19544$19568&&($19539$19551[0]==="splice"))){(args$20283=Array.prototype.slice.call($19539$19551,1));return it$0$19546.translate(["multi"].concat(args$20283),mode$19536);}else{if(($19542$19566&&((t0$19556===2)&&($19539$19551[0]==="variable")))){(s$20288=$19539$19551[1]);return it$0$19546.expr(it$0$19546.mangle(s$20288),mode$19536);}else{if(($19542$19566&&((t0$19556===3)&&($19539$19551[0]==="scope")))){(vars$20293=$19539$19551[1]);(body$20294=$19539$19551[2]);(decls$20298=(((acc$20303=[])),(((temp$20308=vars$20293)),(((len$20313=temp$20308.length)),(((i$20318=0)),function(){$20301:for(;(i$20318<len$20313);(i$20318++)){var v$20334;var m$20326;(m$20326=temp$20308[i$20318]);;(v$20334=m$20326);acc$20303.push(["declare",v$20334,["value",(void 0)]]);}}()))),acc$20303));;return it$0$19546.translate(["multi"].concat(decls$20298).concat([body$20294]),mode$19536);}else{if(($19542$19566&&((t0$19556>=1)&&($19539$19551[0]==="object2")))){(args$20339=Array.prototype.slice.call($19539$19551,1));(r$20343=(((f$20347=function($20350$20352){var t0$20357;var t1$20358;var a$20364;var b$20365;var x$20354;var y$20355;(t0$20357=$20350$20352);if(((t0$20357 instanceof Array)&&((t1$20358=t0$20357.length),(t1$20358===2)))){(x$20354=t0$20357[0]);(y$20355=t0$20357[1]);;}else{$20615($20350$20352);}(a$20364=it$0$19546.translate(x$20354,"expr"));;(b$20365=it$0$19546.translate(y$20355,"expr"));;return ((a$20364+":")+b$20365);})),(("({"+args$20339.map(f$20347).join(","))+"})")));;return it$0$19546.expr(r$20343,mode$19536);}else{if(($19542$19566&&((t0$19556===2)&&($19539$19551[0]==="js_new")))){(value$20376=$19539$19551[1]);return it$0$19546.expr((("(new "+it$0$19546.translate(value$20376,"expr"))+")"),mode$19536);}else{if(($19542$19566&&(($19544$19568=((t0$19556>=1)&&(t0$19556<=2)))&&(($19539$19551[0]==="js_break")&&((t1$19557=function(){if((1>=t0$19556)){return ["value",null];}else{return $19539$19551[1];}}()),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===2)&&(t1$19557[0]==="value"))))))))){(label$20381=t1$19557[1]);if((mode$19536==="expr")){throw "Invalid break in ctx";}else{return (("break"+function(){if(label$20381){return (" "+label$20381);}else{return "";}}())+";");}}else{if(($19544$19568&&(($19539$19551[0]==="js_continue")&&((t1$19557=function(){if((1>=t0$19556)){return ["value",null];}else{return $19539$19551[1];}}()),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===2)&&(t1$19557[0]==="value")))))))){(label$20388=t1$19557[1]);if((mode$19536==="expr")){throw "Invalid continue in ctx";}else{return (("continue"+function(){if(label$20388){return (" "+label$20388);}else{return "";}}())+";");}}else{if(($19542$19566&&(($19544$19568=(t0$19556===2))&&($19539$19551[0]==="js_return")))){(value$20395=$19539$19551[1]);if((mode$19536==="expr")){throw "Invalid return in ctx";}else{return (("return "+it$0$19546.translate(value$20395,"expr"))+";");}}else{if(($19544$19568&&($19539$19551[0]==="js_delete"))){(value$20400=$19539$19551[1]);if((mode$19536==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+it$0$19546.translate(value$20400,"expr"))+";");}}else{if(($19544$19568&&($19539$19551[0]==="js_throw"))){(value$20405=$19539$19551[1]);if((mode$19536==="expr")){return (("function(){throw "+it$0$19546.translate(value$20405,"expr"))+";}()");}else{return (("throw "+it$0$19546.translate(value$20405,"expr"))+";");}}else{if(($19542$19566&&(($19544$19568=(t0$19556===3))&&(($19539$19551[0]==="js_label")&&((t1$19557=$19539$19551[1]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===2)&&(t1$19557[0]==="value"))))))))){(label$20410=t1$19557[1]);(body$20411=$19539$19551[2]);($20416$20418=mode$19536);;if(($20416$20418==="expr")){return it$0$19546.body(expr$19535,"expr");}else{(other$20430=$20416$20418);return ((label$20410+":")+it$0$19546.translate(body$20411,other$20430));}}else{if(($19544$19568&&($19539$19551[0]==="js_while"))){(test$20434=$19539$19551[1]);(body$20435=$19539$19551[2]);($20438$20440=mode$19536);;if(($20438$20440==="expr")){return it$0$19546.body(expr$19535,"expr");}else{(other$20452=$20438$20440);(a$20455=it$0$19546.translate(test$20434,"expr"));;(b$20456=it$0$19546.translate(body$20435,"stmt"));;return (((("while("+a$20455)+"){")+b$20456)+"}");}}else{if(($19542$19566&&((t0$19556===5)&&($19539$19551[0]==="js_for")))){(x$20465=$19539$19551[1]);(y$20466=$19539$19551[2]);(z$20467=$19539$19551[3]);(body$20468=$19539$19551[4]);($20471$20473=mode$19536);;if(($20471$20473==="expr")){return it$0$19546.body(expr$19535,"expr");}else{(other$20485=$20471$20473);(a$20488=it$0$19546.translate(x$20465,"stmt"));;(b$20489=it$0$19546.translate(y$20466,"stmt"));;(c$20490=it$0$19546.translate(z$20467,"expr"));;(d$20491=it$0$19546.translate(body$20468,"stmt"));;return (((((("for("+a$20488)+b$20489)+c$20490)+"){")+d$20491)+"}");}}else{if(($19542$19566&&(($19544$19568=(t0$19556===4))&&($19539$19551[0]==="js_for_in")))){(x$20506=$19539$19551[1]);(y$20507=$19539$19551[2]);(body$20508=$19539$19551[3]);($20511$20513=mode$19536);;if(($20511$20513==="expr")){return it$0$19546.body(expr$19535,"expr");}else{(other$20525=$20511$20513);(a$20528=it$0$19546.translate(x$20506,"expr"));;(b$20529=it$0$19546.translate(y$20507,"expr"));;(c$20530=it$0$19546.translate(body$20508,"stmt"));;return (((((("for("+a$20528)+" in ")+b$20529)+"){")+c$20530)+"}");}}else{if(($19544$19568&&(($19539$19551[0]==="js_try")&&((attempt$20542=$19539$19551[1]),((t1$19557=$19539$19551[2]),((t1$19557 instanceof Array)&&((t2$19558=t1$19557.length),((t2$19558===3)&&((t1$19557[0]==="lambda")&&((t3$19559=t1$19557[1]),((t3$19559 instanceof Array)&&((t4$19560=t3$19559.length),((t4$19560===1)&&((bridge$19541$19562=t3$19559[0]),((((bridge$19541$19562 instanceof Array)&&((t0$20553=bridge$19541$19562.length),((t0$20553===2)&&((bridge$19541$19562[0]==="symbol")&&((v$20543=bridge$19541$19562[1]),true)))))||((bridge$19541$19562 instanceof Array)&&((t0$20557=bridge$19541$19562.length),((t0$20557===2)&&((bridge$19541$19562[0]==="variable")&&((v$20543=bridge$19541$19562[1]),true))))))&&((body$20544=t1$19557[2]),((t5$19563=$19539$19551[3]),((t5$19563 instanceof Array)&&((t6$19564=t5$19563.length),((t6$19564===1)&&(t5$19563[0]==="void"))))))))))))))))))))){($20564$20566=mode$19536);;if(($20564$20566==="expr")){return it$0$19546.body(expr$19535,"expr");}else{(other$20578=$20564$20566);(a$20581=it$0$19546.translate(attempt$20542,"stmt"));;(b$20582=it$0$19546.translate(body$20544,"stmt"));;return (((((("try{"+a$20581)+"}catch(")+v$20543)+"){")+b$20582)+"}");}}else{if(($19542$19566&&((t0$19556===2)&&($19539$19551[0]==="raw")))){(x$20591=$19539$19551[1]);return x$20591;}else{(other$20596=$19539$19551);throw other$20596;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});$20734(Translator$19193,({}));Translator$19193;(translate$19194=function(expr$20601,mode$20602){var tr$20605;var t$20606;(tr$20605=Translator$19193());;(t$20606=tr$20605.translate(expr$20601,mode$20602));;return (tr$20605.dump_store()+t$20606);});;(exports["Translator"]=Translator$19193);(exports["translate"]=translate$19194);
