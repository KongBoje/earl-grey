var τ1745=function(type){var τ1746=type["::check"];var f;if((τ1746===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ1746),true)){return function(value){return f.call(type,value);};}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1746}));}}};
var τ1747=function(dest,values){for(k in values){if(values.hasOwnProperty(k)){(dest[k]=send(values,k));}else{null;}}return dest;};
var τ1737=function(){var τ1738=function(tags){var τ1739=function(){if((!τ1745(τ1738)(this))){return Object.create(τ1738.prototype);}else{return this;}}();(τ1739["tags"]=tags);return τ1739;};τ1747(τ1738);(τ1738.prototype["create"]=function(){var τ1740=Array.prototype.slice.call(arguments,0);var τp0;var message;var args;if(((τ1740 instanceof Array)&&(((τp0=τ1740.length),true)&&((τp0>=0)&&((message=function(){if((0>=τp0)){return "";}else{return τ1740[0];}}()),true,(args=τ1740.slice(1)),true))))){var τ1739=this;var e=Error(message);(e["::tags"]=τ1739.tags);(e["args"]=args);(e["name"]=["E"].concat(τ1739.tags).join("."));return e;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1740}));}});(τ1738.prototype["::check"]=function(e){var τ1739=this;if(((!e)||(!τ1745(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var τ1741=τ1739.tags;var τ1742=τ1741.length;for(var τ1743=0;(τ1743<τ1742);(τ1743++)){var τ1744=τ1741[τ1743];var tag;var other;if(((tag=τ1744),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=τ1744),true)){false;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1744}));}}}false;return true;});(τ1738.prototype["::deconstruct"]=function(e){var τ1739=this;return e.args;});return τ1738;}();
var τ1748=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};
var τ1749=function(τ1750){var τ1751=τ1750;var x;var x;var other;if((((typeof(τ1751)==="string")&&((x=τ1751),true))||((typeof(τ1751)==="number")&&((x=τ1751),true)))){return ["value",x];}else{if(((other=τ1751),true)){return other["::serialize_ast"]();}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1751}));}}};
var send=function(obj,τ1730){var msg;var τ1729;(msg=τ1730);true;(τ1729=τ1730);var τ1731=τ1729;var other;if(((typeof(τ1731)==="string")||(typeof(τ1731)==="number"))){return obj[msg];}else{if(((other=τ1731),true)){return obj["::send"](msg);}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1731}));}}};(Array[":::project"]=function(τ1733){var value;var τ1732;(value=τ1733);true;(τ1732=τ1733);var τ1734=τ1732;var _;if(τ1745(Array)(τ1734)){return [true,value];}else{if(((_=τ1734),true)){return [true,[value]];}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1734}));}}});(Array.prototype["::check"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){return false;}else{null;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){var rval=this.slice(0);rval.push(value);return [true,rval];}else{null;}}return [true,value];}else{var rval=this.slice(0);rval.push(value);return [true,rval];}});(Array.prototype[":::deconstruct"]=function(value){return [true,value.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return τ1748(["array"],this.map(τ1749));});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var τ1735=value.match(this);var m;var m;if(((τ1735===null)&&((m=τ1735),true))){return [false,null];}else{if(((m=τ1735),true)){return [true,m];}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1735}));}}});(RegExp.prototype[":::deconstruct"]=function(value){var τ1736=value.match(this);var m;var m;if(((τ1736===null)&&((m=τ1736),true))){return [false,null];}else{if(((m=τ1736),true)){return [true,m];}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1736}));}}});(Function.prototype["::send"]=function(args){return this.apply(this,args);});
var τ1826=function(τ1827,key){var τ1828=τ1827;var x;var x;var x;if(((τ1828===null)||(τ1828===(void 0)))){return false;}else{if(((typeof(τ1828)==="string")&&((x=τ1828),true))){return (key in String.prototype);}else{if(((typeof(τ1828)==="number")&&((x=τ1828),true))){return (key in Number.prototype);}else{if(((x=τ1828),true)){return (key in x);}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1828}));}}}}};var τ1752=require("./util");var items=τ1752.items;var τ1753=require("./helpers");var aslist=τ1753.aslist;var gensym=τ1753.gensym;var τ1754=require("./pp");var __lt____gt__=τ1754["<>"];var js_op_table2=({"+":"+","-":"-","*":"*","/":"/","mod":"%",".&":"&",".|":"|",".^":"^","~":"~","and":"&&","or":"||","not":"!","==":"===","!=":"!==","===":"===","!==":"!==","<":"<",">":">","<=":"<=",">=":">=","<<":"<<",">>":">>",">>>":">>>","in":" in ","instanceof":" instanceof ","++":"++","--":"--"});var js_op_table=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"});var Translator=function(){var τ1756=Array.prototype.slice.call(arguments,0);var τp0;var prelude;if(((τ1756 instanceof Array)&&(((τp0=τ1756.length),true)&&(((τp0>=0)&&(τp0<=1))&&((prelude=function(){if((0>=τp0)){return null;}else{return τ1756[0];}}()),true))))){var τ1755=function(){if((!τ1745(Translator)(this))){return Object.create(Translator.prototype);}else{return this;}}();(τ1755["cache"]=({}));(τ1755["prepend"]=[]);if(prelude){τ1755.prepend.push(τ1755.translate(τ1749(prelude),"stmt"));}else{null;}return τ1755;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1756}));}};τ1747(Translator);(Translator.prototype["register_value"]=function(v,id){var τ1755=this;var τ1757=send(τ1755.cache,id);var name;if((τ1757===(void 0))){var temp=gensym();(τ1755.cache[id]=temp);τ1755.prepend.push(τ1755.translate(["declare",temp,τ1749(v)],"stmt"));return temp;}else{if(((name=τ1757),true)){return name;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1757}));}}});(Translator.prototype["dump_store"]=function(){var τ1755=this;var rval=τ1755.prepend.join("\n");(τ1755["prepend"]=[]);return rval;});(Translator.prototype["mangle"]=function(name){var τ1755=this;var tr=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"});var r=[];for(var i=0;(i<name.length);(++i)){var c=send(name,i);r.push((send(tr,c)||c));}return r.join("");});(Translator.prototype["body"]=function(b,mode){var τ1755=this;(orig=b);(b=aslist(b));var trst=function(stmt){return τ1755.translate(stmt,"stmt");};var τ1758=mode;var other;if((τ1758==="expr")){var x=["send",["lambda",[],orig],["array"]];return τ1755.translate(x,mode);}else{if((τ1758==="return")){var stmts=b.slice(0,(-1));var ret=send(b,(b.length-1));return (stmts.map(trst).join("")+τ1755.translate(ret,"return"));}else{if((τ1758==="stmt")){return b.map(trst).join("");}else{if(((other=τ1758),true)){throw τ1737(["syntax","mode"]).create("Unknown mode",({"mode":mode}));}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1758}));}}}}});(Translator.prototype["expr"]=function(x,mode){var τ1755=this;var τ1759=mode;var other;if((τ1759==="expr")){return x;}else{if((τ1759==="stmt")){return (x+";");}else{if((τ1759==="return")){return (("return "+x)+";");}else{if(((other=τ1759),true)){throw "OopsI";}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1759}));}}}}});(Translator.prototype["op"]=function(op,a,b){var τ1755=this;var e=function(){var τ1760=[a,b];var τp0;var τp1;var τp2;var τp3;var _;var τp0;var _;var τp1;var τp2;var τp3;var _;var τ1761=false;var τ1762=false;var τ1763=false;if(((τ1761=(τ1760 instanceof Array))&&((τ1762=((τp0=τ1760.length),true))&&((τ1763=(τp0===2))&&(((τp1=τ1760[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&(((τp3=τp1[0]),(τp3==="void"))&&((_=τ1760[1]),true))))))))){return (op+τ1755.translate(b,"expr"));}else{if((τ1763&&(((_=τ1760[0]),true,(τp1=τ1760[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return (τ1755.translate(a,"expr")+op);}else{if(((_=τ1760),true)){return ((τ1755.translate(a,"expr")+op)+τ1755.translate(b,"expr"));}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1760}));}}}}();return (("("+e)+")");});(Translator.prototype["translate"]=function(expr,mode){var τ1755=this;var τ1764=expr;var τp0;var τp1;var s;var τp0;var τp1;var τp0;var τp1;var v;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var f;var τp0;var τp1;var τp2;var τ1768;var τ1769;var τ1770;var τ1765;var τ1766;var τ1767;var τp3;var τp4;var τp5;var f;var msg;var τp0;var τp1;var f;var τp2;var msg;var τp3;var τp4;var s;var τp0;var τp1;var f;var τp2;var τp3;var τp4;var args;var τp0;var τp1;var f;var msg;var τp0;var τp1;var args;var τp0;var τp1;var args;var τp0;var τp1;var bindings;var body;var τp0;var τp1;var test;var pos;var τp2;var τp3;var τp4;var τp5;var τp0;var τp1;var test;var pos;var neg;var τp0;var τp1;var binding;var τp2;var τp3;var τp4;var τp5;var τp0;var τp1;var binding;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var obj;var msg;var rhs;var τp0;var τp1;var lhs;var rhs;var τp0;var τp1;var args;var τp0;var τp1;var args;var τp0;var τp1;var s;var τp0;var τp1;var vars;var body;var τp0;var τp1;var args;var τp0;var τp1;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var label;var τp0;var τp1;var τp2;var τp3;var τp4;var label;var τp0;var τp1;var value;var τp0;var τp1;var value;var τp0;var τp1;var value;var τp0;var τp1;var test;var body;var τp2;var τp3;var τp4;var label;var τp0;var τp1;var test;var body;var τp0;var τp1;var x;var y;var z;var body;var τp0;var τp1;var x;var y;var body;var τp0;var τp1;var attempt;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τ1773;var τ1774;var v;var τ1771;var τ1772;var v;var body;var τp8;var τp9;var τp10;var other;var τ1775=false;var τ1776=false;var τ1777=false;var τ1778=false;if(((τ1775=(τ1764 instanceof Array))&&((τ1776=((τp0=τ1764.length),true))&&((τp0===2)&&(((τp1=τ1764[0]),(τp1==="symbol"))&&((s=τ1764[1]),true)))))){return τ1755.expr(τ1755.mangle(s),mode);}else{if((τ1776&&((τp0===1)&&((τp1=τ1764[0]),(τp1==="void"))))){return τ1755.expr("null",mode);}else{if((τ1776&&((τp0===2)&&(((τp1=τ1764[0]),(τp1==="value"))&&((v=τ1764[1]),true))))){var r=function(){var τ1779=v;var id;var other;if((typeof(τ1779)==="string")){var repl=({"\"":"\\\"","\n":"\\n","\\":"\\\\"});(v=v.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m){return send(repl,m);}));return (("\""+v)+"\"");}else{if((τ1779===(void 0))){return "(void 0)";}else{if(((((typeof(τ1779)==="number")||(τ1779===true))||(τ1779===false))||(τ1779===null))){return String(v);}else{if((τ1826(τ1779,"::id")&&((id=τ1779["::id"]),true,id))){return τ1755.translate(τ1755.register_value(v,id),mode);}else{if(((other=τ1779),true)){throw τ1737(["cannot_serialize"]).create("Cannot serialize value",({"value":v}));}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1779}));}}}}}}();return τ1755.expr(r,mode);}else{if((τ1776&&((τ1777=(τp0===3))&&((τ1778=((τp1=τ1764[0]),(τp1==="send")))&&(((τp2=τ1764[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="___node"))&&(((τp6=τ1764[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===2)&&(((τp8=τp6[0]),(τp8==="value"))&&((f=τp6[1]),true)))))))))))))){return f;}else{if((τ1778&&(((τp2=τ1764[1]),(((τp2 instanceof Array)&&(((τ1765=τp2.length),true)&&((τ1765===2)&&(((τ1766=τp2[0]),(τ1766==="symbol"))&&((τ1767=τp2[1]),(τ1767==="___js_fetch"))))))||((τp2 instanceof Array)&&(((τ1768=τp2.length),true)&&((τ1768===2)&&(((τ1769=τp2[0]),(τ1769==="variable"))&&((τ1770=τp2[1]),(τ1770==="___js_fetch"))))))))&&(((τp3=τ1764[2]),(τp3 instanceof Array))&&(((τp4=τp3.length),true)&&((τp4===3)&&(((τp5=τp3[0]),(τp5==="array"))&&((f=τp3[1]),true,(msg=τp3[2]),true)))))))){var trf=τ1755.translate(f,"expr");var trmsg=τ1755.translate(msg,"expr");return τ1755.expr((((trf+"[")+trmsg)+"]"),mode);}else{if((τ1778&&(((f=τ1764[1]),true,(τp2=τ1764[2]),(msg=τp2),true,(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((s=τp2[1]),true))))))){if(((typeof(s)==="string")&&s.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){var trf=τ1755.translate(f,"expr");var trmsg=τ1755.translate(["symbol",s],"expr");return τ1755.expr(((trf+".")+trmsg),mode);}else{if(true){var trf=τ1755.translate(f,"expr");var trmsg=τ1755.translate(msg,"expr");return τ1755.expr((((trf+"[")+trmsg)+"]"),mode);}else{return false;}}}else{if((τ1778&&(((f=τ1764[1]),true,(τp2=τ1764[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3>=1)&&(((τp4=τp2[0]),(τp4==="array"))&&((args=τp2.slice(1)),true))))))){var op=function(){var τ1780=f;var τp0;var τp1;var x;var τp0;var τp1;var x;var _;var τ1781=false;var τ1782=false;var τ1783=false;if(((τ1781=(τ1780 instanceof Array))&&((τ1782=((τp0=τ1780.length),true))&&((τ1783=(τp0===2))&&(((τp1=τ1780[0]),(τp1==="symbol"))&&((x=τ1780[1]),true)))))){return send(js_op_table,x);}else{if((τ1783&&(((τp1=τ1780[0]),(τp1==="variable"))&&((x=τ1780[1]),true)))){return send(js_op_table2,x);}else{if(((_=τ1780),true)){return null;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1780}));}}}}();if(op){return τ1755.expr(τ1755.op(op,args[0],args[1]),mode);}else{var trf=τ1755.translate(f,"expr");var trargs=function(){var τ1784=[];var τ1785=args;var τ1786=τ1785.length;for(var τ1787=0;(τ1787<τ1786);(τ1787++)){var τ1788=τ1785[τ1787];var x;var other;if(((x=τ1788),true)){τ1784.push(τ1755.translate(x,"expr"));}else{if(((other=τ1788),true)){false;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1788}));}}}return τ1784;}();return τ1755.expr((((trf+"(")+trargs.join(","))+")"),mode);}}else{if((τ1778&&((f=τ1764[1]),true,(msg=τ1764[2]),true))){var trf=τ1755.translate(f,"expr");var trmsg=τ1755.translate(msg,"expr");return τ1755.expr((((("send("+trf)+",")+trmsg)+")"),mode);}else{if((τ1776&&((τ1777=(τp0>=1))&&(((τp1=τ1764[0]),(τp1==="array"))&&((args=τ1764.slice(1)),true))))){var r=function(){var f=function(x){return τ1755.translate(x,"expr");};return (("["+args.map(f).join(","))+"]");}();return τ1755.expr(r,mode);}else{if((τ1777&&(((τp1=τ1764[0]),(τp1==="object"))&&((args=τ1764.slice(1)),true)))){var r=function(){var f=function(τ1789){var τp0;var τp1;var x;var y;if(((τ1789 instanceof Array)&&(((τp0=τ1789.length),true)&&((τp0===3)&&(((τp1=τ1789[0]),(τp1==="array"))&&((x=τ1789[1]),true,(y=τ1789[2]),true)))))){undefined;}else{throw τ1737(["match"]).create("The value failed to match");}var a=τ1755.translate(x,"expr");var b=τ1755.translate(y,"expr");return ((a+":")+b);};return (("({"+args.map(f).join(","))+"})");}();return τ1755.expr(r,mode);}else{if((τ1776&&((τp0===3)&&(((τp1=τ1764[0]),(τp1==="lambda"))&&((bindings=τ1764[1]),true,(body=τ1764[2]),true))))){var a=function(){var τ1798=[];var τ1799=bindings;var τ1800=τ1799.length;for(var τ1801=0;(τ1801<τ1800);(τ1801++)){var τ1802=τ1799[τ1801];var x;var other;if(((x=τ1802),true)){τ1798.push(τ1755.translate(x,"expr"));}else{if(((other=τ1802),true)){false;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1802}));}}}return τ1798;}().join(",");var b=τ1755.body(body,"return");return τ1755.expr((((("function("+a)+"){")+b)+"}"),mode);}else{if((τ1776&&((τ1777=(τp0===4))&&((τ1778=((τp1=τ1764[0]),(τp1==="if")))&&(((test=τ1764[1]),true,(pos=τ1764[2]),true,(τp2=τ1764[3]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((τp5=τp2[1]),(τp5===(void 0))))))))))){var τ1803=mode;var other;if((τ1803==="expr")){return τ1755.body(expr,"expr");}else{if(((other=τ1803),true)){var a=τ1755.translate(test,"expr");var b=τ1755.translate(pos,mode);return (((("if("+a)+"){")+b)+"}");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1803}));}}}else{if((τ1778&&((test=τ1764[1]),true,(pos=τ1764[2]),true,(neg=τ1764[3]),true))){var τ1804=mode;var other;if((τ1804==="expr")){return τ1755.body(expr,"expr");}else{if(((other=τ1804),true)){var a=τ1755.translate(test,"expr");var b=τ1755.translate(pos,mode);var c=τ1755.translate(neg,mode);return (((((("if("+a)+"){")+b)+"}else{")+c)+"}");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1804}));}}}else{if((τ1776&&((τ1777=(τp0===3))&&((τ1778=((τp1=τ1764[0]),(τp1==="declare")))&&(((binding=τ1764[1]),true,(τp2=τ1764[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((τp5=τp2[1]),(τp5===(void 0))))))))))){var τ1805=mode;var other;if(((τ1805==="expr")||(τ1805==="return"))){throw "Invalid in expr ctx";}else{if(((other=τ1805),true)){var a=τ1755.translate(binding,"expr");return (("var "+a)+";");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1805}));}}}else{if((τ1778&&((binding=τ1764[1]),true,(value=τ1764[2]),true))){var τ1806=mode;var other;if(((τ1806==="expr")||(τ1806==="return"))){throw "Invalid in expr ctx";}else{if(((other=τ1806),true)){var a=τ1755.translate(binding,"expr");var b=τ1755.translate(value,"expr");return (((("var "+a)+"=")+b)+";");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1806}));}}}else{if((τ1777&&((τ1778=((τp1=τ1764[0]),(τp1==="assign")))&&(((τp2=τ1764[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="send"))&&((obj=τp2[1]),true,(msg=τp2[2]),true,(rhs=τ1764[2]),true)))))))){var a=τ1755.translate(obj,"expr");var b=τ1755.translate(msg,"expr");var c=τ1755.translate(rhs,"expr");return τ1755.expr((((((("("+a)+"[")+b)+"]=")+c)+")"),mode);}else{if((τ1778&&((lhs=τ1764[1]),true,(rhs=τ1764[2]),true))){var a=τ1755.translate(lhs,"expr");var b=τ1755.translate(rhs,"expr");return τ1755.expr((((("("+a)+"=")+b)+")"),mode);}else{if((τ1776&&((τ1777=(τp0>=1))&&(((τp1=τ1764[0]),(τp1==="multi"))&&((args=τ1764.slice(1)),true))))){var isdecl=function(τ1808){var τ1809=τ1808;var τp0;var τp1;var variable;var value;var other;if(((τ1809 instanceof Array)&&(((τp0=τ1809.length),true)&&((τp0===3)&&(((τp1=τ1809[0]),(τp1==="declare"))&&((variable=τ1809[1]),true,(value=τ1809[2]),true)))))){return true;}else{if(((other=τ1809),true)){return false;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1809}));}}};var τ1807=null;var _;if((args.length===1)){return τ1755.translate(args[0],mode);}else{if(((mode==="expr")&&(!args.some(isdecl)))){var xs=function(){var τ1810=[];var τ1811=args;var τ1812=τ1811.length;for(var τ1813=0;(τ1813<τ1812);(τ1813++)){var τ1814=τ1811[τ1813];var x;var other;if(((x=τ1814),true)){τ1810.push(τ1755.translate(x,"expr"));}else{if(((other=τ1814),true)){false;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1814}));}}}return τ1810;}();return (("("+xs.join(","))+")");}else{if(((_=τ1807),true)){return τ1755.body(expr,mode);}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1807}));}}}}else{if((τ1777&&(((τp1=τ1764[0]),(τp1==="splice"))&&((args=τ1764.slice(1)),true)))){return τ1755.translate(τ1748(["multi"],args),mode);}else{if((τ1776&&((τp0===2)&&(((τp1=τ1764[0]),(τp1==="variable"))&&((s=τ1764[1]),true))))){return τ1755.expr(τ1755.mangle(s),mode);}else{if((τ1776&&((τp0===3)&&(((τp1=τ1764[0]),(τp1==="scope"))&&((vars=τ1764[1]),true,(body=τ1764[2]),true))))){var decls=function(){var τ1815=[];var τ1816=vars;var τ1817=τ1816.length;for(var τ1818=0;(τ1818<τ1817);(τ1818++)){var τ1819=τ1816[τ1818];var v;var other;if(((v=τ1819),true)){τ1815.push(["declare",v,["value",undefined]]);}else{if(((other=τ1819),true)){false;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1819}));}}}return τ1815;}();return τ1755.translate(τ1748(["multi"],decls,[body]),mode);}else{if((τ1776&&((τp0>=1)&&(((τp1=τ1764[0]),(τp1==="object2"))&&((args=τ1764.slice(1)),true))))){var r=function(){var f=function(τ1820){var τp0;var x;var y;if(((τ1820 instanceof Array)&&(((τp0=τ1820.length),true)&&((τp0===2)&&((x=τ1820[0]),true,(y=τ1820[1]),true))))){undefined;}else{throw τ1737(["match"]).create("The value failed to match");}var a=τ1755.translate(x,"expr");var b=τ1755.translate(y,"expr");return ((a+":")+b);};return (("({"+args.map(f).join(","))+"})");}();return τ1755.expr(r,mode);}else{if((τ1776&&((τp0===2)&&(((τp1=τ1764[0]),(τp1==="js_new"))&&((value=τ1764[1]),true))))){return τ1755.expr((("(new "+τ1755.translate(value,"expr"))+")"),mode);}else{if((τ1776&&((τ1777=((τp0>=1)&&(τp0<=2)))&&(((τp1=τ1764[0]),(τp1==="js_break"))&&(((τp2=function(){if((1>=τp0)){return ["value",null];}else{return τ1764[1];}}()),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((label=τp2[1]),true))))))))){if((mode==="expr")){throw "Invalid break in ctx";}else{return (("break"+function(){if(label){return (" "+label);}else{return "";}}())+";");}}else{if((τ1777&&(((τp1=τ1764[0]),(τp1==="js_continue"))&&(((τp2=function(){if((1>=τp0)){return ["value",null];}else{return τ1764[1];}}()),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((label=τp2[1]),true)))))))){if((mode==="expr")){throw "Invalid continue in ctx";}else{return (("continue"+function(){if(label){return (" "+label);}else{return "";}}())+";");}}else{if((τ1776&&((τ1777=(τp0===2))&&(((τp1=τ1764[0]),(τp1==="js_return"))&&((value=τ1764[1]),true))))){if((mode==="expr")){throw "Invalid return in ctx";}else{return (("return "+τ1755.translate(value,"expr"))+";");}}else{if((τ1777&&(((τp1=τ1764[0]),(τp1==="js_delete"))&&((value=τ1764[1]),true)))){if((mode==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+τ1755.translate(value,"expr"))+";");}}else{if((τ1777&&(((τp1=τ1764[0]),(τp1==="js_throw"))&&((value=τ1764[1]),true)))){if((mode==="expr")){return (("function(){throw "+τ1755.translate(value,"expr"))+";}()");}else{return (("throw "+τ1755.translate(value,"expr"))+";");}}else{if((τ1776&&((τp0===4)&&(((τp1=τ1764[0]),(τp1==="js_while"))&&(((test=τ1764[1]),true,(body=τ1764[2]),true,(τp2=τ1764[3]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="value"))&&((label=τp2[1]),true))))))))){var τ1821=mode;var other;if((τ1821==="expr")){return τ1755.body(expr,"expr");}else{if(((other=τ1821),true)){var a=τ1755.translate(test,"expr");var b=τ1755.translate(body,"stmt");return (((((label+":while(")+a)+"){")+b)+"}");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1821}));}}}else{if((τ1776&&((τp0===3)&&(((τp1=τ1764[0]),(τp1==="js_while"))&&((test=τ1764[1]),true,(body=τ1764[2]),true))))){var τ1822=mode;var other;if((τ1822==="expr")){return τ1755.body(expr,"expr");}else{if(((other=τ1822),true)){var a=τ1755.translate(test,"expr");var b=τ1755.translate(body,"stmt");return (((("while("+a)+"){")+b)+"}");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1822}));}}}else{if((τ1776&&((τp0===5)&&(((τp1=τ1764[0]),(τp1==="js_for"))&&((x=τ1764[1]),true,(y=τ1764[2]),true,(z=τ1764[3]),true,(body=τ1764[4]),true))))){var τ1823=mode;var other;if((τ1823==="expr")){return τ1755.body(expr,"expr");}else{if(((other=τ1823),true)){var a=τ1755.translate(x,"stmt");var b=τ1755.translate(y,"stmt");var c=τ1755.translate(z,"expr");var d=τ1755.translate(body,"stmt");return (((((("for("+a)+b)+c)+"){")+d)+"}");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1823}));}}}else{if((τ1776&&((τ1777=(τp0===4))&&(((τp1=τ1764[0]),(τp1==="js_for_in"))&&((x=τ1764[1]),true,(y=τ1764[2]),true,(body=τ1764[3]),true))))){var τ1824=mode;var other;if((τ1824==="expr")){return τ1755.body(expr,"expr");}else{if(((other=τ1824),true)){var a=τ1755.translate(x,"expr");var b=τ1755.translate(y,"expr");var c=τ1755.translate(body,"stmt");return (((((("for("+a)+" in ")+b)+"){")+c)+"}");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1824}));}}}else{if((τ1777&&(((τp1=τ1764[0]),(τp1==="js_try"))&&(((attempt=τ1764[1]),true,(τp2=τ1764[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="lambda"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===1)&&(((τp7=τp5[0]),(((τp7 instanceof Array)&&(((τ1771=τp7.length),true)&&((τ1771===2)&&(((τ1772=τp7[0]),(τ1772==="symbol"))&&((v=τp7[1]),true)))))||((τp7 instanceof Array)&&(((τ1773=τp7.length),true)&&((τ1773===2)&&(((τ1774=τp7[0]),(τ1774==="variable"))&&((v=τp7[1]),true)))))))&&(((body=τp2[2]),true,(τp8=τ1764[3]),(τp8 instanceof Array))&&(((τp9=τp8.length),true)&&((τp9===1)&&((τp10=τp8[0]),(τp10==="void")))))))))))))))){var τ1825=mode;var other;if((τ1825==="expr")){return τ1755.body(expr,"expr");}else{if(((other=τ1825),true)){var a=τ1755.translate(attempt,"stmt");var b=τ1755.translate(body,"stmt");return (((((("try{"+a)+"}catch(")+v)+"){")+b)+"}");}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1825}));}}}else{if(((other=τ1764),true)){throw other;}else{throw τ1737(["match"]).create("Could not find a match",({"value":τ1764}));}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});Translator;var translate=function(expr,mode){var tr=Translator();var t=tr.translate(expr,mode);return (tr.dump_store()+t);};(exports["Translator"]=Translator);(exports["translate"]=translate);
