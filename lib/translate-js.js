var $19477=function(type$19479){var f$19482;(f$19482=type$19479["::check"]);;if((f$19482===(void 0))){return function(value$19487){return (value$19487 instanceof type$19479);};}else{return function(value$19490){return f$19482.call(type$19479,value$19490);};}};
var $19492=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $19493=function($19494$19496){var ph$19500;(ph$19500=$19494$19496);;var $19498$19505;($19498$19505=ph$19500);;var bridge$19499$19510;var x$19514;(bridge$19499$19510=$19498$19505);if((((typeof(bridge$19499$19510)==="string")&&((x$19514=bridge$19499$19510),true))||((typeof(bridge$19499$19510)==="number")&&((x$19514=bridge$19499$19510),true)))){return ["value",x$19514];}else{var other$19521;(other$19521=$19498$19505);return other$19521["::serialize_ast"]();}};
var send$19361;(send$19361=function(obj$19366,$19364$19367){var ph$19371;var msg$19372;var t0$19374;(t0$19374=$19364$19367);(msg$19372=t0$19374);(ph$19371=t0$19374);;var $19369$19378;($19369$19378=ph$19371);;var bridge$19370$19383;(bridge$19370$19383=$19369$19378);if(((typeof(bridge$19370$19383)==="string")||(typeof(bridge$19370$19383)==="number"))){return obj$19366[msg$19372];}else{var other$19391;(other$19391=$19369$19378);return obj$19366["::send"](msg$19372);}});;(Array[":::project"]=function($19394$19396){var ph$19399;var value$19400;var t0$19402;(t0$19402=$19394$19396);(value$19400=t0$19402);(ph$19399=t0$19402);;var $19398$19406;($19398$19406=ph$19399);;if($19477(Array)($19398$19406)){return [true,value$19400];}else{$19398$19406;return [true,[value$19400]];}});(Array.prototype["::check"]=function(value$19420){if((value$19420 instanceof Array)){var i$19425;(i$19425=0);;$19423:for(;(i$19425<this.length);(i$19425++)){if(($19492(this,i$19425)!==$19492(value$19420,i$19425))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return this.slice(0);});(Array.prototype[":::project"]=function(value$19436){if((value$19436 instanceof Array)){var i$19441;(i$19441=0);;$19439:for(;(i$19441<this.length);(i$19441++)){if(($19492(this,i$19441)!==$19492(value$19436,i$19441))){return [true,[value$19436]];}}return [true,value$19436.slice(this.length)];}else{return [true,[value$19436]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($19493));});(RegExp.prototype["::check"]=function(value$19452){return value$19452.match(this);});(RegExp.prototype[":::project"]=function(value$19455){var $19457$19459;($19457$19459=value$19455.match(this));;var m$19467;if(($19457$19459===null)){(m$19467=$19457$19459);return [false,null];}else{var m$19472;(m$19472=$19457$19459);return [true,m$19472];}});(Function.prototype["::send"]=function(args$19475){return this.apply(this,args$19475);});
var $21058=function(dest$21060,values$21061){var k$21066;(k$21066=null);$21064:for(k$21066 in values$21061){if(values$21061.hasOwnProperty(k$21066)){(dest$21060[k$21066]=values$21061[k$21066]);}}return dest$21060;};
var $20951=function(){var $20952$20954;($20952$20954=function(tags$20958){var it$0$20961;(it$0$20961=function(){if((!$19477($20952$20954)(this))){return Object.create($20952$20954.prototype);}else{return this;}}());;(it$0$20961["tags"]=tags$20958);return it$0$20961;});;($20952$20954.prototype["create"]=function(){var $20970$20972;($20970$20972=arguments);;var t0$20977;var message$20981;var args$20982;(t0$20977=$20970$20972.length);if((t0$20977>=0)){(message$20981=function(){if((0>=t0$20977)){return "";}else{return $20970$20972[0];}}());(args$20982=Array.prototype.slice.call($20970$20972,1));var it$0$20986;(it$0$20986=this);;var e$20991;(e$20991=Error(message$20981));;(e$20991["::tags"]=it$0$20986.tags);(e$20991["args"]=args$20982);(e$20991["name"]=["E"].concat(it$0$20986.tags).join("."));return e$20991;}else{$20938($20970$20972);}});($20952$20954.prototype["::check"]=function(e$21000){var it$0$21003;(it$0$21003=this);;var tags$21008;if(((!e$21000)||(!$19477(Error)(e$21000)))){return false;}(tags$21008=(e$21000["::tags"]||[]));;var temp$21017;(temp$21017=it$0$21003.tags);;var $length$21022;($length$21022=temp$21017.length);;var $index$21027;($index$21027=0);;$21009:for(;($index$21027<$length$21022);($index$21027++)){var m$21035;(m$21035=temp$21017[$index$21027]);;var tag$21043;(tag$21043=m$21035);if((tags$21008.indexOf(tag$21043)===(-1))){return false;}else{false;;}}return true;});($20952$20954.prototype["::deconstruct"]=function(e$21051){var it$0$21054;(it$0$21054=this);;return e$21051.args;});$21058($20952$20954,({}));return $20952$20954;}();
var $20938=function(value$20940,url$20941,start$20942,end$20943){var err$20946;(err$20946=$20951(["match"]).create("Could not find a match for value",({"value":value$20940})));;if(url$20941){(err$20946["location"]=["location",url$20941,start$20942,end$20943]);}throw err$20946;};
var $21070=function(type$21072){return function(value$21075){var f$21078;(f$21078=type$21072[":::project"]);;if((f$21078===(void 0))){var f$21083;(f$21083=type$21072["::project"]);;if((f$21083===(void 0))){return [true,type$21072(value$21075)];}else{var rval$21088;(rval$21088=false);;try{(rval$21088=[true,f$21083(value$21075)]);}catch(excv$21094){var e$21100;(e$21100=excv$21094);(rval$21088=[false,null]);}return rval$21088;}}else{return f$21078.call(type$21072,value$21075);}};};
var $21102=function($21103$21105,key$21106){var ph$21110;(ph$21110=$21103$21105);;var $21108$21115;($21108$21115=ph$21110);;var bridge$21109$21120;(bridge$21109$21120=$21108$21115);if(((bridge$21109$21120===null)||(bridge$21109$21120===(void 0)))){return false;}else{var x$21128;if((typeof($21108$21115)==="string")){(x$21128=$21108$21115);return (key$21106 in String.prototype);}else{var x$21133;if((typeof($21108$21115)==="number")){(x$21133=$21108$21115);return (key$21106 in Number.prototype);}else{var x$21138;(x$21138=$21108$21115);return (key$21106 in x$21138);}}}};var $19524$19526;var items$19527;var gensym$19528;var $19525$19529;var __lt____gt__$19530;var js_op_table2$19531;var js_op_table$19532;var Translator$19533;var translate$19534;($19524$19526=require("./util"));;(items$19527=$19524$19526.items);;(gensym$19528=$19524$19526.gensym);;($19525$19529=require("./pp"));;(__lt____gt__$19530=$19525$19529["<>"]);;(js_op_table2$19531=({"+":"+","-":"-","*":"*","/":"/","mod":"%","&.":"&","|.":"|","^.":"^","~":"~","and":"&&","or":"||","not":"!","==":"===","!=":"!==","===":"===","!==":"!==","<":"<",">":">","<=":"<=",">=":">=","<<":"<<",">>":">>",">>>":">>>","in":" in ","instanceof":" instanceof ","++":"++","--":"--"}));;(js_op_table$19532=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"}));;(Translator$19533=function(){var it$0$19574;var prelude$19570;var t0$19566;var $19559$19561;($19559$19561=arguments);;(t0$19566=$19559$19561.length);if(((t0$19566>=0)&&(t0$19566<=1))){(prelude$19570=function(){if((0>=t0$19566)){return null;}else{return $19559$19561[0];}}());(it$0$19574=function(){if((!$19477(Translator$19533)(this))){return Object.create(Translator$19533.prototype);}else{return this;}}());;(it$0$19574["cache"]=({}));(it$0$19574["prepend"]=[]);if(prelude$19570){it$0$19574.prepend.push(it$0$19574.translate($19493(prelude$19570),"stmt"));}return it$0$19574;}else{$20938($19559$19561);}});;(Translator$19533.prototype["register_value"]=function(v$19587,id$19588){var temp$19608;var name$19614;var $19591$19597;var it$0$19592;(it$0$19592=this);;($19591$19597=$19492(it$0$19592.cache,id$19588));;if(($19591$19597===(void 0))){(temp$19608=["symbol",gensym$19528()]);;(it$0$19592.cache[id$19588]=temp$19608);it$0$19592.prepend.push(it$0$19592.translate(["declare",temp$19608,$19493(v$19587)],"stmt"));return temp$19608;}else{(name$19614=$19591$19597);return name$19614;}});(Translator$19533.prototype["register_raw"]=function(raw$19619,id$19620){var temp$19640;var name$19646;var $19623$19629;var it$0$19624;(it$0$19624=this);;($19623$19629=$19492(it$0$19624.cache,id$19620));;if(($19623$19629===(void 0))){(temp$19640=["symbol",gensym$19528()]);;(it$0$19624.cache[id$19620]=temp$19640);it$0$19624.prepend.push(it$0$19624.translate(["declare",temp$19640,["raw",raw$19619]],"stmt"));return temp$19640;}else{(name$19646=$19623$19629);return name$19646;}});(Translator$19533.prototype["dump_store"]=function(){var rval$19658;var it$0$19653;(it$0$19653=this);;(rval$19658=it$0$19653.prepend.join("\n"));;(it$0$19653["prepend"]=[]);return rval$19658;});(Translator$19533.prototype["mangle"]=function(name$19665){var i$19683;var tr$19674;var r$19675;var it$0$19668;(it$0$19668=this);;(tr$19674=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"}));;(r$19675=[]);;(i$19683=0);;$19673:for(;(i$19683<name$19665.length);(++i$19683)){var c$19691;(c$19691=$19492(name$19665,i$19683));;r$19675.push(($19492(tr$19674,c$19691)||c$19691));}return r$19675.join("");});(Translator$19533.prototype["body"]=function(orig$19698,mode$19699){var t0$19711;var t1$19712;var t2$19713;var x$19737;var stmts$19746;var ret$19747;var other$19760;var $19707$19726;var b$19708;var trst$19709;var it$0$19702;(it$0$19702=this);;(t0$19711=$21070(["multi"])(orig$19698));if((t0$19711[0]&&((t1$19712=t0$19711[1]),((t2$19713=t1$19712.length),(t2$19713>=0))))){(b$19708=Array.prototype.slice.call(t1$19712,0));;}else{$20938(orig$19698,"/home/olivier/git/earl-grey/src/translate-js.eg",3265,3269);}(trst$19709=function(stmt$19722){return it$0$19702.translate(stmt$19722,"stmt");});;($19707$19726=mode$19699);;if(($19707$19726==="expr")){(x$19737=["send",["lambda",[],orig$19698],["array"]]);;return it$0$19702.translate(x$19737,mode$19699);}else{if(($19707$19726==="return")){(stmts$19746=b$19708.slice(0,(-1)));;(ret$19747=$19492(b$19708,(b$19708.length-1)));;return (stmts$19746.map(trst$19709).join("")+it$0$19702.translate(ret$19747,"return"));}else{if(($19707$19726==="stmt")){return b$19708.map(trst$19709).join("");}else{(other$19760=$19707$19726);throw $20951(["syntax","mode"]).create("Unknown mode",({"mode":mode$19699}));}}}});(Translator$19533.prototype["expr"]=function(x$19765,mode$19766){var other$19795;var $19769$19775;var it$0$19770;(it$0$19770=this);;($19769$19775=mode$19766);;if(($19769$19775==="expr")){return x$19765;}else{if(($19769$19775==="stmt")){return (x$19765+";");}else{if(($19769$19775==="return")){return (("return "+x$19765)+";");}else{(other$19795=$19769$19775);throw "OopsI";}}}});(Translator$19533.prototype["op"]=function(op$19800,a$19801,b$19802){var $19814$19827;var $19815$19828;var $19816$19829;var t0$19823;var t1$19824;var t2$19825;var $19813$19818;var e$19810;var it$0$19805;(it$0$19805=this);;(e$19810=((($19813$19818=[a$19801,b$19802])),function(){if((($19814$19827=($19813$19818 instanceof Array))&&((t0$19823=$19813$19818.length),(($19816$19829=(t0$19823===2))&&((t1$19824=$19813$19818[0]),((t1$19824 instanceof Array)&&((t2$19825=t1$19824.length),((t2$19825===1)&&(t1$19824[0]==="void"))))))))){$19813$19818[1];return (op$19800+it$0$19805.translate(b$19802,"expr"));}else{if(($19816$19829&&($19813$19818[0],((t1$19824=$19813$19818[1]),((t1$19824 instanceof Array)&&((t2$19825=t1$19824.length),((t2$19825===1)&&(t1$19824[0]==="void")))))))){return (it$0$19805.translate(a$19801,"expr")+op$19800);}else{$19813$19818;return ((it$0$19805.translate(a$19801,"expr")+op$19800)+it$0$19805.translate(b$19802,"expr"));}}}()));;return (("("+e$19810)+")");});(Translator$19533.prototype["translate"]=function(expr$19851,mode$19852){var repl$19922;var it$0$19953;var it$0$19948;var it$0$19943;var it$0$19938;var bridge$19908$19964;var bridge$19907$19961;var other$19975;var id$19969;var bridge$19906$19915;var $19905$19910;var r$19902;var t0$19994;var t0$19997;var trf$20003;var trmsg$20004;var trf$20035;var trmsg$20036;var trf$20048;var trmsg$20049;var otherwise$20045;var $20022$20024;var x$20092;var x$20086;var $20070$20081;var $20071$20082;var $20072$20083;var t0$20079;var $20069$20074;var $index$20125;var $length$20120;var temp$20115;var acc$20110;var trf$20100;var trargs$20101;var op$20066;var code$20157;var code$20165;var t0$20153;var t1$20154;var trf$20170;var trmsg$20171;var codevar$20151;var f$20188;var r$20184;var f$20206;var r$20202;var $index$20266;var $length$20261;var temp$20256;var acc$20251;var a$20240;var b$20241;var a$20315;var b$20316;var other$20312;var $20298$20300;var a$20347;var b$20348;var c$20349;var other$20344;var $20330$20332;var a$20386;var other$20383;var bridge$20368$20375;var $20367$20370;var a$20415;var b$20416;var other$20412;var bridge$20397$20404;var $20396$20399;var a$20433;var b$20434;var c$20435;var a$20452;var b$20453;var $index$20542;var $length$20537;var temp$20532;var acc$20527;var $index$20579;var $length$20574;var temp$20569;var acc$20564;var xs$20521;var $20471$20511;var $20470$20505;var isdecl$20472;var $index$20641;var $length$20636;var temp$20631;var acc$20626;var decls$20620;var f$20670;var r$20666;var other$20753;var $20739$20741;var a$20778;var b$20779;var other$20775;var $20761$20763;var a$20811;var b$20812;var c$20813;var d$20814;var other$20808;var $20794$20796;var a$20851;var b$20852;var c$20853;var other$20848;var $20834$20836;var t0$20876;var t0$20880;var a$20904;var b$20905;var other$20901;var $20887$20889;var other$20919;var x$20914;var attempt$20865;var v$20866;var body$20867;var x$20829;var y$20830;var body$20831;var x$20788;var y$20789;var z$20790;var body$20791;var test$20757;var body$20758;var label$20733;var body$20734;var value$20728;var value$20723;var value$20718;var label$20711;var label$20704;var value$20699;var args$20662;var vars$20615;var body$20616;var s$20610;var args$20605;var args$20466;var lhs$20447;var rhs$20448;var obj$20425;var msg$20426;var rhs$20427;var binding$20392;var value$20393;var binding$20361;var test$20325;var pos$20326;var neg$20327;var test$20290;var pos$20291;var bindings$20235;var body$20236;var args$20198;var args$20180;var f$20146;var msg$20147;var f$20058;var args$20059;var f$20013;var msg$20014;var s$20015;var f$19989;var msg$19990;var f$19980;var v$19898;var s$19888;var $19858$19882;var $19859$19883;var $19860$19884;var $19861$19885;var t0$19872;var t1$19873;var t2$19874;var t3$19875;var t4$19876;var bridge$19856$19877;var bridge$19857$19878;var t5$19879;var t6$19880;var $19855$19867;var it$0$19862;(it$0$19862=this);;($19855$19867=expr$19851);;if((($19858$19882=($19855$19867 instanceof Array))&&((t0$19872=$19855$19867.length),((t0$19872===2)&&($19855$19867[0]==="symbol"))))){(s$19888=$19855$19867[1]);return it$0$19862.expr(it$0$19862.mangle(s$19888),mode$19852);}else{if(($19858$19882&&((t0$19872===1)&&($19855$19867[0]==="void")))){return it$0$19862.expr("null",mode$19852);}else{if(($19858$19882&&((t0$19872===2)&&($19855$19867[0]==="value")))){(v$19898=$19855$19867[1]);(r$19902=((($19905$19910=v$19898)),function(){if((typeof($19905$19910)==="string")){(repl$19922=({"\"":"\\\"","\n":"\\n","\\":"\\\\"}));;(v$19898=v$19898.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m$19927){return $19492(repl$19922,m$19927);}));return (("\""+v$19898)+"\"");}else{if(($19905$19910===(void 0))){return "(void 0)";}else{if($19477(RegExp)($19905$19910)){(it$0$19938=String(v$19898));;(it$0$19943=it$0$19938.slice(1,(-1)));;(it$0$19948=it$0$19943.replace(RegExp("/","g"),"\\/"));;(it$0$19953=it$0$19948.replace(RegExp("\n","g"),"\\n"));;return "/".concat(it$0$19953).concat("/");}else{(bridge$19906$19915=$19905$19910);if((((bridge$19907$19961=bridge$19906$19915),(((bridge$19908$19964=bridge$19907$19961),((typeof(bridge$19908$19964)==="number")||(bridge$19908$19964===true)))||(bridge$19907$19961===false)))||(bridge$19906$19915===null))){return String(v$19898);}else{if(($21102($19905$19910,"::id")&&((id$19969=$19905$19910["::id"]),id$19969))){return it$0$19862.translate(it$0$19862.register_value(v$19898,id$19969),mode$19852);}else{(other$19975=$19905$19910);throw $20951(["cannot_serialize"]).create("Cannot serialize value",({"value":v$19898}));}}}}}}()));;return it$0$19862.expr(r$19902,mode$19852);}else{if(($19858$19882&&(($19860$19884=(t0$19872===3))&&(($19861$19885=($19855$19867[0]==="send"))&&((t1$19873=$19855$19867[1]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===2)&&((t1$19873[0]==="variable")&&((t1$19873[1]==="___node")&&((t3$19875=$19855$19867[2]),((t3$19875 instanceof Array)&&((t4$19876=t3$19875.length),((t4$19876===2)&&(t3$19875[0]==="value"))))))))))))))){(f$19980=t3$19875[1]);return f$19980;}else{if(($19861$19885&&((bridge$19856$19877=$19855$19867[1]),((((bridge$19856$19877 instanceof Array)&&((t0$19994=bridge$19856$19877.length),((t0$19994===2)&&((bridge$19856$19877[0]==="symbol")&&(bridge$19856$19877[1]==="___js_fetch")))))||((bridge$19856$19877 instanceof Array)&&((t0$19997=bridge$19856$19877.length),((t0$19997===2)&&((bridge$19856$19877[0]==="variable")&&(bridge$19856$19877[1]==="___js_fetch"))))))&&((t1$19873=$19855$19867[2]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===3)&&(t1$19873[0]==="array"))))))))){(f$19989=t1$19873[1]);(msg$19990=t1$19873[2]);(trf$20003=it$0$19862.translate(f$19989,"expr"));;(trmsg$20004=it$0$19862.translate(msg$19990,"expr"));;return it$0$19862.expr((((trf$20003+"[")+trmsg$20004)+"]"),mode$19852);}else{if(($19861$19885&&((f$20013=$19855$19867[1]),((t1$19873=$19855$19867[2]),((msg$20014=t1$19873),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===2)&&(t1$19873[0]==="value"))))))))){(s$20015=t1$19873[1]);($20022$20024=null);;$20022$20024;if(((typeof(s$20015)==="string")&&s$20015.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){(trf$20035=it$0$19862.translate(f$20013,"expr"));;(trmsg$20036=it$0$19862.translate(["symbol",s$20015],"expr"));;return it$0$19862.expr(((trf$20035+".")+trmsg$20036),mode$19852);}else{(otherwise$20045=$20022$20024);(trf$20048=it$0$19862.translate(f$20013,"expr"));;(trmsg$20049=it$0$19862.translate(msg$20014,"expr"));;return it$0$19862.expr((((trf$20048+"[")+trmsg$20049)+"]"),mode$19852);}}else{if(($19861$19885&&((f$20058=$19855$19867[1]),((t1$19873=$19855$19867[2]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874>=1)&&(t1$19873[0]==="array")))))))){(args$20059=Array.prototype.slice.call(t1$19873,1));(op$20066=((($20069$20074=f$20058)),function(){if((($20070$20081=($20069$20074 instanceof Array))&&((t0$20079=$20069$20074.length),(($20072$20083=(t0$20079===2))&&($20069$20074[0]==="symbol"))))){(x$20086=$20069$20074[1]);return $19492(js_op_table$19532,x$20086);}else{if(($20072$20083&&($20069$20074[0]==="variable"))){(x$20092=$20069$20074[1]);return $19492(js_op_table2$19531,x$20092);}else{$20069$20074;return null;}}}()));;if(op$20066){return it$0$19862.expr(it$0$19862.op(op$20066,args$20059[0],args$20059[1]),mode$19852);}else{(trf$20100=it$0$19862.translate(f$20058,"expr"));;(trargs$20101=(((acc$20110=[])),(((temp$20115=args$20059)),((($length$20120=temp$20115.length)),((($index$20125=0)),function(){$20107:for(;($index$20125<$length$20120);($index$20125++)){var x$20141;var m$20133;(m$20133=temp$20115[$index$20125]);;(x$20141=m$20133);acc$20110.push(it$0$19862.translate(x$20141,"expr"));}}()))),acc$20110));;return it$0$19862.expr((((trf$20100+"(")+trargs$20101.join(","))+")"),mode$19852);}}else{if($19861$19885){(f$20146=$19855$19867[1]);(msg$20147=$19855$19867[2]);(t0$20153=(((code$20157="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$19862.register_raw(code$20157,"~send")));if(((t0$20153 instanceof Array)&&((t1$20154=t0$20153.length),((t1$20154===2)&&(t0$20153[0]==="symbol"))))){(codevar$20151=t0$20153[1]);;}else{$20938((((code$20165="(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}})")),it$0$19862.register_raw(code$20165,"~send")),"/home/olivier/git/earl-grey/src/translate-js.eg",6898,7075);}(trf$20170=it$0$19862.translate(f$20146,"expr"));;(trmsg$20171=it$0$19862.translate(msg$20147,"expr"));;return it$0$19862.expr((((((codevar$20151+"(")+trf$20170)+",")+trmsg$20171)+")"),mode$19852);}else{if(($19858$19882&&(($19860$19884=(t0$19872>=1))&&($19855$19867[0]==="array")))){(args$20180=Array.prototype.slice.call($19855$19867,1));(r$20184=(((f$20188=function(x$20192){return it$0$19862.translate(x$20192,"expr");})),(("["+args$20180.map(f$20188).join(","))+"]")));;return it$0$19862.expr(r$20184,mode$19852);}else{if(($19860$19884&&($19855$19867[0]==="object"))){(args$20198=Array.prototype.slice.call($19855$19867,1));(r$20202=(((f$20206=function($20209$20211){var t0$20216;var t1$20217;var a$20223;var b$20224;var x$20213;var y$20214;(t0$20216=$20209$20211);if(((t0$20216 instanceof Array)&&((t1$20217=t0$20216.length),((t1$20217===3)&&(t0$20216[0]==="array"))))){(x$20213=t0$20216[1]);(y$20214=t0$20216[2]);;}else{$20938($20209$20211);}(a$20223=it$0$19862.translate(x$20213,"expr"));;(b$20224=it$0$19862.translate(y$20214,"expr"));;return ((a$20223+":")+b$20224);})),(("({"+args$20198.map(f$20206).join(","))+"})")));;return it$0$19862.expr(r$20202,mode$19852);}else{if(($19858$19882&&((t0$19872===3)&&($19855$19867[0]==="lambda")))){(bindings$20235=$19855$19867[1]);(body$20236=$19855$19867[2]);(a$20240=(((acc$20251=[])),(((temp$20256=bindings$20235)),((($length$20261=temp$20256.length)),((($index$20266=0)),function(){$20248:for(;($index$20266<$length$20261);($index$20266++)){var x$20282;var m$20274;(m$20274=temp$20256[$index$20266]);;(x$20282=m$20274);acc$20251.push(it$0$19862.translate(x$20282,"expr"));}}()))),acc$20251).join(","));;(b$20241=it$0$19862.body(body$20236,"return"));;return it$0$19862.expr((((("function("+a$20240)+"){")+b$20241)+"}"),mode$19852);}else{if(($19858$19882&&(($19860$19884=(t0$19872===4))&&(($19861$19885=($19855$19867[0]==="if"))&&((test$20290=$19855$19867[1]),((pos$20291=$19855$19867[2]),((t1$19873=$19855$19867[3]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===2)&&((t1$19873[0]==="value")&&(t1$19873[1]===(void 0))))))))))))){($20298$20300=mode$19852);;if(($20298$20300==="expr")){return it$0$19862.body(expr$19851,"expr");}else{(other$20312=$20298$20300);(a$20315=it$0$19862.translate(test$20290,"expr"));;(b$20316=it$0$19862.translate(pos$20291,mode$19852));;return (((("if("+a$20315)+"){")+b$20316)+"}");}}else{if($19861$19885){(test$20325=$19855$19867[1]);(pos$20326=$19855$19867[2]);(neg$20327=$19855$19867[3]);($20330$20332=mode$19852);;if(($20330$20332==="expr")){return it$0$19862.body(expr$19851,"expr");}else{(other$20344=$20330$20332);(a$20347=it$0$19862.translate(test$20325,"expr"));;(b$20348=it$0$19862.translate(pos$20326,mode$19852));;(c$20349=it$0$19862.translate(neg$20327,mode$19852));;return (((((("if("+a$20347)+"){")+b$20348)+"}else{")+c$20349)+"}");}}else{if(($19858$19882&&(($19860$19884=(t0$19872===3))&&(($19861$19885=($19855$19867[0]==="declare"))&&((binding$20361=$19855$19867[1]),((t1$19873=$19855$19867[2]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===2)&&((t1$19873[0]==="value")&&(t1$19873[1]===(void 0)))))))))))){($20367$20370=mode$19852);;(bridge$20368$20375=$20367$20370);if(((bridge$20368$20375==="expr")||(bridge$20368$20375==="return"))){throw "Invalid in expr ctx";}else{(other$20383=$20367$20370);(a$20386=it$0$19862.translate(binding$20361,"expr"));;return (("var "+a$20386)+";");}}else{if($19861$19885){(binding$20392=$19855$19867[1]);(value$20393=$19855$19867[2]);($20396$20399=mode$19852);;(bridge$20397$20404=$20396$20399);if(((bridge$20397$20404==="expr")||(bridge$20397$20404==="return"))){throw "Invalid in expr ctx";}else{(other$20412=$20396$20399);(a$20415=it$0$19862.translate(binding$20392,"expr"));;(b$20416=it$0$19862.translate(value$20393,"expr"));;return (((("var "+a$20415)+"=")+b$20416)+";");}}else{if(($19860$19884&&(($19861$19885=($19855$19867[0]==="assign"))&&((t1$19873=$19855$19867[1]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===3)&&(t1$19873[0]==="send")))))))){(obj$20425=t1$19873[1]);(msg$20426=t1$19873[2]);(rhs$20427=$19855$19867[2]);(a$20433=it$0$19862.translate(obj$20425,"expr"));;(b$20434=it$0$19862.translate(msg$20426,"expr"));;(c$20435=it$0$19862.translate(rhs$20427,"expr"));;return it$0$19862.expr((((((("("+a$20433)+"[")+b$20434)+"]=")+c$20435)+")"),mode$19852);}else{if($19861$19885){(lhs$20447=$19855$19867[1]);(rhs$20448=$19855$19867[2]);(a$20452=it$0$19862.translate(lhs$20447,"expr"));;(b$20453=it$0$19862.translate(rhs$20448,"expr"));;return it$0$19862.expr((((("("+a$20452)+"=")+b$20453)+")"),mode$19852);}else{if(($19858$19882&&((t0$19872===1)&&($19855$19867[0]==="multi")))){if((mode$19852==="stmt")){return ";";}else{return "";}}else{if(($19858$19882&&(($19860$19884=(t0$19872>=1))&&($19855$19867[0]==="multi")))){(args$20466=Array.prototype.slice.call($19855$19867,1));(isdecl$20472=function($20475$20477){var other$20501;var variable$20494;var value$20495;var t0$20490;var $20479$20485;var ph$20480;(ph$20480=$20475$20477);;($20479$20485=ph$20480);;if((($20479$20485 instanceof Array)&&((t0$20490=$20479$20485.length),((t0$20490===3)&&($20479$20485[0]==="declare"))))){(variable$20494=$20479$20485[1]);(value$20495=$20479$20485[2]);return true;}else{(other$20501=$20479$20485);return false;}});;($20470$20505=null);;$20470$20505;if((args$20466.length===1)){return it$0$19862.translate(args$20466[0],mode$19852);}else{if(((mode$19852==="expr")&&(!args$20466.some(isdecl$20472)))){(xs$20521=(((acc$20527=[])),(((temp$20532=args$20466)),((($length$20537=temp$20532.length)),((($index$20542=0)),function(){$20524:for(;($index$20542<$length$20537);($index$20542++)){var x$20558;var m$20550;(m$20550=temp$20532[$index$20542]);;(x$20558=m$20550);acc$20527.push(it$0$19862.translate(x$20558,"expr"));}}()))),acc$20527));;(xs$20521=(((acc$20564=[])),(((temp$20569=xs$20521)),((($length$20574=temp$20569.length)),((($index$20579=0)),function(){$20561:for(;($index$20579<$length$20574);($index$20579++)){var x$20595;var m$20587;(m$20587=temp$20569[$index$20579]);;(x$20595=m$20587);if((x$20595!=="")){acc$20564.push(x$20595);}else{false;;}}}()))),acc$20564));return (("("+xs$20521.join(","))+")");}else{return it$0$19862.body(expr$19851,mode$19852);}}}else{if(($19860$19884&&($19855$19867[0]==="splice"))){(args$20605=Array.prototype.slice.call($19855$19867,1));return it$0$19862.translate(["multi"].concat(args$20605),mode$19852);}else{if(($19858$19882&&((t0$19872===2)&&($19855$19867[0]==="variable")))){(s$20610=$19855$19867[1]);return it$0$19862.expr(it$0$19862.mangle(s$20610),mode$19852);}else{if(($19858$19882&&((t0$19872===3)&&($19855$19867[0]==="scope")))){(vars$20615=$19855$19867[1]);(body$20616=$19855$19867[2]);(decls$20620=(((acc$20626=[])),(((temp$20631=vars$20615)),((($length$20636=temp$20631.length)),((($index$20641=0)),function(){$20623:for(;($index$20641<$length$20636);($index$20641++)){var v$20657;var m$20649;(m$20649=temp$20631[$index$20641]);;(v$20657=m$20649);acc$20626.push(["declare",v$20657,["value",(void 0)]]);}}()))),acc$20626));;return it$0$19862.translate(["multi"].concat(decls$20620).concat([body$20616]),mode$19852);}else{if(($19858$19882&&((t0$19872>=1)&&($19855$19867[0]==="object2")))){(args$20662=Array.prototype.slice.call($19855$19867,1));(r$20666=(((f$20670=function($20673$20675){var t0$20680;var t1$20681;var a$20687;var b$20688;var x$20677;var y$20678;(t0$20680=$20673$20675);if(((t0$20680 instanceof Array)&&((t1$20681=t0$20680.length),(t1$20681===2)))){(x$20677=t0$20680[0]);(y$20678=t0$20680[1]);;}else{$20938($20673$20675);}(a$20687=it$0$19862.translate(x$20677,"expr"));;(b$20688=it$0$19862.translate(y$20678,"expr"));;return ((a$20687+":")+b$20688);})),(("({"+args$20662.map(f$20670).join(","))+"})")));;return it$0$19862.expr(r$20666,mode$19852);}else{if(($19858$19882&&((t0$19872===2)&&($19855$19867[0]==="js_new")))){(value$20699=$19855$19867[1]);return it$0$19862.expr((("(new "+it$0$19862.translate(value$20699,"expr"))+")"),mode$19852);}else{if(($19858$19882&&(($19860$19884=((t0$19872>=1)&&(t0$19872<=2)))&&(($19855$19867[0]==="js_break")&&((t1$19873=function(){if((1>=t0$19872)){return ["value",null];}else{return $19855$19867[1];}}()),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===2)&&(t1$19873[0]==="value"))))))))){(label$20704=t1$19873[1]);if((mode$19852==="expr")){throw "Invalid break in ctx";}else{return (("break"+function(){if(label$20704){return (" "+label$20704);}else{return "";}}())+";");}}else{if(($19860$19884&&(($19855$19867[0]==="js_continue")&&((t1$19873=function(){if((1>=t0$19872)){return ["value",null];}else{return $19855$19867[1];}}()),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===2)&&(t1$19873[0]==="value")))))))){(label$20711=t1$19873[1]);if((mode$19852==="expr")){throw "Invalid continue in ctx";}else{return (("continue"+function(){if(label$20711){return (" "+label$20711);}else{return "";}}())+";");}}else{if(($19858$19882&&(($19860$19884=(t0$19872===2))&&($19855$19867[0]==="js_return")))){(value$20718=$19855$19867[1]);if((mode$19852==="expr")){throw "Invalid return in ctx";}else{return (("return "+it$0$19862.translate(value$20718,"expr"))+";");}}else{if(($19860$19884&&($19855$19867[0]==="js_delete"))){(value$20723=$19855$19867[1]);if((mode$19852==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+it$0$19862.translate(value$20723,"expr"))+";");}}else{if(($19860$19884&&($19855$19867[0]==="js_throw"))){(value$20728=$19855$19867[1]);if((mode$19852==="expr")){return (("function(){throw "+it$0$19862.translate(value$20728,"expr"))+";}()");}else{return (("throw "+it$0$19862.translate(value$20728,"expr"))+";");}}else{if(($19858$19882&&(($19860$19884=(t0$19872===3))&&(($19855$19867[0]==="js_label")&&((t1$19873=$19855$19867[1]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===2)&&(t1$19873[0]==="value"))))))))){(label$20733=t1$19873[1]);(body$20734=$19855$19867[2]);($20739$20741=mode$19852);;if(($20739$20741==="expr")){return it$0$19862.body(expr$19851,"expr");}else{(other$20753=$20739$20741);return ((label$20733+":")+it$0$19862.translate(body$20734,other$20753));}}else{if(($19860$19884&&($19855$19867[0]==="js_while"))){(test$20757=$19855$19867[1]);(body$20758=$19855$19867[2]);($20761$20763=mode$19852);;if(($20761$20763==="expr")){return it$0$19862.body(expr$19851,"expr");}else{(other$20775=$20761$20763);(a$20778=it$0$19862.translate(test$20757,"expr"));;(b$20779=it$0$19862.translate(body$20758,"stmt"));;return (((("while("+a$20778)+"){")+b$20779)+"}");}}else{if(($19858$19882&&((t0$19872===5)&&($19855$19867[0]==="js_for")))){(x$20788=$19855$19867[1]);(y$20789=$19855$19867[2]);(z$20790=$19855$19867[3]);(body$20791=$19855$19867[4]);($20794$20796=mode$19852);;if(($20794$20796==="expr")){return it$0$19862.body(expr$19851,"expr");}else{(other$20808=$20794$20796);(a$20811=it$0$19862.translate(x$20788,"stmt"));;(b$20812=it$0$19862.translate(y$20789,"stmt"));;(c$20813=it$0$19862.translate(z$20790,"expr"));;(d$20814=it$0$19862.translate(body$20791,"stmt"));;return (((((("for("+a$20811)+b$20812)+c$20813)+"){")+d$20814)+"}");}}else{if(($19858$19882&&(($19860$19884=(t0$19872===4))&&($19855$19867[0]==="js_for_in")))){(x$20829=$19855$19867[1]);(y$20830=$19855$19867[2]);(body$20831=$19855$19867[3]);($20834$20836=mode$19852);;if(($20834$20836==="expr")){return it$0$19862.body(expr$19851,"expr");}else{(other$20848=$20834$20836);(a$20851=it$0$19862.translate(x$20829,"expr"));;(b$20852=it$0$19862.translate(y$20830,"expr"));;(c$20853=it$0$19862.translate(body$20831,"stmt"));;return (((((("for("+a$20851)+" in ")+b$20852)+"){")+c$20853)+"}");}}else{if(($19860$19884&&(($19855$19867[0]==="js_try")&&((attempt$20865=$19855$19867[1]),((t1$19873=$19855$19867[2]),((t1$19873 instanceof Array)&&((t2$19874=t1$19873.length),((t2$19874===3)&&((t1$19873[0]==="lambda")&&((t3$19875=t1$19873[1]),((t3$19875 instanceof Array)&&((t4$19876=t3$19875.length),((t4$19876===1)&&((bridge$19857$19878=t3$19875[0]),((((bridge$19857$19878 instanceof Array)&&((t0$20876=bridge$19857$19878.length),((t0$20876===2)&&((bridge$19857$19878[0]==="symbol")&&((v$20866=bridge$19857$19878[1]),true)))))||((bridge$19857$19878 instanceof Array)&&((t0$20880=bridge$19857$19878.length),((t0$20880===2)&&((bridge$19857$19878[0]==="variable")&&((v$20866=bridge$19857$19878[1]),true))))))&&((body$20867=t1$19873[2]),((t5$19879=$19855$19867[3]),((t5$19879 instanceof Array)&&((t6$19880=t5$19879.length),((t6$19880===1)&&(t5$19879[0]==="void"))))))))))))))))))))){($20887$20889=mode$19852);;if(($20887$20889==="expr")){return it$0$19862.body(expr$19851,"expr");}else{(other$20901=$20887$20889);(a$20904=it$0$19862.translate(attempt$20865,"stmt"));;(b$20905=it$0$19862.translate(body$20867,"stmt"));;return (((((("try{"+a$20904)+"}catch(")+v$20866)+"){")+b$20905)+"}");}}else{if(($19858$19882&&((t0$19872===2)&&($19855$19867[0]==="raw")))){(x$20914=$19855$19867[1]);return x$20914;}else{(other$20919=$19855$19867);throw other$20919;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}});$21058(Translator$19533,({}));Translator$19533;(translate$19534=function(expr$20924,mode$20925){var tr$20928;var t$20929;(tr$20928=Translator$19533());;(t$20929=tr$20928.translate(expr$20924,mode$20925));;return (tr$20928.dump_store()+t$20929);});;(exports["Translator"]=Translator$19533);(exports["translate"]=translate$19534);
