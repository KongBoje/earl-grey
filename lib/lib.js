var patch_array=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};(exports["patch_array"]=patch_array);var StructFactory=function(name){var make=function(){var r=Array.prototype.slice.call(arguments,0);(r["#"]=name);return r;};(make["___project"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return [true,value];}else{if(true){return [true,make(value)];}else{return false;}}});(make["___check"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return true;}else{if(true){return false;}else{return false;}}});(make["___deconstruct"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return [true,value.slice(0)];}else{if(true){return [false,false];}else{return false;}}});return make;};(exports["StructFactory"]=StructFactory);var XStruct=function(name){var r=Array.prototype.slice.call(arguments,1);(r["#"]=name);return r;};(exports["Struct"]=XStruct);(XStruct["___check"]=function(value){if((value instanceof Array)){return (value["#"]!==undefined);}else{if(true){return false;}else{return false;}}});(XStruct["___deconstruct"]=function(value){if(((value instanceof Array)&&(value["#"]!==undefined))){return [value["#"]].concat(value.slice(0));}else{if(true){throw "cannot deconstruct";}else{return false;}}});var Struct=XStruct;var pr=function(x){var r=repr(x);var pre=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">");var post=("</div>"+String.fromCharCode(7));return console.log(((pre+r)+post));};(exports["pr"]=pr);var __slash____slash____slash__=function(cls,contents){var τ227=contents;var other;if((typeof(τ227)==="string")){return (((("<span class=\""+cls)+"\">")+contents)+"</span>");}else{if(((other=τ227),true)){return (((("<span class=\""+cls)+"\">")+contents.join(""))+"</span>");}else{throw ["Could not find a match",τ227];}}};var repr=function(x){var τ228=x;var entries;if((τ228===true)){return __slash____slash____slash__("special",__slash____slash____slash__("true","true"));}else{if((τ228===false)){return __slash____slash____slash__("special",__slash____slash____slash__("false","false"));}else{if((τ228===null)){return __slash____slash____slash__("special",__slash____slash____slash__("nil","null"));}else{if((τ228===(void 0))){return __slash____slash____slash__("special",__slash____slash____slash__("nil","undefined"));}else{if((typeof(τ228)==="number")){return __slash____slash____slash__("num",String(x));}else{if((typeof(τ228)==="string")){return __slash____slash____slash__("str",x);}else{if(((entries=τ228),true)){var tag=entries["#"];var τ229=tag;var other;if((τ229===(void 0))){return __slash____slash____slash__("sequence",entries.map(function(x){return repr(x);}));}else{if(((other=τ229),true)){return __slash____slash____slash__("struct",[__slash____slash____slash__("sym",tag),__slash____slash____slash__("sequence",entries.map(function(x){return repr(x);}))]);}else{throw ["Could not find a match",τ229];}}}else{throw ["Could not find a match",τ228];}}}}}}}};(exports["repr"]=repr);var send=function(obj,msg){var τ230=msg;var other;if(((typeof(τ230)==="string")||(typeof(τ230)==="number"))){return obj[msg];}else{if(((other=τ230),true)){return obj.___send(msg);}else{throw ["Could not find a match",τ230];}}};(exports["send"]=send);(Function.prototype["___send"]=function(args){return this.apply(this,args);});var checker=function(type){var τ231=type.___check;var f;if((τ231===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ231),true)){return function(value){return f(value);};}else{throw ["Could not find a match",τ231];}}};(exports["checker"]=checker);var projector=function(type){return function(value){var τ232=type.___project;var f;if((τ232===(void 0))){if((value instanceof type)){return [true,value];}else{if(true){return [false,null];}else{return false;}}}else{if(((f=τ232),true)){return f(value);}else{throw ["Could not find a match",τ232];}}};};(exports["projector"]=projector);(Array["___project"]=function(value){var τ233=value;if(checker(Array)(τ233)){return [true,value];}else{if(true){return [true,[value]];}else{throw ["Could not find a match",τ233];}}});var deconstructor=function(type){return function(value){var τ234=type.___deconstruct;var f;if((τ234===(void 0))){if((value instanceof Array)){return [true,value];}else{if(true){return [false,null];}else{return false;}}}else{if(((f=τ234),true)){return f(value);}else{throw ["Could not find a match",τ234];}}};};(exports["deconstructor"]=deconstructor);var ___lib=exports;
