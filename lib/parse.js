var $6645=function(type$6647){var f$6650;(f$6650=type$6647["::check"]);;if((f$6650===(void 0))){return function(value$6655){return (value$6655 instanceof type$6647);};}else{return function(value$6658){return f$6650.call(type$6647,value$6658);};}};
var $6660=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $6661=function($6662$6664){var ph$6668;(ph$6668=$6662$6664);;var $6666$6673;($6666$6673=ph$6668);;var bridge$6667$6678;var x$6682;(bridge$6667$6678=$6666$6673);if((((typeof(bridge$6667$6678)==="string")&&((x$6682=bridge$6667$6678),true))||((typeof(bridge$6667$6678)==="number")&&((x$6682=bridge$6667$6678),true)))){return ["value",x$6682];}else{var other$6689;(other$6689=$6666$6673);return other$6689["::serialize_ast"]();}};
var send$6508;(send$6508=function(obj$6513,$6511$6514){var ph$6518;var msg$6519;var t0$6521;(t0$6521=$6511$6514);(msg$6519=t0$6521);(ph$6518=t0$6521);;var $6516$6525;($6516$6525=ph$6518);;var bridge$6517$6530;(bridge$6517$6530=$6516$6525);if(((typeof(bridge$6517$6530)==="string")||(typeof(bridge$6517$6530)==="number"))){return obj$6513[msg$6519];}else{var other$6538;(other$6538=$6516$6525);return obj$6513["::send"](msg$6519);}});;(Array[":::project"]=function($6541$6543){var ph$6546;var value$6547;var t0$6549;(t0$6549=$6541$6543);(value$6547=t0$6549);(ph$6546=t0$6549);;var $6545$6553;($6545$6553=ph$6546);;if($6645(Array)($6545$6553)){return [true,value$6547];}else{$6545$6553;return [true,[value$6547]];}});(Array.prototype["::check"]=function(value$6567){if((value$6567 instanceof Array)){var i$6572;(i$6572=0);;$6570:for(;(i$6572<this.length);(i$6572++)){if(($6660(this,i$6572)!==$6660(value$6567,i$6572))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$6581){if((value$6581 instanceof Array)){var i$6586;(i$6586=0);;$6584:for(;(i$6586<this.length);(i$6586++)){if(($6660(this,i$6586)!==$6660(value$6581,i$6586))){return [true,[value$6581]];}}return [true,value$6581.slice(this.length)];}else{return [true,[value$6581]];}});(Array.prototype[":::deconstruct"]=function(value$6595){return [true,value$6595.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($6661));});(RegExp.prototype["::check"]=function(value$6600){return value$6600.match(this);});(RegExp.prototype[":::project"]=function(value$6603){var $6605$6607;($6605$6607=value$6603.match(this));;var m$6615;if(($6605$6607===null)){(m$6615=$6605$6607);return [false,null];}else{var m$6620;(m$6620=$6605$6607);return [true,m$6620];}});(RegExp.prototype[":::deconstruct"]=function(value$6623){var $6625$6627;($6625$6627=value$6623.match(this));;var m$6635;if(($6625$6627===null)){(m$6635=$6625$6627);return [false,null];}else{var m$6640;(m$6640=$6625$6627);return [true,m$6640];}});(Function.prototype["::send"]=function(args$6643){return this.apply(this,args$6643);});
var $7646=function(dest$7648,values$7649){var k$7654;(k$7654=null);$7652:for(k$7654 in values$7649){if(values$7649.hasOwnProperty(k$7654)){(dest$7648[k$7654]=values$7649[k$7654]);}}return dest$7648;};
var $7540=function(){var $7541$7543;($7541$7543=function(tags$7547){var it$0$7550;(it$0$7550=function(){if((!$6645($7541$7543)(this))){return Object.create($7541$7543.prototype);}else{return this;}}());;(it$0$7550["tags"]=tags$7547);return it$0$7550;});;($7541$7543.prototype["create"]=function(){var $7559$7561;($7559$7561=arguments);;var t0$7566;var message$7570;var args$7571;(t0$7566=$7559$7561.length);if((t0$7566>=0)){(message$7570=function(){if((0>=t0$7566)){return "";}else{return $7559$7561[0];}}());(args$7571=Array.prototype.slice.call($7559$7561,1));var it$0$7575;(it$0$7575=this);;var e$7580;(e$7580=Error(message$7570));;(e$7580["::tags"]=it$0$7575.tags);(e$7580["args"]=args$7571);(e$7580["name"]=["E"].concat(it$0$7575.tags).join("."));return e$7580;}else{$7527($7559$7561);}});($7541$7543.prototype["::check"]=function(e$7589){var it$0$7592;(it$0$7592=this);;var tags$7597;if(((!e$7589)||(!$6645(Error)(e$7589)))){return false;}(tags$7597=(e$7589["::tags"]||[]));;var temp$7605;(temp$7605=it$0$7592.tags);;var len$7610;(len$7610=temp$7605.length);;var i$7615;(i$7615=0);;$7598:for(;(i$7615<len$7610);(i$7615++)){var m$7623;(m$7623=temp$7605[i$7615]);;var tag$7631;(tag$7631=m$7623);if((tags$7597.indexOf(tag$7631)===(-1))){return false;}else{false;;}}return true;});($7541$7543.prototype["::deconstruct"]=function(e$7639){var it$0$7642;(it$0$7642=this);;return e$7639.args;});$7646($7541$7543,({}));return $7541$7543;}();
var $7527=function(value$7529,url$7530,start$7531,end$7532){var err$7535;(err$7535=$7540(["match"]).create("Could not find a match for value",({"value":value$7529})));;if(url$7530){(err$7535["location"]=["location",url$7530,start$7531,end$7532]);}throw err$7535;};
var $7658=function(type$7660){return function(value$7663){var f$7666;(f$7666=type$7660[":::project"]);;if((f$7666===(void 0))){var f$7671;(f$7671=type$7660["::project"]);;if((f$7671===(void 0))){return [true,type$7660(value$7663)];}else{var rval$7676;(rval$7676=false);;try{(rval$7676=[true,f$7671(value$7663)]);}catch(excv$7682){var e$7688;(e$7688=excv$7682);(rval$7676=[false,null]);}return rval$7676;}}else{return f$7666.call(type$7660,value$7663);}};};var $6692$6693;var __lt____lt____colon__$6694;var __plus____plus____colon__$6695;var transform$6696;var MAX$6697;var order_map$6698;var DONE$6699;var NONE$6700;var LEFT$6701;var RIGHT$6702;var BOTH$6703;var oparse$6704;var consult$6705;var order$6706;var finalize$6707;var parse$6708;($6692$6693=require("./location"));;(__lt____lt____colon__$6694=$6692$6693["<<:"]);;(__plus____plus____colon__$6695=$6692$6693["++:"]);;(transform$6696=function(expr$6721,cb$6722){var rval$6736;var tr$6725;var result$6726;(tr$6725=function(x$6730){return transform$6696(x$6730,cb$6722);});;(result$6726=(((rval$6736=false)),(function(){try{(rval$6736=cb$6722.call(tr$6725,expr$6721));}catch(excv$6742){var name$6782;var args$6783;var v$6777;var s$6772;var $6751$6762;var $6752$6763;var $6753$6764;var t0$6760;var $6750$6755;var e$6748;(e$6748=excv$6742);(rval$6736=((($6750$6755=expr$6721)),function(){if((($6751$6762=($6750$6755 instanceof Array))&&((t0$6760=$6750$6755.length),((t0$6760===1)&&($6750$6755[0]==="void"))))){return ["void"];}else{if(($6751$6762&&(($6753$6764=(t0$6760===2))&&($6750$6755[0]==="symbol")))){(s$6772=$6750$6755[1]);return expr$6721;}else{if(($6753$6764&&($6750$6755[0]==="value"))){(v$6777=$6750$6755[1]);return expr$6721;}else{if(($6751$6762&&(t0$6760>=1))){(name$6782=$6750$6755[0]);(args$6783=Array.prototype.slice.call($6750$6755,1));return [name$6782].concat(args$6783.map(tr$6725));}else{$7527($6750$6755);}}}}}()));}}(),rval$6736)));;return __lt____lt____colon__$6694(result$6726,expr$6721);});;(MAX$6697=(1/0));;(order_map$6698=({"IFX":({"wide":({",":[[15,1],[15,1]],"with":[[15,1999],[15,10]],"each":[[15,11],[15,10]],"where":[[15,11],[15,10]],"!!":[[15,11],[15,10]],"|>":[[15,11],[15,10]],"->":[[15,11],[15,10]],"=>":[[15,11],[15,10]],"=":[[15,11],[15,10]],":=":[[15,11],[15,10]],"+=":[[15,11],[15,10]],"-=":[[15,11],[15,10]],"*=":[[15,11],[15,10]],"/=":[[15,11],[15,10]],"<<=":[[15,11],[15,10]],">>=":[[15,11],[15,10]],">>>=":[[15,11],[15,10]],"++=":[[15,11],[15,10]],"?=":[[15,11],[15,10]],"%":[[15,11],[15,10]],"when":[[15,100],[15,101]],"||":[[15,110],[15,111]],"&&":[[15,120],[15,121]],"or":[[15,110],[15,111]],"and":[[15,120],[15,121]],"not":[[15,130],[15,131]],"==":[[15,200],[15,201]],"!=":[[15,200],[15,201]],">=":[[15,200],[15,201]],"<=":[[15,200],[15,201]],">":[[15,200],[15,201]],"<":[[15,200],[15,201]],"^.":[[15,400],[15,401]],"|.":[[15,410],[15,411]],"&.":[[15,420],[15,421]],"<<":[[1,500],[1,501]],">>":[[1,500],[1,501]],">>>":[[1,500],[1,501]],"+":[[1,550],[1,551]],"-":[[1,550],[1,551]],"*":[[1,560],[1,561]],"/":[[1,560],[1,561]],"mod":[[1,560],[1,561]],"**":[[1,571],[1,570]],"DEFAULT":[[8,900],[4,901]],"WHITE":[[15,1002],[15,1001]],":":[[15,1001],[15,2]]}),"short":({"DEFAULT":[[15,1800],[15,1801]],"WHITE":[[15,2000],[15,2001]],",":[[15,1],[15,1]],":":[[15,1001],[15,2]]})}),"PFX":({"wide":({"DEFAULT":[[15,MAX$6697],[15,900]],"when":[[15,MAX$6697],[15,101]],"not":[[15,MAX$6697],[15,131]],".":[[15,MAX$6697],[15,3000]],"#":[[15,MAX$6697],[15,3000]],"~":[[15,MAX$6697],[15,3000]],"@":[[15,MAX$6697],[15,3000]],"<>":[[15,MAX$6697],[15,5]],"(":[[15,MAX$6697],[15,1]],"[":[[15,MAX$6697],[15,1]],"{":[[15,MAX$6697],[15,1]]}),"short":({"DEFAULT":[[15,MAX$6697],[15,1901]],".":[[15,MAX$6697],[15,3000]],"#":[[15,MAX$6697],[15,3000]],"~":[[15,MAX$6697],[15,3000]],"@":[[15,MAX$6697],[15,3000]],"(":[[15,MAX$6697],[15,1]],"[":[[15,MAX$6697],[15,1]],"{":[[15,MAX$6697],[15,1]]})}),"SFX":({"wide":({"DEFAULT":[[15,901],[15,MAX$6697]],")":[[15,1],[15,MAX$6697]],"]":[[15,1],[15,MAX$6697]],"}":[[15,1],[15,MAX$6697]]}),"short":({"DEFAULT":[[15,1900],[15,MAX$6697]],")":[[15,1],[15,MAX$6697]],"]":[[15,1],[15,MAX$6697]],"}":[[15,1],[15,MAX$6697]]})})}));;(DONE$6699=(-1));;(NONE$6700=0);;(LEFT$6701=1);;(RIGHT$6702=2);;(BOTH$6703=3);;(oparse$6704=function(next$6814,order$6815,finalize$6816){var between$6819;var right_op$6820;var stack$6821;var left_op$6822;var current$6823;(between$6819=finalize$6816(next$6814()));;(right_op$6820=next$6814());;(stack$6821=[]);;(left_op$6822=null);;(current$6823=null);;$6824:while(true){var v$6864;var other$6880;var $6843$6849;var o$6844;(o$6844=function(){if(((!left_op$6822)&&(!right_op$6820))){return DONE$6699;}else{return ((((!left_op$6822)&&RIGHT$6702)||((!right_op$6820)&&LEFT$6701))||order$6815(left_op$6822,right_op$6820));}}());;($6843$6849=o$6844);;if(($6843$6849===DONE$6699)){return between$6819;}else{if(($6843$6849===LEFT$6701)){current$6823.push(between$6819);(between$6819=finalize$6816(current$6823));(v$6864=stack$6821.pop());;(left_op$6822=v$6864[0]);(current$6823=v$6864[1]);}else{if(($6843$6849===RIGHT$6702)){stack$6821.push([left_op$6822,current$6823]);(left_op$6822=right_op$6820);(current$6823=[[right_op$6820],between$6819]);(between$6819=finalize$6816(next$6814()));(right_op$6820=next$6814());}else{if(($6843$6849===BOTH$6703)){current$6823[0].push(right_op$6820);current$6823.push(between$6819);(left_op$6822=right_op$6820);(between$6819=finalize$6816(next$6814()));(right_op$6820=next$6814());}else{(other$6880=$6843$6849);throw $7540(["should_never_happen"]).create("undefined priority",({"left":left_op$6822,"right":right_op$6820}));}}}}}});;(consult$6705=function($6885$6887){var t0$6893;var t1$6894;var map$6900;var fixity$6889;var width$6890;var op$6891;(t0$6893=$6885$6887);if(((t0$6893 instanceof Array)&&((t1$6894=t0$6893.length),(t1$6894===3)))){(fixity$6889=t0$6893[0]);(width$6890=t0$6893[1]);(op$6891=t0$6893[2]);;}else{$7527($6885$6887);}(map$6900=$6660($6660(order_map$6698,fixity$6889),width$6890));;return ($6660(map$6900,op$6891)||map$6900.DEFAULT);});;(order$6706=function(o1$6908,o2$6909){var t0$6919;var t1$6920;var t0$6926;var t1$6927;var $6913$6939;var $6912$6933;var code1$6914;var ord1$6915;var code2$6916;var ord2$6917;(t0$6919=consult$6705(o1$6908)[1]);if(((t0$6919 instanceof Array)&&((t1$6920=t0$6919.length),(t1$6920===2)))){(code1$6914=t0$6919[0]);(ord1$6915=t0$6919[1]);;}else{$7527(consult$6705(o1$6908)[1],"/home/olivier/git/earl-grey/src/parse.eg",5950,5964);}(t0$6926=consult$6705(o2$6909)[0]);if(((t0$6926 instanceof Array)&&((t1$6927=t0$6926.length),(t1$6927===2)))){(code2$6916=t0$6926[0]);(ord2$6917=t0$6926[1]);;}else{$7527(consult$6705(o2$6909)[0],"/home/olivier/git/earl-grey/src/parse.eg",5984,5998);}($6912$6933=null);;$6912$6933;if(((code1$6914&code2$6916)===0)){throw $7540(["syntax","order"]).create("Cannot mix operators in the given order",({"left":o1$6908,"right":o2$6909}));}else{if((ord1$6915>ord2$6917)){return LEFT$6701;}else{if((ord1$6915<ord2$6917)){return RIGHT$6702;}else{if((ord1$6915===ord2$6917)){return BOTH$6703;}else{$7527($6912$6933);}}}}});;(finalize$6707=function($6961$6963){var t0$6972;var i$7047;var len$7042;var temp$7037;var i$7077;var len$7072;var temp$7067;var i$7115;var len$7110;var temp$7105;var acc$7100;var other$7342;var args$7337;var f$7325;var orig_args$7326;var args$7327;var $7300$7312;var $7301$7313;var t0$7308;var t1$7309;var t2$7310;var $7299$7303;var inserted$7196;var result$7197;var f$7353;var other$7411;var x$7405;var $7386$7396;var $7387$7397;var t0$7394;var $7385$7389;var result$7350;var f$7419;var oloc$7486;var abloc$7487;var oabloc$7488;var rval$7489;var a$7481;var b$7482;var $7016$7466;var $7017$7467;var $7018$7468;var $7019$7469;var t0$7459;var t1$7460;var t2$7461;var t3$7462;var t4$7463;var t5$7464;var other$7506;var $7015$7455;var target$7182;var _b$7183;var body$7184;var f$7174;var body$7175;var f$7162;var arg$7163;var body$7164;var $7020$7153;var $7021$7154;var $7022$7155;var $7023$7156;var $7024$7157;var $7025$7158;var $7026$7159;var t0$7142;var t1$7143;var t2$7144;var t3$7145;var t4$7146;var t5$7147;var t6$7148;var t7$7149;var t8$7150;var bridge$7014$7151;var $7013$7137;var sumloc$7027;var orig_ops$7028;var op$7029;var other$7510;var ops$7008;var args$7009;var value$6999;var value$6994;var value$6988;var $6966$6983;var $6967$6984;var $6968$6985;var t0$6981;var $6965$6976;var ph$6969;var token$6970;(t0$6972=$6961$6963);(token$6970=t0$6972);(ph$6969=t0$6972);;($6965$6976=ph$6969);;if((($6966$6983=($6965$6976 instanceof Array))&&((t0$6981=$6965$6976.length),(($6968$6985=(t0$6981===2))&&($6965$6976[0]==="ID"))))){(value$6988=$6965$6976[1]);return __lt____lt____colon__$6694(["symbol",value$6988],token$6970);}else{if(($6968$6985&&($6965$6976[0]==="NUM"))){(value$6994=$6965$6976[1]);return __lt____lt____colon__$6694(["value",value$6994],token$6970);}else{if(($6968$6985&&($6965$6976[0]==="STR"))){(value$6999=$6965$6976[1]);return __lt____lt____colon__$6694(["value",value$6999],token$6970);}else{if(($6966$6983&&((t0$6981===1)&&($6965$6976[0]==="VOID")))){return __lt____lt____colon__$6694(["void"],token$6970);}else{if(($6966$6983&&(t0$6981>=1))){(ops$7008=$6965$6976[0]);(args$7009=Array.prototype.slice.call($6965$6976,1));(sumloc$7027=ops$7008[0].location);;(temp$7037=ops$7008.slice(1));;(len$7042=temp$7037.length);;(i$7047=0);;$7030:for(;(i$7047<len$7042);(i$7047++)){var op$7063;var m$7055;(m$7055=temp$7037[i$7047]);;(op$7063=m$7055);(sumloc$7027=__plus____plus____colon__$6695(sumloc$7027,op$7063));}(temp$7067=args$7009);;(len$7072=temp$7067.length);;(i$7077=0);;$7031:for(;(i$7077<len$7072);(i$7077++)){var arg$7093;var m$7085;(m$7085=temp$7067[i$7077]);;(arg$7093=m$7085);(sumloc$7027=__plus____plus____colon__$6695(sumloc$7027,arg$7093));}(orig_ops$7028=ops$7008);;(ops$7008=(((acc$7100=[])),(((temp$7105=ops$7008)),(((len$7110=temp$7105.length)),(((i$7115=0)),function(){$7098:for(;(i$7115<len$7110);(i$7115++)){var o$7131;var m$7123;(m$7123=temp$7105[i$7115]);;(o$7131=m$7123);acc$7100.push(o$7131[2]);}}()))),acc$7100));(op$7029=ops$7008[0]);;($7013$7137=[ops$7008,args$7009]);;if((($7020$7153=($7013$7137 instanceof Array))&&((t0$7142=$7013$7137.length),(($7022$7155=(t0$7142===2))&&((t1$7143=$7013$7137[0]),(($7024$7157=(t1$7143 instanceof Array))&&((t2$7144=t1$7143.length),((t2$7144===2)&&((t1$7143[0]==="WHITE")&&((t1$7143[1]===":")&&((t3$7145=$7013$7137[1]),((t3$7145 instanceof Array)&&((t4$7146=t3$7145.length),(t4$7146===3)))))))))))))){(f$7162=t3$7145[0]);(arg$7163=t3$7145[1]);(body$7164=t3$7145[2]);return __lt____lt____colon__$6694(["send",f$7162,__lt____lt____colon__$6694(["data",arg$7163,body$7164],__plus____plus____colon__$6695(arg$7163,body$7164))],sumloc$7027);}else{if(($7024$7157&&(($7026$7159=(t2$7144===1))&&((t1$7143[0]===":")&&((t3$7145=$7013$7137[1]),((t3$7145 instanceof Array)&&((t4$7146=t3$7145.length),(t4$7146===2)))))))){(f$7174=t3$7145[0]);(body$7175=t3$7145[1]);return __lt____lt____colon__$6694(["send",f$7174,__lt____lt____colon__$6694(["data",body$7175],body$7175)],sumloc$7027);}else{if(($7026$7159&&((t1$7143[0]==="with")&&((t3$7145=$7013$7137[1]),((t3$7145 instanceof Array)&&((t4$7146=t3$7145.length),((t4$7146===2)&&((target$7182=t3$7145[0]),((t5$7147=t3$7145[1]),((_b$7183=t5$7147),((t6$7148=$7658(["multi"])(t5$7147)),(t6$7148[0]&&((t7$7149=t6$7148[1]),((t8$7150=t7$7149.length),(t8$7150>=0))))))))))))))){(body$7184=Array.prototype.slice.call(t7$7149,0));(inserted$7196=false);;(result$7197=transform$6696(target$7182,function($7203$7205){var t0$7211;var i$7270;var len$7265;var temp$7260;var tr$7249;var res$7250;var args$7244;var x$7232;var f$7233;var a$7234;var b$7235;var t0$7220;var t1$7221;var t2$7222;var $7207$7215;var ph$7208;var expr$7209;(t0$7211=$7203$7205);(expr$7209=t0$7211);(ph$7208=t0$7211);;($7207$7215=ph$7208);;if((($7207$7215 instanceof Array)&&((t0$7220=$7207$7215.length),((t0$7220===2)&&(($7207$7215[0]==="symbol")&&($7207$7215[1]==="...")))))){(inserted$7196=true);return __lt____lt____colon__$6694(["multi"].concat(body$7184),_b$7183);}else{(x$7232=$7207$7215);if((x$7232.fromop&&(($7207$7215 instanceof Array)&&((t0$7220=$7207$7215.length),((t0$7220===3)&&(($7207$7215[0]==="send")&&((f$7233=$7207$7215[1]),((t1$7221=$7207$7215[2]),((t1$7221 instanceof Array)&&((t2$7222=t1$7221.length),((t2$7222===3)&&(t1$7221[0]==="data")))))))))))){(a$7234=t1$7221[1]);(b$7235=t1$7221[2]);return ["send",this(f$7233),__lt____lt____colon__$6694(["data",this(a$7234),this(b$7235)],__plus____plus____colon__$6695(a$7234,b$7235))];}else{if((($7207$7215 instanceof Array)&&((t0$7220=$7207$7215.length),((t0$7220>=1)&&($7207$7215[0]==="data"))))){(args$7244=Array.prototype.slice.call($7207$7215,1));(tr$7249=this);;(res$7250=["data"]);;(temp$7260=args$7244);;(len$7265=temp$7260.length);;(i$7270=0);;$7251:for(;(i$7270<len$7265);(i$7270++)){var other$7294;var t0$7283;var t1$7284;var m$7278;(m$7278=temp$7260[i$7270]);;(t0$7283=m$7278);if(((t0$7283 instanceof Array)&&((t1$7284=t0$7283.length),((t1$7284===2)&&((t0$7283[0]==="symbol")&&(t0$7283[1]==="...")))))){(inserted$7196=true);(res$7250=res$7250.concat(body$7184));}else{(other$7294=m$7278);res$7250.push(__lt____lt____colon__$6694(tr$7249(other$7294),other$7294));}}return __lt____lt____colon__$6694(res$7250,expr$7209);}else{$7527($7207$7215);}}}}));;if((!inserted$7196)){($7299$7303=target$7182);;if((($7299$7303 instanceof Array)&&((t0$7308=$7299$7303.length),((t0$7308===1)&&($7299$7303[0]==="void"))))){return __lt____lt____colon__$6694(["data"].concat(body$7184),sumloc$7027);}else{$7299$7303;if(target$7182.fromop){return __lt____lt____colon__$6694(["send",target$7182,__lt____lt____colon__$6694(["data"].concat(body$7184),_b$7183)],sumloc$7027);}else{if((($7300$7312=($7299$7303 instanceof Array))&&((t0$7308=$7299$7303.length),((t0$7308===3)&&(($7299$7303[0]==="send")&&((f$7325=$7299$7303[1]),((t1$7309=$7299$7303[2]),((orig_args$7326=t1$7309),((t1$7309 instanceof Array)&&((t2$7310=t1$7309.length),((t2$7310>=1)&&(t1$7309[0]==="data")))))))))))){(args$7327=Array.prototype.slice.call(t1$7309,1));return __lt____lt____colon__$6694(["send",f$7325,__lt____lt____colon__$6694(["data"].concat(args$7327).concat(body$7184),__plus____plus____colon__$6695(orig_args$7326,_b$7183))],sumloc$7027);}else{if(($7300$7312&&((t0$7308>=1)&&($7299$7303[0]==="data")))){(args$7337=Array.prototype.slice.call($7299$7303,1));return __lt____lt____colon__$6694(target$7182.concat(body$7184),sumloc$7027);}else{(other$7342=$7299$7303);return __lt____lt____colon__$6694(["send",target$7182,__lt____lt____colon__$6694(["data"].concat(body$7184),_b$7183)],sumloc$7027);}}}}}else{return __lt____lt____colon__$6694(result$7197,sumloc$7027);}}else{if(($7024$7157&&(($7026$7159=(t2$7144>=1))&&((bridge$7014$7151=t1$7143[0]),((bridge$7014$7151==="[")||(bridge$7014$7151===",")))))){Array.prototype.slice.call(t1$7143,1);$7013$7137[1];if((op$7029==="[")){(args$7009=args$7009.slice(1,(-1)));}(args$7009=(((f$7353=function($7356$7358){var other$7380;var t0$7371;var $7360$7366;var ph$7361;(ph$7361=$7356$7358);;($7360$7366=ph$7361);;if((($7360$7366 instanceof Array)&&((t0$7371=$7360$7366.length),((t0$7371===1)&&($7360$7366[0]==="void"))))){return false;}else{(other$7380=$7360$7366);return true;}})),args$7009.filter(f$7353)));(result$7350=((($7385$7389=args$7009)),function(){if((($7386$7396=($7385$7389 instanceof Array))&&((t0$7394=$7385$7389.length),(t0$7394===0)))){return ["value",(void 0)];}else{if(($7386$7396&&(t0$7394===1))){(x$7405=$7385$7389[0]);(x$7405["location"]=sumloc$7027);return x$7405;}else{(other$7411=$7385$7389);return ["multi"].concat(args$7009);}}}()));;return __lt____lt____colon__$6694(result$7350,sumloc$7027);}else{if(($7026$7159&&(t1$7143[0]==="{"))){Array.prototype.slice.call(t1$7143,1);$7013$7137[1];(f$7419=function($7422$7424){var other$7446;var t0$7437;var $7426$7432;var ph$7427;(ph$7427=$7422$7424);;($7426$7432=ph$7427);;if((($7426$7432 instanceof Array)&&((t0$7437=$7426$7432.length),((t0$7437===1)&&($7426$7432[0]==="void"))))){return false;}else{(other$7446=$7426$7432);return true;}});;return __lt____lt____colon__$6694(["data"].concat(args$7009.slice(1,(-1)).filter(f$7419)),sumloc$7027);}else{if(($7024$7157&&(($7026$7159=(t2$7144===1))&&(t1$7143[0]==="WHITE")))){$7013$7137[1];return __lt____lt____colon__$6694(["send"].concat(args$7009),sumloc$7027);}else{if($7026$7159){t1$7143[0];($7015$7455=$7013$7137[1]);(t0$7459=$7015$7455);if((($7017$7467=(t0$7459 instanceof Array))&&((t1$7460=t0$7459.length),(($7019$7469=(t1$7460===2))&&((t2$7461=t0$7459[0]),((t2$7461 instanceof Array)&&((t3$7462=t2$7461.length),((t3$7462===1)&&((t2$7461[0]==="void")&&((t4$7463=t0$7459[1]),((t4$7463 instanceof Array)&&((t5$7464=t4$7463.length),((t5$7464===1)&&(t4$7463[0]==="void")))))))))))))){return __lt____lt____colon__$6694(["symbol",op$7029],orig_ops$7028[0]);}else{if($7019$7469){(a$7481=t0$7459[0]);(b$7482=t0$7459[1]);(oloc$7486=orig_ops$7028[0].location);;(abloc$7487=__plus____plus____colon__$6695(a$7481,b$7482));;(oabloc$7488=__plus____plus____colon__$6695(orig_ops$7028[0],abloc$7487));;(rval$7489=__lt____lt____colon__$6694(["send",__lt____lt____colon__$6694(["symbol",op$7029],oloc$7486),__lt____lt____colon__$6694(["data",a$7481,b$7482],abloc$7487)],__plus____plus____colon__$6695(oloc$7486,abloc$7487)));;(rval$7489["fromop"]=true);return rval$7489;}else{$7527($7015$7455,"/home/olivier/git/earl-grey/src/parse.eg",9410,9415);}}}else{(other$7506=$7013$7137);throw $7540(["should_never_happen"]).create("unknown node",({"node":token$6970}));}}}}}}}}else{(other$7510=$6965$6976);throw $7540(["should_never_happen"]).create("unknown node (B)",({"node":token$6970}));}}}}}});;(parse$6708=function(tokens$7516){var next$7519;(next$7519=function(){return tokens$7516.shift();});;return oparse$6704(next$7519,order$6706,finalize$6707);});;(exports["parse"]=parse$6708);
