var $9735=function(type$9737){var f$9740;(f$9740=type$9737["::check"]);if((f$9740===(void 0))){return function(value$9745){return (value$9745 instanceof type$9737);};}else{return function(value$9748){return f$9740.call(type$9737,value$9748);};}};
var $9750=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $9751=function(dest$9753,values$9754){var k$9759;(k$9759=null);$9757:for(k$9759 in values$9754){if(values$9754.hasOwnProperty(k$9759)){(dest$9753[k$9759]=values$9754[k$9759]);}}return dest$9753;};
var $9766=function($9767$9769){var ph$9773;(ph$9773=$9767$9769);var $9771$9778;($9771$9778=ph$9773);var bridge$9772$9783;var x$9787;(bridge$9772$9783=$9771$9778);if((((typeof(bridge$9772$9783)==="string")&&((x$9787=bridge$9772$9783),true))||((typeof(bridge$9772$9783)==="number")&&((x$9787=bridge$9772$9783),true)))){return ["value",x$9787];}else{var other$9797;(other$9797=$9771$9778);return other$9797["::serialize_ast"]();}};
var send$9542;(send$9542=function(obj$9547,$9545$9548){var ph$9552;var msg$9553;var t0$9555;(t0$9555=$9545$9548);(msg$9553=t0$9555);(ph$9552=t0$9555);var $9550$9562;($9550$9562=ph$9552);var bridge$9551$9567;(bridge$9551$9567=$9550$9562);if(((typeof(bridge$9551$9567)==="string")||(typeof(bridge$9551$9567)==="number"))){return obj$9547[msg$9553];}else{var other$9578;(other$9578=$9550$9562);return obj$9547["::send"](msg$9553);}});(Array[":::project"]=function($9583$9585){var ph$9588;var value$9589;var t0$9591;(t0$9591=$9583$9585);(value$9589=t0$9591);(ph$9588=t0$9591);var $9587$9598;($9587$9598=ph$9588);if($9735(Array)($9587$9598)){return [true,value$9589];}else{$9587$9598;return [true,[value$9589]];}});(Array.prototype["::check"]=function(value$9615){if((value$9615 instanceof Array)){var i$9620;(i$9620=0);$9618:for(;(i$9620<this.length);(i$9620++)){if(($9750(this,i$9620)!==$9750(value$9615,i$9620))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $9751(this.slice(0),this);});(Array.prototype[":::project"]=function(value$9637){if((value$9637 instanceof Array)){var i$9642;(i$9642=0);$9640:for(;(i$9642<this.length);(i$9642++)){if(($9750(this,i$9642)!==$9750(value$9637,i$9642))){return [true,[value$9637]];}}return [true,value$9637.slice(this.length)];}else{return [true,[value$9637]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($9766));});(RegExp.prototype["::check"]=function($9658$9660){var ph$9663;(ph$9663=$9658$9660);var $9662$9668;($9662$9668=ph$9663);var value$9676;if((typeof($9662$9668)==="string")){(value$9676=$9662$9668);if(value$9676.match(this)){return true;}else{return false;}}else{var other$9681;(other$9681=$9662$9668);return false;}});(RegExp.prototype[":::project"]=function($9686$9688){var ph$9691;(ph$9691=$9686$9688);var $9690$9696;($9690$9696=ph$9691);var value$9704;if((typeof($9690$9696)==="string")){(value$9704=$9690$9696);var $9707$9709;($9707$9709=value$9704.match(this));var m$9717;if(($9707$9709===null)){(m$9717=$9707$9709);return [false,null];}else{var m$9722;(m$9722=$9707$9709);return [true,m$9722];}}else{var other$9726;(other$9726=$9690$9696);return [false,null];}});(Function.prototype["::send"]=function(args$9732){return this.apply(this,args$9732);});
var $12312=function(arr$12314){var results$12318;var l$12319;(results$12318=[]);(l$12319=arr$12314.length);var i$12327;(i$12327=0);$12317:for(;(i$12327<l$12319);(i$12327++)){results$12318.push([i$12327,$9750(arr$12314,i$12327)]);}return results$12318;};
var $12116=function(){var $12117$12119;($12117$12119=function(tags$12123){var it$0$12126;(it$0$12126=function(){if((!$9735($12117$12119)(this))){return Object.create($12117$12119.prototype);}else{return this;}}());(it$0$12126["tags"]=tags$12123);return it$0$12126;});($12117$12119.prototype["create"]=function(){var $12138$12140;($12138$12140=arguments);var t0$12145;var message$12149;var args$12150;(t0$12145=$12138$12140.length);if((t0$12145>=0)){(message$12149=function(){if((0>=t0$12145)){return "";}else{return $12138$12140[0];}}());(args$12150=Array.prototype.slice.call($12138$12140,1));var it$0$12157;(it$0$12157=this);var self$12162;(self$12162=this);var e$12167;(e$12167=Error(message$12149));(e$12167["::tags"]=it$0$12157.tags);(e$12167["args"]=args$12150);var temp$12181;(temp$12181=$12312(args$12150));var $length$12186;($length$12186=temp$12181.length);var $index$12191;($index$12191=0);$12168:for(;($index$12191<$length$12186);($index$12191++)){var m$12199;(m$12199=temp$12181[$index$12191]);var t0$12204;var t1$12205;var i$12209;var arg$12210;(t0$12204=m$12199);if(((t0$12204 instanceof Array)&&(((t1$12205=t0$12204.length)),(t1$12205===2)))){(i$12209=t0$12204[0]);(arg$12210=t0$12204[1]);(e$12167[i$12209]=arg$12210);}else{$12100(m$12199);}}(e$12167["length"]=args$12150.length);(e$12167["name"]=["E"].concat(it$0$12157.tags).join("."));return e$12167;}else{$12100($12138$12140);}});($12117$12119.prototype["::check"]=function(e$12236){var it$0$12239;(it$0$12239=this);var self$12244;(self$12244=this);var tags$12249;if(((!e$12236)||(!$9735(Error)(e$12236)))){return false;}(tags$12249=(e$12236["::tags"]||[]));var temp$12258;(temp$12258=it$0$12239.tags);var $length$12263;($length$12263=temp$12258.length);var $index$12268;($index$12268=0);$12250:for(;($index$12268<$length$12263);($index$12268++)){var m$12276;(m$12276=temp$12258[$index$12268]);var tag$12284;(tag$12284=m$12276);if((tags$12249.indexOf(tag$12284)===-1)){return false;}else{false;}}return true;});($12117$12119.prototype["::deconstruct"]=function(e$12292){var it$0$12295;(it$0$12295=this);var self$12300;(self$12300=this);return e$12292.args;});$9751($12117$12119,$9751(function(){var accum$12305;(accum$12305=({}));(accum$12305["::name"]="$12117");return accum$12305;}(),function(){var accum$12309;(accum$12309=({}));(accum$12309["::egclass"]=true);return accum$12309;}()));return $12117$12119;}();
var $12100=function(value$12102,url$12103,start$12104,end$12105){var err$12108;(err$12108=$12116(["match"]).create("Could not find a match for value",({"value":value$12102})));if(url$12103){(err$12108["location"]=["location",url$12103,start$12104,end$12105]);}throw err$12108;};
var $12334=function(obj$12336){var results$12340;(results$12340=[]);var k$12345;(k$12345=null);$12339:for(k$12345 in obj$12336){if(Object.prototype.hasOwnProperty.call(obj$12336,k$12345)){results$12340.push([k$12345,$9750(obj$12336,k$12345)]);}}return results$12340;};
var $12349=function(arrays$12351){var results$12354;(results$12354=[]);var temp$12362;(temp$12362=arrays$12351);var $length$12367;($length$12367=temp$12362.length);var $index$12372;($index$12372=0);$12355:for(;($index$12372<$length$12367);($index$12372++)){var m$12380;(m$12380=temp$12362[$index$12372]);var a$12388;(a$12388=m$12380);(results$12354=results$12354.concat(a$12388));}return results$12354;};
var $12393=function(type$12395){return function(value$12398){var f$12401;(f$12401=type$12395[":::project"]);if((f$12401===(void 0))){(f$12401=type$12395["::project"]);if((f$12401===(void 0))){return [true,type$12395(value$12398)];}else{var rval$12410;(rval$12410=false);try{(rval$12410=[true,f$12401(value$12398)]);}catch(excv$12419){var e$12425;(e$12425=excv$12419);(rval$12410=[false,null]);}return rval$12410;}}else{return f$12401.call(type$12395,value$12398);}};};
var $12563=Object.keys;
var $12564=function($12565$12567,key$12568){var ph$12572;(ph$12572=$12565$12567);var $12570$12577;($12570$12577=ph$12572);var bridge$12571$12582;(bridge$12571$12582=$12570$12577);if(((bridge$12571$12582===null)||(bridge$12571$12582===(void 0)))){return false;}else{var x$12593;if((typeof($12570$12577)==="string")){(x$12593=$12570$12577);return (key$12568 in String.prototype);}else{var x$12598;if((typeof($12570$12577)==="number")){(x$12598=$12570$12577);return (key$12568 in Number.prototype);}else{var x$12603;(x$12603=$12570$12577);return (key$12568 in x$12603);}}}};
var $12430=function($12431$12433,b$12434){var ph$12440;var a$12441;var t0$12443;(t0$12443=$12431$12433);(a$12441=t0$12443);(ph$12440=t0$12443);var $12436$12450;($12436$12450=ph$12440);var bridge$12437$12455;if(($12436$12450===b$12434)){return true;}else{(bridge$12437$12455=$12436$12450);if((function(){var bridge$12438$12468;(bridge$12438$12468=bridge$12437$12455);return (function(){var bridge$12439$12474;(bridge$12439$12474=bridge$12438$12468);return ((typeof(bridge$12439$12474)==="number")||(typeof(bridge$12439$12474)==="string"));}()||(bridge$12438$12468===null));}()||(bridge$12437$12455===(void 0)))){return false;}else{if($9735(Array)($12436$12450)){if(((!$9735(Array)(b$12434))||(a$12441.length!==b$12434.length))){return false;}var i$12488;(i$12488=0);$12485:for(;(i$12488<a$12441.length);(i$12488++)){if((!$12430(a$12441[i$12488],b$12434[i$12488]))){return false;}}return true;}else{$12436$12450;if(((Object.getPrototypeOf(a$12441)===Object.prototype)&&(Object.getPrototypeOf(b$12434)===Object.prototype))){var ka$12501;(ka$12501=$12563(a$12441));if((!$12430(ka$12501.sort(),$12563(b$12434).sort()))){return false;}var temp$12510;(temp$12510=ka$12501);var $length$12515;($length$12515=temp$12510.length);var $index$12520;($index$12520=0);$12502:for(;($index$12520<$length$12515);($index$12520++)){var m$12528;(m$12528=temp$12510[$index$12520]);var k$12536;(k$12536=m$12528);if((!$12430(a$12441[k$12536],b$12434[k$12536]))){return false;}}return true;}else{if($12564($12436$12450,"::serialize")){$12436$12450["::serialize"];var $12543$12545;($12543$12545=b$12434);if($12564($12543$12545,"::serialize")){$12543$12545["::serialize"];return $12430(a$12441["::serialize"](),b$12434["::serialize"]());}else{var otherwise$12557;(otherwise$12557=$12543$12545);return false;}}else{var otherwise$12561;(otherwise$12561=$12436$12450);return false;}}}}}};
var $12605=function(pairs$12607){var rval$12610;(rval$12610=({}));var temp$12618;(temp$12618=pairs$12607);var $length$12623;($length$12623=temp$12618.length);var $index$12628;($index$12628=0);$12611:for(;($index$12628<$length$12623);($index$12628++)){var m$12636;(m$12636=temp$12618[$index$12628]);var t0$12641;var t1$12642;var k$12646;var v$12647;(t0$12641=m$12636);if(((t0$12641 instanceof Array)&&(((t1$12642=t0$12641.length)),(t1$12642===2)))){(k$12646=t0$12641[0]);(v$12647=t0$12641[1]);(rval$12610[k$12646]=v$12647);}else{$12100(m$12636);}}return rval$12610;};var accum$10283;var accum$10287;var accum$10493;var accum$10927;var accum$10931;var accum$11113;var accum$11117;var accum$11121;var accum$11125;var accum$11129;var accum$11136;var accum$11140;var accum$11144;var accum$11148;var accum$11152;var eg_groups$10940;var eg_prio$10941;var $9801$9802;var __lt____lt____colon__$9803;var __plus____plus____colon__$9804;var transform$9805;var OperatorGroups$9806;var parse_op_description$9807;var eg_groups$9808;var SimplePriority$9809;var MAX$9810;var eg_order$9811;var DONE$9812;var NONE$9813;var LEFT$9814;var RIGHT$9815;var BOTH$9816;var oparse$9817;var finalize$9818;var parse$9819;($9801$9802=require("./location"));(__lt____lt____colon__$9803=$9801$9802["<<:"]);(__plus____plus____colon__$9804=$9801$9802["++:"]);(transform$9805=function(expr$9832,cb$9833){var rval$9847;var tr$9836;var result$9837;(tr$9836=function(x$9841){return transform$9805(x$9841,cb$9833);});(result$9837=(((rval$9847=false)),(function(){try{(rval$9847=cb$9833.call(tr$9836,expr$9832));}catch(excv$9856){var name$9901;var args$9902;var v$9896;var s$9891;var $9867$9878;var $9868$9879;var $9869$9880;var t0$9876;var $9866$9871;var e$9862;(e$9862=excv$9856);(rval$9847=((($9866$9871=expr$9832)),function(){if((($9867$9878=($9866$9871 instanceof Array))&&(((t0$9876=$9866$9871.length)),((t0$9876===1)&&($9866$9871[0]==="void"))))){return ["void"];}else{if(($9867$9878&&(($9869$9880=(t0$9876===2))&&($9866$9871[0]==="symbol")))){(s$9891=$9866$9871[1]);return expr$9832;}else{if(($9869$9880&&($9866$9871[0]==="value"))){(v$9896=$9866$9871[1]);return expr$9832;}else{if(($9867$9878&&(t0$9876>=1))){(name$9901=$9866$9871[0]);(args$9902=Array.prototype.slice.call($9866$9871,1));return [name$9901].concat(args$9902.map(tr$9836));}else{$12100($9866$9871);}}}}}()));}}(),rval$9847)));return __lt____lt____colon__$9803(result$9837,expr$9832);});(OperatorGroups$9806=function(groups$9913){var $index$9948;var $length$9943;var temp$9938;var acc$9933;var $index$10000;var $length$9995;var temp$9990;var acc$9985;var $index$10092;var $length$10087;var temp$10082;var acc$10077;var itg$9922;var it$0$9916;(it$0$9916=function(){if((!$9735(OperatorGroups$9806)(this))){return Object.create(OperatorGroups$9806.prototype);}else{return this;}}());(itg$9922=$12334(groups$9913));(it$0$9916["gnames"]=(((acc$9933=[])),(((temp$9938=itg$9922)),((($length$9943=temp$9938.length)),((($index$9948=0)),function(){$9930:for(;($index$9948<$length$9943);($index$9948++)){var name$9966;var t0$9961;var t1$9962;var m$9956;(m$9956=temp$9938[$index$9948]);(t0$9961=m$9956);if(((t0$9961 instanceof Array)&&(((t1$9962=t0$9961.length)),(t1$9962===2)))){(name$9966=t0$9961[0]);t0$9961[1];acc$9933.push(name$9966);}else{$12100(m$9956,"/home/olivier/git/earl-grey/src/parse.eg",503,529);}}}()))),acc$9933));(it$0$9916["groups"]=(((acc$9985=[])),(((temp$9990=itg$9922)),((($length$9995=temp$9990.length)),((($index$10000=0)),function(){$9982:for(;($index$10000<$length$9995);($index$10000++)){var $index$10048;var $length$10043;var temp$10038;var acc$10033;var name$10018;var descrs$10019;var t0$10013;var t1$10014;var m$10008;(m$10008=temp$9990[$index$10000]);(t0$10013=m$10008);if(((t0$10013 instanceof Array)&&(((t1$10014=t0$10013.length)),(t1$10014===2)))){(name$10018=t0$10013[0]);(descrs$10019=t0$10013[1]);acc$9985.push($12349((((acc$10033=[])),(((temp$10038=descrs$10019)),((($length$10043=temp$10038.length)),((($index$10048=0)),function(){$10030:for(;($index$10048<$length$10043);($index$10048++)){var descr$10064;var m$10056;(m$10056=temp$10038[$index$10048]);(descr$10064=m$10056);acc$10033.push(parse_op_description$9807(descr$10064));}}()))),acc$10033)));}else{$12100(m$10008,"/home/olivier/git/earl-grey/src/parse.eg",546,643);}}}()))),acc$9985));(it$0$9916["fns"]=[]);(it$0$9916["to_gid"]=({"IFX":({"wide":({}),"short":({})}),"PFX":({"wide":({}),"short":({})}),"SFX":({"wide":({}),"short":({})})}));(acc$10077=[]);(temp$10082=$12312(it$0$9916.groups));($length$10087=temp$10082.length);($index$10092=0);$9923:for(;($index$10092<$length$10087);($index$10092++)){var $index$10140;var $length$10135;var temp$10130;var acc$10125;var i$10110;var group$10111;var t0$10105;var t1$10106;var m$10100;(m$10100=temp$10082[$index$10092]);(t0$10105=m$10100);if(((t0$10105 instanceof Array)&&(((t1$10106=t0$10105.length)),(t1$10106===2)))){(i$10110=t0$10105[0]);(group$10111=t0$10105[1]);acc$10077.push((((acc$10125=[])),(((temp$10130=group$10111)),((($length$10135=temp$10130.length)),((($index$10140=0)),function(){$10122:for(;($index$10140<$length$10135);($index$10140++)){var f$10176;var fixity$10158;var width$10159;var name$10160;var t0$10153;var t1$10154;var m$10148;(m$10148=temp$10130[$index$10140]);(t0$10153=m$10148);if(((t0$10153 instanceof Array)&&(((t1$10154=t0$10153.length)),(t1$10154===3)))){(fixity$10158=t0$10153[0]);(width$10159=t0$10153[1]);(name$10160=t0$10153[2]);acc$10125.push((($9750($9750(it$0$9916.to_gid,fixity$10158),width$10159)[name$10160]=i$10110)));}else{(f$10176=m$10148);acc$10125.push(it$0$9916.fns.push([f$10176,i$10110]));}}}()))),acc$10125));}else{$12100(m$10100,"/home/olivier/git/earl-grey/src/parse.eg",808,1009);}}acc$10077;return it$0$9916;});(OperatorGroups$9806.prototype["get_name"]=function(o$10185){var self$10193;var it$0$10188;(it$0$10188=this);(self$10193=this);return $9750(it$0$10188.gnames,it$0$10188.get(o$10185));});(OperatorGroups$9806.prototype["get"]=function($10199$10201){var t0$10208;var t1$10209;var $index$10250;var $length$10245;var temp$10240;var attempt$10231;var self$10226;var it$0$10221;var o$10203;var fixity$10204;var width$10205;var name$10206;(t0$10208=$10199$10201);(o$10203=t0$10208);if(((t0$10208 instanceof Array)&&(((t1$10209=t0$10208.length)),(t1$10209===3)))){(fixity$10204=t0$10208[0]);(width$10205=t0$10208[1]);(name$10206=t0$10208[2]);}else{$12100($10199$10201);}(it$0$10221=this);(self$10226=this);(attempt$10231=$9750($9750($9750(it$0$10221.to_gid,fixity$10204),width$10205),name$10206));if((attempt$10231===(void 0))){(temp$10240=it$0$10221.fns);($length$10245=temp$10240.length);($index$10250=0);$10236:for(;($index$10250<$length$10245);($index$10250++)){var f$10268;var i$10269;var t0$10263;var t1$10264;var m$10258;(m$10258=temp$10240[$index$10250]);(t0$10263=m$10258);if(((t0$10263 instanceof Array)&&(((t1$10264=t0$10263.length)),(t1$10264===2)))){(f$10268=t0$10263[0]);(i$10269=t0$10263[1]);if(f$10268(o$10203)){return i$10269;}}else{$12100(m$10258,"/home/olivier/git/earl-grey/src/parse.eg",1188,1271);}}throw $12116(["syntax","unknown_operator"]).create(("Unknown operator: "+[true,String(o$10203)][1]),({"operator":o$10203}));}else{return attempt$10231;}});$9751(OperatorGroups$9806,$9751(((accum$10283=({})),((accum$10283["::name"]="OperatorGroups"),accum$10283)),((accum$10287=({})),((accum$10287["::egclass"]=true),accum$10287))));OperatorGroups$9806;(parse_op_description$9807=function($10292$10294){var otherwise$10370;var $10351$10359;var $10350$10353;var otherwise$10399;var $10380$10388;var $10379$10382;var t0$10345;var t1$10346;var fixity$10342;var short$10343;var other$10403;var x$10323;var w1$10324;var op$10325;var w2$10326;var y$10327;var f$10318;var rx$10312;var t0$10307;var t1$10308;var t2$10309;var $10296$10302;var ph$10297;(ph$10297=$10292$10294);($10296$10302=ph$10297);(rx$10312=RegExp("(?:^((?:X?))((?:[ _]?))((?:[^ _Y]*))((?:[ _]?))((?:Y?))$)",""));if($9735(Function)($10296$10302)){(f$10318=$10296$10302);return f$10318;}else{(t0$10307=$12393(rx$10312)($10296$10302));if((t0$10307[0]&&(((t1$10308=t0$10307[1])),(((t2$10309=t1$10308.length)),(t2$10309===6))))){t1$10308[0];(x$10323=t1$10308[1]);(w1$10324=t1$10308[2]);(op$10325=t1$10308[3]);(w2$10326=t1$10308[4]);(y$10327=t1$10308[5]);(t0$10345=((($10350$10353=null)),($10350$10353,function(){if((x$10323==="")){return ["PFX",(w2$10326==="")];}else{if((y$10327==="")){return ["SFX",(w1$10324==="")];}else{(otherwise$10370=$10350$10353);return ["IFX",((w1$10324==="")||(w2$10326===""))];}}}())));if(((t0$10345 instanceof Array)&&(((t1$10346=t0$10345.length)),(t1$10346===2)))){(fixity$10342=t0$10345[0]);(short$10343=t0$10345[1]);}else{$12100(((($10379$10382=null)),($10379$10382,function(){if((x$10323==="")){return ["PFX",(w2$10326==="")];}else{if((y$10327==="")){return ["SFX",(w1$10324==="")];}else{(otherwise$10399=$10379$10382);return ["IFX",((w1$10324==="")||(w2$10326===""))];}}}())),"/home/olivier/git/earl-grey/src/parse.eg",1642,1860);}if(((w1$10324==="_")||(w2$10326==="_"))){return [[fixity$10342,"short",op$10325],[fixity$10342,"wide",op$10325]];}else{return [[fixity$10342,function(){if(short$10343){return "short";}else{return "wide";}}(),op$10325]];}}else{(other$10403=$10296$10302);throw $12116(["invalid_op_description"]).create(("Invalid operator description: "+other$10403));}}});(eg_groups$9808=OperatorGroups$9806($9751(({"tokenpfx":[".Y","#Y","@Y"],"sjuxt":["XWHITEY"],"ifx":[function($10408$10410){var t0$10423;var $10412$10418;var ph$10413;(ph$10413=$10408$10410);($10412$10418=ph$10413);if((($10412$10418 instanceof Array)&&(((t0$10423=$10412$10418.length)),((t0$10423===3)&&(($10412$10418[0]==="IFX")&&($10412$10418[1]==="short")))))){$10412$10418[2];return true;}else{$10412$10418;return false;}}],"pfx":[function($10436$10438){var t0$10451;var $10440$10446;var ph$10441;(ph$10441=$10436$10438);($10440$10446=ph$10441);if((($10440$10446 instanceof Array)&&(((t0$10451=$10440$10446.length)),((t0$10451===3)&&(($10440$10446[0]==="PFX")&&($10440$10446[1]==="short")))))){$10440$10446[2];return true;}else{$10440$10446;return false;}}],"sfx":[function($10464$10466){var t0$10479;var $10468$10474;var ph$10469;(ph$10469=$10464$10466);($10468$10474=ph$10469);if((($10468$10474 instanceof Array)&&(((t0$10479=$10468$10474.length)),((t0$10479===3)&&(($10468$10474[0]==="SFX")&&($10468$10474[1]==="short")))))){$10468$10474[2];return true;}else{$10468$10474;return false;}}],"pow":["X ** Y"],"mul":["X * Y","X / Y","X // Y","X mod Y","+ Y","- Y"],"add":["X + Y","X - Y"],"cmp":["X < Y","X <= Y","X == Y","X > Y","X >= Y","X != Y"],"cat":["X ++ Y"],"union":["X & Y"],"range":["X .. Y","X ..",".. Y"],"in":["X in Y"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"and":"X and Y","or":"X or Y","not":"not Y"}),$9751(((accum$10493=({})),((accum$10493["with"]=["X with Y"]),accum$10493)),({"decl":["X -> Y","X = Y","X := Y","X => Y","X where Y","X when Y","X each Y"],"brack":["X_,_Y","(_Y","[_Y","{_Y","X_)","X_]","X_}"],"custom":[function(x$10497){return true;}]})))));(SimplePriority$9809=function(groups$10503,priorities$10504){var $index$10544;var $length$10539;var temp$10534;var acc$10529;var _i$10513;var tracks$10514;var it$0$10507;(it$0$10507=function(){if((!$9735(SimplePriority$9809)(this))){return Object.create(SimplePriority$9809.prototype);}else{return this;}}());(it$0$10507["groups"]=groups$10503);(_i$10513=0);(tracks$10514=({}));(it$0$10507["prio"]=(((acc$10529=[])),(((temp$10534=groups$10503.gnames)),((($length$10539=temp$10534.length)),((($index$10544=0)),function(){$10526:for(;($index$10544<$length$10539);($index$10544++)){var t0$10571;var t1$10572;var t2$10573;var t3$10574;var t4$10575;var t5$10576;var t6$10577;var t7$10578;var $index$10639;var $length$10634;var temp$10629;var acc$10624;var $index$10742;var $length$10737;var temp$10732;var acc$10727;var t0$10616;var t1$10617;var ltracks$10564;var lp$10565;var rtracks$10566;var rp$10567;var lt$10568;var rt$10569;var name$10560;var m$10552;(m$10552=temp$10534[$index$10544]);(name$10560=m$10552);acc$10529.push(((((t0$10571=$9750(priorities$10504,name$10560))),function(){if(((t0$10571 instanceof Array)&&(((t1$10572=t0$10571.length)),((t1$10572===2)&&(((t2$10573=t0$10571[0])),((t2$10573 instanceof Array)&&(((t3$10574=t2$10573.length)),((t3$10574===2)&&(((t4$10575=$12393(Array)(t2$10573[0]))),(t4$10575[0]&&((ltracks$10564=t4$10575[1]),((lp$10565=t2$10573[1]),(((t5$10576=t0$10571[1])),((t5$10576 instanceof Array)&&(((t6$10577=t5$10576.length)),((t6$10577===2)&&(((t7$10578=$12393(Array)(t5$10576[0]))),t7$10578[0]))))))))))))))))){(rtracks$10566=t7$10578[1]);(rp$10567=t5$10576[1]);}else{return $12100($9750(priorities$10504,name$10560),"/home/olivier/git/earl-grey/src/parse.eg",3545,3571);}}()),(((t0$10616=(((acc$10624=[])),(((temp$10629=[ltracks$10564,rtracks$10566])),((($length$10634=temp$10629.length)),((($index$10639=0)),function(){$10621:for(;($index$10639<$length$10634);($index$10639++)){var $index$10677;var $length$10672;var temp$10667;var rval$10659;var tr$10655;var m$10647;(m$10647=temp$10629[$index$10639]);(tr$10655=m$10647);acc$10624.push((((rval$10659=0)),(((temp$10667=tr$10655)),((($length$10672=temp$10667.length)),((($index$10677=0)),function(){$10660:for(;($index$10677<$length$10672);($index$10677++)){var t$10712;var t$10700;var m$10685;(m$10685=temp$10667[$index$10677]);if((m$10685==="all")){(rval$10659=(Math.pow(2,31)-1));}else{(t$10700=m$10685);if((!$9750(tracks$10514,t$10700))){(rval$10659=(rval$10659|Math.pow(2,_i$10513)));(tracks$10514[t$10700]=(_i$10513++));}else{(t$10712=m$10685);(rval$10659=(rval$10659|Math.pow(2,$9750(tracks$10514,t$10712))));}}}}()))),rval$10659));}}()))),acc$10624))),function(){if(((t0$10616 instanceof Array)&&(((t1$10617=t0$10616.length)),(t1$10617===2)))){(lt$10568=t0$10616[0]);(rt$10569=t0$10616[1]);}else{return $12100((((acc$10727=[])),(((temp$10732=[ltracks$10564,rtracks$10566])),((($length$10737=temp$10732.length)),((($index$10742=0)),function(){$10724:for(;($index$10742<$length$10737);($index$10742++)){var $index$10780;var $length$10775;var temp$10770;var rval$10762;var tr$10758;var m$10750;(m$10750=temp$10732[$index$10742]);(tr$10758=m$10750);acc$10727.push((((rval$10762=0)),(((temp$10770=tr$10758)),((($length$10775=temp$10770.length)),((($index$10780=0)),function(){$10763:for(;($index$10780<$length$10775);($index$10780++)){var t$10815;var t$10803;var m$10788;(m$10788=temp$10770[$index$10780]);if((m$10788==="all")){(rval$10762=(Math.pow(2,31)-1));}else{(t$10803=m$10788);if((!$9750(tracks$10514,t$10803))){(rval$10762=(rval$10762|Math.pow(2,_i$10513)));(tracks$10514[t$10803]=(_i$10513++));}else{(t$10815=m$10788);(rval$10762=(rval$10762|Math.pow(2,$9750(tracks$10514,t$10815))));}}}}()))),rval$10762));}}()))),acc$10727),"/home/olivier/git/earl-grey/src/parse.eg",3581,3902);}}()),[[lt$10568,lp$10565],[rt$10569,rp$10567]]));}}()))),acc$10529));return it$0$10507;});(SimplePriority$9809.prototype["compare"]=function(op1$10825,op2$10826){var t0$10854;var t1$10855;var t2$10856;var t3$10857;var t0$10878;var t1$10879;var t2$10880;var t3$10881;var $10840$10907;var $10839$10901;var i1$10841;var i2$10842;var code1$10843;var ord1$10844;var code2$10845;var ord2$10846;var self$10834;var it$0$10829;(it$0$10829=this);(self$10834=this);(i1$10841=it$0$10829.groups.get(op1$10825));(i2$10842=it$0$10829.groups.get(op2$10826));(t0$10854=$9750(it$0$10829.prio,i1$10841));if(((t0$10854 instanceof Array)&&(((t1$10855=t0$10854.length)),((t1$10855===2)&&(t0$10854[0],(((t2$10856=t0$10854[1])),((t2$10856 instanceof Array)&&(((t3$10857=t2$10856.length)),(t3$10857===2))))))))){(code1$10843=t2$10856[0]);(ord1$10844=t2$10856[1]);}else{$12100($9750(it$0$10829.prio,i1$10841),"/home/olivier/git/earl-grey/src/parse.eg",4029,4046);}(t0$10878=$9750(it$0$10829.prio,i2$10842));if(((t0$10878 instanceof Array)&&(((t1$10879=t0$10878.length)),((t1$10879===2)&&(((t2$10880=t0$10878[0])),((t2$10880 instanceof Array)&&(((t3$10881=t2$10880.length)),(t3$10881===2)))))))){(code2$10845=t2$10880[0]);(ord2$10846=t2$10880[1]);t0$10878[1];}else{$12100($9750(it$0$10829.prio,i2$10842),"/home/olivier/git/earl-grey/src/parse.eg",4066,4083);}($10839$10901=null);$10839$10901;if(((code1$10843&code2$10845)===0)){throw $12116(["syntax","order"]).create("Cannot mix operators in the given order",({"left":op1$10825,"right":op2$10826}));}else{if((ord1$10844>ord2$10846)){return LEFT$9814;}else{if((ord1$10844<ord2$10846)){return RIGHT$9815;}else{if((ord1$10844===ord2$10846)){return BOTH$9816;}else{$12100($10839$10901);}}}}});$9751(SimplePriority$9809,$9751(((accum$10927=({})),((accum$10927["::name"]="SimplePriority"),accum$10927)),((accum$10931=({})),((accum$10931["::egclass"]=true),accum$10931))));SimplePriority$9809;(MAX$9810=(1/0));(eg_order$9811=(((eg_groups$10940=OperatorGroups$9806($9751(({"sh_ifx":[function($10944$10946){var t0$10959;var $10948$10954;var ph$10949;(ph$10949=$10944$10946);($10948$10954=ph$10949);if((($10948$10954 instanceof Array)&&(((t0$10959=$10948$10954.length)),((t0$10959===3)&&(($10948$10954[0]==="IFX")&&($10948$10954[1]==="short")))))){$10948$10954[2];return true;}else{$10948$10954;return false;}}],"sh_pfx":[function($10972$10974){var t0$10987;var $10976$10982;var ph$10977;(ph$10977=$10972$10974);($10976$10982=ph$10977);if((($10976$10982 instanceof Array)&&(((t0$10987=$10976$10982.length)),((t0$10987===3)&&(($10976$10982[0]==="PFX")&&($10976$10982[1]==="short")))))){$10976$10982[2];return true;}else{$10976$10982;return false;}}],"sh_sfx":[function($11000$11002){var t0$11015;var $11004$11010;var ph$11005;(ph$11005=$11000$11002);($11004$11010=ph$11005);if((($11004$11010 instanceof Array)&&(((t0$11015=$11004$11010.length)),((t0$11015===3)&&(($11004$11010[0]==="SFX")&&($11004$11010[1]==="short")))))){$11004$11010[2];return true;}else{$11004$11010;return false;}}],"wi_ifx":[function($11028$11030){var t0$11043;var $11032$11038;var ph$11033;(ph$11033=$11028$11030);($11032$11038=ph$11033);if((($11032$11038 instanceof Array)&&(((t0$11043=$11032$11038.length)),((t0$11043===3)&&(($11032$11038[0]==="IFX")&&($11032$11038[1]==="wide")))))){$11032$11038[2];return true;}else{$11032$11038;return false;}}],"wi_pfx":[function($11056$11058){var t0$11071;var $11060$11066;var ph$11061;(ph$11061=$11056$11058);($11060$11066=ph$11061);if((($11060$11066 instanceof Array)&&(((t0$11071=$11060$11066.length)),((t0$11071===3)&&(($11060$11066[0]==="PFX")&&($11060$11066[1]==="wide")))))){$11060$11066[2];return true;}else{$11060$11066;return false;}}],"wi_sfx":[function($11084$11086){var t0$11099;var $11088$11094;var ph$11089;(ph$11089=$11084$11086);($11088$11094=ph$11089);if((($11088$11094 instanceof Array)&&(((t0$11099=$11088$11094.length)),((t0$11099===3)&&(($11088$11094[0]==="SFX")&&($11088$11094[1]==="wide")))))){$11088$11094[2];return true;}else{$11088$11094;return false;}}],"comma":["X_,_Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"]}),$9751(((accum$11113=({})),((accum$11113["with"]=["X with Y"]),accum$11113)),$9751(({"lowprio":["X each Y","X each? Y","X where Y","X !! Y","X -> Y","X => Y","X = Y","X := Y","X += Y","X -= Y","X *= Y","X /= Y","X <<= Y","X >>= Y","X >>>= Y","X ++= Y","X ?= Y","X or= Y","X and= Y","X each= Y","X % Y"]}),$9751(((accum$11117=({})),((accum$11117["when"]=["X when Y"]),accum$11117)),$9751(((accum$11121=({})),((accum$11121["or"]=["X or Y"]),accum$11121)),$9751(((accum$11125=({})),((accum$11125["and"]=["X and Y"]),accum$11125)),$9751(((accum$11129=({})),((accum$11129["not"]=["not Y"]),accum$11129)),({"cmp":["X == Y","X != Y","X >= Y","X <= Y","X > Y","X < Y"],"binxor":["X ^. Y"],"binor":["X |. Y"],"binand":["X &. Y"],"shift":["X << Y","X >> Y","X >>> Y"],"add":["X + Y","X - Y"],"mul":["X * Y","X / Y","X // Y","X mod Y"],"exp":["X ** Y"],"sjuxt":["XWHITEY"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"pfx":["._Y","#_Y","@_Y"],"when2":["when Y"],"pp":["<> Y"],"pipe":["X |> Y"]}))))))))))),((eg_prio$10941=$9751(({"comma":[["all",1],["all",1]],"obrack":[["all",MAX$9810],["all",1]],"cbrack":[["all",1],["all",MAX$9810]]}),$9751(((accum$11136=({})),((accum$11136["with"]=[["all",1999],["all",10]]),accum$11136)),$9751(({"lowprio":[["all",11],["all",10]]}),$9751(((accum$11140=({})),((accum$11140["when"]=[["all",100],["all",101]]),accum$11140)),$9751(((accum$11144=({})),((accum$11144["or"]=[["all",110],["all",111]]),accum$11144)),$9751(((accum$11148=({})),((accum$11148["and"]=[["all",120],["all",121]]),accum$11148)),$9751(((accum$11152=({})),((accum$11152["not"]=[["all",MAX$9810],["all",131]]),accum$11152)),({"cmp":[["all",200],["all",201]],"binxor":[["all",400],["all",401]],"binor":[["all",410],["all",411]],"binand":[["all",420],["all",421]],"shift":[["arith",500],["arith",501]],"add":[["arith",550],["arith",551]],"mul":[["arith",560],["arith",561]],"exp":[["arith",571],["arith",570]],"wjuxt":[["all",13],["all",12]],"colon":[["all",12],["all",10]],"sjuxt":[["all",2000],["all",2001]],"pfx":[["all",MAX$9810],["all",3000]],"pp":[["all",MAX$9810],["all",5]],"when2":[["all",MAX$9810],["all",101]],"pipe":[["pipe",550],["pipe",551]],"sh_ifx":[["all",1800],["all",1801]],"sh_pfx":[["all",MAX$9810],["all",1901]],"sh_sfx":[["all",1900],["all",MAX$9810]],"wi_ifx":[["customl",900],["customr",901]],"wi_pfx":[["all",MAX$9810],["all",901]],"wi_sfx":[["all",900],["all",MAX$9810]]})))))))))),SimplePriority$9809(eg_groups$10940,eg_prio$10941)));(DONE$9812=-1);(NONE$9813=0);(LEFT$9814=1);(RIGHT$9815=2);(BOTH$9816=3);(oparse$9817=function(next$11175,order$11176,finalize$11177){var between$11180;var right_op$11181;var stack$11182;var left_op$11183;var current$11184;(between$11180=finalize$11177(next$11175()));(right_op$11181=next$11175());(stack$11182=[]);(left_op$11183=null);(current$11184=null);$11185:while(true){var v$11225;var other$11271;var $11204$11210;var o$11205;(o$11205=function(){if(((!left_op$11183)&&(!right_op$11181))){return DONE$9812;}else{return ((((!left_op$11183)&&RIGHT$9815)||((!right_op$11181)&&LEFT$9814))||order$11176(left_op$11183,right_op$11181));}}());($11204$11210=o$11205);if(($11204$11210===DONE$9812)){return between$11180;}else{if(($11204$11210===LEFT$9814)){current$11184.push(between$11180);(between$11180=finalize$11177(current$11184));(v$11225=stack$11182.pop());(left_op$11183=v$11225[0]);(current$11184=v$11225[1]);}else{if(($11204$11210===RIGHT$9815)){stack$11182.push([left_op$11183,current$11184]);(left_op$11183=right_op$11181);(current$11184=[[right_op$11181],between$11180]);(between$11180=finalize$11177(next$11175()));(right_op$11181=next$11175());}else{if(($11204$11210===BOTH$9816)){current$11184[0].push(right_op$11181);current$11184.push(between$11180);(left_op$11183=right_op$11181);(between$11180=finalize$11177(next$11175()));(right_op$11181=next$11175());}else{(other$11271=$11204$11210);throw $12116(["should_never_happen"]).create("undefined priority",({"left":left_op$11183,"right":right_op$11181}));}}}}}});(finalize$9818=function($11276$11278){var t0$11287;var $index$11370;var $length$11365;var temp$11360;var $index$11403;var $length$11398;var temp$11393;var $index$11447;var $length$11442;var temp$11437;var acc$11432;var other$11758;var args$11753;var f$11732;var orig_args$11733;var args$11734;var $11704$11716;var $11705$11717;var t0$11712;var t1$11713;var t2$11714;var $11703$11707;var inserted$11569;var result$11570;var t0$11769;var f$11790;var other$11859;var x$11849;var $11827$11837;var $11828$11838;var t0$11835;var $11826$11830;var result$11782;var f$11881;var oloc$11969;var abloc$11970;var oabloc$11971;var rval$11972;var a$11964;var b$11965;var $11337$11931;var $11338$11932;var $11339$11933;var $11340$11934;var t0$11924;var t1$11925;var t2$11926;var t3$11927;var t4$11928;var t5$11929;var $index$12019;var $length$12014;var temp$12009;var acc$12004;var tokens$11997;var msg$11998;var op_strings$11992;var args$11993;var $11336$11920;var commas$11864;var commas$11762;var target$11537;var _b$11538;var body$11539;var f$11523;var body$11524;var f$11496;var arg$11497;var body$11498;var $11341$11487;var $11342$11488;var $11343$11489;var $11344$11490;var $11345$11491;var $11346$11492;var $11347$11493;var t0$11476;var t1$11477;var t2$11478;var t3$11479;var t4$11480;var t5$11481;var t6$11482;var t7$11483;var t8$11484;var bridge$11335$11485;var $11334$11471;var sumloc$11348;var orig_ops$11349;var op$11350;var other$12059;var ops$11329;var args$11330;var value$11320;var value$11315;var value$11306;var $11281$11301;var $11282$11302;var $11283$11303;var t0$11299;var $11280$11294;var ph$11284;var token$11285;(t0$11287=$11276$11278);(token$11285=t0$11287);(ph$11284=t0$11287);($11280$11294=ph$11284);if((($11281$11301=($11280$11294 instanceof Array))&&(((t0$11299=$11280$11294.length)),(($11283$11303=(t0$11299===2))&&($11280$11294[0]==="ID"))))){(value$11306=$11280$11294[1]);return __lt____lt____colon__$9803(["symbol",value$11306],token$11285);}else{if(($11283$11303&&($11280$11294[0]==="NUM"))){(value$11315=$11280$11294[1]);return __lt____lt____colon__$9803(["value",value$11315],token$11285);}else{if(($11283$11303&&($11280$11294[0]==="STR"))){(value$11320=$11280$11294[1]);return __lt____lt____colon__$9803(["value",value$11320],token$11285);}else{if(($11281$11301&&((t0$11299===1)&&($11280$11294[0]==="VOID")))){return __lt____lt____colon__$9803(["void"],token$11285);}else{if(($11281$11301&&(t0$11299>=1))){(ops$11329=$11280$11294[0]);(args$11330=Array.prototype.slice.call($11280$11294,1));(sumloc$11348=ops$11329[0].location);(temp$11360=ops$11329.slice(1));($length$11365=temp$11360.length);($index$11370=0);$11351:for(;($index$11370<$length$11365);($index$11370++)){var op$11386;var m$11378;(m$11378=temp$11360[$index$11370]);(op$11386=m$11378);(sumloc$11348=__plus____plus____colon__$9804(sumloc$11348,op$11386));}(temp$11393=args$11330);($length$11398=temp$11393.length);($index$11403=0);$11353:for(;($index$11403<$length$11398);($index$11403++)){var arg$11419;var m$11411;(m$11411=temp$11393[$index$11403]);(arg$11419=m$11411);(sumloc$11348=__plus____plus____colon__$9804(sumloc$11348,arg$11419));}(orig_ops$11349=ops$11329);(ops$11329=(((acc$11432=[])),(((temp$11437=ops$11329)),((($length$11442=temp$11437.length)),((($index$11447=0)),function(){$11429:for(;($index$11447<$length$11442);($index$11447++)){var o$11463;var m$11455;(m$11455=temp$11437[$index$11447]);(o$11463=m$11455);acc$11432.push(o$11463[2]);}}()))),acc$11432));(op$11350=ops$11329[0]);($11334$11471=[ops$11329,args$11330]);if((($11341$11487=($11334$11471 instanceof Array))&&(((t0$11476=$11334$11471.length)),(($11343$11489=(t0$11476===2))&&(((t1$11477=$11334$11471[0])),(($11345$11491=(t1$11477 instanceof Array))&&(((t2$11478=t1$11477.length)),((t2$11478===2)&&((t1$11477[0]==="WHITE")&&((t1$11477[1]===":")&&(((t3$11479=$11334$11471[1])),((t3$11479 instanceof Array)&&(((t4$11480=t3$11479.length)),(t4$11480===3)))))))))))))){(f$11496=t3$11479[0]);(arg$11497=t3$11479[1]);(body$11498=t3$11479[2]);return __lt____lt____colon__$9803(["send",f$11496,__lt____lt____colon__$9803(["data",arg$11497,body$11498],__plus____plus____colon__$9804(arg$11497,body$11498))],sumloc$11348);}else{if(($11345$11491&&(($11347$11493=(t2$11478===1))&&((t1$11477[0]===":")&&(((t3$11479=$11334$11471[1])),((t3$11479 instanceof Array)&&(((t4$11480=t3$11479.length)),(t4$11480===2)))))))){(f$11523=t3$11479[0]);(body$11524=t3$11479[1]);return __lt____lt____colon__$9803(["send",f$11523,__lt____lt____colon__$9803(["data",body$11524],body$11524)],sumloc$11348);}else{if(($11347$11493&&((t1$11477[0]==="with")&&(((t3$11479=$11334$11471[1])),((t3$11479 instanceof Array)&&(((t4$11480=t3$11479.length)),((t4$11480===2)&&((target$11537=t3$11479[0]),(((t5$11481=t3$11479[1])),((_b$11538=t5$11481),(((t6$11482=$12393(["multi"])(t5$11481))),(t6$11482[0]&&(((t7$11483=t6$11482[1])),(((t8$11484=t7$11483.length)),(t8$11484>=0))))))))))))))){(body$11539=Array.prototype.slice.call(t7$11483,0));(inserted$11569=false);(result$11570=transform$9805(target$11537,function($11576$11578){var t0$11584;var $index$11665;var $length$11660;var temp$11655;var tr$11643;var res$11644;var args$11635;var x$11614;var f$11615;var a$11616;var b$11617;var t0$11596;var t1$11597;var t2$11598;var $11580$11591;var ph$11581;var expr$11582;(t0$11584=$11576$11578);(expr$11582=t0$11584);(ph$11581=t0$11584);($11580$11591=ph$11581);if((($11580$11591 instanceof Array)&&(((t0$11596=$11580$11591.length)),((t0$11596===2)&&(($11580$11591[0]==="symbol")&&($11580$11591[1]==="...")))))){(inserted$11569=true);return __lt____lt____colon__$9803(["multi"].concat(body$11539),_b$11538);}else{(x$11614=$11580$11591);if((x$11614.fromop&&(($11580$11591 instanceof Array)&&(((t0$11596=$11580$11591.length)),((t0$11596===3)&&(($11580$11591[0]==="send")&&((f$11615=$11580$11591[1]),(((t1$11597=$11580$11591[2])),((t1$11597 instanceof Array)&&(((t2$11598=t1$11597.length)),((t2$11598===3)&&(t1$11597[0]==="data")))))))))))){(a$11616=t1$11597[1]);(b$11617=t1$11597[2]);return ["send",this(f$11615),__lt____lt____colon__$9803(["data",this(a$11616),this(b$11617)],__plus____plus____colon__$9804(a$11616,b$11617))];}else{if((($11580$11591 instanceof Array)&&(((t0$11596=$11580$11591.length)),((t0$11596>=1)&&($11580$11591[0]==="data"))))){(args$11635=Array.prototype.slice.call($11580$11591,1));(tr$11643=this);(res$11644=["data"]);(temp$11655=args$11635);($length$11660=temp$11655.length);($index$11665=0);$11645:for(;($index$11665<$length$11660);($index$11665++)){var other$11698;var t0$11678;var t1$11679;var m$11673;(m$11673=temp$11655[$index$11665]);(t0$11678=m$11673);if(((t0$11678 instanceof Array)&&(((t1$11679=t0$11678.length)),((t1$11679===2)&&((t0$11678[0]==="symbol")&&(t0$11678[1]==="...")))))){(inserted$11569=true);(res$11644=res$11644.concat(body$11539));}else{(other$11698=m$11673);res$11644.push(__lt____lt____colon__$9803(tr$11643(other$11698),other$11698));}}return __lt____lt____colon__$9803(res$11644,expr$11582);}else{$12100($11580$11591);}}}}));if((!inserted$11569)){($11703$11707=target$11537);if((($11703$11707 instanceof Array)&&(((t0$11712=$11703$11707.length)),((t0$11712===1)&&($11703$11707[0]==="void"))))){return __lt____lt____colon__$9803(["data"].concat(body$11539),sumloc$11348);}else{$11703$11707;if(target$11537.fromop){return __lt____lt____colon__$9803(["send",target$11537,__lt____lt____colon__$9803(["data"].concat(body$11539),_b$11538)],sumloc$11348);}else{if((($11704$11716=($11703$11707 instanceof Array))&&(((t0$11712=$11703$11707.length)),((t0$11712===3)&&(($11703$11707[0]==="send")&&((f$11732=$11703$11707[1]),(((t1$11713=$11703$11707[2])),((orig_args$11733=t1$11713),((t1$11713 instanceof Array)&&(((t2$11714=t1$11713.length)),((t2$11714>=1)&&(t1$11713[0]==="data")))))))))))){(args$11734=Array.prototype.slice.call(t1$11713,1));return __lt____lt____colon__$9803(["send",f$11732,__lt____lt____colon__$9803(["data"].concat(args$11734).concat(body$11539),__plus____plus____colon__$9804(orig_args$11733,_b$11538))],sumloc$11348);}else{if(($11704$11716&&((t0$11712>=1)&&($11703$11707[0]==="data")))){(args$11753=Array.prototype.slice.call($11703$11707,1));return __lt____lt____colon__$9803(target$11537.concat(body$11539),sumloc$11348);}else{(other$11758=$11703$11707);return __lt____lt____colon__$9803(["send",target$11537,__lt____lt____colon__$9803(["data"].concat(body$11539),_b$11538)],sumloc$11348);}}}}}else{return __lt____lt____colon__$9803(result$11570,sumloc$11348);}}else{if(($11343$11489&&(((bridge$11335$11485=$11334$11471[0])),((((bridge$11335$11485 instanceof Array)&&(((t0$11769=bridge$11335$11485.length)),((t0$11769>=2)&&((bridge$11335$11485[0]==="[")&&((commas$11762=Array.prototype.slice.call(bridge$11335$11485,1,-1)),(bridge$11335$11485[(t0$11769-1)]==="]"))))))||((commas$11762=bridge$11335$11485),true))&&($11334$11471[1],commas$11762.every(function(x$11778){return $12430(x$11778,",");})))))){if((op$11350==="[")){(args$11330=args$11330.slice(1,-1));}(args$11330=(((f$11790=function($11793$11795){var other$11820;var t0$11808;var $11797$11803;var ph$11798;(ph$11798=$11793$11795);($11797$11803=ph$11798);if((($11797$11803 instanceof Array)&&(((t0$11808=$11797$11803.length)),((t0$11808===1)&&($11797$11803[0]==="void"))))){return false;}else{(other$11820=$11797$11803);return true;}})),args$11330.filter(f$11790)));(result$11782=((($11826$11830=args$11330)),function(){if((($11827$11837=($11826$11830 instanceof Array))&&(((t0$11835=$11826$11830.length)),(t0$11835===0)))){return ["value",(void 0)];}else{if(($11827$11837&&(t0$11835===1))){(x$11849=$11826$11830[0]);if(((!isNaN(sumloc$11348.start))&&(!isNaN(sumloc$11348.end)))){(x$11849["location"]=sumloc$11348);}return x$11849;}else{(other$11859=$11826$11830);return ["multi"].concat(args$11330);}}}()));return __lt____lt____colon__$9803(result$11782,sumloc$11348);}else{if(($11343$11489&&(((t1$11477=$11334$11471[0])),(($11345$11491=(t1$11477 instanceof Array))&&(((t2$11478=t1$11477.length)),((t2$11478>=2)&&((t1$11477[0]==="{")&&((commas$11864=Array.prototype.slice.call(t1$11477,1,-1)),((t1$11477[(t2$11478-1)]==="}")&&($11334$11471[1],commas$11864.every(function(x$11877){return $12430(x$11877,",");}))))))))))){(f$11881=function($11884$11886){var other$11911;var t0$11899;var $11888$11894;var ph$11889;(ph$11889=$11884$11886);($11888$11894=ph$11889);if((($11888$11894 instanceof Array)&&(((t0$11899=$11888$11894.length)),((t0$11899===1)&&($11888$11894[0]==="void"))))){return false;}else{(other$11911=$11888$11894);return true;}});return __lt____lt____colon__$9803(["data"].concat(args$11330.slice(1,-1).filter(f$11881)),sumloc$11348);}else{if(($11345$11491&&(($11347$11493=(t2$11478===1))&&(t1$11477[0]==="WHITE")))){$11334$11471[1];return __lt____lt____colon__$9803(["send"].concat(args$11330),sumloc$11348);}else{if($11347$11493){t1$11477[0];($11336$11920=$11334$11471[1]);(t0$11924=$11336$11920);if((($11338$11932=(t0$11924 instanceof Array))&&(((t1$11925=t0$11924.length)),(($11340$11934=(t1$11925===2))&&(((t2$11926=t0$11924[0])),((t2$11926 instanceof Array)&&(((t3$11927=t2$11926.length)),((t3$11927===1)&&((t2$11926[0]==="void")&&(((t4$11928=t0$11924[1])),((t4$11928 instanceof Array)&&(((t5$11929=t4$11928.length)),((t5$11929===1)&&(t4$11928[0]==="void")))))))))))))){return __lt____lt____colon__$9803(["symbol",op$11350],orig_ops$11349[0]);}else{if($11340$11934){(a$11964=t0$11924[0]);(b$11965=t0$11924[1]);(oloc$11969=orig_ops$11349[0].location);(abloc$11970=__plus____plus____colon__$9804(a$11964,b$11965));(oabloc$11971=__plus____plus____colon__$9804(orig_ops$11349[0],abloc$11970));(rval$11972=__lt____lt____colon__$9803(["send",__lt____lt____colon__$9803(["symbol",op$11350],oloc$11969),__lt____lt____colon__$9803(["data",a$11964,b$11965],abloc$11970)],__plus____plus____colon__$9804(oloc$11969,abloc$11970)));(rval$11972["fromop"]=true);return rval$11972;}else{$12100($11336$11920,"/home/olivier/git/earl-grey/src/parse.eg",17281,17286);}}}else{if($11343$11489){(op_strings$11992=$11334$11471[0]);(args$11993=$11334$11471[1]);(tokens$11997=$12605((((acc$12004=[])),(((temp$12009=$12312(orig_ops$11349))),((($length$12014=temp$12009.length)),((($index$12019=0)),function(){$12001:for(;($index$12019<$length$12014);($index$12019++)){var i$12037;var op$12038;var t0$12032;var t1$12033;var m$12027;(m$12027=temp$12009[$index$12019]);(t0$12032=m$12027);if(((t0$12032 instanceof Array)&&(((t1$12033=t0$12032.length)),(t1$12033===2)))){(i$12037=t0$12032[0]);(op$12038=t0$12032[1]);acc$12004.push([("token"+String((i$12037+1))),op$12038]);}else{$12100(m$12027,"/home/olivier/git/earl-grey/src/parse.eg",17797,17896);}}}()))),acc$12004)));(msg$11998="Mismatched/missing brackets/tokens");throw $12116(["syntax","mismatch"]).create(msg$11998,tokens$11997);}else{$12100($11334$11471);}}}}}}}}}else{(other$12059=$11280$11294);throw $12116(["should_never_happen"]).create("unknown node (B)",({"node":token$11285}));}}}}}});(parse$9819=function(tokens$12065){var next$12068;(next$12068=function(){return tokens$12065.shift();});return oparse$9817(next$12068,eg_order$9811.compare.bind(eg_order$9811),finalize$9818);});(exports["parse"]=parse$9819);(exports["oparse"]=oparse$9817);(exports["finalize"]=finalize$9818);(exports["DONE"]=DONE$9812);(exports["NONE"]=NONE$9813);(exports["LEFT"]=LEFT$9814);(exports["RIGHT"]=RIGHT$9815);(exports["BOTH"]=BOTH$9816);
