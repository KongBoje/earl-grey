var $12129=(function(type$12132){var f$12136;(f$12136=type$12132["::check"]);if((f$12136===(void 0))){return (function(value$12142){return (value$12142 instanceof type$12132);});}else{return (function(value$12146){return f$12136.call(type$12132,value$12146);});}});
var $12148=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $12149=(function(dest$12152,values$12153){var k$12158;(k$12158=null);$12156:for(k$12158 in values$12153){if(values$12153.hasOwnProperty(k$12158)){(dest$12152[k$12158]=values$12153[k$12158]);}}return dest$12152;});
var $12166=(function($12168$12171){var ph$12177;(ph$12177=$12168$12171);var $12173$12183;($12173$12183=ph$12177);var bridge$12175$12188;var x$12192;(bridge$12175$12188=$12173$12183);if((((typeof(bridge$12175$12188)==="string")&&((x$12192=bridge$12175$12188),true))||((typeof(bridge$12175$12188)==="number")&&((x$12192=bridge$12175$12188),true)))){return ["value",x$12192];}else{var other$12203;(other$12203=$12173$12183);return other$12203["::serialize_ast"]();}});
var send$11903;(send$11903=(function(obj$11910,$11907$11911){var ph$11917;var msg$11918;var t0$11920;(t0$11920=$11907$11911);(msg$11918=t0$11920);(ph$11917=t0$11920);var $11913$11929;($11913$11929=ph$11917);var bridge$11915$11934;(bridge$11915$11934=$11913$11929);if(((typeof(bridge$11915$11934)==="string")||(typeof(bridge$11915$11934)==="number"))){return obj$11910[msg$11918];}else{var other$11946;(other$11946=$11913$11929);return obj$11910["::send"](msg$11918);}}));(Array[":::project"]=(function($11952$11955){var ph$11960;var value$11961;var t0$11963;(t0$11963=$11952$11955);(value$11961=t0$11963);(ph$11960=t0$11963);var $11957$11972;($11957$11972=ph$11960);if($12129(Array)($11957$11972)){return [true,value$11961];}else{$11957$11972;return [true,[value$11961]];}}));(Array.prototype["::check"]=(function(value$11990){if((value$11990 instanceof Array)){var i$11996;(i$11996=0);$11993:for(;(i$11996<this.length);(i$11996++)){if(($12148(this,i$11996)!==$12148(value$11990,i$11996))){return false;}}return true;}else{return false;}}));(Array.prototype["::clone"]=(function(){return $12149(this.slice(0),this);}));(Array.prototype[":::project"]=(function(value$12015){if((value$12015 instanceof Array)){var i$12021;(i$12021=0);$12018:for(;(i$12021<this.length);(i$12021++)){if(($12148(this,i$12021)!==$12148(value$12015,i$12021))){return [true,[value$12015]];}}return [true,value$12015.slice(this.length)];}else{return [true,[value$12015]];}}));(Array.prototype["::serialize_ast"]=(function(){return ["array"].concat(this.map($12166));}));(RegExp.prototype["::check"]=(function($12039$12042){var ph$12047;(ph$12047=$12039$12042);var $12044$12053;($12044$12053=ph$12047);var value$12061;if((typeof($12044$12053)==="string")){(value$12061=$12044$12053);if(value$12061.match(this)){return true;}else{return false;}}else{var other$12066;(other$12066=$12044$12053);return false;}}));(RegExp.prototype[":::project"]=(function($12072$12075){var ph$12080;(ph$12080=$12072$12075);var $12077$12086;($12077$12086=ph$12080);var value$12094;if((typeof($12077$12086)==="string")){(value$12094=$12077$12086);var $12097$12102;($12097$12102=value$12094.match(this));var m$12110;if(($12097$12102===null)){(m$12110=$12097$12102);return [false,null];}else{var m$12115;(m$12115=$12097$12102);return [true,m$12115];}}else{var other$12119;(other$12119=$12077$12086);return [false,null];}}));(Function.prototype["::send"]=(function(args$12126){return this.apply(this,args$12126);}));
var $15220=(function(arr$15223){var results$15229;var l$15230;(results$15229=[]);(l$15230=arr$15223.length);var i$15239;(i$15239=0);$15228:for(;(i$15239<l$15230);(i$15239++)){results$15229.push([i$15239,$12148(arr$15223,i$15239)]);}return results$15229;});
var $14987=(function(){var $14988$14994;($14988$14994=(function(tags$14999){var it$0$15002;(it$0$15002=(function(){if((!$12129($14988$14994)(this))){return Object.create($14988$14994.prototype);}else{return this;}})());(it$0$15002["tags"]=tags$14999);return it$0$15002;}));($14988$14994.prototype["create"]=(function(){var it$0$15022;var self$15023;(it$0$15022=this);(self$15023=this);var $15020$15032;($15020$15032=arguments);var t0$15037;var message$15041;var args$15042;(t0$15037=$15020$15032.length);if((t0$15037>=0)){(message$15041=(function(){if((0>=t0$15037)){return "";}else{return $15020$15032[0];}})());(args$15042=Array.prototype.slice.call($15020$15032,1));var e$15055;(e$15055=Error(message$15041));(e$15055["::tags"]=it$0$15022.tags);(e$15055["args"]=args$15042);var temp$15071;(temp$15071=$15220(args$15042));var $length$15077;($length$15077=temp$15071.length);var $index$15083;($index$15083=0);$15056:for(;($index$15083<$length$15077);($index$15083++)){var m$15092;(m$15092=temp$15071[$index$15083]);var t0$15097;var t1$15098;var i$15102;var arg$15103;(t0$15097=m$15092);if(((t0$15097 instanceof Array)&&(((t1$15098=t0$15097.length)),(t1$15098===2)))){(i$15102=t0$15097[0]);(arg$15103=t0$15097[1]);(e$15055[i$15102]=arg$15103);}else{$14968(m$15092);}}(e$15055["length"]=args$15042.length);(e$15055["name"]=["E"].concat(it$0$15022.tags).join("."));return e$15055;}else{$14968($15020$15032);}}));($14988$14994.prototype["::check"]=(function(e$15133){var it$0$15137;var self$15138;(it$0$15137=this);(self$15138=this);var tags$15148;if(((!e$15133)||(!$12129(Error)(e$15133)))){return false;}(tags$15148=(e$15133["::tags"]||[]));var temp$15159;(temp$15159=it$0$15137.tags);var $length$15165;($length$15165=temp$15159.length);var $index$15171;($index$15171=0);$15149:for(;($index$15171<$length$15165);($index$15171++)){var m$15180;(m$15180=temp$15159[$index$15171]);var tag$15188;(tag$15188=m$15180);if((tags$15148.indexOf(tag$15188)===-1)){return false;}else{false;}}return true;}));($14988$14994.prototype["::deconstruct"]=(function(e$15197){var it$0$15201;var self$15202;(it$0$15201=this);(self$15202=this);return e$15197.args;}));$12149($14988$14994,$12149((function(){var accum$15213;(accum$15213=({}));(accum$15213["::name"]="$14988");return accum$15213;})(),(function(){var accum$15217;(accum$15217=({}));(accum$15217["::egclass"]=true);return accum$15217;})()));return $14988$14994;})();
var $14968=(function(value$14971,url$14972,start$14973,end$14974){var err$14978;(err$14978=$14987(["match"]).create("Could not find a match for value",({"value":value$14971})));if(url$14972){(err$14978["location"]=["location",url$14972,start$14973,end$14974]);}throw err$14978;});
var $15246=(function(obj$15249){var results$15254;(results$15254=[]);var k$15259;(k$15259=null);$15253:for(k$15259 in obj$15249){if(Object.prototype.hasOwnProperty.call(obj$15249,k$15259)){results$15254.push([k$15259,$12148(obj$15249,k$15259)]);}}return results$15254;});
var $15263=(function(arrays$15266){var results$15270;(results$15270=[]);var temp$15280;(temp$15280=arrays$15266);var $length$15286;($length$15286=temp$15280.length);var $index$15292;($index$15292=0);$15271:for(;($index$15292<$length$15286);($index$15292++)){var m$15301;(m$15301=temp$15280[$index$15292]);var a$15309;(a$15309=m$15301);(results$15270=results$15270.concat(a$15309));}return results$15270;});
var $15315=(function(type$15318){return (function(value$15322){var f$15326;(f$15326=type$15318[":::project"]);if((f$15326===(void 0))){(f$15326=type$15318["::project"]);if((f$15326===(void 0))){return [true,type$15318(value$15322)];}else{var rval$15339;(rval$15339=false);try{(rval$15339=[true,f$15326(value$15322)]);}catch(excv$15350){var e$15356;(e$15356=excv$15350);(rval$15339=[false,null]);}return rval$15339;}}else{return f$15326.call(type$15318,value$15322);}});});
var $15534=Object.keys;
var $15535=(function($15537$15540,key$15541){var ph$15549;(ph$15549=$15537$15540);var $15543$15555;($15543$15555=ph$15549);var bridge$15545$15560;(bridge$15545$15560=$15543$15555);if(((bridge$15545$15560===null)||(bridge$15545$15560===(void 0)))){return false;}else{var x$15572;if((typeof($15543$15555)==="string")){(x$15572=$15543$15555);return (key$15541 in String.prototype);}else{var x$15577;if((typeof($15543$15555)==="number")){(x$15577=$15543$15555);return (key$15541 in Number.prototype);}else{var x$15582;(x$15582=$15543$15555);return (key$15541 in x$15582);}}}});
var $15362=(function($15364$15367,b$15368){var ph$15382;var a$15383;var t0$15385;(t0$15385=$15364$15367);(a$15383=t0$15385);(ph$15382=t0$15385);var $15370$15394;($15370$15394=ph$15382);var bridge$15373$15399;if(($15370$15394===b$15368)){return true;}else{(bridge$15373$15399=$15370$15394);if(((function(){var bridge$15374$15413;(bridge$15374$15413=bridge$15373$15399);return ((function(){var bridge$15375$15420;(bridge$15375$15420=bridge$15374$15413);return ((function(){var bridge$15376$15427;(bridge$15376$15427=bridge$15375$15420);return ((function(){var bridge$15377$15434;(bridge$15377$15434=bridge$15376$15427);return ((typeof(bridge$15377$15434)==="number")||(typeof(bridge$15377$15434)==="string"));})()||(bridge$15376$15427===null));})()||(bridge$15375$15420===(void 0)));})()||(bridge$15374$15413===true));})()||(bridge$15373$15399===false))){return false;}else{if($12129(Array)($15370$15394)){if(((!$12129(Array)(b$15368))||(a$15383.length!==b$15368.length))){return false;}var i$15450;(i$15450=0);$15446:for(;(i$15450<a$15383.length);(i$15450++)){if((!$15362(a$15383[i$15450],b$15368[i$15450]))){return false;}}return true;}else{$15370$15394;if((((Object.getPrototypeOf(a$15383)===Object.prototype)&&$12129(Object)(b$15368))&&(Object.getPrototypeOf(b$15368)===Object.prototype))){var ka$15464;(ka$15464=$15534(a$15383));if((!$15362(ka$15464.sort(),$15534(b$15368).sort()))){return false;}var temp$15475;(temp$15475=ka$15464);var $length$15481;($length$15481=temp$15475.length);var $index$15487;($index$15487=0);$15465:for(;($index$15487<$length$15481);($index$15487++)){var m$15496;(m$15496=temp$15475[$index$15487]);var k$15504;(k$15504=m$15496);if((!$15362(a$15383[k$15504],b$15368[k$15504]))){return false;}}return true;}else{if($15535($15370$15394,"::serialize")){$15370$15394["::serialize"];var $15511$15516;($15511$15516=b$15368);if($15535($15511$15516,"::serialize")){$15511$15516["::serialize"];return $15362(a$15383["::serialize"](),b$15368["::serialize"]());}else{var otherwise$15528;(otherwise$15528=$15511$15516);return false;}}else{var otherwise$15532;(otherwise$15532=$15370$15394);return false;}}}}}});
var $15584=(function(pairs$15587){var rval$15591;(rval$15591=({}));var temp$15601;(temp$15601=pairs$15587);var $length$15607;($length$15607=temp$15601.length);var $index$15613;($index$15613=0);$15592:for(;($index$15613<$length$15607);($index$15613++)){var m$15622;(m$15622=temp$15601[$index$15613]);var t0$15627;var t1$15628;var k$15632;var v$15633;(t0$15627=m$15622);if(((t0$15627 instanceof Array)&&(((t1$15628=t0$15627.length)),(t1$15628===2)))){(k$15632=t0$15627[0]);(v$15633=t0$15627[1]);(rval$15591[k$15632]=v$15633);}else{$14968(m$15622);}}return rval$15591;});var accum$12790;var accum$12794;var accum$13040;var accum$13556;var accum$13560;var accum$13786;var accum$13790;var accum$13794;var accum$13798;var accum$13802;var accum$13806;var accum$13818;var accum$13822;var accum$13826;var accum$13830;var accum$13834;var eg_groups$13571;var eg_prio$13572;var $12207$12229;var __lt____lt____colon__$12230;var __plus____plus____colon__$12231;var transform$12232;var OperatorGroups$12233;var parse_op_description$12234;var eg_groups$12235;var SimplePriority$12236;var MAX$12237;var eg_order$12238;var DONE$12239;var NONE$12240;var LEFT$12241;var RIGHT$12242;var BOTH$12243;var oparse$12244;var finalize$12245;var parse$12246;($12207$12229=require("./location"));(__lt____lt____colon__$12230=$12207$12229["<<:"]);(__plus____plus____colon__$12231=$12207$12229["++:"]);(transform$12232=(function(expr$12260,cb$12261){var rval$12281;var tr$12266;var result$12267;(tr$12266=(function(x$12272){return transform$12232(x$12272,cb$12261);}));(result$12267=(((rval$12281=false)),((function(){try{(rval$12281=cb$12261.call(tr$12266,expr$12260));}catch(excv$12292){var name$12344;var args$12345;var v$12339;var s$12334;var $12308$12320;var $12309$12321;var $12310$12322;var t0$12318;var $12303$12313;var e$12298;(e$12298=excv$12292);(rval$12281=((($12303$12313=expr$12260)),(function(){if((($12308$12320=($12303$12313 instanceof Array))&&(((t0$12318=$12303$12313.length)),((t0$12318===1)&&($12303$12313[0]==="void"))))){return ["void"];}else{if(($12308$12320&&(($12310$12322=(t0$12318===2))&&($12303$12313[0]==="symbol")))){(s$12334=$12303$12313[1]);return expr$12260;}else{if(($12310$12322&&($12303$12313[0]==="value"))){(v$12339=$12303$12313[1]);return expr$12260;}else{if(($12308$12320&&(t0$12318>=1))){(name$12344=$12303$12313[0]);(args$12345=Array.prototype.slice.call($12303$12313,1));return [name$12344].concat(args$12345.map(tr$12266));}else{$14968($12303$12313);}}}}})()));}})(),rval$12281)));return __lt____lt____colon__$12230(result$12267,expr$12260);}));(OperatorGroups$12233=(function(groups$12357){var $index$12404;var $length$12398;var temp$12392;var acc$12386;var $index$12464;var $length$12458;var temp$12452;var acc$12446;var $index$12569;var $length$12563;var temp$12557;var acc$12551;var itg$12372;var it$0$12360;(it$0$12360=(function(){if((!$12129(OperatorGroups$12233)(this))){return Object.create(OperatorGroups$12233.prototype);}else{return this;}})());(itg$12372=$15246(groups$12357));(it$0$12360["gnames"]=(((acc$12386=[])),(((temp$12392=itg$12372)),((($length$12398=temp$12392.length)),((($index$12404=0)),(function(){$12381:for(;($index$12404<$length$12398);($index$12404++)){var name$12423;var t0$12418;var t1$12419;var m$12413;(m$12413=temp$12392[$index$12404]);(t0$12418=m$12413);if(((t0$12418 instanceof Array)&&(((t1$12419=t0$12418.length)),(t1$12419===2)))){(name$12423=t0$12418[0]);t0$12418[1];acc$12386.push(name$12423);}else{$14968(m$12413,"/home/olivier/git/earl-grey/src/parse.eg",539,565);}}})()))),acc$12386));(it$0$12360["groups"]=(((acc$12446=[])),(((temp$12452=itg$12372)),((($length$12458=temp$12452.length)),((($index$12464=0)),(function(){$12441:for(;($index$12464<$length$12458);($index$12464++)){var $index$12520;var $length$12514;var temp$12508;var acc$12502;var name$12483;var descrs$12484;var t0$12478;var t1$12479;var m$12473;(m$12473=temp$12452[$index$12464]);(t0$12478=m$12473);if(((t0$12478 instanceof Array)&&(((t1$12479=t0$12478.length)),(t1$12479===2)))){(name$12483=t0$12478[0]);(descrs$12484=t0$12478[1]);acc$12446.push($15263((((acc$12502=[])),(((temp$12508=descrs$12484)),((($length$12514=temp$12508.length)),((($index$12520=0)),(function(){$12497:for(;($index$12520<$length$12514);($index$12520++)){var descr$12537;var m$12529;(m$12529=temp$12508[$index$12520]);(descr$12537=m$12529);acc$12502.push(parse_op_description$12234(descr$12537));}})()))),acc$12502)));}else{$14968(m$12473,"/home/olivier/git/earl-grey/src/parse.eg",582,679);}}})()))),acc$12446));(it$0$12360["fns"]=[]);(it$0$12360["to_gid"]=({"IFX":({"wide":({}),"short":({})}),"PFX":({"wide":({}),"short":({})}),"SFX":({"wide":({}),"short":({})})}));(acc$12551=[]);(temp$12557=$15220(it$0$12360.groups));($length$12563=temp$12557.length);($index$12569=0);$12373:for(;($index$12569<$length$12563);($index$12569++)){var $index$12626;var $length$12620;var temp$12614;var acc$12608;var i$12588;var group$12589;var t0$12583;var t1$12584;var m$12578;(m$12578=temp$12557[$index$12569]);(t0$12583=m$12578);if(((t0$12583 instanceof Array)&&(((t1$12584=t0$12583.length)),(t1$12584===2)))){(i$12588=t0$12583[0]);(group$12589=t0$12583[1]);acc$12551.push((((acc$12608=[])),(((temp$12614=group$12589)),((($length$12620=temp$12614.length)),((($index$12626=0)),(function(){$12602:for(;($index$12626<$length$12620);($index$12626++)){var f$12666;var fixity$12645;var width$12646;var name$12647;var t0$12640;var t1$12641;var m$12635;(m$12635=temp$12614[$index$12626]);(t0$12640=m$12635);if(((t0$12640 instanceof Array)&&(((t1$12641=t0$12640.length)),(t1$12641===3)))){(fixity$12645=t0$12640[0]);(width$12646=t0$12640[1]);(name$12647=t0$12640[2]);acc$12608.push((($12148($12148(it$0$12360.to_gid,fixity$12645),width$12646)[name$12647]=i$12588)));}else{(f$12666=m$12635);acc$12608.push(it$0$12360.fns.push([f$12666,i$12588]));}}})()))),acc$12608));}else{$14968(m$12578,"/home/olivier/git/earl-grey/src/parse.eg",844,1045);}}acc$12551;return it$0$12360;}));(OperatorGroups$12233.prototype["get_name"]=(function(o$12676){var it$0$12680;var self$12681;(it$0$12680=this);(self$12681=this);return $12148(it$0$12680.gnames,it$0$12680.get(o$12676));}));(OperatorGroups$12233.prototype["get"]=(function($12692$12695){var t0$12713;var t1$12714;var $index$12752;var $length$12746;var temp$12740;var attempt$12729;var o$12708;var fixity$12709;var width$12710;var name$12711;var it$0$12699;var self$12700;(it$0$12699=this);(self$12700=this);(t0$12713=$12692$12695);(o$12708=t0$12713);if(((t0$12713 instanceof Array)&&(((t1$12714=t0$12713.length)),(t1$12714===3)))){(fixity$12709=t0$12713[0]);(width$12710=t0$12713[1]);(name$12711=t0$12713[2]);}else{$14968($12692$12695);}(attempt$12729=$12148($12148($12148(it$0$12699.to_gid,fixity$12709),width$12710),name$12711));if((attempt$12729===(void 0))){(temp$12740=it$0$12699.fns);($length$12746=temp$12740.length);($index$12752=0);$12734:for(;($index$12752<$length$12746);($index$12752++)){var f$12771;var i$12772;var t0$12766;var t1$12767;var m$12761;(m$12761=temp$12740[$index$12752]);(t0$12766=m$12761);if(((t0$12766 instanceof Array)&&(((t1$12767=t0$12766.length)),(t1$12767===2)))){(f$12771=t0$12766[0]);(i$12772=t0$12766[1]);if(f$12771(o$12708)){return i$12772;}}else{$14968(m$12761,"/home/olivier/git/earl-grey/src/parse.eg",1224,1307);}}throw $14987(["syntax","unknown_operator"]).create(("Unknown operator: "+[true,String(o$12708)][1]),({"operator":o$12708}));}else{return attempt$12729;}}));$12149(OperatorGroups$12233,$12149(((accum$12790=({})),((accum$12790["::name"]="OperatorGroups"),accum$12790)),((accum$12794=({})),((accum$12794["::egclass"]=true),accum$12794))));OperatorGroups$12233;(parse_op_description$12234=(function($12800$12803){var otherwise$12893;var $12873$12882;var $12869$12876;var otherwise$12927;var $12907$12916;var $12903$12910;var t0$12863;var t1$12864;var fixity$12860;var short$12861;var other$12931;var x$12837;var w1$12838;var op$12839;var w2$12840;var y$12841;var f$12832;var rx$12826;var t0$12820;var t1$12821;var t2$12822;var $12805$12815;var ph$12809;(ph$12809=$12800$12803);($12805$12815=ph$12809);(rx$12826=RegExp("(?:^((?:X?))((?:[ _]?))((?:[^ _Y]*))((?:[ _]?))((?:Y?))$)",""));if($12129(Function)($12805$12815)){(f$12832=$12805$12815);return f$12832;}else{(t0$12820=$15315(rx$12826)($12805$12815));if((t0$12820[0]&&(((t1$12821=t0$12820[1])),(((t2$12822=t1$12821.length)),(t2$12822===6))))){t1$12821[0];(x$12837=t1$12821[1]);(w1$12838=t1$12821[2]);(op$12839=t1$12821[3]);(w2$12840=t1$12821[4]);(y$12841=t1$12821[5]);(t0$12863=((($12869$12876=null)),($12869$12876,(function(){if((x$12837==="")){return ["PFX",(w2$12840==="")];}else{if((y$12841==="")){return ["SFX",(w1$12838==="")];}else{(otherwise$12893=$12869$12876);return ["IFX",((w1$12838==="")||(w2$12840===""))];}}})())));if(((t0$12863 instanceof Array)&&(((t1$12864=t0$12863.length)),(t1$12864===2)))){(fixity$12860=t0$12863[0]);(short$12861=t0$12863[1]);}else{$14968(((($12903$12910=null)),($12903$12910,(function(){if((x$12837==="")){return ["PFX",(w2$12840==="")];}else{if((y$12841==="")){return ["SFX",(w1$12838==="")];}else{(otherwise$12927=$12903$12910);return ["IFX",((w1$12838==="")||(w2$12840===""))];}}})())),"/home/olivier/git/earl-grey/src/parse.eg",1678,1896);}if(((w1$12838==="_")||(w2$12840==="_"))){return [[fixity$12860,"short",op$12839],[fixity$12860,"wide",op$12839]];}else{return [[fixity$12860,(function(){if(short$12861){return "short";}else{return "wide";}})(),op$12839]];}}else{(other$12931=$12805$12815);throw $14987(["invalid_op_description"]).create(("Invalid operator description: "+other$12931));}}}));(eg_groups$12235=OperatorGroups$12233($12149(({"tokenpfx":[".Y","#Y","@Y"],"sjuxt":["XWHITEY"],"ifx":[(function($12938$12941){var t0$12957;var $12943$12952;var ph$12946;(ph$12946=$12938$12941);($12943$12952=ph$12946);if((($12943$12952 instanceof Array)&&(((t0$12957=$12943$12952.length)),((t0$12957===3)&&(($12943$12952[0]==="IFX")&&($12943$12952[1]==="short")))))){$12943$12952[2];return true;}else{$12943$12952;return false;}})],"pfx":[(function($12972$12975){var t0$12991;var $12977$12986;var ph$12980;(ph$12980=$12972$12975);($12977$12986=ph$12980);if((($12977$12986 instanceof Array)&&(((t0$12991=$12977$12986.length)),((t0$12991===3)&&(($12977$12986[0]==="PFX")&&($12977$12986[1]==="short")))))){$12977$12986[2];return true;}else{$12977$12986;return false;}})],"sfx":[(function($13006$13009){var t0$13025;var $13011$13020;var ph$13014;(ph$13014=$13006$13009);($13011$13020=ph$13014);if((($13011$13020 instanceof Array)&&(((t0$13025=$13011$13020.length)),((t0$13025===3)&&(($13011$13020[0]==="SFX")&&($13011$13020[1]==="short")))))){$13011$13020[2];return true;}else{$13011$13020;return false;}})],"pow":["X ** Y"],"mul":["X * Y","X / Y","X // Y","X mod Y","+ Y","- Y"],"add":["X + Y","X - Y"],"cmp":["X < Y","X <= Y","X == Y","X > Y","X >= Y","X != Y"],"cat":["X ++ Y"],"union":["X & Y"],"range":["X .. Y","X ..",".. Y"],"in":["X in Y"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"and":"X and Y","or":"X or Y","not":"not Y"}),$12149(((accum$13040=({})),((accum$13040["with"]=["X with Y"]),accum$13040)),({"decl":["X -> Y","X = Y","X := Y","X => Y","X where Y","X when Y","X each Y"],"brack":["X_,_Y","(_Y","[_Y","{_Y","X_)","X_]","X_}"],"custom":[(function(x$13045){return true;})]})))));(SimplePriority$12236=(function(groups$13052,priorities$13053){var $index$13103;var $length$13097;var temp$13091;var acc$13085;var _i$13067;var tracks$13068;var it$0$13056;(it$0$13056=(function(){if((!$12129(SimplePriority$12236)(this))){return Object.create(SimplePriority$12236.prototype);}else{return this;}})());(it$0$13056["groups"]=groups$13052);(_i$13067=0);(tracks$13068=({}));(it$0$13056["prio"]=(((acc$13085=[])),(((temp$13091=groups$13052.gnames)),((($length$13097=temp$13091.length)),((($index$13103=0)),(function(){$13080:for(;($index$13103<$length$13097);($index$13103++)){var t0$13133;var t1$13134;var t2$13135;var t3$13136;var t4$13137;var t5$13138;var t6$13139;var t7$13140;var $index$13215;var $length$13209;var temp$13203;var acc$13197;var $index$13337;var $length$13331;var temp$13325;var acc$13319;var t0$13186;var t1$13187;var ltracks$13126;var lp$13127;var rtracks$13128;var rp$13129;var lt$13130;var rt$13131;var name$13120;var m$13112;(m$13112=temp$13091[$index$13103]);(name$13120=m$13112);acc$13085.push(((((t0$13133=$12148(priorities$13053,name$13120))),(function(){if(((t0$13133 instanceof Array)&&(((t1$13134=t0$13133.length)),((t1$13134===2)&&(((t2$13135=t0$13133[0])),((t2$13135 instanceof Array)&&(((t3$13136=t2$13135.length)),((t3$13136===2)&&(((t4$13137=$15315(Array)(t2$13135[0]))),(t4$13137[0]&&((ltracks$13126=t4$13137[1]),((lp$13127=t2$13135[1]),(((t5$13138=t0$13133[1])),((t5$13138 instanceof Array)&&(((t6$13139=t5$13138.length)),((t6$13139===2)&&(((t7$13140=$15315(Array)(t5$13138[0]))),t7$13140[0]))))))))))))))))){(rtracks$13128=t7$13140[1]);(rp$13129=t5$13138[1]);}else{return $14968($12148(priorities$13053,name$13120),"/home/olivier/git/earl-grey/src/parse.eg",3581,3607);}})()),(((t0$13186=(((acc$13197=[])),(((temp$13203=[ltracks$13126,rtracks$13128])),((($length$13209=temp$13203.length)),((($index$13215=0)),(function(){$13192:for(;($index$13215<$length$13209);($index$13215++)){var $index$13261;var $length$13255;var temp$13249;var rval$13237;var tr$13232;var m$13224;(m$13224=temp$13203[$index$13215]);(tr$13232=m$13224);acc$13197.push((((rval$13237=0)),(((temp$13249=tr$13232)),((($length$13255=temp$13249.length)),((($index$13261=0)),(function(){$13238:for(;($index$13261<$length$13255);($index$13261++)){var t$13300;var t$13286;var m$13270;(m$13270=temp$13249[$index$13261]);if((m$13270==="all")){(rval$13237=(Math.pow(2,31)-1));}else{(t$13286=m$13270);if((!$12148(tracks$13068,t$13286))){(rval$13237=(rval$13237|Math.pow(2,_i$13067)));(tracks$13068[t$13286]=(_i$13067++));}else{(t$13300=m$13270);(rval$13237=(rval$13237|Math.pow(2,$12148(tracks$13068,t$13300))));}}}})()))),rval$13237));}})()))),acc$13197))),(function(){if(((t0$13186 instanceof Array)&&(((t1$13187=t0$13186.length)),(t1$13187===2)))){(lt$13130=t0$13186[0]);(rt$13131=t0$13186[1]);}else{return $14968((((acc$13319=[])),(((temp$13325=[ltracks$13126,rtracks$13128])),((($length$13331=temp$13325.length)),((($index$13337=0)),(function(){$13314:for(;($index$13337<$length$13331);($index$13337++)){var $index$13383;var $length$13377;var temp$13371;var rval$13359;var tr$13354;var m$13346;(m$13346=temp$13325[$index$13337]);(tr$13354=m$13346);acc$13319.push((((rval$13359=0)),(((temp$13371=tr$13354)),((($length$13377=temp$13371.length)),((($index$13383=0)),(function(){$13360:for(;($index$13383<$length$13377);($index$13383++)){var t$13422;var t$13408;var m$13392;(m$13392=temp$13371[$index$13383]);if((m$13392==="all")){(rval$13359=(Math.pow(2,31)-1));}else{(t$13408=m$13392);if((!$12148(tracks$13068,t$13408))){(rval$13359=(rval$13359|Math.pow(2,_i$13067)));(tracks$13068[t$13408]=(_i$13067++));}else{(t$13422=m$13392);(rval$13359=(rval$13359|Math.pow(2,$12148(tracks$13068,t$13422))));}}}})()))),rval$13359));}})()))),acc$13319),"/home/olivier/git/earl-grey/src/parse.eg",3617,3938);}})()),[[lt$13130,lp$13127],[rt$13131,rp$13129]]));}})()))),acc$13085));return it$0$13056;}));(SimplePriority$12236.prototype["compare"]=(function(op1$13434,op2$13435){var t0$13472;var t1$13473;var t2$13474;var t3$13475;var t0$13500;var t1$13501;var t2$13502;var t3$13503;var $13458$13534;var $13453$13528;var i1$13459;var i2$13460;var code1$13461;var ord1$13462;var code2$13463;var ord2$13464;var it$0$13439;var self$13440;(it$0$13439=this);(self$13440=this);(i1$13459=it$0$13439.groups.get(op1$13434));(i2$13460=it$0$13439.groups.get(op2$13435));(t0$13472=$12148(it$0$13439.prio,i1$13459));if(((t0$13472 instanceof Array)&&(((t1$13473=t0$13472.length)),((t1$13473===2)&&(t0$13472[0],(((t2$13474=t0$13472[1])),((t2$13474 instanceof Array)&&(((t3$13475=t2$13474.length)),(t3$13475===2))))))))){(code1$13461=t2$13474[0]);(ord1$13462=t2$13474[1]);}else{$14968($12148(it$0$13439.prio,i1$13459),"/home/olivier/git/earl-grey/src/parse.eg",4065,4082);}(t0$13500=$12148(it$0$13439.prio,i2$13460));if(((t0$13500 instanceof Array)&&(((t1$13501=t0$13500.length)),((t1$13501===2)&&(((t2$13502=t0$13500[0])),((t2$13502 instanceof Array)&&(((t3$13503=t2$13502.length)),(t3$13503===2)))))))){(code2$13463=t2$13502[0]);(ord2$13464=t2$13502[1]);t0$13500[1];}else{$14968($12148(it$0$13439.prio,i2$13460),"/home/olivier/git/earl-grey/src/parse.eg",4102,4119);}($13453$13528=null);$13453$13528;if(((code1$13461&code2$13463)===0)){throw $14987(["syntax","order"]).create("Cannot mix operators in the given order",({"left":op1$13434,"right":op2$13435}));}else{if((ord1$13462>ord2$13464)){return LEFT$12241;}else{if((ord1$13462<ord2$13464)){return RIGHT$12242;}else{if((ord1$13462===ord2$13464)){return BOTH$12243;}else{$14968($13453$13528);}}}}}));$12149(SimplePriority$12236,$12149(((accum$13556=({})),((accum$13556["::name"]="SimplePriority"),accum$13556)),((accum$13560=({})),((accum$13560["::egclass"]=true),accum$13560))));SimplePriority$12236;(MAX$12237=(1/0));(eg_order$12238=(((eg_groups$13571=OperatorGroups$12233($12149(({"sh_ifx":[(function($13582$13585){var t0$13601;var $13587$13596;var ph$13590;(ph$13590=$13582$13585);($13587$13596=ph$13590);if((($13587$13596 instanceof Array)&&(((t0$13601=$13587$13596.length)),((t0$13601===3)&&(($13587$13596[0]==="IFX")&&($13587$13596[1]==="short")))))){$13587$13596[2];return true;}else{$13587$13596;return false;}})],"sh_pfx":[(function($13616$13619){var t0$13635;var $13621$13630;var ph$13624;(ph$13624=$13616$13619);($13621$13630=ph$13624);if((($13621$13630 instanceof Array)&&(((t0$13635=$13621$13630.length)),((t0$13635===3)&&(($13621$13630[0]==="PFX")&&($13621$13630[1]==="short")))))){$13621$13630[2];return true;}else{$13621$13630;return false;}})],"sh_sfx":[(function($13650$13653){var t0$13669;var $13655$13664;var ph$13658;(ph$13658=$13650$13653);($13655$13664=ph$13658);if((($13655$13664 instanceof Array)&&(((t0$13669=$13655$13664.length)),((t0$13669===3)&&(($13655$13664[0]==="SFX")&&($13655$13664[1]==="short")))))){$13655$13664[2];return true;}else{$13655$13664;return false;}})],"wi_ifx":[(function($13684$13687){var t0$13703;var $13689$13698;var ph$13692;(ph$13692=$13684$13687);($13689$13698=ph$13692);if((($13689$13698 instanceof Array)&&(((t0$13703=$13689$13698.length)),((t0$13703===3)&&(($13689$13698[0]==="IFX")&&($13689$13698[1]==="wide")))))){$13689$13698[2];return true;}else{$13689$13698;return false;}})],"wi_pfx":[(function($13718$13721){var t0$13737;var $13723$13732;var ph$13726;(ph$13726=$13718$13721);($13723$13732=ph$13726);if((($13723$13732 instanceof Array)&&(((t0$13737=$13723$13732.length)),((t0$13737===3)&&(($13723$13732[0]==="PFX")&&($13723$13732[1]==="wide")))))){$13723$13732[2];return true;}else{$13723$13732;return false;}})],"wi_sfx":[(function($13752$13755){var t0$13771;var $13757$13766;var ph$13760;(ph$13760=$13752$13755);($13757$13766=ph$13760);if((($13757$13766 instanceof Array)&&(((t0$13771=$13757$13766.length)),((t0$13771===3)&&(($13757$13766[0]==="SFX")&&($13757$13766[1]==="wide")))))){$13757$13766[2];return true;}else{$13757$13766;return false;}})],"comma":["X_,_Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"]}),$12149(((accum$13786=({})),((accum$13786["withp"]=["with Y"]),accum$13786)),$12149(((accum$13790=({})),((accum$13790["with"]=["X with Y"]),accum$13790)),$12149(({"lowprio":["X each Y","X each? Y","X where Y","X !! Y","X -> Y","X => Y","X = Y","X := Y","X += Y","X -= Y","X *= Y","X /= Y","X <<= Y","X >>= Y","X >>>= Y","X ++= Y","X ?= Y","X or= Y","X and= Y","X each= Y","X % Y"]}),$12149(((accum$13794=({})),((accum$13794["when"]=["X when Y"]),accum$13794)),$12149(((accum$13798=({})),((accum$13798["or"]=["X or Y"]),accum$13798)),$12149(((accum$13802=({})),((accum$13802["and"]=["X and Y"]),accum$13802)),$12149(((accum$13806=({})),((accum$13806["not"]=["not Y"]),accum$13806)),({"cmp":["X == Y","X != Y","X >= Y","X <= Y","X > Y","X < Y"],"binxor":["X ^. Y"],"binor":["X |. Y"],"binand":["X &. Y"],"shift":["X << Y","X >> Y","X >>> Y"],"add":["X + Y","X - Y"],"mul":["X * Y","X / Y","X // Y","X mod Y"],"exp":["X ** Y"],"sjuxt":["XWHITEY"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"pfx":["._Y","#_Y","@_Y"],"when2":["when Y"],"pp":["<> Y"],"pipe":["X |> Y"]})))))))))))),((eg_prio$13572=$12149(({"comma":[["all",1],["all",1]],"obrack":[["all",MAX$12237],["all",1]],"cbrack":[["all",1],["all",MAX$12237]]}),$12149(((accum$13818=({})),((accum$13818["with"]=[["all",1999],["all",10]]),accum$13818)),$12149(({"lowprio":[["all",11],["all",10]]}),$12149(((accum$13822=({})),((accum$13822["when"]=[["all",100],["all",101]]),accum$13822)),$12149(((accum$13826=({})),((accum$13826["or"]=[["all",110],["all",111]]),accum$13826)),$12149(((accum$13830=({})),((accum$13830["and"]=[["all",120],["all",121]]),accum$13830)),$12149(((accum$13834=({})),((accum$13834["not"]=[["all",MAX$12237],["all",131]]),accum$13834)),({"cmp":[["all",200],["all",201]],"binxor":[["all",400],["all",401]],"binor":[["all",410],["all",411]],"binand":[["all",420],["all",421]],"shift":[["arith",500],["arith",501]],"add":[["arith",550],["arith",551]],"mul":[["arith",560],["arith",561]],"exp":[["arith",571],["arith",570]],"wjuxt":[["wjuxt",13],["all",12]],"colon":[["all",12],["all",10]],"sjuxt":[["all",2000],["all",2001]],"pfx":[["all",MAX$12237],["all",3000]],"pp":[["all",MAX$12237],["all",5]],"when2":[["all",MAX$12237],["all",101]],"withp":[["all",MAX$12237],["all",10]],"pipe":[["pipe",550],["pipe",551]],"sh_ifx":[["all",1800],["all",1801]],"sh_pfx":[["all",MAX$12237],["all",1901]],"sh_sfx":[["all",1900],["all",MAX$12237]],"wi_ifx":[["customl",900],["customr",901]],"wi_pfx":[["all",MAX$12237],["all",901]],"wi_sfx":[["all",900],["all",MAX$12237]]})))))))))),SimplePriority$12236(eg_groups$13571,eg_prio$13572)));(DONE$12239=-1);(NONE$12240=0);(LEFT$12241=1);(RIGHT$12242=2);(BOTH$12243=3);(oparse$12244=(function(next$13858,order$13859,finalize$13860){var between$13868;var right_op$13869;var stack$13870;var left_op$13871;var current$13872;(between$13868=finalize$13860(next$13858()));(right_op$13869=next$13858());(stack$13870=[]);(left_op$13871=null);(current$13872=null);$13873:while(true){var v$13924;var other$13977;var $13893$13905;var o$13899;(o$13899=(function(){if(((!left_op$13871)&&(!right_op$13869))){return DONE$12239;}else{return ((((!left_op$13871)&&RIGHT$12242)||((!right_op$13869)&&LEFT$12241))||order$13859(left_op$13871,right_op$13869));}})());($13893$13905=o$13899);if(($13893$13905===DONE$12239)){return between$13868;}else{if(($13893$13905===LEFT$12241)){current$13872.push(between$13868);(between$13868=finalize$13860(current$13872));(v$13924=stack$13870.pop());(left_op$13871=v$13924[0]);(current$13872=v$13924[1]);}else{if(($13893$13905===RIGHT$12242)){stack$13870.push([left_op$13871,current$13872]);(left_op$13871=right_op$13869);(current$13872=[[right_op$13869],between$13868]);(between$13868=finalize$13860(next$13858()));(right_op$13869=next$13858());}else{if(($13893$13905===BOTH$12243)){current$13872[0].push(right_op$13869);current$13872.push(between$13868);(left_op$13871=right_op$13869);(between$13868=finalize$13860(next$13858()));(right_op$13869=next$13858());}else{(other$13977=$13893$13905);throw $14987(["should_never_happen"]).create("undefined priority",({"left":left_op$13871,"right":right_op$13869}));}}}}}}));(finalize$12245=(function($13983$13986){var t0$14001;var $index$14106;var $length$14100;var temp$14094;var $index$14144;var $length$14138;var temp$14132;var $index$14195;var $length$14189;var temp$14183;var acc$14177;var other$14557;var args$14552;var f$14528;var orig_args$14529;var args$14530;var $14498$14511;var $14499$14512;var t0$14507;var t1$14508;var t2$14509;var $14492$14502;var inserted$14334;var result$14335;var t0$14569;var f$14596;var other$14677;var x$14666;var $14642$14653;var $14643$14654;var t0$14651;var $14638$14646;var result$14586;var f$14703;var oloc$14808;var abloc$14809;var oabloc$14810;var rval$14811;var a$14798;var b$14799;var $14067$14759;var $14068$14760;var $14069$14761;var $14070$14762;var t0$14752;var t1$14753;var t2$14754;var t3$14755;var t4$14756;var t5$14757;var $index$14865;var $length$14859;var temp$14853;var acc$14847;var tokens$14838;var msg$14839;var op_strings$14831;var args$14832;var $14064$14748;var commas$14682;var commas$14561;var target$14294;var _b$14295;var body$14296;var f$14278;var body$14279;var f$14246;var arg$14247;var body$14248;var $14072$14237;var $14073$14238;var $14074$14239;var $14075$14240;var $14076$14241;var $14077$14242;var $14078$14243;var t0$14226;var t1$14227;var t2$14228;var t3$14229;var t4$14230;var t5$14231;var t6$14232;var t7$14233;var t8$14234;var bridge$14060$14235;var $14055$14221;var sumloc$14079;var orig_ops$14080;var op$14081;var other$14908;var ops$14046;var args$14047;var value$14037;var value$14032;var value$14022;var $13995$14017;var $13996$14018;var $13997$14019;var t0$14015;var $13988$14010;var ph$13998;var token$13999;(t0$14001=$13983$13986);(token$13999=t0$14001);(ph$13998=t0$14001);($13988$14010=ph$13998);if((($13995$14017=($13988$14010 instanceof Array))&&(((t0$14015=$13988$14010.length)),(($13997$14019=(t0$14015===2))&&($13988$14010[0]==="ID"))))){(value$14022=$13988$14010[1]);return __lt____lt____colon__$12230(["symbol",value$14022],token$13999);}else{if(($13997$14019&&($13988$14010[0]==="NUM"))){(value$14032=$13988$14010[1]);return __lt____lt____colon__$12230(["value",value$14032],token$13999);}else{if(($13997$14019&&($13988$14010[0]==="STR"))){(value$14037=$13988$14010[1]);return __lt____lt____colon__$12230(["value",value$14037],token$13999);}else{if(($13995$14017&&((t0$14015===1)&&($13988$14010[0]==="VOID")))){return __lt____lt____colon__$12230(["void"],token$13999);}else{if(($13995$14017&&(t0$14015>=1))){(ops$14046=$13988$14010[0]);(args$14047=Array.prototype.slice.call($13988$14010,1));(sumloc$14079=ops$14046[0].location);(temp$14094=ops$14046.slice(1));($length$14100=temp$14094.length);($index$14106=0);$14082:for(;($index$14106<$length$14100);($index$14106++)){var op$14123;var m$14115;(m$14115=temp$14094[$index$14106]);(op$14123=m$14115);(sumloc$14079=__plus____plus____colon__$12231(sumloc$14079,op$14123));}(temp$14132=args$14047);($length$14138=temp$14132.length);($index$14144=0);$14085:for(;($index$14144<$length$14138);($index$14144++)){var arg$14161;var m$14153;(m$14153=temp$14132[$index$14144]);(arg$14161=m$14153);(sumloc$14079=__plus____plus____colon__$12231(sumloc$14079,arg$14161));}(orig_ops$14080=ops$14046);(ops$14046=(((acc$14177=[])),(((temp$14183=ops$14046)),((($length$14189=temp$14183.length)),((($index$14195=0)),(function(){$14172:for(;($index$14195<$length$14189);($index$14195++)){var o$14212;var m$14204;(m$14204=temp$14183[$index$14195]);(o$14212=m$14204);acc$14177.push(o$14212[2]);}})()))),acc$14177));(op$14081=ops$14046[0]);($14055$14221=[ops$14046,args$14047]);if((($14072$14237=($14055$14221 instanceof Array))&&(((t0$14226=$14055$14221.length)),(($14074$14239=(t0$14226===2))&&(((t1$14227=$14055$14221[0])),(($14076$14241=(t1$14227 instanceof Array))&&(((t2$14228=t1$14227.length)),((t2$14228===2)&&((t1$14227[0]==="WHITE")&&((t1$14227[1]===":")&&(((t3$14229=$14055$14221[1])),((t3$14229 instanceof Array)&&(((t4$14230=t3$14229.length)),(t4$14230===3)))))))))))))){(f$14246=t3$14229[0]);(arg$14247=t3$14229[1]);(body$14248=t3$14229[2]);return __lt____lt____colon__$12230(["send",f$14246,__lt____lt____colon__$12230(["data",arg$14247,body$14248],__plus____plus____colon__$12231(arg$14247,body$14248))],sumloc$14079);}else{if(($14076$14241&&(($14078$14243=(t2$14228===1))&&((t1$14227[0]===":")&&(((t3$14229=$14055$14221[1])),((t3$14229 instanceof Array)&&(((t4$14230=t3$14229.length)),(t4$14230===2)))))))){(f$14278=t3$14229[0]);(body$14279=t3$14229[1]);return __lt____lt____colon__$12230(["send",f$14278,__lt____lt____colon__$12230(["data",body$14279],body$14279)],sumloc$14079);}else{if(($14078$14243&&((t1$14227[0]==="with")&&(((t3$14229=$14055$14221[1])),((t3$14229 instanceof Array)&&(((t4$14230=t3$14229.length)),((t4$14230===2)&&((target$14294=t3$14229[0]),(((t5$14231=t3$14229[1])),((_b$14295=t5$14231),(((t6$14232=$15315(["multi"])(t5$14231))),(t6$14232[0]&&(((t7$14233=t6$14232[1])),(((t8$14234=t7$14233.length)),(t8$14234>=0))))))))))))))){(body$14296=Array.prototype.slice.call(t7$14233,0));(inserted$14334=false);(result$14335=transform$12232(target$14294,(function($14342$14345){var t0$14354;var $index$14450;var $length$14444;var temp$14438;var tr$14423;var res$14424;var args$14412;var x$14388;var f$14389;var a$14390;var b$14391;var t0$14368;var t1$14369;var t2$14370;var $14347$14363;var ph$14351;var expr$14352;(t0$14354=$14342$14345);(expr$14352=t0$14354);(ph$14351=t0$14354);($14347$14363=ph$14351);if((($14347$14363 instanceof Array)&&(((t0$14368=$14347$14363.length)),((t0$14368===2)&&(($14347$14363[0]==="symbol")&&($14347$14363[1]==="...")))))){(inserted$14334=true);return __lt____lt____colon__$12230(["multi"].concat(body$14296),_b$14295);}else{(x$14388=$14347$14363);if((x$14388.fromop&&(($14347$14363 instanceof Array)&&(((t0$14368=$14347$14363.length)),((t0$14368===3)&&(($14347$14363[0]==="send")&&((f$14389=$14347$14363[1]),(((t1$14369=$14347$14363[2])),((t1$14369 instanceof Array)&&(((t2$14370=t1$14369.length)),((t2$14370===3)&&(t1$14369[0]==="data")))))))))))){(a$14390=t1$14369[1]);(b$14391=t1$14369[2]);return ["send",this(f$14389),__lt____lt____colon__$12230(["data",this(a$14390),this(b$14391)],__plus____plus____colon__$12231(a$14390,b$14391))];}else{if((($14347$14363 instanceof Array)&&(((t0$14368=$14347$14363.length)),((t0$14368>=1)&&($14347$14363[0]==="data"))))){(args$14412=Array.prototype.slice.call($14347$14363,1));(tr$14423=this);(res$14424=["data"]);(temp$14438=args$14412);($length$14444=temp$14438.length);($index$14450=0);$14425:for(;($index$14450<$length$14444);($index$14450++)){var other$14487;var t0$14464;var t1$14465;var m$14459;(m$14459=temp$14438[$index$14450]);(t0$14464=m$14459);if(((t0$14464 instanceof Array)&&(((t1$14465=t0$14464.length)),((t1$14465===2)&&((t0$14464[0]==="symbol")&&(t0$14464[1]==="...")))))){(inserted$14334=true);(res$14424=res$14424.concat(body$14296));}else{(other$14487=m$14459);res$14424.push(__lt____lt____colon__$12230(tr$14423(other$14487),other$14487));}}return __lt____lt____colon__$12230(res$14424,expr$14352);}else{$14968($14347$14363);}}}})));if((!inserted$14334)){($14492$14502=target$14294);if((($14492$14502 instanceof Array)&&(((t0$14507=$14492$14502.length)),((t0$14507===1)&&($14492$14502[0]==="void"))))){return __lt____lt____colon__$12230(["data"].concat(body$14296),sumloc$14079);}else{$14492$14502;if(target$14294.fromop){return __lt____lt____colon__$12230(["send",target$14294,__lt____lt____colon__$12230(["data"].concat(body$14296),_b$14295)],sumloc$14079);}else{if((($14498$14511=($14492$14502 instanceof Array))&&(((t0$14507=$14492$14502.length)),((t0$14507===3)&&(($14492$14502[0]==="send")&&((f$14528=$14492$14502[1]),(((t1$14508=$14492$14502[2])),((orig_args$14529=t1$14508),((t1$14508 instanceof Array)&&(((t2$14509=t1$14508.length)),((t2$14509>=1)&&(t1$14508[0]==="data")))))))))))){(args$14530=Array.prototype.slice.call(t1$14508,1));return __lt____lt____colon__$12230(["send",f$14528,__lt____lt____colon__$12230(["data"].concat(args$14530).concat(body$14296),__plus____plus____colon__$12231(orig_args$14529,_b$14295))],sumloc$14079);}else{if(($14498$14511&&((t0$14507>=1)&&($14492$14502[0]==="data")))){(args$14552=Array.prototype.slice.call($14492$14502,1));return __lt____lt____colon__$12230(target$14294.concat(body$14296),sumloc$14079);}else{(other$14557=$14492$14502);return __lt____lt____colon__$12230(["send",target$14294,__lt____lt____colon__$12230(["data"].concat(body$14296),_b$14295)],sumloc$14079);}}}}}else{return __lt____lt____colon__$12230(result$14335,sumloc$14079);}}else{if(($14074$14239&&(((bridge$14060$14235=$14055$14221[0])),((((bridge$14060$14235 instanceof Array)&&(((t0$14569=bridge$14060$14235.length)),((t0$14569>=2)&&((bridge$14060$14235[0]==="[")&&((commas$14561=Array.prototype.slice.call(bridge$14060$14235,1,-1)),(bridge$14060$14235[(t0$14569-1)]==="]"))))))||((commas$14561=bridge$14060$14235),true))&&($14055$14221[1],commas$14561.every((function(x$14580){return $15362(x$14580,",");}))))))){if((op$14081==="[")){(args$14047=args$14047.slice(1,-1));}(args$14047=(((f$14596=(function($14600$14603){var other$14632;var t0$14619;var $14605$14614;var ph$14608;(ph$14608=$14600$14603);($14605$14614=ph$14608);if((($14605$14614 instanceof Array)&&(((t0$14619=$14605$14614.length)),((t0$14619===1)&&($14605$14614[0]==="void"))))){return false;}else{(other$14632=$14605$14614);return true;}}))),args$14047.filter(f$14596)));(result$14586=((($14638$14646=args$14047)),(function(){if((($14642$14653=($14638$14646 instanceof Array))&&(((t0$14651=$14638$14646.length)),(t0$14651===0)))){return ["multi"];}else{if(($14642$14653&&(t0$14651===1))){(x$14666=$14638$14646[0]);if(((!isNaN(sumloc$14079.start))&&(!isNaN(sumloc$14079.end)))){(x$14666["location"]=sumloc$14079);}return x$14666;}else{(other$14677=$14638$14646);return ["multi"].concat(args$14047);}}})()));return __lt____lt____colon__$12230(result$14586,sumloc$14079);}else{if(($14074$14239&&(((t1$14227=$14055$14221[0])),(($14076$14241=(t1$14227 instanceof Array))&&(((t2$14228=t1$14227.length)),((t2$14228>=2)&&((t1$14227[0]==="{")&&((commas$14682=Array.prototype.slice.call(t1$14227,1,-1)),((t1$14227[(t2$14228-1)]==="}")&&($14055$14221[1],commas$14682.every((function(x$14698){return $15362(x$14698,",");})))))))))))){(f$14703=(function($14707$14710){var other$14739;var t0$14726;var $14712$14721;var ph$14715;(ph$14715=$14707$14710);($14712$14721=ph$14715);if((($14712$14721 instanceof Array)&&(((t0$14726=$14712$14721.length)),((t0$14726===1)&&($14712$14721[0]==="void"))))){return false;}else{(other$14739=$14712$14721);return true;}}));return __lt____lt____colon__$12230(["data"].concat(args$14047.slice(1,-1).filter(f$14703)),sumloc$14079);}else{if(($14076$14241&&(($14078$14243=(t2$14228===1))&&(t1$14227[0]==="WHITE")))){$14055$14221[1];return __lt____lt____colon__$12230(["send"].concat(args$14047),sumloc$14079);}else{if($14078$14243){t1$14227[0];($14064$14748=$14055$14221[1]);(t0$14752=$14064$14748);if((($14068$14760=(t0$14752 instanceof Array))&&(((t1$14753=t0$14752.length)),(($14070$14762=(t1$14753===2))&&(((t2$14754=t0$14752[0])),((t2$14754 instanceof Array)&&(((t3$14755=t2$14754.length)),((t3$14755===1)&&((t2$14754[0]==="void")&&(((t4$14756=t0$14752[1])),((t4$14756 instanceof Array)&&(((t5$14757=t4$14756.length)),((t5$14757===1)&&(t4$14756[0]==="void")))))))))))))){return __lt____lt____colon__$12230(["symbol",op$14081],orig_ops$14080[0]);}else{if($14070$14762){(a$14798=t0$14752[0]);(b$14799=t0$14752[1]);(oloc$14808=orig_ops$14080[0].location);(abloc$14809=__plus____plus____colon__$12231(a$14798,b$14799));(oabloc$14810=__plus____plus____colon__$12231(orig_ops$14080[0],abloc$14809));(rval$14811=__lt____lt____colon__$12230(["send",__lt____lt____colon__$12230(["symbol",op$14081],oloc$14808),__lt____lt____colon__$12230(["data",a$14798,b$14799],abloc$14809)],__plus____plus____colon__$12231(oloc$14808,abloc$14809)));(rval$14811["fromop"]=true);return rval$14811;}else{$14968($14064$14748,"/home/olivier/git/earl-grey/src/parse.eg",17505,17510);}}}else{if($14074$14239){(op_strings$14831=$14055$14221[0]);(args$14832=$14055$14221[1]);(tokens$14838=$15584((((acc$14847=[])),(((temp$14853=$15220(orig_ops$14080))),((($length$14859=temp$14853.length)),((($index$14865=0)),(function(){$14842:for(;($index$14865<$length$14859);($index$14865++)){var i$14884;var op$14885;var t0$14879;var t1$14880;var m$14874;(m$14874=temp$14853[$index$14865]);(t0$14879=m$14874);if(((t0$14879 instanceof Array)&&(((t1$14880=t0$14879.length)),(t1$14880===2)))){(i$14884=t0$14879[0]);(op$14885=t0$14879[1]);acc$14847.push([("token"+String((i$14884+1))),op$14885]);}else{$14968(m$14874,"/home/olivier/git/earl-grey/src/parse.eg",18021,18120);}}})()))),acc$14847)));(msg$14839="Mismatched/missing brackets/tokens");throw $14987(["syntax","mismatch"]).create(msg$14839,tokens$14838);}else{$14968($14055$14221);}}}}}}}}}else{(other$14908=$13988$14010);throw $14987(["should_never_happen"]).create("unknown node (B)",({"node":token$13999}));}}}}}}));(parse$12246=(function(tokens$14915){var next$14919;(next$14919=(function(){return tokens$14915.shift();}));return oparse$12244(next$14919,eg_order$12238.compare.bind(eg_order$12238),finalize$12245);}));(exports["OperatorGroups"]=OperatorGroups$12233);(exports["SimplePriority"]=SimplePriority$12236);(exports["parse"]=parse$12246);(exports["oparse"]=oparse$12244);(exports["finalize"]=finalize$12245);(exports["DONE"]=DONE$12239);(exports["NONE"]=NONE$12240);(exports["LEFT"]=LEFT$12241);(exports["RIGHT"]=RIGHT$12242);(exports["BOTH"]=BOTH$12243);
