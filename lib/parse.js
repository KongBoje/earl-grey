var $11812=function(type$11815){var f$11819;(f$11819=type$11815["::check"]);if((f$11819===(void 0))){return function(value$11825){return (value$11825 instanceof type$11815);};}else{return function(value$11829){return f$11819.call(type$11815,value$11829);};}};
var $11831=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $11832=function(dest$11835,values$11836){var k$11841;(k$11841=null);$11839:for(k$11841 in values$11836){if(values$11836.hasOwnProperty(k$11841)){(dest$11835[k$11841]=values$11836[k$11841]);}}return dest$11835;};
var $11849=function($11851$11854){var ph$11860;(ph$11860=$11851$11854);var $11856$11866;($11856$11866=ph$11860);var bridge$11858$11871;var x$11875;(bridge$11858$11871=$11856$11866);if((((typeof(bridge$11858$11871)==="string")&&((x$11875=bridge$11858$11871),true))||((typeof(bridge$11858$11871)==="number")&&((x$11875=bridge$11858$11871),true)))){return ["value",x$11875];}else{var other$11886;(other$11886=$11856$11866);return other$11886["::serialize_ast"]();}};
var send$11586;(send$11586=function(obj$11593,$11590$11594){var ph$11600;var msg$11601;var t0$11603;(t0$11603=$11590$11594);(msg$11601=t0$11603);(ph$11600=t0$11603);var $11596$11612;($11596$11612=ph$11600);var bridge$11598$11617;(bridge$11598$11617=$11596$11612);if(((typeof(bridge$11598$11617)==="string")||(typeof(bridge$11598$11617)==="number"))){return obj$11593[msg$11601];}else{var other$11629;(other$11629=$11596$11612);return obj$11593["::send"](msg$11601);}});(Array[":::project"]=function($11635$11638){var ph$11643;var value$11644;var t0$11646;(t0$11646=$11635$11638);(value$11644=t0$11646);(ph$11643=t0$11646);var $11640$11655;($11640$11655=ph$11643);if($11812(Array)($11640$11655)){return [true,value$11644];}else{$11640$11655;return [true,[value$11644]];}});(Array.prototype["::check"]=function(value$11673){if((value$11673 instanceof Array)){var i$11679;(i$11679=0);$11676:for(;(i$11679<this.length);(i$11679++)){if(($11831(this,i$11679)!==$11831(value$11673,i$11679))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $11832(this.slice(0),this);});(Array.prototype[":::project"]=function(value$11698){if((value$11698 instanceof Array)){var i$11704;(i$11704=0);$11701:for(;(i$11704<this.length);(i$11704++)){if(($11831(this,i$11704)!==$11831(value$11698,i$11704))){return [true,[value$11698]];}}return [true,value$11698.slice(this.length)];}else{return [true,[value$11698]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($11849));});(RegExp.prototype["::check"]=function($11722$11725){var ph$11730;(ph$11730=$11722$11725);var $11727$11736;($11727$11736=ph$11730);var value$11744;if((typeof($11727$11736)==="string")){(value$11744=$11727$11736);if(value$11744.match(this)){return true;}else{return false;}}else{var other$11749;(other$11749=$11727$11736);return false;}});(RegExp.prototype[":::project"]=function($11755$11758){var ph$11763;(ph$11763=$11755$11758);var $11760$11769;($11760$11769=ph$11763);var value$11777;if((typeof($11760$11769)==="string")){(value$11777=$11760$11769);var $11780$11785;($11780$11785=value$11777.match(this));var m$11793;if(($11780$11785===null)){(m$11793=$11780$11785);return [false,null];}else{var m$11798;(m$11798=$11780$11785);return [true,m$11798];}}else{var other$11802;(other$11802=$11760$11769);return [false,null];}});(Function.prototype["::send"]=function(args$11809){return this.apply(this,args$11809);});
var $14890=function(arr$14893){var results$14899;var l$14900;(results$14899=[]);(l$14900=arr$14893.length);var i$14909;(i$14909=0);$14898:for(;(i$14909<l$14900);(i$14909++)){results$14899.push([i$14909,$11831(arr$14893,i$14909)]);}return results$14899;};
var $14657=function(){var $14658$14664;($14658$14664=function(tags$14669){var it$0$14672;(it$0$14672=function(){if((!$11812($14658$14664)(this))){return Object.create($14658$14664.prototype);}else{return this;}}());(it$0$14672["tags"]=tags$14669);return it$0$14672;});($14658$14664.prototype["create"]=function(){var it$0$14692;var self$14693;(it$0$14692=this);(self$14693=this);var $14690$14702;($14690$14702=arguments);var t0$14707;var message$14711;var args$14712;(t0$14707=$14690$14702.length);if((t0$14707>=0)){(message$14711=function(){if((0>=t0$14707)){return "";}else{return $14690$14702[0];}}());(args$14712=Array.prototype.slice.call($14690$14702,1));var e$14725;(e$14725=Error(message$14711));(e$14725["::tags"]=it$0$14692.tags);(e$14725["args"]=args$14712);var temp$14741;(temp$14741=$14890(args$14712));var $length$14747;($length$14747=temp$14741.length);var $index$14753;($index$14753=0);$14726:for(;($index$14753<$length$14747);($index$14753++)){var m$14762;(m$14762=temp$14741[$index$14753]);var t0$14767;var t1$14768;var i$14772;var arg$14773;(t0$14767=m$14762);if(((t0$14767 instanceof Array)&&(((t1$14768=t0$14767.length)),(t1$14768===2)))){(i$14772=t0$14767[0]);(arg$14773=t0$14767[1]);(e$14725[i$14772]=arg$14773);}else{$14638(m$14762);}}(e$14725["length"]=args$14712.length);(e$14725["name"]=["E"].concat(it$0$14692.tags).join("."));return e$14725;}else{$14638($14690$14702);}});($14658$14664.prototype["::check"]=function(e$14803){var it$0$14807;var self$14808;(it$0$14807=this);(self$14808=this);var tags$14818;if(((!e$14803)||(!$11812(Error)(e$14803)))){return false;}(tags$14818=(e$14803["::tags"]||[]));var temp$14829;(temp$14829=it$0$14807.tags);var $length$14835;($length$14835=temp$14829.length);var $index$14841;($index$14841=0);$14819:for(;($index$14841<$length$14835);($index$14841++)){var m$14850;(m$14850=temp$14829[$index$14841]);var tag$14858;(tag$14858=m$14850);if((tags$14818.indexOf(tag$14858)===-1)){return false;}else{false;}}return true;});($14658$14664.prototype["::deconstruct"]=function(e$14867){var it$0$14871;var self$14872;(it$0$14871=this);(self$14872=this);return e$14867.args;});$11832($14658$14664,$11832(function(){var accum$14883;(accum$14883=({}));(accum$14883["::name"]="$14658");return accum$14883;}(),function(){var accum$14887;(accum$14887=({}));(accum$14887["::egclass"]=true);return accum$14887;}()));return $14658$14664;}();
var $14638=function(value$14641,url$14642,start$14643,end$14644){var err$14648;(err$14648=$14657(["match"]).create("Could not find a match for value",({"value":value$14641})));if(url$14642){(err$14648["location"]=["location",url$14642,start$14643,end$14644]);}throw err$14648;};
var $14916=function(obj$14919){var results$14924;(results$14924=[]);var k$14929;(k$14929=null);$14923:for(k$14929 in obj$14919){if(Object.prototype.hasOwnProperty.call(obj$14919,k$14929)){results$14924.push([k$14929,$11831(obj$14919,k$14929)]);}}return results$14924;};
var $14933=function(arrays$14936){var results$14940;(results$14940=[]);var temp$14950;(temp$14950=arrays$14936);var $length$14956;($length$14956=temp$14950.length);var $index$14962;($index$14962=0);$14941:for(;($index$14962<$length$14956);($index$14962++)){var m$14971;(m$14971=temp$14950[$index$14962]);var a$14979;(a$14979=m$14971);(results$14940=results$14940.concat(a$14979));}return results$14940;};
var $14985=function(type$14988){return function(value$14992){var f$14996;(f$14996=type$14988[":::project"]);if((f$14996===(void 0))){(f$14996=type$14988["::project"]);if((f$14996===(void 0))){return [true,type$14988(value$14992)];}else{var rval$15009;(rval$15009=false);try{(rval$15009=[true,f$14996(value$14992)]);}catch(excv$15020){var e$15026;(e$15026=excv$15020);(rval$15009=[false,null]);}return rval$15009;}}else{return f$14996.call(type$14988,value$14992);}};};
var $15204=Object.keys;
var $15205=function($15207$15210,key$15211){var ph$15219;(ph$15219=$15207$15210);var $15213$15225;($15213$15225=ph$15219);var bridge$15215$15230;(bridge$15215$15230=$15213$15225);if(((bridge$15215$15230===null)||(bridge$15215$15230===(void 0)))){return false;}else{var x$15242;if((typeof($15213$15225)==="string")){(x$15242=$15213$15225);return (key$15211 in String.prototype);}else{var x$15247;if((typeof($15213$15225)==="number")){(x$15247=$15213$15225);return (key$15211 in Number.prototype);}else{var x$15252;(x$15252=$15213$15225);return (key$15211 in x$15252);}}}};
var $15032=function($15034$15037,b$15038){var ph$15052;var a$15053;var t0$15055;(t0$15055=$15034$15037);(a$15053=t0$15055);(ph$15052=t0$15055);var $15040$15064;($15040$15064=ph$15052);var bridge$15043$15069;if(($15040$15064===b$15038)){return true;}else{(bridge$15043$15069=$15040$15064);if((function(){var bridge$15044$15083;(bridge$15044$15083=bridge$15043$15069);return (function(){var bridge$15045$15090;(bridge$15045$15090=bridge$15044$15083);return (function(){var bridge$15046$15097;(bridge$15046$15097=bridge$15045$15090);return (function(){var bridge$15047$15104;(bridge$15047$15104=bridge$15046$15097);return ((typeof(bridge$15047$15104)==="number")||(typeof(bridge$15047$15104)==="string"));}()||(bridge$15046$15097===null));}()||(bridge$15045$15090===(void 0)));}()||(bridge$15044$15083===true));}()||(bridge$15043$15069===false))){return false;}else{if($11812(Array)($15040$15064)){if(((!$11812(Array)(b$15038))||(a$15053.length!==b$15038.length))){return false;}var i$15120;(i$15120=0);$15116:for(;(i$15120<a$15053.length);(i$15120++)){if((!$15032(a$15053[i$15120],b$15038[i$15120]))){return false;}}return true;}else{$15040$15064;if((((Object.getPrototypeOf(a$15053)===Object.prototype)&&$11812(Object)(b$15038))&&(Object.getPrototypeOf(b$15038)===Object.prototype))){var ka$15134;(ka$15134=$15204(a$15053));if((!$15032(ka$15134.sort(),$15204(b$15038).sort()))){return false;}var temp$15145;(temp$15145=ka$15134);var $length$15151;($length$15151=temp$15145.length);var $index$15157;($index$15157=0);$15135:for(;($index$15157<$length$15151);($index$15157++)){var m$15166;(m$15166=temp$15145[$index$15157]);var k$15174;(k$15174=m$15166);if((!$15032(a$15053[k$15174],b$15038[k$15174]))){return false;}}return true;}else{if($15205($15040$15064,"::serialize")){$15040$15064["::serialize"];var $15181$15186;($15181$15186=b$15038);if($15205($15181$15186,"::serialize")){$15181$15186["::serialize"];return $15032(a$15053["::serialize"](),b$15038["::serialize"]());}else{var otherwise$15198;(otherwise$15198=$15181$15186);return false;}}else{var otherwise$15202;(otherwise$15202=$15040$15064);return false;}}}}}};
var $15254=function(pairs$15257){var rval$15261;(rval$15261=({}));var temp$15271;(temp$15271=pairs$15257);var $length$15277;($length$15277=temp$15271.length);var $index$15283;($index$15283=0);$15262:for(;($index$15283<$length$15277);($index$15283++)){var m$15292;(m$15292=temp$15271[$index$15283]);var t0$15297;var t1$15298;var k$15302;var v$15303;(t0$15297=m$15292);if(((t0$15297 instanceof Array)&&(((t1$15298=t0$15297.length)),(t1$15298===2)))){(k$15302=t0$15297[0]);(v$15303=t0$15297[1]);(rval$15261[k$15302]=v$15303);}else{$14638(m$15292);}}return rval$15261;};var accum$12473;var accum$12477;var accum$12723;var accum$13239;var accum$13243;var accum$13468;var accum$13472;var accum$13476;var accum$13480;var accum$13484;var accum$13496;var accum$13500;var accum$13504;var accum$13508;var accum$13512;var eg_groups$13254;var eg_prio$13255;var $11890$11912;var __lt____lt____colon__$11913;var __plus____plus____colon__$11914;var transform$11915;var OperatorGroups$11916;var parse_op_description$11917;var eg_groups$11918;var SimplePriority$11919;var MAX$11920;var eg_order$11921;var DONE$11922;var NONE$11923;var LEFT$11924;var RIGHT$11925;var BOTH$11926;var oparse$11927;var finalize$11928;var parse$11929;($11890$11912=require("./location"));(__lt____lt____colon__$11913=$11890$11912["<<:"]);(__plus____plus____colon__$11914=$11890$11912["++:"]);(transform$11915=function(expr$11943,cb$11944){var rval$11964;var tr$11949;var result$11950;(tr$11949=function(x$11955){return transform$11915(x$11955,cb$11944);});(result$11950=(((rval$11964=false)),(function(){try{(rval$11964=cb$11944.call(tr$11949,expr$11943));}catch(excv$11975){var name$12027;var args$12028;var v$12022;var s$12017;var $11991$12003;var $11992$12004;var $11993$12005;var t0$12001;var $11986$11996;var e$11981;(e$11981=excv$11975);(rval$11964=((($11986$11996=expr$11943)),function(){if((($11991$12003=($11986$11996 instanceof Array))&&(((t0$12001=$11986$11996.length)),((t0$12001===1)&&($11986$11996[0]==="void"))))){return ["void"];}else{if(($11991$12003&&(($11993$12005=(t0$12001===2))&&($11986$11996[0]==="symbol")))){(s$12017=$11986$11996[1]);return expr$11943;}else{if(($11993$12005&&($11986$11996[0]==="value"))){(v$12022=$11986$11996[1]);return expr$11943;}else{if(($11991$12003&&(t0$12001>=1))){(name$12027=$11986$11996[0]);(args$12028=Array.prototype.slice.call($11986$11996,1));return [name$12027].concat(args$12028.map(tr$11949));}else{$14638($11986$11996);}}}}}()));}}(),rval$11964)));return __lt____lt____colon__$11913(result$11950,expr$11943);});(OperatorGroups$11916=function(groups$12040){var $index$12087;var $length$12081;var temp$12075;var acc$12069;var $index$12147;var $length$12141;var temp$12135;var acc$12129;var $index$12252;var $length$12246;var temp$12240;var acc$12234;var itg$12055;var it$0$12043;(it$0$12043=function(){if((!$11812(OperatorGroups$11916)(this))){return Object.create(OperatorGroups$11916.prototype);}else{return this;}}());(itg$12055=$14916(groups$12040));(it$0$12043["gnames"]=(((acc$12069=[])),(((temp$12075=itg$12055)),((($length$12081=temp$12075.length)),((($index$12087=0)),function(){$12064:for(;($index$12087<$length$12081);($index$12087++)){var name$12106;var t0$12101;var t1$12102;var m$12096;(m$12096=temp$12075[$index$12087]);(t0$12101=m$12096);if(((t0$12101 instanceof Array)&&(((t1$12102=t0$12101.length)),(t1$12102===2)))){(name$12106=t0$12101[0]);t0$12101[1];acc$12069.push(name$12106);}else{$14638(m$12096,"/home/olivier/git/earl-grey/src/parse.eg",503,529);}}}()))),acc$12069));(it$0$12043["groups"]=(((acc$12129=[])),(((temp$12135=itg$12055)),((($length$12141=temp$12135.length)),((($index$12147=0)),function(){$12124:for(;($index$12147<$length$12141);($index$12147++)){var $index$12203;var $length$12197;var temp$12191;var acc$12185;var name$12166;var descrs$12167;var t0$12161;var t1$12162;var m$12156;(m$12156=temp$12135[$index$12147]);(t0$12161=m$12156);if(((t0$12161 instanceof Array)&&(((t1$12162=t0$12161.length)),(t1$12162===2)))){(name$12166=t0$12161[0]);(descrs$12167=t0$12161[1]);acc$12129.push($14933((((acc$12185=[])),(((temp$12191=descrs$12167)),((($length$12197=temp$12191.length)),((($index$12203=0)),function(){$12180:for(;($index$12203<$length$12197);($index$12203++)){var descr$12220;var m$12212;(m$12212=temp$12191[$index$12203]);(descr$12220=m$12212);acc$12185.push(parse_op_description$11917(descr$12220));}}()))),acc$12185)));}else{$14638(m$12156,"/home/olivier/git/earl-grey/src/parse.eg",546,643);}}}()))),acc$12129));(it$0$12043["fns"]=[]);(it$0$12043["to_gid"]=({"IFX":({"wide":({}),"short":({})}),"PFX":({"wide":({}),"short":({})}),"SFX":({"wide":({}),"short":({})})}));(acc$12234=[]);(temp$12240=$14890(it$0$12043.groups));($length$12246=temp$12240.length);($index$12252=0);$12056:for(;($index$12252<$length$12246);($index$12252++)){var $index$12309;var $length$12303;var temp$12297;var acc$12291;var i$12271;var group$12272;var t0$12266;var t1$12267;var m$12261;(m$12261=temp$12240[$index$12252]);(t0$12266=m$12261);if(((t0$12266 instanceof Array)&&(((t1$12267=t0$12266.length)),(t1$12267===2)))){(i$12271=t0$12266[0]);(group$12272=t0$12266[1]);acc$12234.push((((acc$12291=[])),(((temp$12297=group$12272)),((($length$12303=temp$12297.length)),((($index$12309=0)),function(){$12285:for(;($index$12309<$length$12303);($index$12309++)){var f$12349;var fixity$12328;var width$12329;var name$12330;var t0$12323;var t1$12324;var m$12318;(m$12318=temp$12297[$index$12309]);(t0$12323=m$12318);if(((t0$12323 instanceof Array)&&(((t1$12324=t0$12323.length)),(t1$12324===3)))){(fixity$12328=t0$12323[0]);(width$12329=t0$12323[1]);(name$12330=t0$12323[2]);acc$12291.push((($11831($11831(it$0$12043.to_gid,fixity$12328),width$12329)[name$12330]=i$12271)));}else{(f$12349=m$12318);acc$12291.push(it$0$12043.fns.push([f$12349,i$12271]));}}}()))),acc$12291));}else{$14638(m$12261,"/home/olivier/git/earl-grey/src/parse.eg",808,1009);}}acc$12234;return it$0$12043;});(OperatorGroups$11916.prototype["get_name"]=function(o$12359){var it$0$12363;var self$12364;(it$0$12363=this);(self$12364=this);return $11831(it$0$12363.gnames,it$0$12363.get(o$12359));});(OperatorGroups$11916.prototype["get"]=function($12375$12378){var t0$12396;var t1$12397;var $index$12435;var $length$12429;var temp$12423;var attempt$12412;var o$12391;var fixity$12392;var width$12393;var name$12394;var it$0$12382;var self$12383;(it$0$12382=this);(self$12383=this);(t0$12396=$12375$12378);(o$12391=t0$12396);if(((t0$12396 instanceof Array)&&(((t1$12397=t0$12396.length)),(t1$12397===3)))){(fixity$12392=t0$12396[0]);(width$12393=t0$12396[1]);(name$12394=t0$12396[2]);}else{$14638($12375$12378);}(attempt$12412=$11831($11831($11831(it$0$12382.to_gid,fixity$12392),width$12393),name$12394));if((attempt$12412===(void 0))){(temp$12423=it$0$12382.fns);($length$12429=temp$12423.length);($index$12435=0);$12417:for(;($index$12435<$length$12429);($index$12435++)){var f$12454;var i$12455;var t0$12449;var t1$12450;var m$12444;(m$12444=temp$12423[$index$12435]);(t0$12449=m$12444);if(((t0$12449 instanceof Array)&&(((t1$12450=t0$12449.length)),(t1$12450===2)))){(f$12454=t0$12449[0]);(i$12455=t0$12449[1]);if(f$12454(o$12391)){return i$12455;}}else{$14638(m$12444,"/home/olivier/git/earl-grey/src/parse.eg",1188,1271);}}throw $14657(["syntax","unknown_operator"]).create(("Unknown operator: "+[true,String(o$12391)][1]),({"operator":o$12391}));}else{return attempt$12412;}});$11832(OperatorGroups$11916,$11832(((accum$12473=({})),((accum$12473["::name"]="OperatorGroups"),accum$12473)),((accum$12477=({})),((accum$12477["::egclass"]=true),accum$12477))));OperatorGroups$11916;(parse_op_description$11917=function($12483$12486){var otherwise$12576;var $12556$12565;var $12552$12559;var otherwise$12610;var $12590$12599;var $12586$12593;var t0$12546;var t1$12547;var fixity$12543;var short$12544;var other$12614;var x$12520;var w1$12521;var op$12522;var w2$12523;var y$12524;var f$12515;var rx$12509;var t0$12503;var t1$12504;var t2$12505;var $12488$12498;var ph$12492;(ph$12492=$12483$12486);($12488$12498=ph$12492);(rx$12509=RegExp("(?:^((?:X?))((?:[ _]?))((?:[^ _Y]*))((?:[ _]?))((?:Y?))$)",""));if($11812(Function)($12488$12498)){(f$12515=$12488$12498);return f$12515;}else{(t0$12503=$14985(rx$12509)($12488$12498));if((t0$12503[0]&&(((t1$12504=t0$12503[1])),(((t2$12505=t1$12504.length)),(t2$12505===6))))){t1$12504[0];(x$12520=t1$12504[1]);(w1$12521=t1$12504[2]);(op$12522=t1$12504[3]);(w2$12523=t1$12504[4]);(y$12524=t1$12504[5]);(t0$12546=((($12552$12559=null)),($12552$12559,function(){if((x$12520==="")){return ["PFX",(w2$12523==="")];}else{if((y$12524==="")){return ["SFX",(w1$12521==="")];}else{(otherwise$12576=$12552$12559);return ["IFX",((w1$12521==="")||(w2$12523===""))];}}}())));if(((t0$12546 instanceof Array)&&(((t1$12547=t0$12546.length)),(t1$12547===2)))){(fixity$12543=t0$12546[0]);(short$12544=t0$12546[1]);}else{$14638(((($12586$12593=null)),($12586$12593,function(){if((x$12520==="")){return ["PFX",(w2$12523==="")];}else{if((y$12524==="")){return ["SFX",(w1$12521==="")];}else{(otherwise$12610=$12586$12593);return ["IFX",((w1$12521==="")||(w2$12523===""))];}}}())),"/home/olivier/git/earl-grey/src/parse.eg",1642,1860);}if(((w1$12521==="_")||(w2$12523==="_"))){return [[fixity$12543,"short",op$12522],[fixity$12543,"wide",op$12522]];}else{return [[fixity$12543,function(){if(short$12544){return "short";}else{return "wide";}}(),op$12522]];}}else{(other$12614=$12488$12498);throw $14657(["invalid_op_description"]).create(("Invalid operator description: "+other$12614));}}});(eg_groups$11918=OperatorGroups$11916($11832(({"tokenpfx":[".Y","#Y","@Y"],"sjuxt":["XWHITEY"],"ifx":[function($12621$12624){var t0$12640;var $12626$12635;var ph$12629;(ph$12629=$12621$12624);($12626$12635=ph$12629);if((($12626$12635 instanceof Array)&&(((t0$12640=$12626$12635.length)),((t0$12640===3)&&(($12626$12635[0]==="IFX")&&($12626$12635[1]==="short")))))){$12626$12635[2];return true;}else{$12626$12635;return false;}}],"pfx":[function($12655$12658){var t0$12674;var $12660$12669;var ph$12663;(ph$12663=$12655$12658);($12660$12669=ph$12663);if((($12660$12669 instanceof Array)&&(((t0$12674=$12660$12669.length)),((t0$12674===3)&&(($12660$12669[0]==="PFX")&&($12660$12669[1]==="short")))))){$12660$12669[2];return true;}else{$12660$12669;return false;}}],"sfx":[function($12689$12692){var t0$12708;var $12694$12703;var ph$12697;(ph$12697=$12689$12692);($12694$12703=ph$12697);if((($12694$12703 instanceof Array)&&(((t0$12708=$12694$12703.length)),((t0$12708===3)&&(($12694$12703[0]==="SFX")&&($12694$12703[1]==="short")))))){$12694$12703[2];return true;}else{$12694$12703;return false;}}],"pow":["X ** Y"],"mul":["X * Y","X / Y","X // Y","X mod Y","+ Y","- Y"],"add":["X + Y","X - Y"],"cmp":["X < Y","X <= Y","X == Y","X > Y","X >= Y","X != Y"],"cat":["X ++ Y"],"union":["X & Y"],"range":["X .. Y","X ..",".. Y"],"in":["X in Y"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"and":"X and Y","or":"X or Y","not":"not Y"}),$11832(((accum$12723=({})),((accum$12723["with"]=["X with Y"]),accum$12723)),({"decl":["X -> Y","X = Y","X := Y","X => Y","X where Y","X when Y","X each Y"],"brack":["X_,_Y","(_Y","[_Y","{_Y","X_)","X_]","X_}"],"custom":[function(x$12728){return true;}]})))));(SimplePriority$11919=function(groups$12735,priorities$12736){var $index$12786;var $length$12780;var temp$12774;var acc$12768;var _i$12750;var tracks$12751;var it$0$12739;(it$0$12739=function(){if((!$11812(SimplePriority$11919)(this))){return Object.create(SimplePriority$11919.prototype);}else{return this;}}());(it$0$12739["groups"]=groups$12735);(_i$12750=0);(tracks$12751=({}));(it$0$12739["prio"]=(((acc$12768=[])),(((temp$12774=groups$12735.gnames)),((($length$12780=temp$12774.length)),((($index$12786=0)),function(){$12763:for(;($index$12786<$length$12780);($index$12786++)){var t0$12816;var t1$12817;var t2$12818;var t3$12819;var t4$12820;var t5$12821;var t6$12822;var t7$12823;var $index$12898;var $length$12892;var temp$12886;var acc$12880;var $index$13020;var $length$13014;var temp$13008;var acc$13002;var t0$12869;var t1$12870;var ltracks$12809;var lp$12810;var rtracks$12811;var rp$12812;var lt$12813;var rt$12814;var name$12803;var m$12795;(m$12795=temp$12774[$index$12786]);(name$12803=m$12795);acc$12768.push(((((t0$12816=$11831(priorities$12736,name$12803))),function(){if(((t0$12816 instanceof Array)&&(((t1$12817=t0$12816.length)),((t1$12817===2)&&(((t2$12818=t0$12816[0])),((t2$12818 instanceof Array)&&(((t3$12819=t2$12818.length)),((t3$12819===2)&&(((t4$12820=$14985(Array)(t2$12818[0]))),(t4$12820[0]&&((ltracks$12809=t4$12820[1]),((lp$12810=t2$12818[1]),(((t5$12821=t0$12816[1])),((t5$12821 instanceof Array)&&(((t6$12822=t5$12821.length)),((t6$12822===2)&&(((t7$12823=$14985(Array)(t5$12821[0]))),t7$12823[0]))))))))))))))))){(rtracks$12811=t7$12823[1]);(rp$12812=t5$12821[1]);}else{return $14638($11831(priorities$12736,name$12803),"/home/olivier/git/earl-grey/src/parse.eg",3545,3571);}}()),(((t0$12869=(((acc$12880=[])),(((temp$12886=[ltracks$12809,rtracks$12811])),((($length$12892=temp$12886.length)),((($index$12898=0)),function(){$12875:for(;($index$12898<$length$12892);($index$12898++)){var $index$12944;var $length$12938;var temp$12932;var rval$12920;var tr$12915;var m$12907;(m$12907=temp$12886[$index$12898]);(tr$12915=m$12907);acc$12880.push((((rval$12920=0)),(((temp$12932=tr$12915)),((($length$12938=temp$12932.length)),((($index$12944=0)),function(){$12921:for(;($index$12944<$length$12938);($index$12944++)){var t$12983;var t$12969;var m$12953;(m$12953=temp$12932[$index$12944]);if((m$12953==="all")){(rval$12920=(Math.pow(2,31)-1));}else{(t$12969=m$12953);if((!$11831(tracks$12751,t$12969))){(rval$12920=(rval$12920|Math.pow(2,_i$12750)));(tracks$12751[t$12969]=(_i$12750++));}else{(t$12983=m$12953);(rval$12920=(rval$12920|Math.pow(2,$11831(tracks$12751,t$12983))));}}}}()))),rval$12920));}}()))),acc$12880))),function(){if(((t0$12869 instanceof Array)&&(((t1$12870=t0$12869.length)),(t1$12870===2)))){(lt$12813=t0$12869[0]);(rt$12814=t0$12869[1]);}else{return $14638((((acc$13002=[])),(((temp$13008=[ltracks$12809,rtracks$12811])),((($length$13014=temp$13008.length)),((($index$13020=0)),function(){$12997:for(;($index$13020<$length$13014);($index$13020++)){var $index$13066;var $length$13060;var temp$13054;var rval$13042;var tr$13037;var m$13029;(m$13029=temp$13008[$index$13020]);(tr$13037=m$13029);acc$13002.push((((rval$13042=0)),(((temp$13054=tr$13037)),((($length$13060=temp$13054.length)),((($index$13066=0)),function(){$13043:for(;($index$13066<$length$13060);($index$13066++)){var t$13105;var t$13091;var m$13075;(m$13075=temp$13054[$index$13066]);if((m$13075==="all")){(rval$13042=(Math.pow(2,31)-1));}else{(t$13091=m$13075);if((!$11831(tracks$12751,t$13091))){(rval$13042=(rval$13042|Math.pow(2,_i$12750)));(tracks$12751[t$13091]=(_i$12750++));}else{(t$13105=m$13075);(rval$13042=(rval$13042|Math.pow(2,$11831(tracks$12751,t$13105))));}}}}()))),rval$13042));}}()))),acc$13002),"/home/olivier/git/earl-grey/src/parse.eg",3581,3902);}}()),[[lt$12813,lp$12810],[rt$12814,rp$12812]]));}}()))),acc$12768));return it$0$12739;});(SimplePriority$11919.prototype["compare"]=function(op1$13117,op2$13118){var t0$13155;var t1$13156;var t2$13157;var t3$13158;var t0$13183;var t1$13184;var t2$13185;var t3$13186;var $13141$13217;var $13136$13211;var i1$13142;var i2$13143;var code1$13144;var ord1$13145;var code2$13146;var ord2$13147;var it$0$13122;var self$13123;(it$0$13122=this);(self$13123=this);(i1$13142=it$0$13122.groups.get(op1$13117));(i2$13143=it$0$13122.groups.get(op2$13118));(t0$13155=$11831(it$0$13122.prio,i1$13142));if(((t0$13155 instanceof Array)&&(((t1$13156=t0$13155.length)),((t1$13156===2)&&(t0$13155[0],(((t2$13157=t0$13155[1])),((t2$13157 instanceof Array)&&(((t3$13158=t2$13157.length)),(t3$13158===2))))))))){(code1$13144=t2$13157[0]);(ord1$13145=t2$13157[1]);}else{$14638($11831(it$0$13122.prio,i1$13142),"/home/olivier/git/earl-grey/src/parse.eg",4029,4046);}(t0$13183=$11831(it$0$13122.prio,i2$13143));if(((t0$13183 instanceof Array)&&(((t1$13184=t0$13183.length)),((t1$13184===2)&&(((t2$13185=t0$13183[0])),((t2$13185 instanceof Array)&&(((t3$13186=t2$13185.length)),(t3$13186===2)))))))){(code2$13146=t2$13185[0]);(ord2$13147=t2$13185[1]);t0$13183[1];}else{$14638($11831(it$0$13122.prio,i2$13143),"/home/olivier/git/earl-grey/src/parse.eg",4066,4083);}($13136$13211=null);$13136$13211;if(((code1$13144&code2$13146)===0)){throw $14657(["syntax","order"]).create("Cannot mix operators in the given order",({"left":op1$13117,"right":op2$13118}));}else{if((ord1$13145>ord2$13147)){return LEFT$11924;}else{if((ord1$13145<ord2$13147)){return RIGHT$11925;}else{if((ord1$13145===ord2$13147)){return BOTH$11926;}else{$14638($13136$13211);}}}}});$11832(SimplePriority$11919,$11832(((accum$13239=({})),((accum$13239["::name"]="SimplePriority"),accum$13239)),((accum$13243=({})),((accum$13243["::egclass"]=true),accum$13243))));SimplePriority$11919;(MAX$11920=(1/0));(eg_order$11921=(((eg_groups$13254=OperatorGroups$11916($11832(({"sh_ifx":[function($13264$13267){var t0$13283;var $13269$13278;var ph$13272;(ph$13272=$13264$13267);($13269$13278=ph$13272);if((($13269$13278 instanceof Array)&&(((t0$13283=$13269$13278.length)),((t0$13283===3)&&(($13269$13278[0]==="IFX")&&($13269$13278[1]==="short")))))){$13269$13278[2];return true;}else{$13269$13278;return false;}}],"sh_pfx":[function($13298$13301){var t0$13317;var $13303$13312;var ph$13306;(ph$13306=$13298$13301);($13303$13312=ph$13306);if((($13303$13312 instanceof Array)&&(((t0$13317=$13303$13312.length)),((t0$13317===3)&&(($13303$13312[0]==="PFX")&&($13303$13312[1]==="short")))))){$13303$13312[2];return true;}else{$13303$13312;return false;}}],"sh_sfx":[function($13332$13335){var t0$13351;var $13337$13346;var ph$13340;(ph$13340=$13332$13335);($13337$13346=ph$13340);if((($13337$13346 instanceof Array)&&(((t0$13351=$13337$13346.length)),((t0$13351===3)&&(($13337$13346[0]==="SFX")&&($13337$13346[1]==="short")))))){$13337$13346[2];return true;}else{$13337$13346;return false;}}],"wi_ifx":[function($13366$13369){var t0$13385;var $13371$13380;var ph$13374;(ph$13374=$13366$13369);($13371$13380=ph$13374);if((($13371$13380 instanceof Array)&&(((t0$13385=$13371$13380.length)),((t0$13385===3)&&(($13371$13380[0]==="IFX")&&($13371$13380[1]==="wide")))))){$13371$13380[2];return true;}else{$13371$13380;return false;}}],"wi_pfx":[function($13400$13403){var t0$13419;var $13405$13414;var ph$13408;(ph$13408=$13400$13403);($13405$13414=ph$13408);if((($13405$13414 instanceof Array)&&(((t0$13419=$13405$13414.length)),((t0$13419===3)&&(($13405$13414[0]==="PFX")&&($13405$13414[1]==="wide")))))){$13405$13414[2];return true;}else{$13405$13414;return false;}}],"wi_sfx":[function($13434$13437){var t0$13453;var $13439$13448;var ph$13442;(ph$13442=$13434$13437);($13439$13448=ph$13442);if((($13439$13448 instanceof Array)&&(((t0$13453=$13439$13448.length)),((t0$13453===3)&&(($13439$13448[0]==="SFX")&&($13439$13448[1]==="wide")))))){$13439$13448[2];return true;}else{$13439$13448;return false;}}],"comma":["X_,_Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"]}),$11832(((accum$13468=({})),((accum$13468["with"]=["X with Y"]),accum$13468)),$11832(({"lowprio":["X each Y","X each? Y","X where Y","X !! Y","X -> Y","X => Y","X = Y","X := Y","X += Y","X -= Y","X *= Y","X /= Y","X <<= Y","X >>= Y","X >>>= Y","X ++= Y","X ?= Y","X or= Y","X and= Y","X each= Y","X % Y"]}),$11832(((accum$13472=({})),((accum$13472["when"]=["X when Y"]),accum$13472)),$11832(((accum$13476=({})),((accum$13476["or"]=["X or Y"]),accum$13476)),$11832(((accum$13480=({})),((accum$13480["and"]=["X and Y"]),accum$13480)),$11832(((accum$13484=({})),((accum$13484["not"]=["not Y"]),accum$13484)),({"cmp":["X == Y","X != Y","X >= Y","X <= Y","X > Y","X < Y"],"binxor":["X ^. Y"],"binor":["X |. Y"],"binand":["X &. Y"],"shift":["X << Y","X >> Y","X >>> Y"],"add":["X + Y","X - Y"],"mul":["X * Y","X / Y","X // Y","X mod Y"],"exp":["X ** Y"],"sjuxt":["XWHITEY"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"pfx":["._Y","#_Y","@_Y"],"when2":["when Y"],"pp":["<> Y"],"pipe":["X |> Y"]}))))))))))),((eg_prio$13255=$11832(({"comma":[["all",1],["all",1]],"obrack":[["all",MAX$11920],["all",1]],"cbrack":[["all",1],["all",MAX$11920]]}),$11832(((accum$13496=({})),((accum$13496["with"]=[["all",1999],["all",10]]),accum$13496)),$11832(({"lowprio":[["all",11],["all",10]]}),$11832(((accum$13500=({})),((accum$13500["when"]=[["all",100],["all",101]]),accum$13500)),$11832(((accum$13504=({})),((accum$13504["or"]=[["all",110],["all",111]]),accum$13504)),$11832(((accum$13508=({})),((accum$13508["and"]=[["all",120],["all",121]]),accum$13508)),$11832(((accum$13512=({})),((accum$13512["not"]=[["all",MAX$11920],["all",131]]),accum$13512)),({"cmp":[["all",200],["all",201]],"binxor":[["all",400],["all",401]],"binor":[["all",410],["all",411]],"binand":[["all",420],["all",421]],"shift":[["arith",500],["arith",501]],"add":[["arith",550],["arith",551]],"mul":[["arith",560],["arith",561]],"exp":[["arith",571],["arith",570]],"wjuxt":[["wjuxt",13],["all",12]],"colon":[["all",12],["all",10]],"sjuxt":[["all",2000],["all",2001]],"pfx":[["all",MAX$11920],["all",3000]],"pp":[["all",MAX$11920],["all",5]],"when2":[["all",MAX$11920],["all",101]],"pipe":[["pipe",550],["pipe",551]],"sh_ifx":[["all",1800],["all",1801]],"sh_pfx":[["all",MAX$11920],["all",1901]],"sh_sfx":[["all",1900],["all",MAX$11920]],"wi_ifx":[["customl",900],["customr",901]],"wi_pfx":[["all",MAX$11920],["all",901]],"wi_sfx":[["all",900],["all",MAX$11920]]})))))))))),SimplePriority$11919(eg_groups$13254,eg_prio$13255)));(DONE$11922=-1);(NONE$11923=0);(LEFT$11924=1);(RIGHT$11925=2);(BOTH$11926=3);(oparse$11927=function(next$13536,order$13537,finalize$13538){var between$13546;var right_op$13547;var stack$13548;var left_op$13549;var current$13550;(between$13546=finalize$13538(next$13536()));(right_op$13547=next$13536());(stack$13548=[]);(left_op$13549=null);(current$13550=null);$13551:while(true){var v$13602;var other$13655;var $13571$13583;var o$13577;(o$13577=function(){if(((!left_op$13549)&&(!right_op$13547))){return DONE$11922;}else{return ((((!left_op$13549)&&RIGHT$11925)||((!right_op$13547)&&LEFT$11924))||order$13537(left_op$13549,right_op$13547));}}());($13571$13583=o$13577);if(($13571$13583===DONE$11922)){return between$13546;}else{if(($13571$13583===LEFT$11924)){current$13550.push(between$13546);(between$13546=finalize$13538(current$13550));(v$13602=stack$13548.pop());(left_op$13549=v$13602[0]);(current$13550=v$13602[1]);}else{if(($13571$13583===RIGHT$11925)){stack$13548.push([left_op$13549,current$13550]);(left_op$13549=right_op$13547);(current$13550=[[right_op$13547],between$13546]);(between$13546=finalize$13538(next$13536()));(right_op$13547=next$13536());}else{if(($13571$13583===BOTH$11926)){current$13550[0].push(right_op$13547);current$13550.push(between$13546);(left_op$13549=right_op$13547);(between$13546=finalize$13538(next$13536()));(right_op$13547=next$13536());}else{(other$13655=$13571$13583);throw $14657(["should_never_happen"]).create("undefined priority",({"left":left_op$13549,"right":right_op$13547}));}}}}}});(finalize$11928=function($13661$13664){var t0$13679;var $index$13784;var $length$13778;var temp$13772;var $index$13822;var $length$13816;var temp$13810;var $index$13873;var $length$13867;var temp$13861;var acc$13855;var other$14235;var args$14230;var f$14206;var orig_args$14207;var args$14208;var $14176$14189;var $14177$14190;var t0$14185;var t1$14186;var t2$14187;var $14170$14180;var inserted$14012;var result$14013;var t0$14247;var f$14274;var other$14355;var x$14344;var $14320$14331;var $14321$14332;var t0$14329;var $14316$14324;var result$14264;var f$14381;var oloc$14486;var abloc$14487;var oabloc$14488;var rval$14489;var a$14476;var b$14477;var $13745$14437;var $13746$14438;var $13747$14439;var $13748$14440;var t0$14430;var t1$14431;var t2$14432;var t3$14433;var t4$14434;var t5$14435;var $index$14543;var $length$14537;var temp$14531;var acc$14525;var tokens$14516;var msg$14517;var op_strings$14509;var args$14510;var $13742$14426;var commas$14360;var commas$14239;var target$13972;var _b$13973;var body$13974;var f$13956;var body$13957;var f$13924;var arg$13925;var body$13926;var $13750$13915;var $13751$13916;var $13752$13917;var $13753$13918;var $13754$13919;var $13755$13920;var $13756$13921;var t0$13904;var t1$13905;var t2$13906;var t3$13907;var t4$13908;var t5$13909;var t6$13910;var t7$13911;var t8$13912;var bridge$13738$13913;var $13733$13899;var sumloc$13757;var orig_ops$13758;var op$13759;var other$14586;var ops$13724;var args$13725;var value$13715;var value$13710;var value$13700;var $13673$13695;var $13674$13696;var $13675$13697;var t0$13693;var $13666$13688;var ph$13676;var token$13677;(t0$13679=$13661$13664);(token$13677=t0$13679);(ph$13676=t0$13679);($13666$13688=ph$13676);if((($13673$13695=($13666$13688 instanceof Array))&&(((t0$13693=$13666$13688.length)),(($13675$13697=(t0$13693===2))&&($13666$13688[0]==="ID"))))){(value$13700=$13666$13688[1]);return __lt____lt____colon__$11913(["symbol",value$13700],token$13677);}else{if(($13675$13697&&($13666$13688[0]==="NUM"))){(value$13710=$13666$13688[1]);return __lt____lt____colon__$11913(["value",value$13710],token$13677);}else{if(($13675$13697&&($13666$13688[0]==="STR"))){(value$13715=$13666$13688[1]);return __lt____lt____colon__$11913(["value",value$13715],token$13677);}else{if(($13673$13695&&((t0$13693===1)&&($13666$13688[0]==="VOID")))){return __lt____lt____colon__$11913(["void"],token$13677);}else{if(($13673$13695&&(t0$13693>=1))){(ops$13724=$13666$13688[0]);(args$13725=Array.prototype.slice.call($13666$13688,1));(sumloc$13757=ops$13724[0].location);(temp$13772=ops$13724.slice(1));($length$13778=temp$13772.length);($index$13784=0);$13760:for(;($index$13784<$length$13778);($index$13784++)){var op$13801;var m$13793;(m$13793=temp$13772[$index$13784]);(op$13801=m$13793);(sumloc$13757=__plus____plus____colon__$11914(sumloc$13757,op$13801));}(temp$13810=args$13725);($length$13816=temp$13810.length);($index$13822=0);$13763:for(;($index$13822<$length$13816);($index$13822++)){var arg$13839;var m$13831;(m$13831=temp$13810[$index$13822]);(arg$13839=m$13831);(sumloc$13757=__plus____plus____colon__$11914(sumloc$13757,arg$13839));}(orig_ops$13758=ops$13724);(ops$13724=(((acc$13855=[])),(((temp$13861=ops$13724)),((($length$13867=temp$13861.length)),((($index$13873=0)),function(){$13850:for(;($index$13873<$length$13867);($index$13873++)){var o$13890;var m$13882;(m$13882=temp$13861[$index$13873]);(o$13890=m$13882);acc$13855.push(o$13890[2]);}}()))),acc$13855));(op$13759=ops$13724[0]);($13733$13899=[ops$13724,args$13725]);if((($13750$13915=($13733$13899 instanceof Array))&&(((t0$13904=$13733$13899.length)),(($13752$13917=(t0$13904===2))&&(((t1$13905=$13733$13899[0])),(($13754$13919=(t1$13905 instanceof Array))&&(((t2$13906=t1$13905.length)),((t2$13906===2)&&((t1$13905[0]==="WHITE")&&((t1$13905[1]===":")&&(((t3$13907=$13733$13899[1])),((t3$13907 instanceof Array)&&(((t4$13908=t3$13907.length)),(t4$13908===3)))))))))))))){(f$13924=t3$13907[0]);(arg$13925=t3$13907[1]);(body$13926=t3$13907[2]);return __lt____lt____colon__$11913(["send",f$13924,__lt____lt____colon__$11913(["data",arg$13925,body$13926],__plus____plus____colon__$11914(arg$13925,body$13926))],sumloc$13757);}else{if(($13754$13919&&(($13756$13921=(t2$13906===1))&&((t1$13905[0]===":")&&(((t3$13907=$13733$13899[1])),((t3$13907 instanceof Array)&&(((t4$13908=t3$13907.length)),(t4$13908===2)))))))){(f$13956=t3$13907[0]);(body$13957=t3$13907[1]);return __lt____lt____colon__$11913(["send",f$13956,__lt____lt____colon__$11913(["data",body$13957],body$13957)],sumloc$13757);}else{if(($13756$13921&&((t1$13905[0]==="with")&&(((t3$13907=$13733$13899[1])),((t3$13907 instanceof Array)&&(((t4$13908=t3$13907.length)),((t4$13908===2)&&((target$13972=t3$13907[0]),(((t5$13909=t3$13907[1])),((_b$13973=t5$13909),(((t6$13910=$14985(["multi"])(t5$13909))),(t6$13910[0]&&(((t7$13911=t6$13910[1])),(((t8$13912=t7$13911.length)),(t8$13912>=0))))))))))))))){(body$13974=Array.prototype.slice.call(t7$13911,0));(inserted$14012=false);(result$14013=transform$11915(target$13972,function($14020$14023){var t0$14032;var $index$14128;var $length$14122;var temp$14116;var tr$14101;var res$14102;var args$14090;var x$14066;var f$14067;var a$14068;var b$14069;var t0$14046;var t1$14047;var t2$14048;var $14025$14041;var ph$14029;var expr$14030;(t0$14032=$14020$14023);(expr$14030=t0$14032);(ph$14029=t0$14032);($14025$14041=ph$14029);if((($14025$14041 instanceof Array)&&(((t0$14046=$14025$14041.length)),((t0$14046===2)&&(($14025$14041[0]==="symbol")&&($14025$14041[1]==="...")))))){(inserted$14012=true);return __lt____lt____colon__$11913(["multi"].concat(body$13974),_b$13973);}else{(x$14066=$14025$14041);if((x$14066.fromop&&(($14025$14041 instanceof Array)&&(((t0$14046=$14025$14041.length)),((t0$14046===3)&&(($14025$14041[0]==="send")&&((f$14067=$14025$14041[1]),(((t1$14047=$14025$14041[2])),((t1$14047 instanceof Array)&&(((t2$14048=t1$14047.length)),((t2$14048===3)&&(t1$14047[0]==="data")))))))))))){(a$14068=t1$14047[1]);(b$14069=t1$14047[2]);return ["send",this(f$14067),__lt____lt____colon__$11913(["data",this(a$14068),this(b$14069)],__plus____plus____colon__$11914(a$14068,b$14069))];}else{if((($14025$14041 instanceof Array)&&(((t0$14046=$14025$14041.length)),((t0$14046>=1)&&($14025$14041[0]==="data"))))){(args$14090=Array.prototype.slice.call($14025$14041,1));(tr$14101=this);(res$14102=["data"]);(temp$14116=args$14090);($length$14122=temp$14116.length);($index$14128=0);$14103:for(;($index$14128<$length$14122);($index$14128++)){var other$14165;var t0$14142;var t1$14143;var m$14137;(m$14137=temp$14116[$index$14128]);(t0$14142=m$14137);if(((t0$14142 instanceof Array)&&(((t1$14143=t0$14142.length)),((t1$14143===2)&&((t0$14142[0]==="symbol")&&(t0$14142[1]==="...")))))){(inserted$14012=true);(res$14102=res$14102.concat(body$13974));}else{(other$14165=m$14137);res$14102.push(__lt____lt____colon__$11913(tr$14101(other$14165),other$14165));}}return __lt____lt____colon__$11913(res$14102,expr$14030);}else{$14638($14025$14041);}}}}));if((!inserted$14012)){($14170$14180=target$13972);if((($14170$14180 instanceof Array)&&(((t0$14185=$14170$14180.length)),((t0$14185===1)&&($14170$14180[0]==="void"))))){return __lt____lt____colon__$11913(["data"].concat(body$13974),sumloc$13757);}else{$14170$14180;if(target$13972.fromop){return __lt____lt____colon__$11913(["send",target$13972,__lt____lt____colon__$11913(["data"].concat(body$13974),_b$13973)],sumloc$13757);}else{if((($14176$14189=($14170$14180 instanceof Array))&&(((t0$14185=$14170$14180.length)),((t0$14185===3)&&(($14170$14180[0]==="send")&&((f$14206=$14170$14180[1]),(((t1$14186=$14170$14180[2])),((orig_args$14207=t1$14186),((t1$14186 instanceof Array)&&(((t2$14187=t1$14186.length)),((t2$14187>=1)&&(t1$14186[0]==="data")))))))))))){(args$14208=Array.prototype.slice.call(t1$14186,1));return __lt____lt____colon__$11913(["send",f$14206,__lt____lt____colon__$11913(["data"].concat(args$14208).concat(body$13974),__plus____plus____colon__$11914(orig_args$14207,_b$13973))],sumloc$13757);}else{if(($14176$14189&&((t0$14185>=1)&&($14170$14180[0]==="data")))){(args$14230=Array.prototype.slice.call($14170$14180,1));return __lt____lt____colon__$11913(target$13972.concat(body$13974),sumloc$13757);}else{(other$14235=$14170$14180);return __lt____lt____colon__$11913(["send",target$13972,__lt____lt____colon__$11913(["data"].concat(body$13974),_b$13973)],sumloc$13757);}}}}}else{return __lt____lt____colon__$11913(result$14013,sumloc$13757);}}else{if(($13752$13917&&(((bridge$13738$13913=$13733$13899[0])),((((bridge$13738$13913 instanceof Array)&&(((t0$14247=bridge$13738$13913.length)),((t0$14247>=2)&&((bridge$13738$13913[0]==="[")&&((commas$14239=Array.prototype.slice.call(bridge$13738$13913,1,-1)),(bridge$13738$13913[(t0$14247-1)]==="]"))))))||((commas$14239=bridge$13738$13913),true))&&($13733$13899[1],commas$14239.every(function(x$14258){return $15032(x$14258,",");})))))){if((op$13759==="[")){(args$13725=args$13725.slice(1,-1));}(args$13725=(((f$14274=function($14278$14281){var other$14310;var t0$14297;var $14283$14292;var ph$14286;(ph$14286=$14278$14281);($14283$14292=ph$14286);if((($14283$14292 instanceof Array)&&(((t0$14297=$14283$14292.length)),((t0$14297===1)&&($14283$14292[0]==="void"))))){return false;}else{(other$14310=$14283$14292);return true;}})),args$13725.filter(f$14274)));(result$14264=((($14316$14324=args$13725)),function(){if((($14320$14331=($14316$14324 instanceof Array))&&(((t0$14329=$14316$14324.length)),(t0$14329===0)))){return ["multi"];}else{if(($14320$14331&&(t0$14329===1))){(x$14344=$14316$14324[0]);if(((!isNaN(sumloc$13757.start))&&(!isNaN(sumloc$13757.end)))){(x$14344["location"]=sumloc$13757);}return x$14344;}else{(other$14355=$14316$14324);return ["multi"].concat(args$13725);}}}()));return __lt____lt____colon__$11913(result$14264,sumloc$13757);}else{if(($13752$13917&&(((t1$13905=$13733$13899[0])),(($13754$13919=(t1$13905 instanceof Array))&&(((t2$13906=t1$13905.length)),((t2$13906>=2)&&((t1$13905[0]==="{")&&((commas$14360=Array.prototype.slice.call(t1$13905,1,-1)),((t1$13905[(t2$13906-1)]==="}")&&($13733$13899[1],commas$14360.every(function(x$14376){return $15032(x$14376,",");}))))))))))){(f$14381=function($14385$14388){var other$14417;var t0$14404;var $14390$14399;var ph$14393;(ph$14393=$14385$14388);($14390$14399=ph$14393);if((($14390$14399 instanceof Array)&&(((t0$14404=$14390$14399.length)),((t0$14404===1)&&($14390$14399[0]==="void"))))){return false;}else{(other$14417=$14390$14399);return true;}});return __lt____lt____colon__$11913(["data"].concat(args$13725.slice(1,-1).filter(f$14381)),sumloc$13757);}else{if(($13754$13919&&(($13756$13921=(t2$13906===1))&&(t1$13905[0]==="WHITE")))){$13733$13899[1];return __lt____lt____colon__$11913(["send"].concat(args$13725),sumloc$13757);}else{if($13756$13921){t1$13905[0];($13742$14426=$13733$13899[1]);(t0$14430=$13742$14426);if((($13746$14438=(t0$14430 instanceof Array))&&(((t1$14431=t0$14430.length)),(($13748$14440=(t1$14431===2))&&(((t2$14432=t0$14430[0])),((t2$14432 instanceof Array)&&(((t3$14433=t2$14432.length)),((t3$14433===1)&&((t2$14432[0]==="void")&&(((t4$14434=t0$14430[1])),((t4$14434 instanceof Array)&&(((t5$14435=t4$14434.length)),((t5$14435===1)&&(t4$14434[0]==="void")))))))))))))){return __lt____lt____colon__$11913(["symbol",op$13759],orig_ops$13758[0]);}else{if($13748$14440){(a$14476=t0$14430[0]);(b$14477=t0$14430[1]);(oloc$14486=orig_ops$13758[0].location);(abloc$14487=__plus____plus____colon__$11914(a$14476,b$14477));(oabloc$14488=__plus____plus____colon__$11914(orig_ops$13758[0],abloc$14487));(rval$14489=__lt____lt____colon__$11913(["send",__lt____lt____colon__$11913(["symbol",op$13759],oloc$14486),__lt____lt____colon__$11913(["data",a$14476,b$14477],abloc$14487)],__plus____plus____colon__$11914(oloc$14486,abloc$14487)));(rval$14489["fromop"]=true);return rval$14489;}else{$14638($13742$14426,"/home/olivier/git/earl-grey/src/parse.eg",17364,17369);}}}else{if($13752$13917){(op_strings$14509=$13733$13899[0]);(args$14510=$13733$13899[1]);(tokens$14516=$15254((((acc$14525=[])),(((temp$14531=$14890(orig_ops$13758))),((($length$14537=temp$14531.length)),((($index$14543=0)),function(){$14520:for(;($index$14543<$length$14537);($index$14543++)){var i$14562;var op$14563;var t0$14557;var t1$14558;var m$14552;(m$14552=temp$14531[$index$14543]);(t0$14557=m$14552);if(((t0$14557 instanceof Array)&&(((t1$14558=t0$14557.length)),(t1$14558===2)))){(i$14562=t0$14557[0]);(op$14563=t0$14557[1]);acc$14525.push([("token"+String((i$14562+1))),op$14563]);}else{$14638(m$14552,"/home/olivier/git/earl-grey/src/parse.eg",17880,17979);}}}()))),acc$14525)));(msg$14517="Mismatched/missing brackets/tokens");throw $14657(["syntax","mismatch"]).create(msg$14517,tokens$14516);}else{$14638($13733$13899);}}}}}}}}}else{(other$14586=$13666$13688);throw $14657(["should_never_happen"]).create("unknown node (B)",({"node":token$13677}));}}}}}});(parse$11929=function(tokens$14593){var next$14597;(next$14597=function(){return tokens$14593.shift();});return oparse$11927(next$14597,eg_order$11921.compare.bind(eg_order$11921),finalize$11928);});(exports["parse"]=parse$11929);(exports["oparse"]=oparse$11927);(exports["finalize"]=finalize$11928);(exports["DONE"]=DONE$11922);(exports["NONE"]=NONE$11923);(exports["LEFT"]=LEFT$11924);(exports["RIGHT"]=RIGHT$11925);(exports["BOTH"]=BOTH$11926);
