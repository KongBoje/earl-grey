var $13098=(function(type$13101){var f$13105;(f$13105=type$13101["::check"]);if((f$13105===(void 0))){return (function(value$13111){return (value$13111 instanceof type$13101);});}else{return (function(value$13115){return f$13105.call(type$13101,value$13115);});}});
var $13117=(function(dest$13120,values$13121){var k$13126;(k$13126=null);$13124:for(k$13126 in values$13121){if(values$13121.hasOwnProperty(k$13126)){(dest$13120[k$13126]=values$13121[k$13126]);}}return dest$13120;});
var $13134=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $13135=(function($13137$13140){var ph$13146;(ph$13146=$13137$13140);var $13142$13152;($13142$13152=ph$13146);var bridge$13144$13157;var x$13161;(bridge$13144$13157=$13142$13152);if((((typeof(bridge$13144$13157)==="string")&&((x$13161=bridge$13144$13157),true))||((typeof(bridge$13144$13157)==="number")&&((x$13161=bridge$13144$13157),true)))){return ["value",x$13161];}else{var other$13172;(other$13172=$13142$13152);return other$13172["::serialize_ast"]();}});
var $13174=(function(obj$13177){var results$13182;(results$13182=[]);var k$13187;(k$13187=null);$13181:for(k$13187 in obj$13177){if(Object.prototype.hasOwnProperty.call(obj$13177,k$13187)){results$13182.push([k$13187,$13134(obj$13177,k$13187)]);}}return results$13182;});
var $13443=(function(arr$13446){var results$13452;var l$13453;(results$13452=[]);(l$13453=arr$13446.length);var i$13462;(i$13462=0);$13451:for(;(i$13462<l$13453);(i$13462++)){results$13452.push([i$13462,$13134(arr$13446,i$13462)]);}return results$13452;});
var $13210=(function(){var $13211$13217;($13211$13217=(function(tags$13222){var it$0$13225;(it$0$13225=(function(){if((!$13098($13211$13217)(this))){return Object.create($13211$13217.prototype);}else{return this;}})());(it$0$13225["tags"]=tags$13222);return it$0$13225;}));($13211$13217.prototype["create"]=(function(){var it$0$13245;var self$13246;(it$0$13245=this);(self$13246=this);var $13243$13255;($13243$13255=arguments);var t0$13260;var message$13264;var args$13265;(t0$13260=$13243$13255.length);if((t0$13260>=0)){(message$13264=(function(){if((0>=t0$13260)){return "";}else{return $13243$13255[0];}})());(args$13265=Array.prototype.slice.call($13243$13255,1));var e$13278;(e$13278=Error(message$13264));(e$13278["::tags"]=it$0$13245.tags);(e$13278["args"]=args$13265);var temp$13294;(temp$13294=$13443(args$13265));var $length$13300;($length$13300=temp$13294.length);var $index$13306;($index$13306=0);$13279:for(;($index$13306<$length$13300);($index$13306++)){var m$13315;(m$13315=temp$13294[$index$13306]);var t0$13320;var t1$13321;var i$13325;var arg$13326;(t0$13320=m$13315);if(((t0$13320 instanceof Array)&&(((t1$13321=t0$13320.length)),(t1$13321===2)))){(i$13325=t0$13320[0]);(arg$13326=t0$13320[1]);(e$13278[i$13325]=arg$13326);}else{$13191(m$13315);}}(e$13278["length"]=args$13265.length);(e$13278["name"]=["E"].concat(it$0$13245.tags).join("."));return e$13278;}else{$13191($13243$13255);}}));($13211$13217.prototype["::check"]=(function(e$13356){var it$0$13360;var self$13361;(it$0$13360=this);(self$13361=this);var tags$13371;if(((!e$13356)||(!$13098(Error)(e$13356)))){return false;}(tags$13371=(e$13356["::tags"]||[]));var temp$13382;(temp$13382=it$0$13360.tags);var $length$13388;($length$13388=temp$13382.length);var $index$13394;($index$13394=0);$13372:for(;($index$13394<$length$13388);($index$13394++)){var m$13403;(m$13403=temp$13382[$index$13394]);var tag$13411;(tag$13411=m$13403);if((tags$13371.indexOf(tag$13411)===-1)){return false;}else{false;}}return true;}));($13211$13217.prototype["::deconstruct"]=(function(e$13420){var it$0$13424;var self$13425;(it$0$13424=this);(self$13425=this);return e$13420.args;}));$13117($13211$13217,$13117((function(){var accum$13436;(accum$13436=({}));(accum$13436["::name"]="$13211");return accum$13436;})(),(function(){var accum$13440;(accum$13440=({}));(accum$13440["::egclass"]=true);return accum$13440;})()));return $13211$13217;})();
var $13191=(function(value$13194,url$13195,start$13196,end$13197){var err$13201;(err$13201=$13210(["match"]).create("Could not find a match for value",({"value":value$13194})));if(url$13195){(err$13201["location"]=["location",url$13195,start$13196,end$13197]);}throw err$13201;});
var send$12743;var __array_methods$12744;var __re_methods$12745;(send$12743=(function(obj$12758,$12755$12759){var ph$12765;var msg$12766;var t0$12768;(t0$12768=$12755$12759);(msg$12766=t0$12768);(ph$12765=t0$12768);var $12761$12777;($12761$12777=ph$12765);var bridge$12763$12782;(bridge$12763$12782=$12761$12777);if(((typeof(bridge$12763$12782)==="string")||(typeof(bridge$12763$12782)==="number"))){return obj$12758[msg$12766];}else{var other$12794;(other$12794=$12761$12777);return obj$12758["::send"](msg$12766);}}));(Array[":::project"]=(function($12800$12803){var ph$12808;var value$12809;var t0$12811;(t0$12811=$12800$12803);(value$12809=t0$12811);(ph$12808=t0$12811);var $12805$12820;($12805$12820=ph$12808);if($13098(Array)($12805$12820)){return [true,value$12809];}else{$12805$12820;return [true,[value$12809]];}}));(__array_methods$12744=$13117((function(){var accum$12841;(accum$12841=({}));(accum$12841["::check"]=(function(value$12846){if((value$12846 instanceof Array)){var i$12852;(i$12852=0);$12849:for(;(i$12852<this.length);(i$12852++)){if(($13134(this,i$12852)!==$13134(value$12846,i$12852))){return false;}}return true;}else{return false;}}));return accum$12841;})(),$13117((function(){var accum$12861;(accum$12861=({}));(accum$12861["::clone"]=(function(){return $13117(this.slice(0),this);}));return accum$12861;})(),$13117((function(){var accum$12868;(accum$12868=({}));(accum$12868[":::project"]=(function(value$12873){if((value$12873 instanceof Array)){var i$12879;(i$12879=0);$12876:for(;(i$12879<this.length);(i$12879++)){if(($13134(this,i$12879)!==$13134(value$12873,i$12879))){return [true,this.concat([value$12873])];}}return [true,value$12873];}else{return [true,this.concat([value$12873])];}}));return accum$12868;})(),(function(){var accum$12888;(accum$12888=({}));(accum$12888["::serialize_ast"]=(function(){return ["array"].concat(this.map($13135));}));return accum$12888;})()))));var temp$12898;(temp$12898=$13174(__array_methods$12744));var $length$12904;($length$12904=temp$12898.length);var $index$12910;($index$12910=0);$12746:for(;($index$12910<$length$12904);($index$12910++)){var m$12919;(m$12919=temp$12898[$index$12910]);var t0$12924;var t1$12925;var k$12929;var v$12930;(t0$12924=m$12919);if(((t0$12924 instanceof Array)&&(((t1$12925=t0$12924.length)),(t1$12925===2)))){(k$12929=t0$12924[0]);(v$12930=t0$12924[1]);if((!$13134(Array.prototype,k$12929))){Object.defineProperty(Array.prototype,k$12929,({"enumerable":false,"value":v$12930}));}}else{$13191(m$12919);}}(__re_methods$12745=$13117((function(){var accum$12950;(accum$12950=({}));(accum$12950["::check"]=(function($12954$12957){var ph$12962;(ph$12962=$12954$12957);var $12959$12968;($12959$12968=ph$12962);var value$12976;if((typeof($12959$12968)==="string")){(value$12976=$12959$12968);if(value$12976.match(this)){return true;}else{return false;}}else{var other$12981;(other$12981=$12959$12968);return false;}}));return accum$12950;})(),(function(){var accum$12984;(accum$12984=({}));(accum$12984[":::project"]=(function($12988$12991){var ph$12996;(ph$12996=$12988$12991);var $12993$13002;($12993$13002=ph$12996);var value$13010;if((typeof($12993$13002)==="string")){(value$13010=$12993$13002);var $13013$13018;($13013$13018=value$13010.match(this));var m$13026;if(($13013$13018===null)){(m$13026=$13013$13018);return [false,null];}else{var m$13031;(m$13031=$13013$13018);return [true,m$13031];}}else{var other$13035;(other$13035=$12993$13002);return [false,null];}}));return accum$12984;})()));var temp$13041;(temp$13041=$13174(__re_methods$12745));var $length$13047;($length$13047=temp$13041.length);var $index$13053;($index$13053=0);$12749:for(;($index$13053<$length$13047);($index$13053++)){var m$13062;(m$13062=temp$13041[$index$13053]);var t0$13067;var t1$13068;var k$13072;var v$13073;(t0$13067=m$13062);if(((t0$13067 instanceof Array)&&(((t1$13068=t0$13067.length)),(t1$13068===2)))){(k$13072=t0$13067[0]);(v$13073=t0$13067[1]);if((!$13134(RegExp.prototype,k$13072))){Object.defineProperty(RegExp.prototype,k$13072,({"enumerable":false,"value":v$13073}));}}else{$13191(m$13062);}}if((!Function.prototype["::send"])){Object.defineProperty(Function.prototype,"::send",$13117(({"enumerable":false}),(function(){var accum$13091;(accum$13091=({}));(accum$13091["value"]=(function(args$13096){return this.apply(this,args$13096);}));return accum$13091;})()));}
var $16134=(function(arrays$16137){var results$16141;(results$16141=[]);var temp$16151;(temp$16151=arrays$16137);var $length$16157;($length$16157=temp$16151.length);var $index$16163;($index$16163=0);$16142:for(;($index$16163<$length$16157);($index$16163++)){var m$16172;(m$16172=temp$16151[$index$16163]);var a$16180;(a$16180=m$16172);(results$16141=results$16141.concat(a$16180));}return results$16141;});
var $16186=(function(type$16189){return (function(value$16193){var f$16197;(f$16197=type$16189[":::project"]);if((f$16197===(void 0))){(f$16197=type$16189["::project"]);if((f$16197===(void 0))){return [true,type$16189(value$16193)];}else{var rval$16210;(rval$16210=false);try{(rval$16210=[true,f$16197(value$16193)]);}catch(excv$16221){var e$16227;(e$16227=excv$16221);(rval$16210=[false,null]);}return rval$16210;}}else{return f$16197.call(type$16189,value$16193);}});});
var $16405=Object.keys;
var $16406=(function($16408$16411,key$16412){var ph$16420;(ph$16420=$16408$16411);var $16414$16426;($16414$16426=ph$16420);var bridge$16416$16431;(bridge$16416$16431=$16414$16426);if(((bridge$16416$16431===null)||(bridge$16416$16431===(void 0)))){return false;}else{var x$16443;if((typeof($16414$16426)==="string")){(x$16443=$16414$16426);return (key$16412 in String.prototype);}else{var x$16448;if((typeof($16414$16426)==="number")){(x$16448=$16414$16426);return (key$16412 in Number.prototype);}else{var x$16453;(x$16453=$16414$16426);return (key$16412 in x$16453);}}}});
var $16233=(function($16235$16238,b$16239){var ph$16253;var a$16254;var t0$16256;(t0$16256=$16235$16238);(a$16254=t0$16256);(ph$16253=t0$16256);var $16241$16265;($16241$16265=ph$16253);var bridge$16244$16270;if(($16241$16265===b$16239)){return true;}else{(bridge$16244$16270=$16241$16265);if(((function(){var bridge$16245$16284;(bridge$16245$16284=bridge$16244$16270);return ((function(){var bridge$16246$16291;(bridge$16246$16291=bridge$16245$16284);return ((function(){var bridge$16247$16298;(bridge$16247$16298=bridge$16246$16291);return ((function(){var bridge$16248$16305;(bridge$16248$16305=bridge$16247$16298);return ((typeof(bridge$16248$16305)==="number")||(typeof(bridge$16248$16305)==="string"));})()||(bridge$16247$16298===null));})()||(bridge$16246$16291===(void 0)));})()||(bridge$16245$16284===true));})()||(bridge$16244$16270===false))){return false;}else{if($13098(Array)($16241$16265)){if(((!$13098(Array)(b$16239))||(a$16254.length!==b$16239.length))){return false;}var i$16321;(i$16321=0);$16317:for(;(i$16321<a$16254.length);(i$16321++)){if((!$16233(a$16254[i$16321],b$16239[i$16321]))){return false;}}return true;}else{$16241$16265;if((((Object.getPrototypeOf(a$16254)===Object.prototype)&&$13098(Object)(b$16239))&&(Object.getPrototypeOf(b$16239)===Object.prototype))){var ka$16335;(ka$16335=$16405(a$16254));if((!$16233(ka$16335.sort(),$16405(b$16239).sort()))){return false;}var temp$16346;(temp$16346=ka$16335);var $length$16352;($length$16352=temp$16346.length);var $index$16358;($index$16358=0);$16336:for(;($index$16358<$length$16352);($index$16358++)){var m$16367;(m$16367=temp$16346[$index$16358]);var k$16375;(k$16375=m$16367);if((!$16233(a$16254[k$16375],b$16239[k$16375]))){return false;}}return true;}else{if($16406($16241$16265,"::serialize")){$16241$16265["::serialize"];var $16382$16387;($16382$16387=b$16239);if($16406($16382$16387,"::serialize")){$16382$16387["::serialize"];return $16233(a$16254["::serialize"](),b$16239["::serialize"]());}else{var otherwise$16399;(otherwise$16399=$16382$16387);return false;}}else{var otherwise$16403;(otherwise$16403=$16241$16265);return false;}}}}}});var accum$14063;var accum$14067;var accum$14715;var accum$14719;var accum$14945;var accum$14949;var accum$14953;var accum$14957;var accum$14961;var accum$14965;var accum$14977;var accum$14981;var accum$14985;var accum$14989;var accum$14993;var eg_groups$14730;var eg_prio$14731;var $13471$13495;var __lt____lt____colon__$13496;var __plus____plus____colon__$13497;var $13472$13498;var Body$13499;var transform$13500;var OperatorGroups$13501;var parse_op_description$13502;var SimplePriority$13503;var MAX$13504;var eg_order$13505;var DONE$13506;var NONE$13507;var LEFT$13508;var RIGHT$13509;var BOTH$13510;var oparse$13511;var finalize$13512;var parse$13513;($13471$13495=require("./location"));(__lt____lt____colon__$13496=$13471$13495["<<:"]);(__plus____plus____colon__$13497=$13471$13495["++:"]);($13472$13498=require("./util"));(Body$13499=$13472$13498.Body);(transform$13500=(function(expr$13533,cb$13534){var rval$13554;var tr$13539;var result$13540;(tr$13539=(function(x$13545){return transform$13500(x$13545,cb$13534);}));(result$13540=(((rval$13554=false)),((function(){try{(rval$13554=cb$13534.call(tr$13539,expr$13533));}catch(excv$13565){var name$13617;var args$13618;var v$13612;var s$13607;var $13581$13593;var $13582$13594;var $13583$13595;var t0$13591;var $13576$13586;var e$13571;(e$13571=excv$13565);(rval$13554=((($13576$13586=expr$13533)),(function(){if((($13581$13593=($13576$13586 instanceof Array))&&(((t0$13591=$13576$13586.length)),((t0$13591===1)&&($13576$13586[0]==="void"))))){return ["void"];}else{if(($13581$13593&&(($13583$13595=(t0$13591===2))&&($13576$13586[0]==="symbol")))){(s$13607=$13576$13586[1]);return expr$13533;}else{if(($13583$13595&&($13576$13586[0]==="value"))){(v$13612=$13576$13586[1]);return expr$13533;}else{if(($13581$13593&&(t0$13591>=1))){(name$13617=$13576$13586[0]);(args$13618=Array.prototype.slice.call($13576$13586,1));return [name$13617].concat(args$13618.map(tr$13539));}else{$13191($13576$13586);}}}}})()));}})(),rval$13554)));return __lt____lt____colon__$13496(result$13540,expr$13533);}));(OperatorGroups$13501=(function(groups$13630){var $index$13677;var $length$13671;var temp$13665;var acc$13659;var $index$13737;var $length$13731;var temp$13725;var acc$13719;var $index$13842;var $length$13836;var temp$13830;var acc$13824;var itg$13645;var it$0$13633;(it$0$13633=(function(){if((!$13098(OperatorGroups$13501)(this))){return Object.create(OperatorGroups$13501.prototype);}else{return this;}})());(itg$13645=$13174(groups$13630));(it$0$13633["gnames"]=(((acc$13659=[])),(((temp$13665=itg$13645)),((($length$13671=temp$13665.length)),((($index$13677=0)),(function(){$13654:for(;($index$13677<$length$13671);($index$13677++)){var name$13696;var t0$13691;var t1$13692;var m$13686;(m$13686=temp$13665[$index$13677]);(t0$13691=m$13686);if(((t0$13691 instanceof Array)&&(((t1$13692=t0$13691.length)),(t1$13692===2)))){(name$13696=t0$13691[0]);t0$13691[1];acc$13659.push(name$13696);}else{$13191(m$13686,"/home/olivier/git/earl-grey/src/parse.eg",565,591);}}})()))),acc$13659));(it$0$13633["groups"]=(((acc$13719=[])),(((temp$13725=itg$13645)),((($length$13731=temp$13725.length)),((($index$13737=0)),(function(){$13714:for(;($index$13737<$length$13731);($index$13737++)){var $index$13793;var $length$13787;var temp$13781;var acc$13775;var name$13756;var descrs$13757;var t0$13751;var t1$13752;var m$13746;(m$13746=temp$13725[$index$13737]);(t0$13751=m$13746);if(((t0$13751 instanceof Array)&&(((t1$13752=t0$13751.length)),(t1$13752===2)))){(name$13756=t0$13751[0]);(descrs$13757=t0$13751[1]);acc$13719.push($16134((((acc$13775=[])),(((temp$13781=descrs$13757)),((($length$13787=temp$13781.length)),((($index$13793=0)),(function(){$13770:for(;($index$13793<$length$13787);($index$13793++)){var descr$13810;var m$13802;(m$13802=temp$13781[$index$13793]);(descr$13810=m$13802);acc$13775.push(parse_op_description$13502(descr$13810));}})()))),acc$13775)));}else{$13191(m$13746,"/home/olivier/git/earl-grey/src/parse.eg",608,705);}}})()))),acc$13719));(it$0$13633["fns"]=[]);(it$0$13633["to_gid"]=({"IFX":({"wide":({}),"short":({})}),"PFX":({"wide":({}),"short":({})}),"SFX":({"wide":({}),"short":({})})}));(acc$13824=[]);(temp$13830=$13443(it$0$13633.groups));($length$13836=temp$13830.length);($index$13842=0);$13646:for(;($index$13842<$length$13836);($index$13842++)){var $index$13899;var $length$13893;var temp$13887;var acc$13881;var i$13861;var group$13862;var t0$13856;var t1$13857;var m$13851;(m$13851=temp$13830[$index$13842]);(t0$13856=m$13851);if(((t0$13856 instanceof Array)&&(((t1$13857=t0$13856.length)),(t1$13857===2)))){(i$13861=t0$13856[0]);(group$13862=t0$13856[1]);acc$13824.push((((acc$13881=[])),(((temp$13887=group$13862)),((($length$13893=temp$13887.length)),((($index$13899=0)),(function(){$13875:for(;($index$13899<$length$13893);($index$13899++)){var f$13939;var fixity$13918;var width$13919;var name$13920;var t0$13913;var t1$13914;var m$13908;(m$13908=temp$13887[$index$13899]);(t0$13913=m$13908);if(((t0$13913 instanceof Array)&&(((t1$13914=t0$13913.length)),(t1$13914===3)))){(fixity$13918=t0$13913[0]);(width$13919=t0$13913[1]);(name$13920=t0$13913[2]);acc$13881.push((($13134($13134(it$0$13633.to_gid,fixity$13918),width$13919)[name$13920]=i$13861)));}else{(f$13939=m$13908);acc$13881.push(it$0$13633.fns.push([f$13939,i$13861]));}}})()))),acc$13881));}else{$13191(m$13851,"/home/olivier/git/earl-grey/src/parse.eg",870,1071);}}acc$13824;return it$0$13633;}));(OperatorGroups$13501.prototype["get_name"]=(function(o$13949){var it$0$13953;var self$13954;(it$0$13953=this);(self$13954=this);return $13134(it$0$13953.gnames,it$0$13953.get(o$13949));}));(OperatorGroups$13501.prototype["get"]=(function($13965$13968){var t0$13986;var t1$13987;var $index$14025;var $length$14019;var temp$14013;var attempt$14002;var o$13981;var fixity$13982;var width$13983;var name$13984;var it$0$13972;var self$13973;(it$0$13972=this);(self$13973=this);(t0$13986=$13965$13968);(o$13981=t0$13986);if(((t0$13986 instanceof Array)&&(((t1$13987=t0$13986.length)),(t1$13987===3)))){(fixity$13982=t0$13986[0]);(width$13983=t0$13986[1]);(name$13984=t0$13986[2]);}else{$13191($13965$13968);}(attempt$14002=$13134($13134($13134(it$0$13972.to_gid,fixity$13982),width$13983),name$13984));if((attempt$14002===(void 0))){(temp$14013=it$0$13972.fns);($length$14019=temp$14013.length);($index$14025=0);$14007:for(;($index$14025<$length$14019);($index$14025++)){var f$14044;var i$14045;var t0$14039;var t1$14040;var m$14034;(m$14034=temp$14013[$index$14025]);(t0$14039=m$14034);if(((t0$14039 instanceof Array)&&(((t1$14040=t0$14039.length)),(t1$14040===2)))){(f$14044=t0$14039[0]);(i$14045=t0$14039[1]);if(f$14044(o$13981)){return i$14045;}}else{$13191(m$14034,"/home/olivier/git/earl-grey/src/parse.eg",1250,1333);}}throw $13210(["syntax","unknown_operator"]).create(("Unknown operator: "+[true,String(o$13981)][1]),({"operator":o$13981}));}else{return attempt$14002;}}));$13117(OperatorGroups$13501,$13117(((accum$14063=({})),((accum$14063["::name"]="OperatorGroups"),accum$14063)),((accum$14067=({})),((accum$14067["::egclass"]=true),accum$14067))));OperatorGroups$13501;(parse_op_description$13502=(function($14073$14076){var otherwise$14166;var $14146$14155;var $14142$14149;var otherwise$14200;var $14180$14189;var $14176$14183;var t0$14136;var t1$14137;var fixity$14133;var short$14134;var other$14204;var x$14110;var w1$14111;var op$14112;var w2$14113;var y$14114;var f$14105;var rx$14099;var t0$14093;var t1$14094;var t2$14095;var $14078$14088;var ph$14082;(ph$14082=$14073$14076);($14078$14088=ph$14082);(rx$14099=RegExp("(?:^((?:X?))((?:[ _]?))((?:[^ _Y]*))((?:[ _]?))((?:Y?))$)",""));if($13098(Function)($14078$14088)){(f$14105=$14078$14088);return f$14105;}else{(t0$14093=$16186(rx$14099)($14078$14088));if((t0$14093[0]&&(((t1$14094=t0$14093[1])),(((t2$14095=t1$14094.length)),(t2$14095===6))))){t1$14094[0];(x$14110=t1$14094[1]);(w1$14111=t1$14094[2]);(op$14112=t1$14094[3]);(w2$14113=t1$14094[4]);(y$14114=t1$14094[5]);(t0$14136=((($14142$14149=null)),($14142$14149,(function(){if((x$14110==="")){return ["PFX",(w2$14113==="")];}else{if((y$14114==="")){return ["SFX",(w1$14111==="")];}else{(otherwise$14166=$14142$14149);return ["IFX",((w1$14111==="")||(w2$14113===""))];}}})())));if(((t0$14136 instanceof Array)&&(((t1$14137=t0$14136.length)),(t1$14137===2)))){(fixity$14133=t0$14136[0]);(short$14134=t0$14136[1]);}else{$13191(((($14176$14183=null)),($14176$14183,(function(){if((x$14110==="")){return ["PFX",(w2$14113==="")];}else{if((y$14114==="")){return ["SFX",(w1$14111==="")];}else{(otherwise$14200=$14176$14183);return ["IFX",((w1$14111==="")||(w2$14113===""))];}}})())),"/home/olivier/git/earl-grey/src/parse.eg",1714,1922);}if(((w1$14111==="_")||(w2$14113==="_"))){return [[fixity$14133,"short",op$14112],[fixity$14133,"wide",op$14112]];}else{return [[fixity$14133,(function(){if(short$14134){return "short";}else{return "wide";}})(),op$14112]];}}else{(other$14204=$14078$14088);throw $13210(["invalid_op_description"]).create(("Invalid operator description: "+other$14204));}}}));(SimplePriority$13503=(function(groups$14211,priorities$14212){var $index$14262;var $length$14256;var temp$14250;var acc$14244;var _i$14226;var tracks$14227;var it$0$14215;(it$0$14215=(function(){if((!$13098(SimplePriority$13503)(this))){return Object.create(SimplePriority$13503.prototype);}else{return this;}})());(it$0$14215["groups"]=groups$14211);(_i$14226=0);(tracks$14227=({}));(it$0$14215["prio"]=(((acc$14244=[])),(((temp$14250=groups$14211.gnames)),((($length$14256=temp$14250.length)),((($index$14262=0)),(function(){$14239:for(;($index$14262<$length$14256);($index$14262++)){var t0$14292;var t1$14293;var t2$14294;var t3$14295;var t4$14296;var t5$14297;var t6$14298;var t7$14299;var $index$14374;var $length$14368;var temp$14362;var acc$14356;var $index$14496;var $length$14490;var temp$14484;var acc$14478;var t0$14345;var t1$14346;var ltracks$14285;var lp$14286;var rtracks$14287;var rp$14288;var lt$14289;var rt$14290;var name$14279;var m$14271;(m$14271=temp$14250[$index$14262]);(name$14279=m$14271);acc$14244.push(((((t0$14292=$13134(priorities$14212,name$14279))),(function(){if(((t0$14292 instanceof Array)&&(((t1$14293=t0$14292.length)),((t1$14293===2)&&(((t2$14294=t0$14292[0])),((t2$14294 instanceof Array)&&(((t3$14295=t2$14294.length)),((t3$14295===2)&&(((t4$14296=$16186(Array)(t2$14294[0]))),(t4$14296[0]&&((ltracks$14285=t4$14296[1]),((lp$14286=t2$14294[1]),(((t5$14297=t0$14292[1])),((t5$14297 instanceof Array)&&(((t6$14298=t5$14297.length)),((t6$14298===2)&&(((t7$14299=$16186(Array)(t5$14297[0]))),t7$14299[0]))))))))))))))))){(rtracks$14287=t7$14299[1]);(rp$14288=t5$14297[1]);}else{return $13191($13134(priorities$14212,name$14279),"/home/olivier/git/earl-grey/src/parse.eg",3721,3737);}})()),(((t0$14345=(((acc$14356=[])),(((temp$14362=[ltracks$14285,rtracks$14287])),((($length$14368=temp$14362.length)),((($index$14374=0)),(function(){$14351:for(;($index$14374<$length$14368);($index$14374++)){var $index$14420;var $length$14414;var temp$14408;var rval$14396;var tr$14391;var m$14383;(m$14383=temp$14362[$index$14374]);(tr$14391=m$14383);acc$14356.push((((rval$14396=0)),(((temp$14408=tr$14391)),((($length$14414=temp$14408.length)),((($index$14420=0)),(function(){$14397:for(;($index$14420<$length$14414);($index$14420++)){var t$14459;var t$14445;var m$14429;(m$14429=temp$14408[$index$14420]);if((m$14429==="all")){(rval$14396=(Math.pow(2,31)-1));}else{(t$14445=m$14429);if((!$13134(tracks$14227,t$14445))){(rval$14396=(rval$14396|Math.pow(2,_i$14226)));(tracks$14227[t$14445]=(_i$14226++));}else{(t$14459=m$14429);(rval$14396=(rval$14396|Math.pow(2,$13134(tracks$14227,t$14459))));}}}})()))),rval$14396));}})()))),acc$14356))),(function(){if(((t0$14345 instanceof Array)&&(((t1$14346=t0$14345.length)),(t1$14346===2)))){(lt$14289=t0$14345[0]);(rt$14290=t0$14345[1]);}else{return $13191((((acc$14478=[])),(((temp$14484=[ltracks$14285,rtracks$14287])),((($length$14490=temp$14484.length)),((($index$14496=0)),(function(){$14473:for(;($index$14496<$length$14490);($index$14496++)){var $index$14542;var $length$14536;var temp$14530;var rval$14518;var tr$14513;var m$14505;(m$14505=temp$14484[$index$14496]);(tr$14513=m$14505);acc$14478.push((((rval$14518=0)),(((temp$14530=tr$14513)),((($length$14536=temp$14530.length)),((($index$14542=0)),(function(){$14519:for(;($index$14542<$length$14536);($index$14542++)){var t$14581;var t$14567;var m$14551;(m$14551=temp$14530[$index$14542]);if((m$14551==="all")){(rval$14518=(Math.pow(2,31)-1));}else{(t$14567=m$14551);if((!$13134(tracks$14227,t$14567))){(rval$14518=(rval$14518|Math.pow(2,_i$14226)));(tracks$14227[t$14567]=(_i$14226++));}else{(t$14581=m$14551);(rval$14518=(rval$14518|Math.pow(2,$13134(tracks$14227,t$14581))));}}}})()))),rval$14518));}})()))),acc$14478),"/home/olivier/git/earl-grey/src/parse.eg",3758,4078);}})()),[[lt$14289,lp$14286],[rt$14290,rp$14288]]));}})()))),acc$14244));return it$0$14215;}));(SimplePriority$13503.prototype["compare"]=(function(op1$14593,op2$14594){var t0$14631;var t1$14632;var t2$14633;var t3$14634;var t0$14659;var t1$14660;var t2$14661;var t3$14662;var $14617$14693;var $14612$14687;var i1$14618;var i2$14619;var code1$14620;var ord1$14621;var code2$14622;var ord2$14623;var it$0$14598;var self$14599;(it$0$14598=this);(self$14599=this);(i1$14618=it$0$14598.groups.get(op1$14593));(i2$14619=it$0$14598.groups.get(op2$14594));(t0$14631=$13134(it$0$14598.prio,i1$14618));if(((t0$14631 instanceof Array)&&(((t1$14632=t0$14631.length)),((t1$14632===2)&&(t0$14631[0],(((t2$14633=t0$14631[1])),((t2$14633 instanceof Array)&&(((t3$14634=t2$14633.length)),(t3$14634===2))))))))){(code1$14620=t2$14633[0]);(ord1$14621=t2$14633[1]);}else{$13191($13134(it$0$14598.prio,i1$14618),"/home/olivier/git/earl-grey/src/parse.eg",4205,4215);}(t0$14659=$13134(it$0$14598.prio,i2$14619));if(((t0$14659 instanceof Array)&&(((t1$14660=t0$14659.length)),((t1$14660===2)&&(((t2$14661=t0$14659[0])),((t2$14661 instanceof Array)&&(((t3$14662=t2$14661.length)),(t3$14662===2)))))))){(code2$14622=t2$14661[0]);(ord2$14623=t2$14661[1]);t0$14659[1];}else{$13191($13134(it$0$14598.prio,i2$14619),"/home/olivier/git/earl-grey/src/parse.eg",4242,4252);}($14612$14687=null);$14612$14687;if(((code1$14620&code2$14622)===0)){return NONE$13507;}else{if((ord1$14621>ord2$14623)){return LEFT$13508;}else{if((ord1$14621<ord2$14623)){return RIGHT$13509;}else{if((ord1$14621===ord2$14623)){return BOTH$13510;}else{$13191($14612$14687);}}}}}));$13117(SimplePriority$13503,$13117(((accum$14715=({})),((accum$14715["::name"]="SimplePriority"),accum$14715)),((accum$14719=({})),((accum$14719["::egclass"]=true),accum$14719))));SimplePriority$13503;(MAX$13504=(1/0));(eg_order$13505=(((eg_groups$14730=OperatorGroups$13501($13117(({"sh_ifx":[(function($14741$14744){var t0$14760;var $14746$14755;var ph$14749;(ph$14749=$14741$14744);($14746$14755=ph$14749);if((($14746$14755 instanceof Array)&&(((t0$14760=$14746$14755.length)),((t0$14760===3)&&(($14746$14755[0]==="IFX")&&($14746$14755[1]==="short")))))){$14746$14755[2];return true;}else{$14746$14755;return false;}})],"sh_pfx":[(function($14775$14778){var t0$14794;var $14780$14789;var ph$14783;(ph$14783=$14775$14778);($14780$14789=ph$14783);if((($14780$14789 instanceof Array)&&(((t0$14794=$14780$14789.length)),((t0$14794===3)&&(($14780$14789[0]==="PFX")&&($14780$14789[1]==="short")))))){$14780$14789[2];return true;}else{$14780$14789;return false;}})],"sh_sfx":[(function($14809$14812){var t0$14828;var $14814$14823;var ph$14817;(ph$14817=$14809$14812);($14814$14823=ph$14817);if((($14814$14823 instanceof Array)&&(((t0$14828=$14814$14823.length)),((t0$14828===3)&&(($14814$14823[0]==="SFX")&&($14814$14823[1]==="short")))))){$14814$14823[2];return true;}else{$14814$14823;return false;}})],"wi_ifx":[(function($14843$14846){var t0$14862;var $14848$14857;var ph$14851;(ph$14851=$14843$14846);($14848$14857=ph$14851);if((($14848$14857 instanceof Array)&&(((t0$14862=$14848$14857.length)),((t0$14862===3)&&(($14848$14857[0]==="IFX")&&($14848$14857[1]==="wide")))))){$14848$14857[2];return true;}else{$14848$14857;return false;}})],"wi_pfx":[(function($14877$14880){var t0$14896;var $14882$14891;var ph$14885;(ph$14885=$14877$14880);($14882$14891=ph$14885);if((($14882$14891 instanceof Array)&&(((t0$14896=$14882$14891.length)),((t0$14896===3)&&(($14882$14891[0]==="PFX")&&($14882$14891[1]==="wide")))))){$14882$14891[2];return true;}else{$14882$14891;return false;}})],"wi_sfx":[(function($14911$14914){var t0$14930;var $14916$14925;var ph$14919;(ph$14919=$14911$14914);($14916$14925=ph$14919);if((($14916$14925 instanceof Array)&&(((t0$14930=$14916$14925.length)),((t0$14930===3)&&(($14916$14925[0]==="SFX")&&($14916$14925[1]==="wide")))))){$14916$14925[2];return true;}else{$14916$14925;return false;}})],"comma":["X_,_Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"]}),$13117(((accum$14945=({})),((accum$14945["withp"]=["with Y"]),accum$14945)),$13117(((accum$14949=({})),((accum$14949["with"]=["X with Y"]),accum$14949)),$13117(({"lowprio":["X each Y","X each? Y","X where Y","X !! Y","X -> Y","X => Y","X = Y","X := Y","X += Y","X -= Y","X *= Y","X /= Y","X <<= Y","X >>= Y","X >>>= Y","X ++= Y","X ?= Y","X or= Y","X and= Y","X each= Y","X % Y"]}),$13117(((accum$14953=({})),((accum$14953["when"]=["X when Y"]),accum$14953)),$13117(((accum$14957=({})),((accum$14957["or"]=["X or Y"]),accum$14957)),$13117(((accum$14961=({})),((accum$14961["and"]=["X and Y"]),accum$14961)),$13117(((accum$14965=({})),((accum$14965["not"]=["not Y"]),accum$14965)),({"cmp":["X == Y","X != Y","X >= Y","X <= Y","X > Y","X < Y"],"binxor":["X ^. Y"],"binor":["X |. Y"],"binand":["X &. Y"],"shift":["X << Y","X >> Y","X >>> Y"],"add":["X + Y","X - Y"],"mul":["X * Y","X / Y","X // Y","X mod Y"],"exp":["X ** Y"],"sjuxt":["XWHITEY"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"pfx":["._Y","#_Y","@_Y"],"when2":["when Y"],"pp":["<> Y"],"pipe":["X |> Y"]})))))))))))),((eg_prio$14731=$13117(({"comma":[["all",1],["all",1]],"obrack":[["all",MAX$13504],["all",1]],"cbrack":[["all",1],["all",MAX$13504]]}),$13117(((accum$14977=({})),((accum$14977["with"]=[["all",1999],["all",10]]),accum$14977)),$13117(({"lowprio":[["all",11],["all",10]]}),$13117(((accum$14981=({})),((accum$14981["when"]=[["all",100],["all",101]]),accum$14981)),$13117(((accum$14985=({})),((accum$14985["or"]=[["all",110],["all",111]]),accum$14985)),$13117(((accum$14989=({})),((accum$14989["and"]=[["all",120],["all",121]]),accum$14989)),$13117(((accum$14993=({})),((accum$14993["not"]=[["all",MAX$13504],["all",131]]),accum$14993)),({"cmp":[["all",200],["all",201]],"binxor":[["all",400],["all",401]],"binor":[["all",410],["all",411]],"binand":[["all",420],["all",421]],"shift":[["arith",500],["arith",501]],"add":[["arith",550],["arith",551]],"mul":[["arith",560],["arith",561]],"exp":[["arith",571],["arith",570]],"wjuxt":[["wjuxt",13],["all",12]],"colon":[["all",12],["all",10]],"sjuxt":[["all",2000],["all",2001]],"pfx":[["all",MAX$13504],["all",3000]],"pp":[["all",MAX$13504],["all",5]],"when2":[["all",MAX$13504],["all",101]],"withp":[["all",MAX$13504],["all",10]],"pipe":[["pipe",550],["pipe",551]],"sh_ifx":[["all",1800],["all",1801]],"sh_pfx":[["all",MAX$13504],["all",1901]],"sh_sfx":[["all",1900],["all",MAX$13504]],"wi_ifx":[["customl",900],["customr",901]],"wi_pfx":[["all",MAX$13504],["all",901]],"wi_sfx":[["all",900],["all",MAX$13504]]})))))))))),SimplePriority$13503(eg_groups$14730,eg_prio$14731)));(DONE$13506=-1);(NONE$13507=0);(LEFT$13508=1);(RIGHT$13509=2);(BOTH$13510=3);(oparse$13511=(function(next$15017,order$15018,finalize$15019){var between$15027;var right_op$15028;var stack$15029;var left_op$15030;var current$15031;(between$15027=finalize$15019(next$15017()));(right_op$15028=next$15017());(stack$15029=[]);(left_op$15030=null);(current$15031=null);$15032:while(true){var v$15085;var other$15147;var bridge$15057$15070;var $15052$15065;var o$15059;(o$15059=(function(){if(((!left_op$15030)&&(!right_op$15028))){return DONE$13506;}else{return ((((!left_op$15030)&&RIGHT$13509)||((!right_op$15028)&&LEFT$13508))||order$15018(left_op$15030,right_op$15028));}})());($15052$15065=o$15059);if(($15052$15065===DONE$13506)){return between$15027;}else{if(($15052$15065===LEFT$13508)){current$15031.push(between$15027);(between$15027=finalize$15019(current$15031));(v$15085=stack$15029.pop());(left_op$15030=v$15085[0]);(current$15031=v$15085[1]);}else{if(($15052$15065===RIGHT$13509)){stack$15029.push([left_op$15030,current$15031]);(left_op$15030=right_op$15028);(current$15031=[[right_op$15028],between$15027]);(between$15027=finalize$15019(next$15017()));(right_op$15028=next$15017());}else{(bridge$15057$15070=$15052$15065);if(((bridge$15057$15070===BOTH$13510)||(bridge$15057$15070===NONE$13507))){current$15031[0].push(right_op$15028);current$15031.push(between$15027);(left_op$15030=right_op$15028);(between$15027=finalize$15019(next$15017()));(right_op$15028=next$15017());if((o$15059===NONE$13507)){(current$15031["tainted"]=true);}}else{(other$15147=$15052$15065);throw $13210(["should_never_happen"]).create("undefined priority",({"left":left_op$15030,"right":right_op$15028}));}}}}}}));(finalize$13512=(function($15153$15156){var t0$15172;var $index$15283;var $length$15277;var temp$15271;var $index$15321;var $length$15315;var temp$15309;var $index$15387;var $length$15381;var temp$15375;var acc$15369;var other$15749;var args$15744;var f$15720;var orig_args$15721;var args$15722;var $15690$15703;var $15691$15704;var t0$15699;var t1$15700;var t2$15701;var $15684$15694;var inserted$15526;var result$15527;var t0$15761;var f$15788;var other$15869;var x$15858;var $15834$15845;var $15835$15846;var t0$15843;var $15830$15838;var result$15778;var f$15895;var oloc$16000;var abloc$16001;var oabloc$16002;var rval$16003;var a$15990;var b$15991;var $15243$15951;var $15244$15952;var $15245$15953;var $15246$15954;var t0$15944;var t1$15945;var t2$15946;var t3$15947;var t4$15948;var t5$15949;var $index$16050;var $length$16044;var temp$16038;var acc$16032;var op_strings$16023;var args$16024;var $15240$15940;var commas$15874;var commas$15753;var target$15486;var _b$15487;var body$15488;var f$15470;var body$15471;var f$15438;var arg$15439;var body$15440;var $15248$15429;var $15249$15430;var $15250$15431;var $15251$15432;var $15252$15433;var $15253$15434;var $15254$15435;var t0$15418;var t1$15419;var t2$15420;var t3$15421;var t4$15422;var t5$15423;var t6$15424;var t7$15425;var t8$15426;var bridge$15236$15427;var $15231$15413;var sumloc$15255;var orig_ops$15256;var op$15257;var other$16074;var ops$15222;var args$15223;var value$15213;var value$15208;var value$15203;var value$15193;var $15166$15188;var $15167$15189;var $15168$15190;var t0$15186;var $15158$15181;var ph$15169;var token$15170;(t0$15172=$15153$15156);(token$15170=t0$15172);(ph$15169=t0$15172);($15158$15181=ph$15169);if((($15166$15188=($15158$15181 instanceof Array))&&(((t0$15186=$15158$15181.length)),(($15168$15190=(t0$15186===2))&&($15158$15181[0]==="ID"))))){(value$15193=$15158$15181[1]);return __lt____lt____colon__$13496(["symbol",value$15193],token$15170);}else{if(($15168$15190&&($15158$15181[0]==="ILLEGAL"))){(value$15203=$15158$15181[1]);return __lt____lt____colon__$13496(["char",value$15203],token$15170);}else{if(($15168$15190&&($15158$15181[0]==="NUM"))){(value$15208=$15158$15181[1]);return __lt____lt____colon__$13496(["value",value$15208],token$15170);}else{if(($15168$15190&&($15158$15181[0]==="STR"))){(value$15213=$15158$15181[1]);return __lt____lt____colon__$13496(["value",value$15213],token$15170);}else{if(($15166$15188&&((t0$15186===1)&&($15158$15181[0]==="VOID")))){return __lt____lt____colon__$13496(["void"],token$15170);}else{if(($15166$15188&&(t0$15186>=1))){(ops$15222=$15158$15181[0]);(args$15223=Array.prototype.slice.call($15158$15181,1));(sumloc$15255=ops$15222[0].location);(temp$15271=ops$15222.slice(1));($length$15277=temp$15271.length);($index$15283=0);$15258:for(;($index$15283<$length$15277);($index$15283++)){var op$15300;var m$15292;(m$15292=temp$15271[$index$15283]);(op$15300=m$15292);(sumloc$15255=__plus____plus____colon__$13497(sumloc$15255,op$15300));}(temp$15309=args$15223);($length$15315=temp$15309.length);($index$15321=0);$15261:for(;($index$15321<$length$15315);($index$15321++)){var arg$15353;var t0$15335;var t1$15336;var m$15330;(m$15330=temp$15309[$index$15321]);(t0$15335=m$15330);if(((t0$15335 instanceof Array)&&(((t1$15336=t0$15335.length)),((t1$15336===1)&&(t0$15335[0]==="void"))))){undefined;}else{(arg$15353=m$15330);(sumloc$15255=__plus____plus____colon__$13497(sumloc$15255,arg$15353));}}(orig_ops$15256=ops$15222);(ops$15222=(((acc$15369=[])),(((temp$15375=ops$15222)),((($length$15381=temp$15375.length)),((($index$15387=0)),(function(){$15364:for(;($index$15387<$length$15381);($index$15387++)){var o$15404;var m$15396;(m$15396=temp$15375[$index$15387]);(o$15404=m$15396);acc$15369.push(o$15404[2]);}})()))),acc$15369));(op$15257=ops$15222[0]);($15231$15413=[ops$15222,args$15223]);if((($15248$15429=($15231$15413 instanceof Array))&&(((t0$15418=$15231$15413.length)),(($15250$15431=(t0$15418===2))&&(((t1$15419=$15231$15413[0])),(($15252$15433=(t1$15419 instanceof Array))&&(((t2$15420=t1$15419.length)),((t2$15420===2)&&((t1$15419[0]==="WHITE")&&((t1$15419[1]===":")&&(((t3$15421=$15231$15413[1])),((t3$15421 instanceof Array)&&(((t4$15422=t3$15421.length)),(t4$15422===3)))))))))))))){(f$15438=t3$15421[0]);(arg$15439=t3$15421[1]);(body$15440=t3$15421[2]);return __lt____lt____colon__$13496(["send",f$15438,__lt____lt____colon__$13496(["data",arg$15439,body$15440],__plus____plus____colon__$13497(arg$15439,body$15440))],sumloc$15255);}else{if(($15252$15433&&(($15254$15435=(t2$15420===1))&&((t1$15419[0]===":")&&(((t3$15421=$15231$15413[1])),((t3$15421 instanceof Array)&&(((t4$15422=t3$15421.length)),(t4$15422===2)))))))){(f$15470=t3$15421[0]);(body$15471=t3$15421[1]);return __lt____lt____colon__$13496(["send",f$15470,__lt____lt____colon__$13496(["data",body$15471],body$15471)],sumloc$15255);}else{if(($15254$15435&&((t1$15419[0]==="with")&&(((t3$15421=$15231$15413[1])),((t3$15421 instanceof Array)&&(((t4$15422=t3$15421.length)),((t4$15422===2)&&((target$15486=t3$15421[0]),(((t5$15423=t3$15421[1])),((_b$15487=t5$15423),(((t6$15424=$16186(Body$13499)(t5$15423))),(t6$15424[0]&&(((t7$15425=t6$15424[1])),(((t8$15426=t7$15425.length)),(t8$15426>=0))))))))))))))){(body$15488=Array.prototype.slice.call(t7$15425,0));(inserted$15526=false);(result$15527=transform$13500(target$15486,(function($15534$15537){var t0$15546;var $index$15642;var $length$15636;var temp$15630;var tr$15615;var res$15616;var args$15604;var x$15580;var f$15581;var a$15582;var b$15583;var t0$15560;var t1$15561;var t2$15562;var $15539$15555;var ph$15543;var expr$15544;(t0$15546=$15534$15537);(expr$15544=t0$15546);(ph$15543=t0$15546);($15539$15555=ph$15543);if((($15539$15555 instanceof Array)&&(((t0$15560=$15539$15555.length)),((t0$15560===2)&&(($15539$15555[0]==="symbol")&&($15539$15555[1]==="...")))))){(inserted$15526=true);return __lt____lt____colon__$13496(["multi"].concat(body$15488),_b$15487);}else{(x$15580=$15539$15555);if((x$15580.fromop&&(($15539$15555 instanceof Array)&&(((t0$15560=$15539$15555.length)),((t0$15560===3)&&(($15539$15555[0]==="send")&&((f$15581=$15539$15555[1]),(((t1$15561=$15539$15555[2])),((t1$15561 instanceof Array)&&(((t2$15562=t1$15561.length)),((t2$15562===3)&&(t1$15561[0]==="data")))))))))))){(a$15582=t1$15561[1]);(b$15583=t1$15561[2]);return ["send",this(f$15581),__lt____lt____colon__$13496(["data",this(a$15582),this(b$15583)],__plus____plus____colon__$13497(a$15582,b$15583))];}else{if((($15539$15555 instanceof Array)&&(((t0$15560=$15539$15555.length)),((t0$15560>=1)&&($15539$15555[0]==="data"))))){(args$15604=Array.prototype.slice.call($15539$15555,1));(tr$15615=this);(res$15616=["data"]);(temp$15630=args$15604);($length$15636=temp$15630.length);($index$15642=0);$15617:for(;($index$15642<$length$15636);($index$15642++)){var other$15679;var t0$15656;var t1$15657;var m$15651;(m$15651=temp$15630[$index$15642]);(t0$15656=m$15651);if(((t0$15656 instanceof Array)&&(((t1$15657=t0$15656.length)),((t1$15657===2)&&((t0$15656[0]==="symbol")&&(t0$15656[1]==="...")))))){(inserted$15526=true);(res$15616=res$15616.concat(body$15488));}else{(other$15679=m$15651);res$15616.push(__lt____lt____colon__$13496(tr$15615(other$15679),other$15679));}}return __lt____lt____colon__$13496(res$15616,expr$15544);}else{$13191($15539$15555);}}}})));if((!inserted$15526)){($15684$15694=target$15486);if((($15684$15694 instanceof Array)&&(((t0$15699=$15684$15694.length)),((t0$15699===1)&&($15684$15694[0]==="void"))))){return __lt____lt____colon__$13496(["data"].concat(body$15488),sumloc$15255);}else{$15684$15694;if(target$15486.fromop){return __lt____lt____colon__$13496(["send",target$15486,__lt____lt____colon__$13496(["data"].concat(body$15488),_b$15487)],sumloc$15255);}else{if((($15690$15703=($15684$15694 instanceof Array))&&(((t0$15699=$15684$15694.length)),((t0$15699===3)&&(($15684$15694[0]==="send")&&((f$15720=$15684$15694[1]),(((t1$15700=$15684$15694[2])),((orig_args$15721=t1$15700),((t1$15700 instanceof Array)&&(((t2$15701=t1$15700.length)),((t2$15701>=1)&&(t1$15700[0]==="data")))))))))))){(args$15722=Array.prototype.slice.call(t1$15700,1));return __lt____lt____colon__$13496(["send",f$15720,__lt____lt____colon__$13496(["data"].concat(args$15722).concat(body$15488),__plus____plus____colon__$13497(orig_args$15721,_b$15487))],sumloc$15255);}else{if(($15690$15703&&((t0$15699>=1)&&($15684$15694[0]==="data")))){(args$15744=Array.prototype.slice.call($15684$15694,1));return __lt____lt____colon__$13496(target$15486.concat(body$15488),sumloc$15255);}else{(other$15749=$15684$15694);return __lt____lt____colon__$13496(["send",target$15486,__lt____lt____colon__$13496(["data"].concat(body$15488),_b$15487)],sumloc$15255);}}}}}else{return __lt____lt____colon__$13496(result$15527,sumloc$15255);}}else{if(($15250$15431&&(((bridge$15236$15427=$15231$15413[0])),((((bridge$15236$15427 instanceof Array)&&(((t0$15761=bridge$15236$15427.length)),((t0$15761>=2)&&((bridge$15236$15427[0]==="[")&&((commas$15753=Array.prototype.slice.call(bridge$15236$15427,1,-1)),(bridge$15236$15427[(t0$15761-1)]==="]"))))))||((commas$15753=bridge$15236$15427),true))&&($15231$15413[1],commas$15753.every((function(x$15772){return $16233(x$15772,",");}))))))){if((op$15257==="[")){(args$15223=args$15223.slice(1,-1));}(args$15223=(((f$15788=(function($15792$15795){var other$15824;var t0$15811;var $15797$15806;var ph$15800;(ph$15800=$15792$15795);($15797$15806=ph$15800);if((($15797$15806 instanceof Array)&&(((t0$15811=$15797$15806.length)),((t0$15811===1)&&($15797$15806[0]==="void"))))){return false;}else{(other$15824=$15797$15806);return true;}}))),args$15223.filter(f$15788)));(result$15778=((($15830$15838=args$15223)),(function(){if((($15834$15845=($15830$15838 instanceof Array))&&(((t0$15843=$15830$15838.length)),(t0$15843===0)))){return ["multi"];}else{if(($15834$15845&&(t0$15843===1))){(x$15858=$15830$15838[0]);if(((!isNaN(sumloc$15255.start))&&(!isNaN(sumloc$15255.end)))){(x$15858["location"]=sumloc$15255);}return x$15858;}else{(other$15869=$15830$15838);return ["multi"].concat(args$15223);}}})()));return __lt____lt____colon__$13496(result$15778,sumloc$15255);}else{if(($15250$15431&&(((t1$15419=$15231$15413[0])),(($15252$15433=(t1$15419 instanceof Array))&&(((t2$15420=t1$15419.length)),((t2$15420>=2)&&((t1$15419[0]==="{")&&((commas$15874=Array.prototype.slice.call(t1$15419,1,-1)),((t1$15419[(t2$15420-1)]==="}")&&($15231$15413[1],commas$15874.every((function(x$15890){return $16233(x$15890,",");})))))))))))){(f$15895=(function($15899$15902){var other$15931;var t0$15918;var $15904$15913;var ph$15907;(ph$15907=$15899$15902);($15904$15913=ph$15907);if((($15904$15913 instanceof Array)&&(((t0$15918=$15904$15913.length)),((t0$15918===1)&&($15904$15913[0]==="void"))))){return false;}else{(other$15931=$15904$15913);return true;}}));return __lt____lt____colon__$13496(["data"].concat(args$15223.slice(1,-1).filter(f$15895)),sumloc$15255);}else{if(($15252$15433&&(($15254$15435=(t2$15420===1))&&(t1$15419[0]==="WHITE")))){$15231$15413[1];return __lt____lt____colon__$13496(["send"].concat(args$15223),sumloc$15255);}else{if($15254$15435){t1$15419[0];($15240$15940=$15231$15413[1]);(t0$15944=$15240$15940);if((($15244$15952=(t0$15944 instanceof Array))&&(((t1$15945=t0$15944.length)),(($15246$15954=(t1$15945===2))&&(((t2$15946=t0$15944[0])),((t2$15946 instanceof Array)&&(((t3$15947=t2$15946.length)),((t3$15947===1)&&((t2$15946[0]==="void")&&(((t4$15948=t0$15944[1])),((t4$15948 instanceof Array)&&(((t5$15949=t4$15948.length)),((t5$15949===1)&&(t4$15948[0]==="void")))))))))))))){return __lt____lt____colon__$13496(["symbol",op$15257],orig_ops$15256[0]);}else{if($15246$15954){(a$15990=t0$15944[0]);(b$15991=t0$15944[1]);(oloc$16000=orig_ops$15256[0].location);(abloc$16001=__plus____plus____colon__$13497(a$15990,b$15991));(oabloc$16002=__plus____plus____colon__$13497(orig_ops$15256[0],abloc$16001));(rval$16003=__lt____lt____colon__$13496(["send",__lt____lt____colon__$13496(["symbol",op$15257],oloc$16000),__lt____lt____colon__$13496(["data",a$15990,b$15991],abloc$16001)],__plus____plus____colon__$13497(oloc$16000,abloc$16001)));(rval$16003["fromop"]=true);return rval$16003;}else{$13191($15240$15940,"/home/olivier/git/earl-grey/src/parse.eg",17743,17748);}}}else{if($15250$15431){(op_strings$16023=$15231$15413[0]);(args$16024=$15231$15413[1]);return __lt____lt____colon__$13496(["mismix",(((acc$16032=[])),(((temp$16038=orig_ops$15256)),((($length$16044=temp$16038.length)),((($index$16050=0)),(function(){$16027:for(;($index$16050<$length$16044);($index$16050++)){var op$16067;var m$16059;(m$16059=temp$16038[$index$16050]);(op$16067=m$16059);acc$16032.push(__lt____lt____colon__$13496(["symbol",op$16067[2]],op$16067));}})()))),acc$16032)].concat(args$16024),sumloc$15255);}else{$13191($15231$15413);}}}}}}}}}else{(other$16074=$15158$15181);throw $13210(["should_never_happen"]).create("unknown node (B)",({"node":token$15170}));}}}}}}}));(parse$13513=(function(tokens$16081){var next$16085;(next$16085=(function(){return tokens$16081.shift();}));return oparse$13511(next$16085,eg_order$13505.compare.bind(eg_order$13505),finalize$13512);}));(exports["OperatorGroups"]=OperatorGroups$13501);(exports["SimplePriority"]=SimplePriority$13503);(exports["parse"]=parse$13513);(exports["oparse"]=oparse$13511);(exports["finalize"]=finalize$13512);(exports["DONE"]=DONE$13506);(exports["NONE"]=NONE$13507);(exports["LEFT"]=LEFT$13508);(exports["RIGHT"]=RIGHT$13509);(exports["BOTH"]=BOTH$13510);
