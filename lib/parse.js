require("earlgrey-runtime");
var $10878=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});var accum$8807;var accum$8811;var accum$9459;var accum$9463;var accum$9689;var accum$9693;var accum$9697;var accum$9701;var accum$9705;var accum$9709;var accum$9721;var accum$9725;var accum$9729;var accum$9733;var accum$9737;var eg_groups$9474;var eg_prio$9475;var $8215$8239;var __lt____lt____colon__$8240;var __plus____plus____colon__$8241;var $8216$8242;var Body$8243;var transform$8244;var OperatorGroups$8245;var parse_op_description$8246;var SimplePriority$8247;var MAX$8248;var eg_order$8249;var DONE$8250;var NONE$8251;var LEFT$8252;var RIGHT$8253;var BOTH$8254;var oparse$8255;var finalize$8256;var parse$8257;($8215$8239=require("./location"));(__lt____lt____colon__$8240=$8215$8239["<<:"]);(__plus____plus____colon__$8241=$8215$8239["++:"]);($8216$8242=require("./util"));(Body$8243=$8216$8242.Body);(transform$8244=(function(expr$8277,cb$8278){var rval$8298;var tr$8283;var result$8284;(tr$8283=(function(x$8289){return transform$8244(x$8289,cb$8278);}));(result$8284=(((rval$8298=false)),((function(){try{(rval$8298=cb$8278.call(tr$8283,expr$8277));}catch(excv$8309){var name$8361;var args$8362;var v$8356;var s$8351;var $8325$8337;var $8326$8338;var $8327$8339;var t0$8335;var $8320$8330;var e$8315;(e$8315=excv$8309);(rval$8298=((($8320$8330=expr$8277)),(function(){if((($8325$8337=($8320$8330 instanceof Array))&&(((t0$8335=$8320$8330.length)),((t0$8335===1)&&($8320$8330[0]==="void"))))){return ["void"];}else{if(($8325$8337&&(($8327$8339=(t0$8335===2))&&($8320$8330[0]==="symbol")))){(s$8351=$8320$8330[1]);return expr$8277;}else{if(($8327$8339&&($8320$8330[0]==="value"))){(v$8356=$8320$8330[1]);return expr$8277;}else{if(($8325$8337&&(t0$8335>=1))){(name$8361=$8320$8330[0]);(args$8362=Array.prototype.slice.call($8320$8330,1));return [name$8361].concat(args$8362.map(tr$8283));}else{___match_error($8320$8330);}}}}})()));}})(),rval$8298)));return __lt____lt____colon__$8240(result$8284,expr$8277);}));(OperatorGroups$8245=(function(groups$8374){var $index$8421;var $length$8415;var temp$8409;var acc$8403;var $index$8481;var $length$8475;var temp$8469;var acc$8463;var $index$8586;var $length$8580;var temp$8574;var acc$8568;var itg$8389;var it$0$8377;(it$0$8377=(function(){if((!getChecker(OperatorGroups$8245)(this))){return Object.create(OperatorGroups$8245.prototype);}else{return this;}})());(itg$8389=items(groups$8374));(it$0$8377["gnames"]=(((acc$8403=[])),(((temp$8409=itg$8389)),((($length$8415=temp$8409.length)),((($index$8421=0)),(function(){$8398:for(;($index$8421<$length$8415);($index$8421++)){var name$8440;var t0$8435;var t1$8436;var m$8430;(m$8430=temp$8409[$index$8421]);(t0$8435=m$8430);if(((t0$8435 instanceof Array)&&(((t1$8436=t0$8435.length)),(t1$8436===2)))){(name$8440=t0$8435[0]);t0$8435[1];acc$8403.push(name$8440);}else{___match_error(m$8430,"/home/olivier/git/eg/src/parse.eg",565,591);}}})()))),acc$8403));(it$0$8377["groups"]=(((acc$8463=[])),(((temp$8469=itg$8389)),((($length$8475=temp$8469.length)),((($index$8481=0)),(function(){$8458:for(;($index$8481<$length$8475);($index$8481++)){var $index$8537;var $length$8531;var temp$8525;var acc$8519;var name$8500;var descrs$8501;var t0$8495;var t1$8496;var m$8490;(m$8490=temp$8469[$index$8481]);(t0$8495=m$8490);if(((t0$8495 instanceof Array)&&(((t1$8496=t0$8495.length)),(t1$8496===2)))){(name$8500=t0$8495[0]);(descrs$8501=t0$8495[1]);acc$8463.push(___build_array((((acc$8519=[])),(((temp$8525=descrs$8501)),((($length$8531=temp$8525.length)),((($index$8537=0)),(function(){$8514:for(;($index$8537<$length$8531);($index$8537++)){var descr$8554;var m$8546;(m$8546=temp$8525[$index$8537]);(descr$8554=m$8546);acc$8519.push(parse_op_description$8246(descr$8554));}})()))),acc$8519)));}else{___match_error(m$8490,"/home/olivier/git/eg/src/parse.eg",608,705);}}})()))),acc$8463));(it$0$8377["fns"]=[]);(it$0$8377["to_gid"]=({"IFX":({"wide":({}),"short":({})}),"PFX":({"wide":({}),"short":({})}),"SFX":({"wide":({}),"short":({})})}));(acc$8568=[]);(temp$8574=enumerate(it$0$8377.groups));($length$8580=temp$8574.length);($index$8586=0);$8390:for(;($index$8586<$length$8580);($index$8586++)){var $index$8643;var $length$8637;var temp$8631;var acc$8625;var i$8605;var group$8606;var t0$8600;var t1$8601;var m$8595;(m$8595=temp$8574[$index$8586]);(t0$8600=m$8595);if(((t0$8600 instanceof Array)&&(((t1$8601=t0$8600.length)),(t1$8601===2)))){(i$8605=t0$8600[0]);(group$8606=t0$8600[1]);acc$8568.push((((acc$8625=[])),(((temp$8631=group$8606)),((($length$8637=temp$8631.length)),((($index$8643=0)),(function(){$8619:for(;($index$8643<$length$8637);($index$8643++)){var f$8683;var fixity$8662;var width$8663;var name$8664;var t0$8657;var t1$8658;var m$8652;(m$8652=temp$8631[$index$8643]);(t0$8657=m$8652);if(((t0$8657 instanceof Array)&&(((t1$8658=t0$8657.length)),(t1$8658===3)))){(fixity$8662=t0$8657[0]);(width$8663=t0$8657[1]);(name$8664=t0$8657[2]);acc$8625.push((($10878($10878(it$0$8377.to_gid,fixity$8662),width$8663)[name$8664]=i$8605)));}else{(f$8683=m$8652);acc$8625.push(it$0$8377.fns.push([f$8683,i$8605]));}}})()))),acc$8625));}else{___match_error(m$8595,"/home/olivier/git/eg/src/parse.eg",870,1071);}}acc$8568;return it$0$8377;}));(OperatorGroups$8245.prototype["get_name"]=(function(o$8693){var it$0$8697;var self$8698;(it$0$8697=this);(self$8698=this);return $10878(it$0$8697.gnames,it$0$8697.get(o$8693));}));(OperatorGroups$8245.prototype["get"]=(function($8709$8712){var t0$8730;var t1$8731;var $index$8769;var $length$8763;var temp$8757;var attempt$8746;var o$8725;var fixity$8726;var width$8727;var name$8728;var it$0$8716;var self$8717;(it$0$8716=this);(self$8717=this);(t0$8730=$8709$8712);(o$8725=t0$8730);if(((t0$8730 instanceof Array)&&(((t1$8731=t0$8730.length)),(t1$8731===3)))){(fixity$8726=t0$8730[0]);(width$8727=t0$8730[1]);(name$8728=t0$8730[2]);}else{___match_error($8709$8712);}(attempt$8746=$10878($10878($10878(it$0$8716.to_gid,fixity$8726),width$8727),name$8728));if((attempt$8746===(void 0))){(temp$8757=it$0$8716.fns);($length$8763=temp$8757.length);($index$8769=0);$8751:for(;($index$8769<$length$8763);($index$8769++)){var f$8788;var i$8789;var t0$8783;var t1$8784;var m$8778;(m$8778=temp$8757[$index$8769]);(t0$8783=m$8778);if(((t0$8783 instanceof Array)&&(((t1$8784=t0$8783.length)),(t1$8784===2)))){(f$8788=t0$8783[0]);(i$8789=t0$8783[1]);if(f$8788(o$8725)){return i$8789;}}else{___match_error(m$8778,"/home/olivier/git/eg/src/parse.eg",1250,1333);}}throw ErrorFactory(["syntax","unknown_operator"]).create(("Unknown operator: "+[true,String(o$8725)][1]),({"operator":o$8725}));}else{return attempt$8746;}}));__amp____colon__(OperatorGroups$8245,__amp____colon__(((accum$8807=({})),((accum$8807["::name"]="OperatorGroups"),accum$8807)),((accum$8811=({})),((accum$8811["::egclass"]=true),accum$8811))));OperatorGroups$8245;(parse_op_description$8246=(function($8817$8820){var otherwise$8910;var $8890$8899;var $8886$8893;var otherwise$8944;var $8924$8933;var $8920$8927;var t0$8880;var t1$8881;var fixity$8877;var short$8878;var other$8948;var x$8854;var w1$8855;var op$8856;var w2$8857;var y$8858;var f$8849;var rx$8843;var t0$8837;var t1$8838;var t2$8839;var $8822$8832;var ph$8826;(ph$8826=$8817$8820);($8822$8832=ph$8826);(rx$8843=RegExp("(?:^((?:X?))((?:[ _]?))((?:[^ _Y]*))((?:[ _]?))((?:Y?))$)",""));if(getChecker(Function)($8822$8832)){(f$8849=$8822$8832);return f$8849;}else{(t0$8837=getProjector(rx$8843)($8822$8832));if((t0$8837[0]&&(((t1$8838=t0$8837[1])),(((t2$8839=t1$8838.length)),(t2$8839===6))))){t1$8838[0];(x$8854=t1$8838[1]);(w1$8855=t1$8838[2]);(op$8856=t1$8838[3]);(w2$8857=t1$8838[4]);(y$8858=t1$8838[5]);(t0$8880=((($8886$8893=null)),($8886$8893,(function(){if((x$8854==="")){return ["PFX",(w2$8857==="")];}else{if((y$8858==="")){return ["SFX",(w1$8855==="")];}else{(otherwise$8910=$8886$8893);return ["IFX",((w1$8855==="")||(w2$8857===""))];}}})())));if(((t0$8880 instanceof Array)&&(((t1$8881=t0$8880.length)),(t1$8881===2)))){(fixity$8877=t0$8880[0]);(short$8878=t0$8880[1]);}else{___match_error(((($8920$8927=null)),($8920$8927,(function(){if((x$8854==="")){return ["PFX",(w2$8857==="")];}else{if((y$8858==="")){return ["SFX",(w1$8855==="")];}else{(otherwise$8944=$8920$8927);return ["IFX",((w1$8855==="")||(w2$8857===""))];}}})())),"/home/olivier/git/eg/src/parse.eg",1714,1922);}if(((w1$8855==="_")||(w2$8857==="_"))){return [[fixity$8877,"short",op$8856],[fixity$8877,"wide",op$8856]];}else{return [[fixity$8877,(function(){if(short$8878){return "short";}else{return "wide";}})(),op$8856]];}}else{(other$8948=$8822$8832);throw ErrorFactory(["invalid_op_description"]).create(("Invalid operator description: "+other$8948));}}}));(SimplePriority$8247=(function(groups$8955,priorities$8956){var $index$9006;var $length$9000;var temp$8994;var acc$8988;var _i$8970;var tracks$8971;var it$0$8959;(it$0$8959=(function(){if((!getChecker(SimplePriority$8247)(this))){return Object.create(SimplePriority$8247.prototype);}else{return this;}})());(it$0$8959["groups"]=groups$8955);(_i$8970=0);(tracks$8971=({}));(it$0$8959["prio"]=(((acc$8988=[])),(((temp$8994=groups$8955.gnames)),((($length$9000=temp$8994.length)),((($index$9006=0)),(function(){$8983:for(;($index$9006<$length$9000);($index$9006++)){var t0$9036;var t1$9037;var t2$9038;var t3$9039;var t4$9040;var t5$9041;var t6$9042;var t7$9043;var $index$9118;var $length$9112;var temp$9106;var acc$9100;var $index$9240;var $length$9234;var temp$9228;var acc$9222;var t0$9089;var t1$9090;var ltracks$9029;var lp$9030;var rtracks$9031;var rp$9032;var lt$9033;var rt$9034;var name$9023;var m$9015;(m$9015=temp$8994[$index$9006]);(name$9023=m$9015);acc$8988.push(((((t0$9036=$10878(priorities$8956,name$9023))),(function(){if(((t0$9036 instanceof Array)&&(((t1$9037=t0$9036.length)),((t1$9037===2)&&(((t2$9038=t0$9036[0])),((t2$9038 instanceof Array)&&(((t3$9039=t2$9038.length)),((t3$9039===2)&&(((t4$9040=getProjector(Array)(t2$9038[0]))),(t4$9040[0]&&((ltracks$9029=t4$9040[1]),((lp$9030=t2$9038[1]),(((t5$9041=t0$9036[1])),((t5$9041 instanceof Array)&&(((t6$9042=t5$9041.length)),((t6$9042===2)&&(((t7$9043=getProjector(Array)(t5$9041[0]))),t7$9043[0]))))))))))))))))){(rtracks$9031=t7$9043[1]);(rp$9032=t5$9041[1]);}else{return ___match_error($10878(priorities$8956,name$9023),"/home/olivier/git/eg/src/parse.eg",3721,3737);}})()),(((t0$9089=(((acc$9100=[])),(((temp$9106=[ltracks$9029,rtracks$9031])),((($length$9112=temp$9106.length)),((($index$9118=0)),(function(){$9095:for(;($index$9118<$length$9112);($index$9118++)){var $index$9164;var $length$9158;var temp$9152;var rval$9140;var tr$9135;var m$9127;(m$9127=temp$9106[$index$9118]);(tr$9135=m$9127);acc$9100.push((((rval$9140=0)),(((temp$9152=tr$9135)),((($length$9158=temp$9152.length)),((($index$9164=0)),(function(){$9141:for(;($index$9164<$length$9158);($index$9164++)){var t$9203;var t$9189;var m$9173;(m$9173=temp$9152[$index$9164]);if((m$9173==="all")){(rval$9140=(Math.pow(2,31)-1));}else{(t$9189=m$9173);if((!$10878(tracks$8971,t$9189))){(rval$9140=(rval$9140|Math.pow(2,_i$8970)));(tracks$8971[t$9189]=(_i$8970++));}else{(t$9203=m$9173);(rval$9140=(rval$9140|Math.pow(2,$10878(tracks$8971,t$9203))));}}}})()))),rval$9140));}})()))),acc$9100))),(function(){if(((t0$9089 instanceof Array)&&(((t1$9090=t0$9089.length)),(t1$9090===2)))){(lt$9033=t0$9089[0]);(rt$9034=t0$9089[1]);}else{return ___match_error((((acc$9222=[])),(((temp$9228=[ltracks$9029,rtracks$9031])),((($length$9234=temp$9228.length)),((($index$9240=0)),(function(){$9217:for(;($index$9240<$length$9234);($index$9240++)){var $index$9286;var $length$9280;var temp$9274;var rval$9262;var tr$9257;var m$9249;(m$9249=temp$9228[$index$9240]);(tr$9257=m$9249);acc$9222.push((((rval$9262=0)),(((temp$9274=tr$9257)),((($length$9280=temp$9274.length)),((($index$9286=0)),(function(){$9263:for(;($index$9286<$length$9280);($index$9286++)){var t$9325;var t$9311;var m$9295;(m$9295=temp$9274[$index$9286]);if((m$9295==="all")){(rval$9262=(Math.pow(2,31)-1));}else{(t$9311=m$9295);if((!$10878(tracks$8971,t$9311))){(rval$9262=(rval$9262|Math.pow(2,_i$8970)));(tracks$8971[t$9311]=(_i$8970++));}else{(t$9325=m$9295);(rval$9262=(rval$9262|Math.pow(2,$10878(tracks$8971,t$9325))));}}}})()))),rval$9262));}})()))),acc$9222),"/home/olivier/git/eg/src/parse.eg",3758,4078);}})()),[[lt$9033,lp$9030],[rt$9034,rp$9032]]));}})()))),acc$8988));return it$0$8959;}));(SimplePriority$8247.prototype["compare"]=(function(op1$9337,op2$9338){var t0$9375;var t1$9376;var t2$9377;var t3$9378;var t0$9403;var t1$9404;var t2$9405;var t3$9406;var $9361$9437;var $9356$9431;var i1$9362;var i2$9363;var code1$9364;var ord1$9365;var code2$9366;var ord2$9367;var it$0$9342;var self$9343;(it$0$9342=this);(self$9343=this);(i1$9362=it$0$9342.groups.get(op1$9337));(i2$9363=it$0$9342.groups.get(op2$9338));(t0$9375=$10878(it$0$9342.prio,i1$9362));if(((t0$9375 instanceof Array)&&(((t1$9376=t0$9375.length)),((t1$9376===2)&&(t0$9375[0],(((t2$9377=t0$9375[1])),((t2$9377 instanceof Array)&&(((t3$9378=t2$9377.length)),(t3$9378===2))))))))){(code1$9364=t2$9377[0]);(ord1$9365=t2$9377[1]);}else{___match_error($10878(it$0$9342.prio,i1$9362),"/home/olivier/git/eg/src/parse.eg",4205,4215);}(t0$9403=$10878(it$0$9342.prio,i2$9363));if(((t0$9403 instanceof Array)&&(((t1$9404=t0$9403.length)),((t1$9404===2)&&(((t2$9405=t0$9403[0])),((t2$9405 instanceof Array)&&(((t3$9406=t2$9405.length)),(t3$9406===2)))))))){(code2$9366=t2$9405[0]);(ord2$9367=t2$9405[1]);t0$9403[1];}else{___match_error($10878(it$0$9342.prio,i2$9363),"/home/olivier/git/eg/src/parse.eg",4242,4252);}($9356$9431=null);$9356$9431;if(((code1$9364&code2$9366)===0)){return NONE$8251;}else{if((ord1$9365>ord2$9367)){return LEFT$8252;}else{if((ord1$9365<ord2$9367)){return RIGHT$8253;}else{if((ord1$9365===ord2$9367)){return BOTH$8254;}else{___match_error($9356$9431);}}}}}));__amp____colon__(SimplePriority$8247,__amp____colon__(((accum$9459=({})),((accum$9459["::name"]="SimplePriority"),accum$9459)),((accum$9463=({})),((accum$9463["::egclass"]=true),accum$9463))));SimplePriority$8247;(MAX$8248=(1/0));(eg_order$8249=(((eg_groups$9474=OperatorGroups$8245(__amp____colon__(({"sh_ifx":[(function($9485$9488){var t0$9504;var $9490$9499;var ph$9493;(ph$9493=$9485$9488);($9490$9499=ph$9493);if((($9490$9499 instanceof Array)&&(((t0$9504=$9490$9499.length)),((t0$9504===3)&&(($9490$9499[0]==="IFX")&&($9490$9499[1]==="short")))))){$9490$9499[2];return true;}else{$9490$9499;return false;}})],"sh_pfx":[(function($9519$9522){var t0$9538;var $9524$9533;var ph$9527;(ph$9527=$9519$9522);($9524$9533=ph$9527);if((($9524$9533 instanceof Array)&&(((t0$9538=$9524$9533.length)),((t0$9538===3)&&(($9524$9533[0]==="PFX")&&($9524$9533[1]==="short")))))){$9524$9533[2];return true;}else{$9524$9533;return false;}})],"sh_sfx":[(function($9553$9556){var t0$9572;var $9558$9567;var ph$9561;(ph$9561=$9553$9556);($9558$9567=ph$9561);if((($9558$9567 instanceof Array)&&(((t0$9572=$9558$9567.length)),((t0$9572===3)&&(($9558$9567[0]==="SFX")&&($9558$9567[1]==="short")))))){$9558$9567[2];return true;}else{$9558$9567;return false;}})],"wi_ifx":[(function($9587$9590){var t0$9606;var $9592$9601;var ph$9595;(ph$9595=$9587$9590);($9592$9601=ph$9595);if((($9592$9601 instanceof Array)&&(((t0$9606=$9592$9601.length)),((t0$9606===3)&&(($9592$9601[0]==="IFX")&&($9592$9601[1]==="wide")))))){$9592$9601[2];return true;}else{$9592$9601;return false;}})],"wi_pfx":[(function($9621$9624){var t0$9640;var $9626$9635;var ph$9629;(ph$9629=$9621$9624);($9626$9635=ph$9629);if((($9626$9635 instanceof Array)&&(((t0$9640=$9626$9635.length)),((t0$9640===3)&&(($9626$9635[0]==="PFX")&&($9626$9635[1]==="wide")))))){$9626$9635[2];return true;}else{$9626$9635;return false;}})],"wi_sfx":[(function($9655$9658){var t0$9674;var $9660$9669;var ph$9663;(ph$9663=$9655$9658);($9660$9669=ph$9663);if((($9660$9669 instanceof Array)&&(((t0$9674=$9660$9669.length)),((t0$9674===3)&&(($9660$9669[0]==="SFX")&&($9660$9669[1]==="wide")))))){$9660$9669[2];return true;}else{$9660$9669;return false;}})],"comma":["X_,_Y"],"obrack":["(_Y","[_Y","{_Y"],"cbrack":["X_)","X_]","X_}"]}),__amp____colon__(((accum$9689=({})),((accum$9689["withp"]=["with Y"]),accum$9689)),__amp____colon__(((accum$9693=({})),((accum$9693["with"]=["X with Y"]),accum$9693)),__amp____colon__(({"lowprio":["X each Y","X each? Y","X where Y","X_!!_Y","X_->_Y","X_=>_Y","X_=_Y","X_:=_Y","X_+=_Y","X_-=_Y","X_*=_Y","X_/=_Y","X_<<=_Y","X_>>=_Y","X_>>>=_Y","X_++=_Y","X_?=_Y","X_or=_Y","X_and=_Y","X_each=_Y","X_%_Y"]}),__amp____colon__(((accum$9697=({})),((accum$9697["when"]=["X_when_Y"]),accum$9697)),__amp____colon__(((accum$9701=({})),((accum$9701["or"]=["X_or_Y"]),accum$9701)),__amp____colon__(((accum$9705=({})),((accum$9705["and"]=["X_and_Y"]),accum$9705)),__amp____colon__(((accum$9709=({})),((accum$9709["not"]=["not_Y"]),accum$9709)),({"type":["X_!_Y","X_?_Y"],"cmp":["X_==_Y","X_!=_Y","X_>=_Y","X_<=_Y","X_>_Y","X_<_Y"],"binxor":["X_^._Y"],"binor":["X_|._Y"],"binand":["X_&._Y"],"shift":["X_<<_Y","X_>>_Y","X_>>>_Y"],"add":["X_+_Y","X_-_Y"],"mul":["X_*_Y","X_/_Y","X_//_Y","X_mod_Y"],"exp":["X_**_Y"],"sjuxt":["XWHITEY"],"wjuxt":["X WHITE Y"],"colon":["X_:_Y"],"pfx":["._Y","#_Y","@_Y"],"when2":["when Y"],"pp":["<>_Y"],"pipe":["X_|>_Y"]})))))))))))),((eg_prio$9475=__amp____colon__(({"comma":[["all",1],["all",1]],"obrack":[["all",MAX$8248],["all",1]],"cbrack":[["all",1],["all",MAX$8248]]}),__amp____colon__(((accum$9721=({})),((accum$9721["with"]=[["all",1999],["all",10]]),accum$9721)),__amp____colon__(({"lowprio":[["all",11],["all",10]]}),__amp____colon__(((accum$9725=({})),((accum$9725["when"]=[["all",100],["all",101]]),accum$9725)),__amp____colon__(((accum$9729=({})),((accum$9729["or"]=[["all",110],["all",111]]),accum$9729)),__amp____colon__(((accum$9733=({})),((accum$9733["and"]=[["all",120],["all",121]]),accum$9733)),__amp____colon__(((accum$9737=({})),((accum$9737["not"]=[["all",MAX$8248],["all",131]]),accum$9737)),({"type":[["all",141],["all",140]],"cmp":[["all",200],["all",201]],"binxor":[["all",400],["all",401]],"binor":[["all",410],["all",411]],"binand":[["all",420],["all",421]],"shift":[["arith",500],["arith",501]],"add":[["arith",550],["arith",551]],"mul":[["arith",560],["arith",561]],"exp":[["arith",571],["arith",570]],"wjuxt":[["wjuxt",13],["all",12]],"colon":[["all",12],["all",10]],"sjuxt":[["all",2000],["all",2001]],"pfx":[["all",MAX$8248],["all",3000]],"pp":[["all",MAX$8248],["all",5]],"when2":[["all",MAX$8248],["all",101]],"withp":[["all",MAX$8248],["all",10]],"pipe":[["pipe",550],["pipe",551]],"sh_ifx":[["all",1800],["all",1801]],"sh_pfx":[["all",MAX$8248],["all",1901]],"sh_sfx":[["all",1900],["all",MAX$8248]],"wi_ifx":[["customl",900],["customr",901]],"wi_pfx":[["all",MAX$8248],["all",901]],"wi_sfx":[["all",900],["all",MAX$8248]]})))))))))),SimplePriority$8247(eg_groups$9474,eg_prio$9475)));(DONE$8250=-1);(NONE$8251=0);(LEFT$8252=1);(RIGHT$8253=2);(BOTH$8254=3);(oparse$8255=(function(next$9761,order$9762,finalize$9763){var between$9771;var right_op$9772;var stack$9773;var left_op$9774;var current$9775;(between$9771=finalize$9763(next$9761()));(right_op$9772=next$9761());(stack$9773=[]);(left_op$9774=null);(current$9775=null);$9776:while(true){var v$9829;var other$9891;var bridge$9801$9814;var $9796$9809;var o$9803;(o$9803=(function(){if(((!left_op$9774)&&(!right_op$9772))){return DONE$8250;}else{return ((((!left_op$9774)&&RIGHT$8253)||((!right_op$9772)&&LEFT$8252))||order$9762(left_op$9774,right_op$9772));}})());($9796$9809=o$9803);if(($9796$9809===DONE$8250)){return between$9771;}else{if(($9796$9809===LEFT$8252)){current$9775.push(between$9771);(between$9771=finalize$9763(current$9775));(v$9829=stack$9773.pop());(left_op$9774=v$9829[0]);(current$9775=v$9829[1]);}else{if(($9796$9809===RIGHT$8253)){stack$9773.push([left_op$9774,current$9775]);(left_op$9774=right_op$9772);(current$9775=[[right_op$9772],between$9771]);(between$9771=finalize$9763(next$9761()));(right_op$9772=next$9761());}else{(bridge$9801$9814=$9796$9809);if(((bridge$9801$9814===BOTH$8254)||(bridge$9801$9814===NONE$8251))){current$9775[0].push(right_op$9772);current$9775.push(between$9771);(left_op$9774=right_op$9772);(between$9771=finalize$9763(next$9761()));(right_op$9772=next$9761());if((o$9803===NONE$8251)){(current$9775["tainted"]=true);}}else{(other$9891=$9796$9809);throw ErrorFactory(["should_never_happen"]).create("undefined priority",({"left":left_op$9774,"right":right_op$9772}));}}}}}}));(finalize$8256=(function($9897$9900){var t0$9916;var $index$10027;var $length$10021;var temp$10015;var $index$10065;var $length$10059;var temp$10053;var $index$10131;var $length$10125;var temp$10119;var acc$10113;var other$10493;var args$10488;var f$10464;var orig_args$10465;var args$10466;var $10434$10447;var $10435$10448;var t0$10443;var t1$10444;var t2$10445;var $10428$10438;var inserted$10270;var result$10271;var t0$10505;var f$10532;var other$10613;var x$10602;var $10578$10589;var $10579$10590;var t0$10587;var $10574$10582;var result$10522;var f$10639;var oloc$10744;var abloc$10745;var oabloc$10746;var rval$10747;var a$10734;var b$10735;var $9987$10695;var $9988$10696;var $9989$10697;var $9990$10698;var t0$10688;var t1$10689;var t2$10690;var t3$10691;var t4$10692;var t5$10693;var $index$10794;var $length$10788;var temp$10782;var acc$10776;var op_strings$10767;var args$10768;var $9984$10684;var commas$10618;var commas$10497;var target$10230;var _b$10231;var body$10232;var f$10214;var body$10215;var f$10182;var arg$10183;var body$10184;var $9992$10173;var $9993$10174;var $9994$10175;var $9995$10176;var $9996$10177;var $9997$10178;var $9998$10179;var t0$10162;var t1$10163;var t2$10164;var t3$10165;var t4$10166;var t5$10167;var t6$10168;var t7$10169;var t8$10170;var bridge$9980$10171;var $9975$10157;var sumloc$9999;var orig_ops$10000;var op$10001;var other$10818;var ops$9966;var args$9967;var value$9957;var value$9952;var value$9947;var value$9937;var $9910$9932;var $9911$9933;var $9912$9934;var t0$9930;var $9902$9925;var ph$9913;var token$9914;(t0$9916=$9897$9900);(token$9914=t0$9916);(ph$9913=t0$9916);($9902$9925=ph$9913);if((($9910$9932=($9902$9925 instanceof Array))&&(((t0$9930=$9902$9925.length)),(($9912$9934=(t0$9930===2))&&($9902$9925[0]==="ID"))))){(value$9937=$9902$9925[1]);return __lt____lt____colon__$8240(["symbol",value$9937],token$9914);}else{if(($9912$9934&&($9902$9925[0]==="ILLEGAL"))){(value$9947=$9902$9925[1]);return __lt____lt____colon__$8240(["char",value$9947],token$9914);}else{if(($9912$9934&&($9902$9925[0]==="NUM"))){(value$9952=$9902$9925[1]);return __lt____lt____colon__$8240(["value",value$9952],token$9914);}else{if(($9912$9934&&($9902$9925[0]==="STR"))){(value$9957=$9902$9925[1]);return __lt____lt____colon__$8240(["value",value$9957],token$9914);}else{if(($9910$9932&&((t0$9930===1)&&($9902$9925[0]==="VOID")))){return __lt____lt____colon__$8240(["void"],token$9914);}else{if(($9910$9932&&(t0$9930>=1))){(ops$9966=$9902$9925[0]);(args$9967=Array.prototype.slice.call($9902$9925,1));(sumloc$9999=ops$9966[0].location);(temp$10015=ops$9966.slice(1));($length$10021=temp$10015.length);($index$10027=0);$10002:for(;($index$10027<$length$10021);($index$10027++)){var op$10044;var m$10036;(m$10036=temp$10015[$index$10027]);(op$10044=m$10036);(sumloc$9999=__plus____plus____colon__$8241(sumloc$9999,op$10044));}(temp$10053=args$9967);($length$10059=temp$10053.length);($index$10065=0);$10005:for(;($index$10065<$length$10059);($index$10065++)){var arg$10097;var t0$10079;var t1$10080;var m$10074;(m$10074=temp$10053[$index$10065]);(t0$10079=m$10074);if(((t0$10079 instanceof Array)&&(((t1$10080=t0$10079.length)),((t1$10080===1)&&(t0$10079[0]==="void"))))){undefined;}else{(arg$10097=m$10074);(sumloc$9999=__plus____plus____colon__$8241(sumloc$9999,arg$10097));}}(orig_ops$10000=ops$9966);(ops$9966=(((acc$10113=[])),(((temp$10119=ops$9966)),((($length$10125=temp$10119.length)),((($index$10131=0)),(function(){$10108:for(;($index$10131<$length$10125);($index$10131++)){var o$10148;var m$10140;(m$10140=temp$10119[$index$10131]);(o$10148=m$10140);acc$10113.push(o$10148[2]);}})()))),acc$10113));(op$10001=ops$9966[0]);($9975$10157=[ops$9966,args$9967]);if((($9992$10173=($9975$10157 instanceof Array))&&(((t0$10162=$9975$10157.length)),(($9994$10175=(t0$10162===2))&&(((t1$10163=$9975$10157[0])),(($9996$10177=(t1$10163 instanceof Array))&&(((t2$10164=t1$10163.length)),((t2$10164===2)&&((t1$10163[0]==="WHITE")&&((t1$10163[1]===":")&&(((t3$10165=$9975$10157[1])),((t3$10165 instanceof Array)&&(((t4$10166=t3$10165.length)),(t4$10166===3)))))))))))))){(f$10182=t3$10165[0]);(arg$10183=t3$10165[1]);(body$10184=t3$10165[2]);return __lt____lt____colon__$8240(["send",f$10182,__lt____lt____colon__$8240(["data",arg$10183,body$10184],__plus____plus____colon__$8241(arg$10183,body$10184))],sumloc$9999);}else{if(($9996$10177&&(($9998$10179=(t2$10164===1))&&((t1$10163[0]===":")&&(((t3$10165=$9975$10157[1])),((t3$10165 instanceof Array)&&(((t4$10166=t3$10165.length)),(t4$10166===2)))))))){(f$10214=t3$10165[0]);(body$10215=t3$10165[1]);return __lt____lt____colon__$8240(["send",f$10214,__lt____lt____colon__$8240(["data",body$10215],body$10215)],sumloc$9999);}else{if(($9998$10179&&((t1$10163[0]==="with")&&(((t3$10165=$9975$10157[1])),((t3$10165 instanceof Array)&&(((t4$10166=t3$10165.length)),((t4$10166===2)&&((target$10230=t3$10165[0]),(((t5$10167=t3$10165[1])),((_b$10231=t5$10167),(((t6$10168=getProjector(Body$8243)(t5$10167))),(t6$10168[0]&&(((t7$10169=t6$10168[1])),(((t8$10170=t7$10169.length)),(t8$10170>=0))))))))))))))){(body$10232=Array.prototype.slice.call(t7$10169,0));(inserted$10270=false);(result$10271=transform$8244(target$10230,(function($10278$10281){var t0$10290;var $index$10386;var $length$10380;var temp$10374;var tr$10359;var res$10360;var args$10348;var x$10324;var f$10325;var a$10326;var b$10327;var t0$10304;var t1$10305;var t2$10306;var $10283$10299;var ph$10287;var expr$10288;(t0$10290=$10278$10281);(expr$10288=t0$10290);(ph$10287=t0$10290);($10283$10299=ph$10287);if((($10283$10299 instanceof Array)&&(((t0$10304=$10283$10299.length)),((t0$10304===2)&&(($10283$10299[0]==="symbol")&&($10283$10299[1]==="...")))))){(inserted$10270=true);return __lt____lt____colon__$8240(["multi"].concat(body$10232),_b$10231);}else{(x$10324=$10283$10299);if((x$10324.fromop&&(($10283$10299 instanceof Array)&&(((t0$10304=$10283$10299.length)),((t0$10304===3)&&(($10283$10299[0]==="send")&&((f$10325=$10283$10299[1]),(((t1$10305=$10283$10299[2])),((t1$10305 instanceof Array)&&(((t2$10306=t1$10305.length)),((t2$10306===3)&&(t1$10305[0]==="data")))))))))))){(a$10326=t1$10305[1]);(b$10327=t1$10305[2]);return ["send",this(f$10325),__lt____lt____colon__$8240(["data",this(a$10326),this(b$10327)],__plus____plus____colon__$8241(a$10326,b$10327))];}else{if((($10283$10299 instanceof Array)&&(((t0$10304=$10283$10299.length)),((t0$10304>=1)&&($10283$10299[0]==="data"))))){(args$10348=Array.prototype.slice.call($10283$10299,1));(tr$10359=this);(res$10360=["data"]);(temp$10374=args$10348);($length$10380=temp$10374.length);($index$10386=0);$10361:for(;($index$10386<$length$10380);($index$10386++)){var other$10423;var t0$10400;var t1$10401;var m$10395;(m$10395=temp$10374[$index$10386]);(t0$10400=m$10395);if(((t0$10400 instanceof Array)&&(((t1$10401=t0$10400.length)),((t1$10401===2)&&((t0$10400[0]==="symbol")&&(t0$10400[1]==="...")))))){(inserted$10270=true);(res$10360=res$10360.concat(body$10232));}else{(other$10423=m$10395);res$10360.push(__lt____lt____colon__$8240(tr$10359(other$10423),other$10423));}}return __lt____lt____colon__$8240(res$10360,expr$10288);}else{___match_error($10283$10299);}}}})));if((!inserted$10270)){($10428$10438=target$10230);if((($10428$10438 instanceof Array)&&(((t0$10443=$10428$10438.length)),((t0$10443===1)&&($10428$10438[0]==="void"))))){return __lt____lt____colon__$8240(["data"].concat(body$10232),sumloc$9999);}else{$10428$10438;if(target$10230.fromop){return __lt____lt____colon__$8240(["send",target$10230,__lt____lt____colon__$8240(["data"].concat(body$10232),_b$10231)],sumloc$9999);}else{if((($10434$10447=($10428$10438 instanceof Array))&&(((t0$10443=$10428$10438.length)),((t0$10443===3)&&(($10428$10438[0]==="send")&&((f$10464=$10428$10438[1]),(((t1$10444=$10428$10438[2])),((orig_args$10465=t1$10444),((t1$10444 instanceof Array)&&(((t2$10445=t1$10444.length)),((t2$10445>=1)&&(t1$10444[0]==="data")))))))))))){(args$10466=Array.prototype.slice.call(t1$10444,1));return __lt____lt____colon__$8240(["send",f$10464,__lt____lt____colon__$8240(["data"].concat(args$10466).concat(body$10232),__plus____plus____colon__$8241(orig_args$10465,_b$10231))],sumloc$9999);}else{if(($10434$10447&&((t0$10443>=1)&&($10428$10438[0]==="data")))){(args$10488=Array.prototype.slice.call($10428$10438,1));return __lt____lt____colon__$8240(target$10230.concat(body$10232),sumloc$9999);}else{(other$10493=$10428$10438);return __lt____lt____colon__$8240(["send",target$10230,__lt____lt____colon__$8240(["data"].concat(body$10232),_b$10231)],sumloc$9999);}}}}}else{return __lt____lt____colon__$8240(result$10271,sumloc$9999);}}else{if(($9994$10175&&(((bridge$9980$10171=$9975$10157[0])),((((bridge$9980$10171 instanceof Array)&&(((t0$10505=bridge$9980$10171.length)),((t0$10505>=2)&&((bridge$9980$10171[0]==="[")&&((commas$10497=Array.prototype.slice.call(bridge$9980$10171,1,-1)),(bridge$9980$10171[(t0$10505-1)]==="]"))))))||((commas$10497=bridge$9980$10171),true))&&($9975$10157[1],commas$10497.every((function(x$10516){return equal(x$10516,",");}))))))){if((op$10001==="[")){(args$9967=args$9967.slice(1,-1));}(args$9967=(((f$10532=(function($10536$10539){var other$10568;var t0$10555;var $10541$10550;var ph$10544;(ph$10544=$10536$10539);($10541$10550=ph$10544);if((($10541$10550 instanceof Array)&&(((t0$10555=$10541$10550.length)),((t0$10555===1)&&($10541$10550[0]==="void"))))){return false;}else{(other$10568=$10541$10550);return true;}}))),args$9967.filter(f$10532)));(result$10522=((($10574$10582=args$9967)),(function(){if((($10578$10589=($10574$10582 instanceof Array))&&(((t0$10587=$10574$10582.length)),(t0$10587===0)))){return ["multi"];}else{if(($10578$10589&&(t0$10587===1))){(x$10602=$10574$10582[0]);if(((!isNaN(sumloc$9999.start))&&(!isNaN(sumloc$9999.end)))){(x$10602["location"]=sumloc$9999);}return x$10602;}else{(other$10613=$10574$10582);return ["multi"].concat(args$9967);}}})()));return __lt____lt____colon__$8240(result$10522,sumloc$9999);}else{if(($9994$10175&&(((t1$10163=$9975$10157[0])),(($9996$10177=(t1$10163 instanceof Array))&&(((t2$10164=t1$10163.length)),((t2$10164>=2)&&((t1$10163[0]==="{")&&((commas$10618=Array.prototype.slice.call(t1$10163,1,-1)),((t1$10163[(t2$10164-1)]==="}")&&($9975$10157[1],commas$10618.every((function(x$10634){return equal(x$10634,",");})))))))))))){(f$10639=(function($10643$10646){var other$10675;var t0$10662;var $10648$10657;var ph$10651;(ph$10651=$10643$10646);($10648$10657=ph$10651);if((($10648$10657 instanceof Array)&&(((t0$10662=$10648$10657.length)),((t0$10662===1)&&($10648$10657[0]==="void"))))){return false;}else{(other$10675=$10648$10657);return true;}}));return __lt____lt____colon__$8240(["data"].concat(args$9967.slice(1,-1).filter(f$10639)),sumloc$9999);}else{if(($9996$10177&&(($9998$10179=(t2$10164===1))&&(t1$10163[0]==="WHITE")))){$9975$10157[1];return __lt____lt____colon__$8240(["send"].concat(args$9967),sumloc$9999);}else{if($9998$10179){t1$10163[0];($9984$10684=$9975$10157[1]);(t0$10688=$9984$10684);if((($9988$10696=(t0$10688 instanceof Array))&&(((t1$10689=t0$10688.length)),(($9990$10698=(t1$10689===2))&&(((t2$10690=t0$10688[0])),((t2$10690 instanceof Array)&&(((t3$10691=t2$10690.length)),((t3$10691===1)&&((t2$10690[0]==="void")&&(((t4$10692=t0$10688[1])),((t4$10692 instanceof Array)&&(((t5$10693=t4$10692.length)),((t5$10693===1)&&(t4$10692[0]==="void")))))))))))))){return __lt____lt____colon__$8240(["symbol",op$10001],orig_ops$10000[0]);}else{if($9990$10698){(a$10734=t0$10688[0]);(b$10735=t0$10688[1]);(oloc$10744=orig_ops$10000[0].location);(abloc$10745=__plus____plus____colon__$8241(a$10734,b$10735));(oabloc$10746=__plus____plus____colon__$8241(orig_ops$10000[0],abloc$10745));(rval$10747=__lt____lt____colon__$8240(["send",__lt____lt____colon__$8240(["symbol",op$10001],oloc$10744),__lt____lt____colon__$8240(["data",a$10734,b$10735],abloc$10745)],__plus____plus____colon__$8241(oloc$10744,abloc$10745)));(rval$10747["fromop"]=true);return rval$10747;}else{___match_error($9984$10684,"/home/olivier/git/eg/src/parse.eg",17814,17819);}}}else{if($9994$10175){(op_strings$10767=$9975$10157[0]);(args$10768=$9975$10157[1]);return __lt____lt____colon__$8240(["mismix",(((acc$10776=[])),(((temp$10782=orig_ops$10000)),((($length$10788=temp$10782.length)),((($index$10794=0)),(function(){$10771:for(;($index$10794<$length$10788);($index$10794++)){var op$10811;var m$10803;(m$10803=temp$10782[$index$10794]);(op$10811=m$10803);acc$10776.push(__lt____lt____colon__$8240(["symbol",op$10811[2]],op$10811));}})()))),acc$10776)].concat(args$10768),sumloc$9999);}else{___match_error($9975$10157);}}}}}}}}}else{(other$10818=$9902$9925);throw ErrorFactory(["should_never_happen"]).create("unknown node (B)",({"node":token$9914}));}}}}}}}));(parse$8257=(function(tokens$10825){var next$10829;(next$10829=(function(){return tokens$10825.shift();}));return oparse$8255(next$10829,eg_order$8249.compare.bind(eg_order$8249),finalize$8256);}));(exports["OperatorGroups"]=OperatorGroups$8245);(exports["SimplePriority"]=SimplePriority$8247);(exports["parse"]=parse$8257);(exports["oparse"]=oparse$8255);(exports["finalize"]=finalize$8256);(exports["DONE"]=DONE$8250);(exports["NONE"]=NONE$8251);(exports["LEFT"]=LEFT$8252);(exports["RIGHT"]=RIGHT$8253);(exports["BOTH"]=BOTH$8254);
