var send=function(obj,msg){var __t111=msg;var other;if(((typeof(__t111)==="string")||(typeof(__t111)==="number"))){return obj[msg];}else{if(((other=__t111),true)){return obj["::send"](msg);}else{throw ["Could not find a match",__t111];}}};(Function.prototype["::send"]=function(args){return this.apply(this,args);});var augment=function(dest,values){for(k in values){(dest[k]=send(values,k));}return dest;};var patch_array=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};var range=function(from,to){var rval=[];for(var i=from;(i<=to);(i++)){rval.push(i);}return rval;};var StructFactory=function(name){var make=function(){var r=Array.prototype.slice.call(arguments,0);(r["#"]=name);return r;};(make[":::project"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return [true,value];}else{if(true){return [true,make(value)];}else{return false;}}});(make["::check"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return true;}else{if(true){return false;}else{return false;}}});(make[":::deconstruct"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return [true,value.slice(0)];}else{if(true){return [false,false];}else{return false;}}});return make;};var Struct=function(name){var r=Array.prototype.slice.call(arguments,1);(r["#"]=name);return r;};(Struct["::check"]=function(value){if((value instanceof Array)){return (value["#"]!==undefined);}else{if(true){return false;}else{return false;}}});(Struct[":::deconstruct"]=function(value){if(((value instanceof Array)&&(value["#"]!==undefined))){return [true,[value["#"]].concat(value.slice(0))];}else{if(true){return [false,null];}else{return false;}}});var pr_terminus=function(node){var r=HTML(node,"span");var pre=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">");var post=("</div>"+String.fromCharCode(7));return console.log(((pre+r)+post));};var pr=function(__t112,r){var __t113=__t112;var n;var x;if((___checker(Node)(__t113)&&((n=__t113),true))){return pr_terminus(n);}else{if(((x=__t113),true)){return pr_terminus((r||repr)(x));}else{throw ["Could not find a match",__t113];}}};var repr=function(__t115,__t116){var x;var __t114;(x=__t115);true;(__t114=__t115);var recur;var recur;if(((___checker(Function)(__t116)&&((recur=__t116),true))||((recur=repr),true))){(void 0);}else{throw "a condition failed";}var __t117=__t114;var __tp0;var __tp1;var __tp2;var tag;var entries;var entries;var other;if((__t117===true)){return Node(["special","true"],"true");}else{if((__t117===false)){return Node(["special","false"],"false");}else{if((__t117===null)){return Node(["special","nil"],"null");}else{if((__t117===(void 0))){return Node(["special","nil"],"undefined");}else{if((typeof(__t117)==="number")){return Node(["num"],String(x));}else{if((typeof(__t117)==="string")){return Node(["str"],x);}else{if((___checker(Struct)(__t117)&&(((__tp0=___deconstructor(Struct)(__t117)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2>=1)&&((tag=__tp1[0]),true,(entries=__tp1.slice(1)),true)))))){return Node(["struct"],[Node(["sym"],tag),Node(["sequence"],function(){var __t118=[];var __t119=entries;var __t120=__t119.length;for(var __t121=0;(__t121<__t120);(__t121++)){var __t122=__t119[__t121];var x;var other;if(((x=__t122),true)){__t118.push(recur(x,repr));}else{if(((other=__t122),true)){false;}else{throw ["Could not find a match",__t122];}}}return __t118;}())]);}else{if((___checker(Array)(__t117)&&((entries=__t117),true))){return Node(["sequence"],function(){var __t123=[];var __t124=entries;var __t125=__t124.length;for(var __t126=0;(__t126<__t125);(__t126++)){var __t127=__t124[__t126];var x;var other;if(((x=__t127),true)){__t123.push(recur(x,repr));}else{if(((other=__t127),true)){false;}else{throw ["Could not find a match",__t127];}}}return __t123;}());}else{if(x["::repr"]){return x["::repr"](recur);}else{if((Object.getPrototypeOf(x)===Object.prototype)){return Node(["table"],function(){var __t128=[];var __t129=items(x);var __t130=__t129.length;for(var __t131=0;(__t131<__t130);(__t131++)){var __t132=__t129[__t131];var __tp0;var k;var v;var other;if(((__t132 instanceof Array)&&((__t132["#"]===undefined)&&(((__tp0=__t132.length),true)&&((__tp0===2)&&((k=__t132[0]),true,(v=__t132[1]),true)))))){__t128.push(Node(["pairing"],[recur(k,repr),recur(v,repr)]));}else{if(((other=__t132),true)){false;}else{throw ["Could not find a match",__t132];}}}return __t128;}());}else{if(((other=__t117),true)){return Node(["unknown"],other.toString());}else{throw ["Could not find a match",__t117];}}}}}}}}}}}};var ___checker=function(type){var __t133=type["::check"];var f;if((__t133===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=__t133),true)){return function(value){return f.call(type,value);};}else{throw ["Could not find a match",__t133];}}};var checker=___checker;var ___projector=function(type){return function(value){var __t134=type[":::project"];var f;if((__t134===(void 0))){var __t135=type["::project"];var f;if((__t135===(void 0))){return [true,type(value)];}else{if(((f=__t135),true)){var __t137;try{(__t137=[true,f(value)]);}catch(__t136){(__t137=[false,null]);}return __t137;}else{throw ["Could not find a match",__t135];}}}else{if(((f=__t134),true)){return f.call(type,value);}else{throw ["Could not find a match",__t134];}}};};var projector=___projector;var ___deconstructor=function(type){return function(value){var __t138=type[":::deconstruct"];var f;if((__t138===(void 0))){var __t139=type["::deconstruct"];var f;if((__t139===(void 0))){if((value instanceof Array)){return [true,value];}else{if(true){return [false,null];}else{return false;}}}else{if(((f=__t139),true)){var __t141;try{(__t141=[true,f.call(type,value)]);}catch(__t140){(__t141=[false,null]);}return __t141;}else{throw ["Could not find a match",__t139];}}}else{if(((f=__t138),true)){return f.call(type,value);}else{throw ["Could not find a match",__t138];}}};};var deconstructor=___deconstructor;(Array[":::project"]=function(value){var __t142=value;var _;if(___checker(Array)(__t142)){return [true,value];}else{if(((_=__t142),true)){return [true,[value]];}else{throw ["Could not find a match",__t142];}}});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var __t143=value.match(this);var m;var m;if(((__t143===null)&&((m=__t143),true))){return [false,null];}else{if(((m=__t143),true)){return [true,m];}else{throw ["Could not find a match",__t143];}}});(RegExp.prototype[":::deconstruct"]=function(value){var __t144=value.match(this);var m;var m;if(((__t144===null)&&((m=__t144),true))){return [false,null];}else{if(((m=__t144),true)){return [true,m];}else{throw ["Could not find a match",__t144];}}});var Node=function(__t99,__t100){var __tp0;var classes;if((((__tp0=___projector(Array)(__t99)),__tp0[0])&&((classes=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var __tp0;var children;if((((__tp0=___projector(Array)(__t100)),__tp0[0])&&((children=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var __t98=function(){if((!___checker(Node)(this))){return Object.create(Node.prototype);}else{return this;}}();(__t98["classes"]=classes.sort());(__t98["children"]=children);return __t98;};augment(Node,({"::check":function(x){return ((x&&x.classes)&&x.children);},"::deconstruct":function(x){return [x.classes,x.children];}}));(Node.prototype["::check"]=function(n){var __t98=this;var __t101=__t98.classes;var __t102=__t101.length;for(var __t103=0;(__t103<__t102);(__t103++)){var __t104=__t101[__t103];var c;var other;if(((c=__t104),true,(n.classes.indexOf(c)===(-1)))){return false;}else{if(((other=__t104),true)){false;}else{throw ["Could not find a match",__t104];}}}false;return true;});Node;var escape_html=function(__t145){var __tp0;var s;if((((__tp0=[true,String(__t145)]),__tp0[0])&&((s=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var repl=({"&":"&amp;","<":"&lt;",">":"&gt;"});return s.replace(RegExp("[&<>]","g"),function(x){return send(repl,x);});};var quotify=function(__t146){var __tp0;var s;if((((__tp0=[true,String(__t146)]),__tp0[0])&&((s=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}return s.replace(RegExp("[\"\\\\]","g"),function(x){return ("\\"+x);});};var HTML=function(__t147,default_tag){var __t148=__t147;var s;var children;var __tp0;var __tp1;var __tp2;var tags;var children;var other;if(((typeof(__t148)==="string")&&((s=__t148),true))){return escape_html(s);}else{if((___checker(Array)(__t148)&&((children=__t148),true))){return function(){var __t149=[];var __t150=children;var __t151=__t150.length;for(var __t152=0;(__t152<__t151);(__t152++)){var __t153=__t150[__t152];var child;var other;if(((child=__t153),true)){__t149.push(HTML(child,default_tag));}else{if(((other=__t153),true)){false;}else{throw ["Could not find a match",__t153];}}}return __t149;}().join("");}else{if((___checker(Node)(__t148)&&(((__tp0=___deconstructor(Node)(__t148)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2===2)&&((tags=__tp1[0]),true,(children=__tp1[1]),true)))))){var tag=(default_tag||"span");var classes=[];var id=null;var kv=[];var sub=[];var __t154=tags;var __t155=__t154.length;for(var __t156=0;(__t156<__t155);(__t156++)){var __t158=__t154[__t156];var __tp0;var __tp1;var __tp2;var k;var v;var __tp0;var __tp1;var __tp2;var k;var __tp0;var __tp1;var __tp2;var _;var m;var __tp0;var __tp1;var __tp2;var _;var m;var s;var other;var __t159=false;var __t160=false;var __t161=false;if(((__t159=(__t158["#"]==="assoc"))&&((__t160=((__tp0=[true,__t158]),__tp0[0]))&&((__t161=((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true))&&((__tp2===2)&&((k=__tp1[0]),true,(v=__tp1[1]),true)))))){kv.push([k,v]);}else{if((__t161&&((__tp2===1)&&((k=__tp1[0]),true)))){kv.push([k,undefined]);}else{if((___checker(RegExp("(?:^\\+((?:.*)))",""))(__t158)&&(((__tp0=___deconstructor(RegExp("(?:^\\+((?:.*)))",""))(__t158)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2===2)&&((_=__tp1[0]),true,(m=__tp1[1]),true)))))){(tag=m);}else{if((___checker(RegExp("(?:^#((?:.*)))",""))(__t158)&&(((__tp0=___deconstructor(RegExp("(?:^#((?:.*)))",""))(__t158)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2===2)&&((_=__tp1[0]),true,(m=__tp1[1]),true)))))){(id=m);}else{if(((typeof(__t158)==="string")&&((s=__t158),true))){classes.push(s);}else{if(((other=__t158),true)){false;}else{throw ["Could not find a match",__t158];}}}}}}}false;var accum=function(){if((tag==="raw")){return [];}else{return ["<",tag];}}();if(id){(accum=accum.concat(" id=\"",id,"\""));}else{false;}if(classes.length){(accum=accum.concat(" class=\"",quotify(classes.join(" ")),"\""));}else{false;}if(kv){var __t162=[];var __t163=kv;var __t164=__t163.length;for(var __t165=0;(__t165<__t164);(__t165++)){var __t166=__t163[__t165];var __tp0;var k;var v;var other;if(((__t166 instanceof Array)&&((__t166["#"]===undefined)&&(((__tp0=__t166.length),true)&&((__tp0===2)&&((k=__t166[0]),true,(v=__t166[1]),true)))))){__t162.push((accum=accum.concat(function(){if((v!==null)){return [" ",k,"=\"",quotify(v),"\""];}else{return [" ",k];}}())));}else{if(((other=__t166),true)){false;}else{throw ["Could not find a match",__t166];}}}__t162;}else{false;}(children=function(){var __t167=tag;var other;if((__t167==="raw")){var __t168=[];var __t169=children;var __t170=__t169.length;for(var __t171=0;(__t171<__t170);(__t171++)){var __t172=__t169[__t171];var s;var c;var other;if(((typeof(__t172)==="string")&&((s=__t172),true))){__t168.push(s);}else{if(((c=__t172),true)){__t168.push(HTML(c,default_tag));}else{if(((other=__t172),true)){false;}else{throw ["Could not find a match",__t172];}}}}return __t168;}else{if(((other=__t167),true)){var __t173=[];var __t174=children;var __t175=__t174.length;for(var __t176=0;(__t176<__t175);(__t176++)){var __t177=__t174[__t176];var c;var other;if(((c=__t177),true)){__t173.push(HTML(c,default_tag));}else{if(((other=__t177),true)){false;}else{throw ["Could not find a match",__t177];}}}return __t173;}else{throw ["Could not find a match",__t167];}}}());var __t157=tag;var other;if((__t157==="raw")){return accum.concat(children).join("");}else{if(((other=__t157),true)){var x=patch_array([">"],children,["</",tag,">"]);return accum.concat(x).join("");}else{throw ["Could not find a match",__t157];}}}else{if(((other=__t148),true)){return HTML([true,String(other)][1],default_tag);}else{throw ["Could not find a match",__t148];}}}}};var ErrorFactory=function(tags){var __t105=function(){if((!___checker(ErrorFactory)(this))){return Object.create(ErrorFactory.prototype);}else{return this;}}();(__t105["tags"]=tags);return __t105;};augment(ErrorFactory,[]);(ErrorFactory.prototype["create"]=function(){var __t106=Array.prototype.slice.call(arguments,0);var __tp0;var message;var args;if(((__t106 instanceof Array)&&((__t106["#"]===undefined)&&(((__tp0=__t106.length),true)&&((__tp0>=0)&&((message=function(){if((0>=__tp0)){return "";}else{return __t106[0];}}()),true,(args=__t106.slice(1)),true)))))){var __t105=this;var e=Error(message);(e["::tags"]=__t105.tags);(e["args"]=args);(e["name"]=["E"].concat(__t105.tags).join("."));return e;}else{throw ["Could not find a match",__t106];}});(ErrorFactory.prototype["::check"]=function(e){var __t105=this;if(((!e)||(!___checker(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var __t107=__t105.tags;var __t108=__t107.length;for(var __t109=0;(__t109<__t108);(__t109++)){var __t110=__t107[__t109];var tag;var other;if(((tag=__t110),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=__t110),true)){false;}else{throw ["Could not find a match",__t110];}}}false;return true;});(ErrorFactory.prototype["::deconstruct"]=function(e){var __t105=this;return e.args;});ErrorFactory;
var __t383=require("./expand");var Env=__t383.Env;var nullenv=__t383.nullenv;var expand=__t383.expand;var __t384=require("./helpers");var aslist=__t384.aslist;var transform=__t384.transform;var __t385=require("./util");var enumerate=__t385.enumerate;var stdenv=Env(nullenv);stdenv.register("+",["symbol","___plus"]);stdenv.register("-",["symbol","___minus"]);stdenv.register("*",["symbol","___times"]);stdenv.register("/",["symbol","___div"]);stdenv.register("mod",["symbol","___mod"]);stdenv.register("^",["symbol","___binxor"]);stdenv.register("&",["symbol","___binand"]);stdenv.register("|",["symbol","___binor"]);stdenv.register("&&",["symbol","___and"]);stdenv.register("||",["symbol","___or"]);stdenv.register("and",["symbol","___and"]);stdenv.register("or",["symbol","___or"]);stdenv.register("not",["symbol","___not"]);stdenv.register("===",["symbol","___is"]);stdenv.register("!==",["symbol","___isnt"]);stdenv.register("!=",["symbol","___neq"]);stdenv.register("<",["symbol","___lt"]);stdenv.register(">",["symbol","___gt"]);stdenv.register("<=",["symbol","___lte"]);stdenv.register(">=",["symbol","___gte"]);stdenv.register("<<",["symbol","___shl"]);stdenv.register(">>",["symbol","___shr"]);stdenv.register(">>>",["symbol","___shr2"]);stdenv.register("in",["symbol","___in"]);stdenv.register("instanceof",["symbol","___instanceof"]);stdenv.register("--",["symbol","___minusminus"]);stdenv.register_macro("++",function(_,__t386){var __t387=__t386;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var x;var __tp0;var __tp1;var x;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var x;var y;var __tp0;var __tp1;var __t388=false;var __t389=false;var __t390=false;var __t391=false;var __t392=false;if(((__t388=(__t387 instanceof Array))&&((__t389=(__t387["#"]===undefined))&&((__t390=((__tp0=__t387.length),true))&&((__t391=(__tp0===3))&&((__t392=((__tp1=__t387[0]),(__tp1==="data")))&&(((__tp2=__t387[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((x=__t387[2]),true)))))))))))){return ["send",["symbol","___plusplus"],["data",["void"],x]];}else{if((__t392&&(((x=__t387[1]),true,(__tp2=__t387[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))){return ["send",["symbol","___plusplus"],["data",x,["void"]]];}else{if((__t392&&((x=__t387[1]),true,(y=__t387[2]),true))){return ["send",["send",x,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",y]];}else{if((__t390&&((__tp0===1)&&((__tp1=__t387[0]),(__tp1==="void"))))){return ["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","y"]]]]];}else{throw ["Could not find a match",__t387];}}}}});stdenv.register_macro("..",function(_,__t393){var __t394=__t393;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var x;var __tp0;var __tp1;var x;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var x;var y;var __tp0;var __tp1;var __t395=false;var __t396=false;var __t397=false;var __t398=false;var __t399=false;if(((__t395=(__t394 instanceof Array))&&((__t396=(__t394["#"]===undefined))&&((__t397=((__tp0=__t394.length),true))&&((__t398=(__tp0===3))&&((__t399=((__tp1=__t394[0]),(__tp1==="data")))&&(((__tp2=__t394[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((x=__t394[2]),true)))))))))))){return ["send",["symbol","range"],["data",["value",1],x]];}else{if((__t399&&(((x=__t394[1]),true,(__tp2=__t394[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))){return ["send",["symbol","range"],["data",x]];}else{if((__t399&&((x=__t394[1]),true,(y=__t394[2]),true))){return ["send",["symbol","range"],["data",x,y]];}else{if((__t397&&((__tp0===1)&&((__tp1=__t394[0]),(__tp1==="void"))))){return ["symbol","range"];}else{throw ["Could not find a match",__t394];}}}}});var make_checker=function(value,op){return function(__t400,__t401){var __tp0;var context;var env;if(((__t400 instanceof Array)&&((__t400["#"]===undefined)&&(((__tp0=__t400.length),true)&&((__tp0===2)&&((context=__t400[0]),true,(env=__t400[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;if(((__t401 instanceof Array)&&((__t401["#"]===undefined)&&(((__tp0=__t401.length),true)&&((__tp0===2)&&(((__tp1=__t401[0]),(__tp1==="data"))&&((expr=__t401[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",op,["data",expr,value]];};};stdenv.register_macro("**",function(__t402,__t403){var __tp0;var context;var env;if(((__t402 instanceof Array)&&((__t402["#"]===undefined)&&(((__tp0=__t402.length),true)&&((__tp0===2)&&((context=__t402[0]),true,(env=__t402[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t403 instanceof Array)&&((__t403["#"]===undefined)&&(((__tp0=__t403.length),true)&&((__tp0===3)&&(((__tp1=__t403[0]),(__tp1==="data"))&&((a=__t403[1]),true,(b=__t403[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]],["data",a,b]];});stdenv.register_macro("//",function(__t404,__t405){var __tp0;var context;var env;if(((__t404 instanceof Array)&&((__t404["#"]===undefined)&&(((__tp0=__t404.length),true)&&((__tp0===2)&&((context=__t404[0]),true,(env=__t404[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t405 instanceof Array)&&((__t405["#"]===undefined)&&(((__tp0=__t405.length),true)&&((__tp0===3)&&(((__tp1=__t405[0]),(__tp1==="data"))&&((a=__t405[1]),true,(b=__t405[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","floor"]]]],["data",["send",["symbol","/"],["data",a,b]]]];});stdenv.register_macro("<>",function(__t406,__t407){var __tp0;var context;var env;if(((__t406 instanceof Array)&&((__t406["#"]===undefined)&&(((__tp0=__t406.length),true)&&((__tp0===2)&&((context=__t406[0]),true,(env=__t406[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var x;if(((__t407 instanceof Array)&&((__t407["#"]===undefined)&&(((__tp0=__t407.length),true)&&((__tp0===3)&&(((__tp1=__t407[0]),(__tp1==="data"))&&(((__tp2=__t407[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((x=__t407[2]),true)))))))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","pr"],["data",x]];});var errf_macro=function(tags){return function(__t409,__t408){var __tp0;var context;var env;if(((__t409 instanceof Array)&&((__t409["#"]===undefined)&&(((__tp0=__t409.length),true)&&((__tp0===2)&&((context=__t409[0]),true,(env=__t409[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t410=__t408;var __tp0;var __tp1;var __tp0;var __tp1;var args;var other;var __t411=false;var __t412=false;var __t413=false;if(((__t411=(__t410 instanceof Array))&&((__t412=(__t410["#"]===undefined))&&((__t413=((__tp0=__t410.length),true))&&((__tp0===1)&&((__tp1=__t410[0]),(__tp1==="void"))))))){return ["send",["symbol","ErrorFactory"],["data",patch_array(["data"],tags)]];}else{if((__t413&&((__tp0>=1)&&(((__tp1=__t410[0]),(__tp1==="data"))&&((args=__t410.slice(1)),true))))){return ["send",["send",["send",["symbol","ErrorFactory"],["data",patch_array(["data"],tags)]],["send",["symbol","."],["data",["void"],["symbol","create"]]]],patch_array(["data"],args)];}else{if(((other=__t410),true)){return ["macro",errf_macro(tags.concat([other]))];}else{throw ["Could not find a match",__t410];}}}};};stdenv.register_macro("E",errf_macro([]));stdenv.register_macro("#",function(__t414,__t415){var __tp0;var context;var env;if(((__t414 instanceof Array)&&((__t414["#"]===undefined)&&(((__tp0=__t414.length),true)&&((__tp0===2)&&((context=__t414[0]),true,(env=__t414[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var tag;if(((__t415 instanceof Array)&&((__t415["#"]===undefined)&&(((__tp0=__t415.length),true)&&((__tp0===3)&&(((__tp1=__t415[0]),(__tp1==="data"))&&(((__tp2=__t415[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&(((__tp5=__t415[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((tag=__tp5[1]),true))))))))))))))))){(void 0);}else{throw "a condition failed";}(tag=["value",tag]);return ["macro",function(__t417,expr){var __tp0;var __t416;var env;if(((__t417 instanceof Array)&&((__t417["#"]===undefined)&&(((__tp0=__t417.length),true)&&((__tp0===2)&&((__t416=__t417[0]),true,(env=__t417[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t418=__t416;var _;if((__t418==="pattern")){var checker_mac=["macro",function(_,__t423){var __tp0;var __tp1;var expr;if(((__t423 instanceof Array)&&((__t423["#"]===undefined)&&(((__tp0=__t423.length),true)&&((__tp0===2)&&(((__tp1=__t423[0]),(__tp1==="data"))&&((expr=__t423[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",expr,["value","#"]],tag]];}];var __t419=expr;var __tp0;var __tp1;var subp;var __tp0;var __tp1;var other;var __t420=false;var __t421=false;var __t422=false;if(((__t420=(__t419 instanceof Array))&&((__t421=(__t419["#"]===undefined))&&((__t422=((__tp0=__t419.length),true))&&((__tp0>=1)&&(((__tp1=__t419[0]),(__tp1==="data"))&&((subp=__t419.slice(1)),true))))))){var deconstructor_mac=["macro",function(_,expr){return ["data",["value",true],expr[1]];}];return ["check",checker_mac,["project",deconstructor_mac,patch_array(["duck",0],subp)]];}else{if((__t422&&((__tp0===1)&&((__tp1=__t419[0]),(__tp1==="void"))))){return ["check",checker_mac,["ignore"]];}else{if(((other=__t419),true)){return ["check",checker_mac,expr];}else{throw ["Could not find a match",__t419];}}}}else{if(((_=__t418),true)){var __t424=expr;var __tp0;var __tp1;var __tp0;var __tp1;var args;var other;var __t425=false;var __t426=false;var __t427=false;if(((__t425=(__t424 instanceof Array))&&((__t426=(__t424["#"]===undefined))&&((__t427=((__tp0=__t424.length),true))&&((__tp0===1)&&((__tp1=__t424[0]),(__tp1==="void"))))))){return ["send",["symbol","StructFactory"],["data",tag]];}else{if((__t427&&((__tp0>=1)&&(((__tp1=__t424[0]),(__tp1==="data"))&&((args=__t424.slice(1)),true))))){return ["send",["symbol","Struct"],patch_array(["data",tag],args)];}else{if(((other=__t424),true)){return ["send",["send",["symbol","StructFactory"],["data",tag]],other];}else{throw ["Could not find a match",__t424];}}}}else{throw ["Could not find a match",__t418];}}}];});stdenv.register_macro("~",function(__t428,__t429){var __tp0;var context;var env;if(((__t428 instanceof Array)&&((__t428["#"]===undefined)&&(((__tp0=__t428.length),true)&&((__tp0===2)&&((context=__t428[0]),true,(env=__t428[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var tag;if(((__t429 instanceof Array)&&((__t429["#"]===undefined)&&(((__tp0=__t429.length),true)&&((__tp0===3)&&(((__tp1=__t429[0]),(__tp1==="data"))&&(((__tp2=__t429[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&(((__tp5=__t429[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((tag=__tp5[1]),true))))))))))))))))){(void 0);}else{throw "a condition failed";}(tag=["value",tag]);var f=function(__t431,expr){var __tp0;var __t430;var env;if(((__t431 instanceof Array)&&((__t431["#"]===undefined)&&(((__tp0=__t431.length),true)&&((__tp0===2)&&((__t430=__t431[0]),true,(env=__t431[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t432=__t430;var _;if((__t432==="pattern")){var checker_mac=function(){var f1=function(_,__t437){var __tp0;var __tp1;var expr;if(((__t437 instanceof Array)&&((__t437["#"]===undefined)&&(((__tp0=__t437.length),true)&&((__tp0===2)&&(((__tp1=__t437[0]),(__tp1==="data"))&&((expr=__t437[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","instanceof"],["data",expr,["symbol","Array"]]];};var f2=function(_,__t438){var __tp0;var __tp1;var expr;if(((__t438 instanceof Array)&&((__t438["#"]===undefined)&&(((__tp0=__t438.length),true)&&((__tp0===2)&&(((__tp1=__t438[0]),(__tp1==="data"))&&((expr=__t438[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",expr,["value",0]],tag]];};return ["multi",["macro",f1],["macro",f2]];}();var __t433=expr;var __tp0;var __tp1;var subp;var __tp0;var __tp1;var other;var __t434=false;var __t435=false;var __t436=false;if(((__t434=(__t433 instanceof Array))&&((__t435=(__t433["#"]===undefined))&&((__t436=((__tp0=__t433.length),true))&&((__tp0>=1)&&(((__tp1=__t433[0]),(__tp1==="data"))&&((subp=__t433.slice(1)),true))))))){return patch_array(["data",tag],subp);}else{if((__t436&&((__tp0===1)&&((__tp1=__t433[0]),(__tp1==="void"))))){return ["check",checker_mac,["ignore"]];}else{if(((other=__t433),true)){return ["check",checker_mac,expr];}else{throw ["Could not find a match",__t433];}}}}else{if(((_=__t432),true)){var __t439=expr;var __tp0;var __tp1;var __tp0;var __tp1;var args;var other;var __t440=false;var __t441=false;var __t442=false;if(((__t440=(__t439 instanceof Array))&&((__t441=(__t439["#"]===undefined))&&((__t442=((__tp0=__t439.length),true))&&((__tp0===1)&&((__tp1=__t439[0]),(__tp1==="void"))))))){return ["data",tag];}else{if((__t442&&((__tp0>=1)&&(((__tp1=__t439[0]),(__tp1==="data"))&&((args=__t439.slice(1)),true))))){return patch_array(["data",tag],args);}else{if(((other=__t439),true)){return ["send",["data",tag],other];}else{throw ["Could not find a match",__t439];}}}}else{throw ["Could not find a match",__t432];}}};return ["macro",f];});stdenv.register_macro("when",function(__t444,__t445){var __tp0;var context;var env;if(((__t444 instanceof Array)&&((__t444["#"]===undefined)&&(((__tp0=__t444.length),true)&&((__tp0===2)&&((context=__t444[0]),true,(env=__t444[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __t443;var condition;if(((__t445 instanceof Array)&&((__t445["#"]===undefined)&&(((__tp0=__t445.length),true)&&((__tp0===3)&&(((__tp1=__t445[0]),(__tp1==="data"))&&((__t443=__t445[1]),true,(condition=__t445[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t446=__t443;var __tp0;var __tp1;var other;if(((__t446 instanceof Array)&&((__t446["#"]===undefined)&&(((__tp0=__t446.length),true)&&((__tp0===1)&&((__tp1=__t446[0]),(__tp1==="void"))))))){return ["test",condition,["ignore"]];}else{if(((other=__t446),true)){return ["test",condition,other];}else{throw ["Could not find a match",__t446];}}});var andf=function(__t447,expr){var __tp0;var context;var env;if(((__t447 instanceof Array)&&((__t447["#"]===undefined)&&(((__tp0=__t447.length),true)&&((__tp0===2)&&((context=__t447[0]),true,(env=__t447[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t448=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var a;var b;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t449=false;var __t450=false;var __t451=false;var __t452=false;if(((__t449=(__t448 instanceof Array))&&((__t450=(__t448["#"]===undefined))&&((__t451=((__tp0=__t448.length),true))&&((__t452=(__tp0===2))&&(((__tp1=__t448[0]),(__tp1==="pattern"))&&(((__tp2=__t448[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((a=__tp2[1]),true,(b=__tp2[2]),true)))))))))))){return ["all",a,b];}else{if((__t452&&(((_=__t448[0]),true,(__tp1=__t448[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return ["symbol","___and"];}else{if(((other=__t448),true)){return ["send",["symbol","___and"],expr];}else{throw ["Could not find a match",__t448];}}}};stdenv.register_macro("&&",andf);stdenv.register_macro("and",andf);var orf=function(__t453,expr){var __tp0;var context;var env;if(((__t453 instanceof Array)&&((__t453["#"]===undefined)&&(((__tp0=__t453.length),true)&&((__tp0===2)&&((context=__t453[0]),true,(env=__t453[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t454=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var a;var b;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t455=false;var __t456=false;var __t457=false;var __t458=false;if(((__t455=(__t454 instanceof Array))&&((__t456=(__t454["#"]===undefined))&&((__t457=((__tp0=__t454.length),true))&&((__t458=(__tp0===2))&&(((__tp1=__t454[0]),(__tp1==="pattern"))&&(((__tp2=__t454[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((a=__tp2[1]),true,(b=__tp2[2]),true)))))))))))){return ["any",a,b];}else{if((__t458&&(((_=__t454[0]),true,(__tp1=__t454[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return ["symbol","___or"];}else{if(((other=__t454),true)){return ["send",["symbol","___or"],expr];}else{throw ["Could not find a match",__t454];}}}};stdenv.register_macro("||",orf);stdenv.register_macro("or",orf);var partial_pattern=function(operator){(operator=["symbol",operator]);return function(__t459,expr){var __tp0;var context;var env;if(((__t459 instanceof Array)&&((__t459["#"]===undefined)&&(((__tp0=__t459.length),true)&&((__tp0===2)&&((context=__t459[0]),true,(env=__t459[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t460=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var val;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t461=false;var __t462=false;var __t463=false;var __t464=false;if(((__t461=(__t460 instanceof Array))&&((__t462=(__t460["#"]===undefined))&&((__t463=((__tp0=__t460.length),true))&&((__t464=(__tp0===2))&&(((__tp1=__t460[0]),(__tp1==="pattern"))&&(((__tp2=__t460[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===1)&&(((__tp7=__tp5[0]),(__tp7==="void"))&&((val=__tp2[2]),true))))))))))))))))){return ["check",["macro",make_checker(val,operator)],["ignore"]];}else{if((__t464&&(((_=__t460[0]),true,(__tp1=__t460[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return operator;}else{if(((other=__t460),true)){return ["send",operator,expr];}else{throw ["Could not find a match",__t460];}}}};};stdenv.register_macro("==",partial_pattern("___eq"));stdenv.register_macro("!=",partial_pattern("___neq"));stdenv.register_macro("<=",partial_pattern("___lte"));stdenv.register_macro(">=",partial_pattern("___gte"));stdenv.register_macro("<",partial_pattern("___lt"));stdenv.register_macro(">",partial_pattern("___gt"));stdenv.register_macro("*",function(__t465,expr){var __tp0;var context;var env;if(((__t465 instanceof Array)&&((__t465["#"]===undefined)&&(((__tp0=__t465.length),true)&&((__tp0===2)&&((context=__t465[0]),true,(env=__t465[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t466=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var val;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t467=false;var __t468=false;var __t469=false;var __t470=false;if(((__t467=(__t466 instanceof Array))&&((__t468=(__t466["#"]===undefined))&&((__t469=((__tp0=__t466.length),true))&&((__t470=(__tp0===2))&&(((__tp1=__t466[0]),(__tp1==="pattern"))&&(((__tp2=__t466[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))))))){return ["dynsplice",["ignore"]];}else{if((__t470&&(((__tp1=__t466[0]),((__tp1==="pattern")||(__tp1==="data")))&&(((__tp2=__t466[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===1)&&(((__tp7=__tp5[0]),(__tp7==="void"))&&((val=__tp2[2]),true)))))))))))))){return ["dynsplice",val];}else{if((__t470&&(((_=__t466[0]),true,(__tp1=__t466[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return ["symbol","___times"];}else{if(((other=__t466),true)){return ["send",["symbol","___times"],expr];}else{throw ["Could not find a match",__t466];}}}}});stdenv.register_macro(".",function(__t472,__t471){var __tp0;var context;var env;if(((__t472 instanceof Array)&&((__t472["#"]===undefined)&&(((__tp0=__t472.length),true)&&((__tp0===2)&&((context=__t472[0]),true,(env=__t472[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t473=__t471;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var s;var other;if(((__t473 instanceof Array)&&((__t473["#"]===undefined)&&(((__tp0=__t473.length),true)&&((__tp0===3)&&(((__tp1=__t473[0]),(__tp1==="data"))&&(((__tp2=__t473[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&(((__tp5=__t473[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((s=__tp5[1]),true))))))))))))))))){return ["value",s];}else{if(((other=__t473),true)){throw ErrorFactory(["syntax","dot"]).create("'.' macro was given an illegal argument",({"arg":other}));}else{throw ["Could not find a match",__t473];}}});stdenv.register_macro("where",function(__t475,__t474){var __tp0;var context;var env;if(((__t475 instanceof Array)&&((__t475["#"]===undefined)&&(((__tp0=__t475.length),true)&&((__tp0===2)&&((context=__t475[0]),true,(env=__t475[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t476=__t474;var __tp0;var __tp1;var a;var b;var other;if(((__t476 instanceof Array)&&((__t476["#"]===undefined)&&(((__tp0=__t476.length),true)&&((__tp0===3)&&(((__tp1=__t476[0]),(__tp1==="data"))&&((a=__t476[1]),true,(b=__t476[2]),true))))))){return ["send",["symbol","let"],["data",b,a]];}else{if(((other=__t476),true)){throw ErrorFactory(["syntax","where"]).create("'where' macro was given an illegal argument",({"arg":other}));}else{throw ["Could not find a match",__t476];}}});stdenv.register_macro("let",function(__t478,__t477){var __tp0;var context;var env;if(((__t478 instanceof Array)&&((__t478["#"]===undefined)&&(((__tp0=__t478.length),true)&&((__tp0===2)&&((context=__t478[0]),true,(env=__t478[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t479=__t477;var __tp0;var __tp1;var a;var b;var other;if(((__t479 instanceof Array)&&((__t479["#"]===undefined)&&(((__tp0=__t479.length),true)&&((__tp0===3)&&(((__tp1=__t479[0]),(__tp1==="data"))&&((a=__t479[1]),true,(b=__t479[2]),true))))))){var bindings=aslist(a);var body=aslist(b);return patch_array(["multi"],bindings,body);}else{if(((other=__t479),true)){throw ErrorFactory(["syntax","let"]).create("'let' macro was given an illegal argument",({"arg":other}));}else{throw ["Could not find a match",__t479];}}});stdenv.register_macro("->",function(__t480,__t481){var __tp0;var context;var env;if(((__t480 instanceof Array)&&((__t480["#"]===undefined)&&(((__tp0=__t480.length),true)&&((__tp0===2)&&((context=__t480[0]),true,(env=__t480[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var args;var stmts;if(((__t481 instanceof Array)&&((__t481["#"]===undefined)&&(((__tp0=__t481.length),true)&&((__tp0===3)&&(((__tp1=__t481[0]),(__tp1==="data"))&&((args=__t481[1]),true,(stmts=__t481[2]),true))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var placeholder;var __tp2;var __tp3;var __tp4;var newargs;if((((__tp0=find_arrow(args)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&(((placeholder=__tp0[0]),true,(__tp2=__tp0[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3>=1)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((newargs=__tp2.slice(1)),true))))))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var fw;var bw;var keys;var dflt;var rest;if((((__tp0=lhs_parse_specs(env,newargs)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===5)&&((fw=__tp0[0]),true,(bw=__tp0[1]),true,(keys=__tp0[2]),true,(dflt=__tp0[3]),true,(rest=__tp0[4]),true)))))){(void 0);}else{throw "a condition failed";}if(((rest||dflt.length)||keys.length)){var body=["send",["symbol","match"],["data",["send",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","arguments"],["value",0]]],["send",["symbol","->"],["data",args,stmts]]]];return ["lambda",[],body];}else{var body=["multi"];(newargs=function(){var __t482=[];var __t483=newargs;var __t484=__t483.length;for(var __t485=0;(__t485<__t484);(__t485++)){var __t486=__t483[__t485];var __tp0;var __tp1;var s;var other;var other;var __t487=false;if(((__t486 instanceof Array)&&((__t486["#"]===undefined)&&(((__tp0=__t486.length),true)&&((__tp0===2)&&(((__tp1=__t486[0]),(__tp1==="symbol"))&&((s=__t486[1]),true))))))){__t482.push(["symbol",s]);}else{if((__t487=((other=__t486),true))){__t482.push(function(){var t=gensym();body.push(["send",["symbol","="],["data",other,t]]);return t;}());}else{if(__t487){false;}else{throw ["Could not find a match",__t486];}}}}return __t482;}());body.push(function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,stmts]];}else{return stmts;}}());return ["lambda",newargs,body];}});var build_each=function(source,patterns,__t488,__t489,lvar){var __tp0;var prelude;if((((__tp0=___projector(aslist)(__t488)),__tp0[0])&&((prelude=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var __tp0;var tail;if((((__tp0=___projector(aslist)(__t489)),__tp0[0])&&((tail=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var temp=gensym();var len=gensym();(lvar=(lvar||gensym()));var stmts=patch_array(["multi"],prelude).concat([["send",["symbol","="],["data",temp,source]],["send",["symbol","="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]);var loop=function(){var a=["send",["symbol","="],["data",lvar,["value",0]]];var b=["send",["symbol","<"],["data",lvar,len]];var c=["send",["symbol","++"],["data",lvar,["void"]]];var body=["send",["symbol","|>"],["data",["send",["symbol","___js_fetch"],["data",temp,lvar]],patterns]];return ["js_for",a,b,c,body];}();stmts.push(loop);var stmts=stmts.concat(tail);return stmts;};stdenv.register_macro("each",function(__t491,__t492){var __tp0;var __t490;var env;if(((__t491 instanceof Array)&&((__t491["#"]===undefined)&&(((__tp0=__t491.length),true)&&((__tp0===2)&&((__t490=__t491[0]),true,(env=__t491[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var arr;var __tp2;var __tp3;var patterns;if(((__t492 instanceof Array)&&((__t492["#"]===undefined)&&(((__tp0=__t492.length),true)&&((__tp0===3)&&(((__tp1=__t492[0]),(__tp1==="data"))&&(((arr=__t492[1]),true,(__tp2=__t492[2]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((patterns=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}var __t493=__t490;var other;if((__t493==="multi")){patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,patch_array(["multi"],patterns),["multi"],["symbol","false"]);}else{if(((other=__t493),true)){var res=gensym();(patterns=function(){var __t494=[];var __t495=patterns;var __t496=__t495.length;for(var __t497=0;(__t497<__t496);(__t497++)){var __t498=__t495[__t497];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var patt;var expr;var other;var other;var __t499=false;if(((__t498 instanceof Array)&&((__t498["#"]===undefined)&&(((__tp0=__t498.length),true)&&((__tp0===3)&&(((__tp1=__t498[0]),(__tp1==="send"))&&(((__tp2=__t498[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=__t498[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((patt=__tp6[1]),true,(expr=__tp6[2]),true)))))))))))))))))){__t494.push(["send",["symbol","->"],["data",patt,["send",["send",res,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",expr]]]]);}else{if((__t499=((other=__t498),true))){__t494.push(INVALID_PATTERN);}else{if(__t499){false;}else{throw ["Could not find a match",__t498];}}}}return __t494;}());patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,patch_array(["multi"],patterns),["send",["symbol","="],["data",res,["data"]]],res);}else{throw ["Could not find a match",__t493];}}});stdenv.register_macro("=>",function(__t501,__t502){var __tp0;var __t500;var env;if(((__t501 instanceof Array)&&((__t501["#"]===undefined)&&(((__tp0=__t501.length),true)&&((__tp0===2)&&((__t500=__t501[0]),true,(env=__t501[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var binding;var value;if(((__t502 instanceof Array)&&((__t502["#"]===undefined)&&(((__tp0=__t502.length),true)&&((__tp0===3)&&(((__tp1=__t502[0]),(__tp1==="data"))&&((binding=__t502[1]),true,(value=__t502[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t503=__t500;var context;if(((__t503==="data")||(__t503==="pattern"))){var __t504=binding;var __tp0;var __tp1;var _;if(((__t504 instanceof Array)&&((__t504["#"]===undefined)&&(((__tp0=__t504.length),true)&&((__tp0===1)&&((__tp1=__t504[0]),(__tp1==="void"))))))){return ["assoc",value];}else{if(((_=__t504),true)){return ["assoc",binding,value];}else{throw ["Could not find a match",__t504];}}}else{if(((context=__t503),true)){throw (("Illegal context for '=>' ("+context)+")");}else{throw ["Could not find a match",__t503];}}});stdenv.register_macro("as",function(__t505,__t506){var __tp0;var context;var env;if(((__t505 instanceof Array)&&((__t505["#"]===undefined)&&(((__tp0=__t505.length),true)&&((__tp0===2)&&((context=__t505[0]),true,(env=__t505[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;var variable;if(((__t506 instanceof Array)&&((__t506["#"]===undefined)&&(((__tp0=__t506.length),true)&&((__tp0===3)&&(((__tp1=__t506[0]),(__tp1==="data"))&&((expr=__t506[1]),true,(variable=__t506[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t507=context;var _;if((__t507==="pattern")){return ["constant",expr,variable];}else{if(((_=__t507),true)){return ["send",["symbol","="],["data",variable,expr]];}else{throw ["Could not find a match",__t507];}}});stdenv.register_macro("=",function(__t508,expr){var __tp0;var context;var env;if(((__t508 instanceof Array)&&((__t508["#"]===undefined)&&(((__tp0=__t508.length),true)&&((__tp0===2)&&((context=__t508[0]),true,(env=__t508[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t509=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var lhs;var rhs;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var f;var args;var value;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var b;var value;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var patt;var value;var other;var __t510=false;var __t511=false;var __t512=false;var __t513=false;var __t514=false;var __t515=false;var __t516=false;var __t517=false;var __t518=false;var __t519=false;if(((__t510=(__t509 instanceof Array))&&((__t511=(__t509["#"]===undefined))&&((__t512=((__tp0=__t509.length),true))&&((__t513=(__tp0===2))&&(((__tp1=__t509[0]),((__tp1==="multi")||(__tp1==="expr")))&&(((__tp2=__t509[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((lhs=__tp2[1]),true,(rhs=__tp2[2]),true)))))))))))){var __tp0;var __tp1;var __tp2;var __tp3;var vars;var clauses;var ph;if((((__tp0=parse_lhs(env,lhs,rhs)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===3)&&(((__tp2=__tp0[0]),(__tp3=___projector(make_declarations)(__tp2)),__tp3[0])&&((vars=__tp3[1]),true,(clauses=__tp0[1]),true,(ph=__tp0[2]),true))))))){(void 0);}else{throw "a condition failed";}var r=patch_array(["splice"],vars);var mkif=function(x){return ["if",x,["value",undefined],["js_throw",["value","a condition failed"]]];};var __t520=clauses;var __tp0;var clause;var _;if(((__t520 instanceof Array)&&((__t520["#"]===undefined)&&(((__tp0=__t520.length),true)&&((__tp0===1)&&((clause=__t520[0]),true)))))){var __t521=send(clause,(clause.length-1));var __tp0;var __tp1;var __tp2;var other;if(((__t521 instanceof Array)&&((__t521["#"]===undefined)&&(((__tp0=__t521.length),true)&&((__tp0===2)&&(((__tp1=__t521[0]),(__tp1==="value"))&&((__tp2=__t521[1]),(__tp2===true)))))))){(r=function(){if(((vars.length===1)&&(clause.length===3))){return patch_array(["declare"],clause[1].slice(1));}else{return r.concat(clause.slice(1,(-1)));}}());}else{if(((other=__t521),true)){r.push(mkif(clause));}else{throw ["Could not find a match",__t521];}}}else{if(((_=__t520),true)){var ands=make_pattern_test(clauses);r.push(mkif(ands));}else{throw ["Could not find a match",__t520];}}return r;}else{if((__t513&&((__t514=((__tp1=__t509[0]),(__tp1==="data")))&&((__t515=((__tp2=__t509[1]),(__tp2 instanceof Array)))&&((__t516=(__tp2["#"]===undefined))&&((__t517=((__tp3=__tp2.length),true))&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void"))))))))){return ["assoc"];}else{if((__t517&&((__t518=(__tp3===3))&&((__t519=((__tp4=__tp2[0]),(__tp4==="data")))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===3)&&(((__tp7=__tp5[0]),(__tp7==="send"))&&((f=__tp5[1]),true,(args=__tp5[2]),true,(value=__tp2[2]),true)))))))))){(f=function(){var __t522=f;var __tp0;var __tp1;var _;var __tp0;var __tp1;var z;var __t523=false;var __t524=false;var __t525=false;var __t526=false;if(((__t523=(__t522 instanceof Array))&&((__t524=(__t522["#"]===undefined))&&((__t525=((__tp0=__t522.length),true))&&((__t526=(__tp0===2))&&(((__tp1=__t522[0]),(__tp1==="value"))&&((_=__t522[1]),true))))))){return f;}else{if((__t526&&(((__tp1=__t522[0]),(__tp1==="symbol"))&&((z=__t522[1]),true)))){return ["value",z];}else{throw ["Could not find a match",__t522];}}}());return ["assoc",f,["send",["symbol","->"],["data",args,value]]];}else{if((__t519&&((b=__tp2[1]),true,(value=__tp2[2]),true))){(b=function(){var __t527=b;var __tp0;var __tp1;var _;var __tp0;var __tp1;var z;var __t528=false;var __t529=false;var __t530=false;var __t531=false;if(((__t528=(__t527 instanceof Array))&&((__t529=(__t527["#"]===undefined))&&((__t530=((__tp0=__t527.length),true))&&((__t531=(__tp0===2))&&(((__tp1=__t527[0]),(__tp1==="value"))&&((_=__t527[1]),true))))))){return b;}else{if((__t531&&(((__tp1=__t527[0]),(__tp1==="symbol"))&&((z=__t527[1]),true)))){return ["value",z];}else{throw ["Could not find a match",__t527];}}}());return ["assoc",b,value];}else{if((__t513&&(((__tp1=__t509[0]),(__tp1==="pattern"))&&(((__tp2=__t509[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((patt=__tp2[1]),true,(value=__tp2[2]),true))))))))){return ["default",patt,value];}else{if(((other=__t509),true)){throw (("Illegal context for '=' ("+context)+")");}else{throw ["Could not find a match",__t509];}}}}}}});var make_assigner=function(op){return function(__t532,__t533){var __tp0;var context;var env;if(((__t532 instanceof Array)&&((__t532["#"]===undefined)&&(((__tp0=__t532.length),true)&&((__tp0===2)&&((context=__t532[0]),true,(env=__t532[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t533 instanceof Array)&&((__t533["#"]===undefined)&&(((__tp0=__t533.length),true)&&((__tp0===3)&&(((__tp1=__t533[0]),(__tp1==="data"))&&((a=__t533[1]),true,(b=__t533[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["assign",a,["send",["symbol",op],["data",a,b]]];};};stdenv.register_macro(":=",function(__t534,__t535){var __tp0;var context;var env;if(((__t534 instanceof Array)&&((__t534["#"]===undefined)&&(((__tp0=__t534.length),true)&&((__tp0===2)&&((context=__t534[0]),true,(env=__t534[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t535 instanceof Array)&&((__t535["#"]===undefined)&&(((__tp0=__t535.length),true)&&((__tp0===3)&&(((__tp1=__t535[0]),(__tp1==="data"))&&((a=__t535[1]),true,(b=__t535[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["assign",a,b];});stdenv.register_macro("+=",make_assigner("+"));stdenv.register_macro("-=",make_assigner("-"));stdenv.register_macro("*=",make_assigner("*"));stdenv.register_macro("/=",make_assigner("/"));stdenv.register_macro("<<=",make_assigner("<<"));stdenv.register_macro(">>=",make_assigner(">>"));stdenv.register_macro(">>>=",make_assigner(">>>"));stdenv.register_macro("++=",make_assigner("++"));stdenv.register_macro("?=",make_assigner("match"));stdenv.register_macro("if",function(__t537,__t536){var __tp0;var context;var env;if(((__t537 instanceof Array)&&((__t537["#"]===undefined)&&(((__tp0=__t537.length),true)&&((__tp0===2)&&((context=__t537[0]),true,(env=__t537[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t538=__t536;var __tp0;var __tp1;var test;var a;var b;var __tp0;var __tp1;var test;var __tp2;var __tp3;var __t539;var other;var __t540=false;var __t541=false;var __t542=false;if(((__t540=(__t538 instanceof Array))&&((__t541=(__t538["#"]===undefined))&&((__t542=((__tp0=__t538.length),true))&&((__tp0===4)&&(((__tp1=__t538[0]),(__tp1==="data"))&&((test=__t538[1]),true,(a=__t538[2]),true,(b=__t538[3]),true))))))){return ["if",test,a,b];}else{if((__t542&&((__tp0===3)&&(((__tp1=__t538[0]),(__tp1==="data"))&&(((test=__t538[1]),true,(__tp2=__t538[2]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((__t539=__tp3[1]),true)))))){var __t543=__t539;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var s1;var __tp13;var __tp14;var __tp15;var __tp16;var __tp17;var __tp18;var __tp19;var __tp20;var __tp21;var __tp22;var __tp23;var __tp24;var s2;var __tp0;var s1;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var s2;var other;var __t544=false;var __t545=false;var __t546=false;if(((__t544=(__t543 instanceof Array))&&((__t545=(__t543["#"]===undefined))&&((__t546=((__tp0=__t543.length),true))&&((__tp0===2)&&(((__tp1=__t543[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="then"))&&(((__tp8=__tp1[2]),(__tp8 instanceof Array))&&((__tp8["#"]===undefined)&&(((__tp9=__tp8.length),true)&&((__tp9===2)&&(((__tp10=__tp8[0]),(__tp10==="data"))&&(((__tp11=__tp8[1]),(__tp12=___projector(aslist)(__tp11)),__tp12[0])&&(((s1=__tp12[1]),true,(__tp13=__t543[1]),(__tp13 instanceof Array))&&((__tp13["#"]===undefined)&&(((__tp14=__tp13.length),true)&&((__tp14===3)&&(((__tp15=__tp13[0]),(__tp15==="send"))&&(((__tp16=__tp13[1]),(__tp16 instanceof Array))&&((__tp16["#"]===undefined)&&(((__tp17=__tp16.length),true)&&((__tp17===2)&&(((__tp18=__tp16[0]),(__tp18==="symbol"))&&(((__tp19=__tp16[1]),(__tp19==="else"))&&(((__tp20=__tp13[2]),(__tp20 instanceof Array))&&((__tp20["#"]===undefined)&&(((__tp21=__tp20.length),true)&&((__tp21===2)&&(((__tp22=__tp20[0]),(__tp22==="data"))&&(((__tp23=__tp20[1]),(__tp24=___projector(aslist)(__tp23)),__tp24[0])&&((s2=__tp24[1]),true)))))))))))))))))))))))))))))))))))))))){return ["if",test,patch_array(["multi"],s1),patch_array(["multi"],s2)];}else{if((__t546&&((__tp0>=1)&&(((s1=__t543.slice(0,-1)),true,(__tp1=send(__t543,(__tp0-1))),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="else"))&&(((__tp8=__tp1[2]),(__tp8 instanceof Array))&&((__tp8["#"]===undefined)&&(((__tp9=__tp8.length),true)&&((__tp9===2)&&(((__tp10=__tp8[0]),(__tp10==="data"))&&(((__tp11=__tp8[1]),(__tp12=___projector(aslist)(__tp11)),__tp12[0])&&((s2=__tp12[1]),true))))))))))))))))))))){return ["if",test,patch_array(["multi"],s1),patch_array(["multi"],s2)];}else{if(((other=__t543),true)){return ["if",test,patch_array(["multi"],other),["value",null]];}else{throw ["Could not find a match",__t543];}}}}else{if(((other=__t538),true)){pr(other);return send(raise,Error("error in if"));}else{throw ["Could not find a match",__t538];}}}});stdenv.register_macro("cond",function(__t547,__t548){var __tp0;var context;var env;if(((__t547 instanceof Array)&&((__t547["#"]===undefined)&&(((__tp0=__t547.length),true)&&((__tp0===2)&&((context=__t547[0]),true,(env=__t547[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var clauses;if(((__t548 instanceof Array)&&((__t548["#"]===undefined)&&(((__tp0=__t548.length),true)&&((__tp0===2)&&(((__tp1=__t548[0]),(__tp1==="data"))&&((clauses=__t548[1]),true))))))){(void 0);}else{throw "a condition failed";}var handle=function(xs){var __t549=xs;var __tp0;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var test;var body;var rest;var __t550=false;var __t551=false;var __t552=false;if(((__t550=(__t549 instanceof Array))&&((__t551=(__t549["#"]===undefined))&&((__t552=((__tp0=__t549.length),true))&&(__tp0===0))))){return ["value",false];}else{if((__t552&&((__tp0>=1)&&(((__tp1=__t549[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="=>"))&&(((__tp8=__tp1[2]),(__tp8 instanceof Array))&&((__tp8["#"]===undefined)&&(((__tp9=__tp8.length),true)&&((__tp9===3)&&(((__tp10=__tp8[0]),(__tp10==="data"))&&((test=__tp8[1]),true,(body=__tp8[2]),true,(rest=__t549.slice(1)),true)))))))))))))))))))){(test=function(){var __t553=test;var __tp0;var __tp1;var __tp2;var _;if(((__t553 instanceof Array)&&((__t553["#"]===undefined)&&(((__tp0=__t553.length),true)&&((__tp0===2)&&(((__tp1=__t553[0]),(__tp1==="symbol"))&&((__tp2=__t553[1]),(__tp2==="else")))))))){return ["value",true];}else{if(((_=__t553),true)){return test;}else{throw ["Could not find a match",__t553];}}}());return ["if",test,body,handle(rest)];}else{throw ["Could not find a match",__t549];}}};return handle(aslist(clauses));});stdenv.register_macro("while",function(__t554,expr){var __tp0;var context;var env;if(((__t554 instanceof Array)&&((__t554["#"]===undefined)&&(((__tp0=__t554.length),true)&&((__tp0===2)&&((context=__t554[0]),true,(env=__t554[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var test;var body;if(((expr instanceof Array)&&((expr["#"]===undefined)&&(((__tp0=expr.length),true)&&((__tp0===3)&&(((__tp1=expr[0]),(__tp1==="data"))&&((test=expr[1]),true,(body=expr[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["js_while",test,body];});stdenv.register_macro("for",function(__t556,__t555){var __tp0;var context;var env;if(((__t556 instanceof Array)&&((__t556["#"]===undefined)&&(((__tp0=__t556.length),true)&&((__tp0===2)&&((context=__t556[0]),true,(env=__t556[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t557=__t555;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var a;var b;var c;var body;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var a;var b;var body;var __t558=false;var __t559=false;var __t560=false;var __t561=false;var __t562=false;var __t563=false;var __t564=false;var __t565=false;if(((__t558=(__t557 instanceof Array))&&((__t559=(__t557["#"]===undefined))&&((__t560=((__tp0=__t557.length),true))&&((__t561=(__tp0===3))&&((__t562=((__tp1=__t557[0]),(__tp1==="data")))&&((__t563=((__tp2=__t557[1]),(__tp2 instanceof Array)))&&((__t564=(__tp2["#"]===undefined))&&((__t565=((__tp3=__tp2.length),true))&&((__tp3===4)&&(((__tp4=__tp2[0]),(__tp4==="multi"))&&((a=__tp2[1]),true,(b=__tp2[2]),true,(c=__tp2[3]),true,(body=__t557[2]),true)))))))))))){return ["js_for",a,b,c,body];}else{if((__t565&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="send"))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&(((__tp8=__tp5[1]),(__tp8==="in"))&&(((__tp9=__tp2[2]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="data"))&&((a=__tp9[1]),true,(b=__tp9[2]),true,(body=__t557[2]),true)))))))))))))))){return ["js_for_in",a,b,body];}else{throw ["Could not find a match",__t557];}}});stdenv.register_macro("!!",function(__t567,__t568){var __tp0;var __t566;var env;if(((__t567 instanceof Array)&&((__t567["#"]===undefined)&&(((__tp0=__t567.length),true)&&((__tp0===2)&&((__t566=__t567[0]),true,(env=__t567[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;var matchers;if(((__t568 instanceof Array)&&((__t568["#"]===undefined)&&(((__tp0=__t568.length),true)&&((__tp0===3)&&(((__tp1=__t568[0]),(__tp1==="data"))&&((expr=__t568[1]),true,(matchers=__t568[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t569=__t566;var other;if((__t569==="multi")){var excv=gensym();var m=function(){var __t570=aslist(matchers);var ms;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var _;var x;if((((ms=__t570),true,(__t570 instanceof Array))&&((__t570["#"]===undefined)&&(((__tp0=__t570.length),true)&&((__tp0>=1)&&(((__tp1=__t570[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="->"))&&((_=__tp1[2]),true,__t570.slice(1),true))))))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,patch_array(["multi"],ms)]];}else{if(((x=__t570),true)){return matchers;}else{throw ["Could not find a match",__t570];}}}();var f=["send",["symbol","->"],["data",["data",excv],m]];return ["multi",["js_try",expr,f,["void"]]];}else{if(((other=__t569),true)){var excv=gensym();var res=gensym();var m=function(){var __t571=aslist(matchers);var ms;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var _;var x;if((((ms=__t571),true,(__t571 instanceof Array))&&((__t571["#"]===undefined)&&(((__tp0=__t571.length),true)&&((__tp0>=1)&&(((__tp1=__t571[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="->"))&&((_=__tp1[2]),true,__t571.slice(1),true))))))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,patch_array(["multi"],ms)]];}else{if(((x=__t571),true)){return matchers;}else{throw ["Could not find a match",__t571];}}}();var f=["send",["symbol","->"],["data",["data",excv],["send",["symbol",":="],["data",res,m]]]];return ["multi",["declare",res,["value",undefined]],["js_try",["assign",res,expr],f,["void"]],res];}else{throw ["Could not find a match",__t569];}}});stdenv.register_macro("new",function(_,expr){return ["js_new",expr];});stdenv.register_macro("return",function(_,expr){return ["js_return",expr];});stdenv.register_macro("delete",function(_,expr){return ["js_delete",expr];});stdenv.register_macro("throw",function(_,expr){return ["js_throw",expr];});stdenv.register_macro("break",function(_,expr){return ["js_break"];});stdenv.register_macro("continue",function(_,expr){return ["js_continue"];});var rx_wrap=function(x){return (("(?:"+x)+")");};var rx_quote=function(x){return x.replace(RegExp("([.?*+\\^$\\[\\]\\(\\)\\{\\}|\\\\])","g"),"\\$1");};var rx_quote2=function(x){return x.replace(RegExp("([\\[\\]\\(\\)\\{\\}\\^])","g"),"\\$1");};var rx_build2=function(__t572){var __t573=__t572;var __tp0;var __tp1;var __t574;var __tp0;var __tp1;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var s;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __t575;var __tp5;var __tp6;var __tp7;var a;var b;var __tp0;var __tp1;var args;var __tp0;var __tp1;var args;var otherA;var __t576=false;var __t577=false;var __t578=false;var __t579=false;var __t580=false;var __t581=false;var __t582=false;var __t583=false;var __t584=false;var __t585=false;if(((__t576=(__t573 instanceof Array))&&((__t577=(__t573["#"]===undefined))&&((__t578=((__tp0=__t573.length),true))&&((__t579=(__tp0===2))&&(((__tp1=__t573[0]),(__tp1==="symbol"))&&((__t574=__t573[1]),true))))))){var __t586=__t574;if((__t586==="any")){return ".";}else{if((__t586==="start")){return "^";}else{if((__t586==="end")){return "$";}else{if((__t586==="alpha")){return "\\a";}else{if((__t586==="digit")){return "\\d";}else{if((__t586==="word")){return "\\w";}else{if((__t586==="space")){return "\\s";}else{if((__t586==="boundary")){return "\\b";}else{if((__t586==="a")){return "\\a";}else{if((__t586==="d")){return "\\d";}else{if((__t586==="w")){return "\\w";}else{if((__t586==="s")){return "\\s";}else{if((__t586==="b")){return "\\b";}else{throw ["Could not find a match",__t586];}}}}}}}}}}}}}}else{if((__t579&&(((__tp1=__t573[0]),(__tp1==="value"))&&((x=__t573[1]),true)))){return rx_quote(x);}else{if((__t578&&((__t579=(__tp0===3))&&((__t580=((__tp1=__t573[0]),(__tp1==="send")))&&((__t581=((__tp2=__t573[1]),(__tp2 instanceof Array)))&&((__t582=(__tp2["#"]===undefined))&&((__t583=((__tp3=__tp2.length),true))&&((__t584=(__tp3===2))&&((__t585=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="raw"))&&(((__tp6=__t573[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===2)&&(((__tp8=__tp6[0]),(__tp8==="value"))&&((s=__tp6[1]),true)))))))))))))))){return s;}else{if((__t585&&(((__t575=__tp2[1]),true,(__tp5=__t573[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===3)&&(((__tp7=__tp5[0]),(__tp7==="data"))&&((a=__tp5[1]),true,(b=__tp5[2]),true)))))))){var __t587=__t575;if((__t587==="||")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((__t587==="or")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((__t587==="*")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}return rx_wrap((rx_build2(b)+"*"));}else{if((__t587==="+")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}return rx_wrap((rx_build2(b)+"+"));}else{if((__t587==="?")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}return rx_wrap((rx_build2(b)+"?"));}else{if((__t587==="in")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var v;if(((b instanceof Array)&&((b["#"]===undefined)&&(((__tp0=b.length),true)&&((__tp0===2)&&(((__tp1=b[0]),(__tp1==="value"))&&((v=b[1]),true))))))){(void 0);}else{throw "a condition failed";}var x=rx_quote2(v);return (("["+x)+"]");}else{if((__t587==="not")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __tp13;var __tp14;var v;if(((b instanceof Array)&&((b["#"]===undefined)&&(((__tp0=b.length),true)&&((__tp0===3)&&(((__tp1=b[0]),(__tp1==="send"))&&(((__tp2=b[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="in"))&&(((__tp6=b[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&(((__tp12=__tp6[2]),(__tp12 instanceof Array))&&((__tp12["#"]===undefined)&&(((__tp13=__tp12.length),true)&&((__tp13===2)&&(((__tp14=__tp12[0]),(__tp14==="value"))&&((v=__tp12[1]),true)))))))))))))))))))))))))))){(void 0);}else{throw "a condition failed";}var x=rx_quote2(v);return (("[^"+x)+"]");}else{throw ["Could not find a match",__t587];}}}}}}}}else{if((__t578&&((__t579=(__tp0>=1))&&(((__tp1=__t573[0]),(__tp1==="data"))&&((args=__t573.slice(1)),true))))){return (("("+args.map(rx_build2).join(""))+")");}else{if((__t579&&(((__tp1=__t573[0]),(__tp1==="multi"))&&((args=__t573.slice(1)),true)))){return (("(?:"+args.map(rx_build2).join(""))+")");}else{if(((otherA=__t573),true)){throw "OopsF";}else{throw ["Could not find a match",__t573];}}}}}}}};var mac=function(__t588,expr,flags){var __tp0;var context;var env;if(((__t588 instanceof Array)&&((__t588["#"]===undefined)&&(((__tp0=__t588.length),true)&&((__tp0===2)&&((context=__t588[0]),true,(env=__t588[1]),true)))))){(void 0);}else{throw "a condition failed";}(flags=(flags||""));var __t589=expr;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __tp13;var __tp14;var flag;var __tp0;var __tp1;var __tp2;var v;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var arg;var __t590=false;var __t591=false;var __t592=false;if(((__t590=(__t589 instanceof Array))&&((__t591=(__t589["#"]===undefined))&&((__t592=((__tp0=__t589.length),true))&&((__tp0===3)&&(((__tp1=__t589[0]),(__tp1==="send"))&&(((__tp2=__t589[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="."))&&(((__tp6=__t589[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&(((__tp12=__tp6[2]),(__tp12 instanceof Array))&&((__tp12["#"]===undefined)&&(((__tp13=__tp12.length),true)&&((__tp13===2)&&(((__tp14=__tp12[0]),(__tp14==="symbol"))&&((flag=__tp12[1]),true)))))))))))))))))))))))))))){var m=function(ctx,x){return mac(ctx,x,(flags+flag));};return ["macro",m];}else{if((__t592&&((__tp0===2)&&(((__tp1=__t589[0]),(__tp1==="value"))&&(((__tp2=__t589[1]),(typeof(__tp2)==="string"))&&((v=__tp2),true)))))){return ["send",["symbol","RegExp"],["data",["value",v],["value",flags]]];}else{if((__t592&&((__tp0===3)&&(((__tp1=__t589[0]),(__tp1==="send"))&&(((__tp2=__t589[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="'"))&&(((__tp6=__t589[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((arg=__tp6[2]),true))))))))))))))))))))){return ["send",["symbol","RegExp"],["data",["value",rx_build2(arg)],["value",flags]]];}else{throw ["Could not find a match",__t589];}}}};stdenv.register_macro("R",mac);stdenv.register_macro("?",function(__t594,__t593){var __tp0;var context;var env;if(((__t594 instanceof Array)&&((__t594["#"]===undefined)&&(((__tp0=__t594.length),true)&&((__tp0===2)&&((context=__t594[0]),true,(env=__t594[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t595=__t593;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var expr;var __tp0;var __tp1;var expr;var __tp2;var __tp3;var __tp4;var __t596=false;var __t597=false;var __t598=false;var __t599=false;var __t600=false;if(((__t596=(__t595 instanceof Array))&&((__t597=(__t595["#"]===undefined))&&((__t598=((__tp0=__t595.length),true))&&((__t599=(__tp0===3))&&((__t600=((__tp1=__t595[0]),(__tp1==="data")))&&(((__tp2=__t595[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((expr=__t595[2]),true)))))))))))){return ["send",["symbol","cond"],["data",expr]];}else{if((__t600&&(((expr=__t595[1]),true,(__tp2=__t595[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))){var orig_expr=expr;var checker=function(){var __t601=expr;var __tp0;var __tp1;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var other;var __t602=false;var __t603=false;var __t604=false;var __t605=false;var __t606=false;if(((__t602=(__t601 instanceof Array))&&((__t603=(__t601["#"]===undefined))&&((__t604=((__tp0=__t601.length),true))&&((__tp0===1)&&((__tp1=__t601[0]),(__tp1==="void"))))))){throw "can't use ? on its own";}else{if((__t604&&((__t605=(__tp0===2))&&((__t606=((__tp1=__t601[0]),(__tp1==="symbol")))&&((__tp2=__t601[1]),(__tp2==="String")))))){return ["macro",function(_,__t607){var __tp0;var __tp1;var expr;if(((__t607 instanceof Array)&&((__t607["#"]===undefined)&&(((__tp0=__t607.length),true)&&((__tp0===2)&&(((__tp1=__t607[0]),(__tp1==="data"))&&((expr=__t607[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","string"]]];}];}else{if((__t606&&((__tp2=__t601[1]),(__tp2==="Number")))){return ["macro",function(_,__t608){var __tp0;var __tp1;var expr;if(((__t608 instanceof Array)&&((__t608["#"]===undefined)&&(((__tp0=__t608.length),true)&&((__tp0===2)&&(((__tp1=__t608[0]),(__tp1==="data"))&&((expr=__t608[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","number"]]];}];}else{if((__t606&&((__tp2=__t601[1]),(__tp2==="true")))){return ["macro",function(_,__t609){var __tp0;var __tp1;var expr;if(((__t609 instanceof Array)&&((__t609["#"]===undefined)&&(((__tp0=__t609.length),true)&&((__tp0===2)&&(((__tp1=__t609[0]),(__tp1==="data"))&&((expr=__t609[1]),true))))))){(void 0);}else{throw "a condition failed";}return expr;}];}else{if((__t606&&((__tp2=__t601[1]),(__tp2==="false")))){return ["macro",function(_,__t610){var __tp0;var __tp1;var expr;if(((__t610 instanceof Array)&&((__t610["#"]===undefined)&&(((__tp0=__t610.length),true)&&((__tp0===2)&&(((__tp1=__t610[0]),(__tp1==="data"))&&((expr=__t610[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","not"],["data",["void"],expr]];}];}else{if((__t606&&((__tp2=__t601[1]),(__tp2==="null")))){return ["macro",make_checker(["value",null],["symbol","___is"])];}else{if((__t606&&((__tp2=__t601[1]),(__tp2==="undefined")))){return ["macro",make_checker(["value",undefined],["symbol","___is"])];}else{if(((other=__t601),true)){return ["send",["symbol","___checker"],["data",expr]];}else{throw ["Could not find a match",__t601];}}}}}}}}}();var mac=function(__t612,expr){var __tp0;var __t611;var env;if(((__t612 instanceof Array)&&((__t612["#"]===undefined)&&(((__tp0=__t612.length),true)&&((__tp0===2)&&((__t611=__t612[0]),true,(env=__t612[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t613=__t611;var other;if((__t613==="pattern")){var __t614=expr;var __tp0;var __tp1;var subp;var __tp0;var __tp1;var other;var __t615=false;var __t616=false;var __t617=false;if(((__t615=(__t614 instanceof Array))&&((__t616=(__t614["#"]===undefined))&&((__t617=((__tp0=__t614.length),true))&&((__tp0>=1)&&(((__tp1=__t614[0]),(__tp1==="data"))&&((subp=__t614.slice(1)),true))))))){var projector=["send",["symbol","___deconstructor"],["data",orig_expr]];return ["check",checker,["project",projector,patch_array(["duck",0],subp)]];}else{if((__t617&&((__tp0===1)&&((__tp1=__t614[0]),(__tp1==="void"))))){return ["check",checker,["ignore"]];}else{if(((other=__t614),true)){return ["check",checker,expr];}else{throw ["Could not find a match",__t614];}}}}else{if(((other=__t613),true)){return ["send",checker,["data",expr]];}else{throw ["Could not find a match",__t613];}}};return ["macro",mac];}else{throw ["Could not find a match",__t595];}}});stdenv.register_macro("!",function(__t618,__t619){var __tp0;var context;var env;if(((__t618 instanceof Array)&&((__t618["#"]===undefined)&&(((__tp0=__t618.length),true)&&((__tp0===2)&&((context=__t618[0]),true,(env=__t618[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;var __tp2;var __tp3;var __tp4;if(((__t619 instanceof Array)&&((__t619["#"]===undefined)&&(((__tp0=__t619.length),true)&&((__tp0===3)&&(((__tp1=__t619[0]),(__tp1==="data"))&&(((expr=__t619[1]),true,(__tp2=__t619[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))))))){(void 0);}else{throw "a condition failed";}var projector=function(){var __t620=expr;var __tp0;var __tp1;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var other;var __t621=false;var __t622=false;var __t623=false;var __t624=false;var __t625=false;if(((__t621=(__t620 instanceof Array))&&((__t622=(__t620["#"]===undefined))&&((__t623=((__tp0=__t620.length),true))&&((__tp0===1)&&((__tp1=__t620[0]),(__tp1==="void"))))))){throw "can't use ! on its own";}else{if((__t623&&((__t624=(__tp0===2))&&((__t625=((__tp1=__t620[0]),(__tp1==="symbol")))&&((__tp2=__t620[1]),(__tp2==="String")))))){return ["macro",function(_,__t626){var __tp0;var __tp1;var expr;if(((__t626 instanceof Array)&&((__t626["#"]===undefined)&&(((__tp0=__t626.length),true)&&((__tp0===2)&&(((__tp1=__t626[0]),(__tp1==="data"))&&((expr=__t626[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["data",["symbol","true"],["send",["symbol","String"],["data",expr]]];}];}else{if((__t625&&((__tp2=__t620[1]),(__tp2==="Number")))){return ["macro",function(_,__t627){var __tp0;var __tp1;var expr;if(((__t627 instanceof Array)&&((__t627["#"]===undefined)&&(((__tp0=__t627.length),true)&&((__tp0===2)&&(((__tp1=__t627[0]),(__tp1==="data"))&&((expr=__t627[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",expr]]];}];}else{if(((other=__t620),true)){return ["send",["symbol","___projector"],["data",expr]];}else{throw ["Could not find a match",__t620];}}}}}();var mac=function(__t629,expr){var __tp0;var __t628;var env;if(((__t629 instanceof Array)&&((__t629["#"]===undefined)&&(((__tp0=__t629.length),true)&&((__tp0===2)&&((__t628=__t629[0]),true,(env=__t629[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t630=__t628;var other;if((__t630==="pattern")){var __t631=expr;var __tp0;var __tp1;var other;if(((__t631 instanceof Array)&&((__t631["#"]===undefined)&&(((__tp0=__t631.length),true)&&((__tp0===1)&&((__tp1=__t631[0]),(__tp1==="void"))))))){return ["project",projector,["ignore"]];}else{if(((other=__t631),true)){return ["project",projector,expr];}else{throw ["Could not find a match",__t631];}}}else{if(((other=__t630),true)){return ["send",["send",projector,["data",expr]],["value",1]];}else{throw ["Could not find a match",__t630];}}};return ["macro",mac];});var gensym_factory=function(prefix){(prefix=("__t"+prefix));var id=0;return function(){var name=(prefix+String(id));(id=(id+1));return ["symbol",name];};};var gensym=gensym_factory("");var is_symbol=function(__t632,env){var __t633=__t632;var __tp0;var __tp1;var s;var _;if(((__t633 instanceof Array)&&((__t633["#"]===undefined)&&(((__tp0=__t633.length),true)&&((__tp0===2)&&(((__tp1=__t633[0]),(__tp1==="symbol"))&&((s=__t633[1]),true))))))){var __t634=env.resolve(s);var __tp0;var __tp1;var m;var _;if(((__t634 instanceof Array)&&((__t634["#"]===undefined)&&(((__tp0=__t634.length),true)&&((__tp0===2)&&(((__tp1=__t634[0]),(__tp1==="macro"))&&((m=__t634[1]),true))))))){return false;}else{if(((_=__t634),true)){return true;}else{throw ["Could not find a match",__t634];}}}else{if(((_=__t633),true)){return false;}else{throw ["Could not find a match",__t633];}}};var lhs_parse_specs=function(env,specs){var fw=[];var bw=[];var keys=[];var defaults=[];var rest=undefined;(specs=specs.slice(0));while(specs.length){var x=specs.shift();var v=expand.step(["pattern",env],x);var __t635=v;var __tp0;var __tp1;var variable;var __tp0;var __tp1;var key;var __tp0;var __tp1;var key;var value;var __tp0;var __tp1;var variable;var value;var __t636;var otherwise;var __t637=false;var __t638=false;var __t639=false;var __t640=false;if(((__t637=(__t635 instanceof Array))&&((__t638=(__t635["#"]===undefined))&&((__t639=((__tp0=__t635.length),true))&&((__t640=(__tp0===2))&&(((__tp1=__t635[0]),(__tp1==="dynsplice"))&&((variable=__t635[1]),true))))))){(rest=variable);}else{if((__t640&&(((__tp1=__t635[0]),(__tp1==="assoc"))&&((key=__t635[1]),true)))){keys.push([key,key]);}else{if((__t639&&((__t640=(__tp0===3))&&(((__tp1=__t635[0]),(__tp1==="assoc"))&&((key=__t635[1]),true,(value=__t635[2]),true))))){keys.push([key,value]);}else{if((__t640&&(((__tp1=__t635[0]),(__tp1==="default"))&&((variable=__t635[1]),true,(value=__t635[2]),true,(__t636=__t635),true)))){var __t641=__t636;var otherwise;if(rest){throw Error("no defaults after rest arg");}else{if(((otherwise=__t641),true)){defaults.push([variable,value]);}else{throw ["Could not find a match",__t641];}}}else{if((rest===undefined)){fw.push(v);}else{if(((otherwise=__t635),true)){bw.push(v);}else{throw ["Could not find a match",__t635];}}}}}}}return [fw,bw,keys,defaults,rest];};var parse_lhs=function(env,lhs,rhs,gen){(gen=(gen||gensym_factory("p")));var vars=[];var clauses=[];var current=["multi"];var placeholder=null;var mktemp=function(){var t=gen();vars.push(t);return t;};var newclause=function(){if((current.length>1)){clauses.push(current);}else{null;}return (current=["multi"]);};var maybe_temp=function(x){if(is_symbol(x,env)){return x;}else{var temp=mktemp();current.push(["assign",temp,x]);return temp;}};var helper=function(lhs,curr){return helper_noexpand(expand.step(["pattern",env],lhs),curr);};var helper_noexpand=function(lhs,curr){var helper_keys=function(temp,keys){var __t650=[];var __t651=keys;var __t652=__t651.length;for(var __t653=0;(__t653<__t652);(__t653++)){var __t654=__t651[__t653];var __tp0;var __tp1;var __t657;var __t658;var k;var __t655;var __t656;var k;var v;var other;if(((__t654 instanceof Array)&&((__t654["#"]===undefined)&&(((__tp0=__t654.length),true)&&((__tp0===2)&&(((__tp1=__t654[0]),(((__tp1 instanceof Array)&&((__tp1["#"]===undefined)&&(((__t655=__tp1.length),true)&&((__t655===2)&&(((__t656=__tp1[0]),(__t656==="symbol"))&&((k=__tp1[1]),true))))))||((__tp1 instanceof Array)&&((__tp1["#"]===undefined)&&(((__t657=__tp1.length),true)&&((__t657===2)&&(((__t658=__tp1[0]),(__t658==="value"))&&((k=__tp1[1]),true))))))))&&((v=__t654[1]),true))))))){__t650.push(helper(v,["send",temp,["value",k]]));}else{if(((other=__t654),true)){false;}else{throw ["Could not find a match",__t654];}}}return __t650;};var helper_array=function(temp,specs,start){var __tp0;var fw;var bw;var keys;var dflt;var rest;if(((specs instanceof Array)&&((specs["#"]===undefined)&&(((__tp0=specs.length),true)&&((__tp0===5)&&((fw=specs[0]),true,(bw=specs[1]),true,(keys=specs[2]),true,(dflt=specs[3]),true,(rest=specs[4]),true)))))){(void 0);}else{throw "a condition failed";}var nfw=fw.length;var nbw=bw.length;var ndflt=dflt.length;var extract_length=true;var check_length=true;if(extract_length){var len=mktemp();current.push(["send",["symbol",":="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["symbol","true"]);newclause();if(check_length){var lo=((nfw+nbw)+start);var hi=(lo+ndflt);if((rest===undefined)){if((lo===hi)){current.push(["send",["symbol","=="],["data",len,["value",lo]]]);}else{current.push(["send",["symbol","and"],["data",["send",["symbol",">="],["data",len,["value",lo]]],["send",["symbol","<="],["data",len,["value",hi]]]]]);}}else{current.push(["send",["symbol",">="],["data",len,["value",lo]]]);}newclause();}else{null;}}else{null;}var __t659=enumerate(fw);var __t660=__t659.length;for(var __t661=0;(__t661<__t660);(__t661++)){var __t669=__t659[__t661];var __tp0;var j;var m;var other;if(((__t669 instanceof Array)&&((__t669["#"]===undefined)&&(((__tp0=__t669.length),true)&&((__tp0===2)&&((j=__t669[0]),true,(m=__t669[1]),true)))))){helper(m,["send",temp,["value",(j+start)]]);}else{if(((other=__t669),true)){false;}else{throw ["Could not find a match",__t669];}}}false;var __t662=enumerate(dflt);var __t663=__t662.length;for(var __t664=0;(__t664<__t663);(__t664++)){var __t670=__t662[__t664];var __tp0;var j;var __tp1;var __tp2;var patt;var value;var other;if(((__t670 instanceof Array)&&((__t670["#"]===undefined)&&(((__tp0=__t670.length),true)&&((__tp0===2)&&(((j=__t670[0]),true,(__tp1=__t670[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===2)&&((patt=__tp1[0]),true,(value=__tp1[1]),true)))))))))){var idx=((j+nfw)+start);helper(patt,["send",["symbol","if"],["data",["send",["symbol",">="],["data",["value",idx],len]],value,["send",temp,["value",idx]]]]);}else{if(((other=__t670),true)){false;}else{throw ["Could not find a match",__t670];}}}false;if((rest!==undefined)){var pos=((nfw+ndflt)+start);var slice=function(){if((nbw>0)){return ["data",["value",pos],["value",(-nbw)]];}else{return ["data",["value",pos]];}}();helper(rest,["send",["send",temp,["send",["symbol","."],["data",["void"],["symbol","slice"]]]],slice]);}else{null;}var __t665=[];var __t666=enumerate(bw);var __t667=__t666.length;for(var __t668=0;(__t668<__t667);(__t668++)){var __t671=__t666[__t668];var __tp0;var j;var m;var other;if(((__t671 instanceof Array)&&((__t671["#"]===undefined)&&(((__tp0=__t671.length),true)&&((__tp0===2)&&((j=__t671[0]),true,(m=__t671[1]),true)))))){__t665.push(helper(m,["send",temp,["send",["symbol","-"],["data",len,["value",(nbw-j)]]]]));}else{if(((other=__t671),true)){false;}else{throw ["Could not find a match",__t671];}}}return __t665;};var __t642=lhs;var __tp0;var __tp1;var __t643;var __t644;var __tp0;var __tp1;var s;var __tp0;var __tp1;var v;var __tp0;var __tp1;var condition;var pattern;var __tp0;var __tp1;var __tp0;var __tp1;var c;var pattern;var __tp0;var __tp1;var xs;var __tp0;var __tp1;var xs;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var checkers;var expr;var __tp0;var __tp1;var checker;var expr;var __tp0;var __tp1;var projector;var expr;var __tp0;var __tp1;var fname;var spec;var __tp0;var __tp1;var i;var args;var __tp0;var __tp1;var args;var other;var __t645=false;var __t646=false;var __t647=false;var __t648=false;var __t649=false;if(((__t642 instanceof Array)&&((__t642["#"]===undefined)&&(((__tp0=__t642.length),true)&&((__tp0===1)&&((__tp1=__t642[0]),(__tp1==="void"))))))){var x=["check",["macro",make_checker(["value",null],["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if(((__t642==="_")||((__t642 instanceof Array)&&((__t642["#"]===undefined)&&(((__t643=__t642.length),true)&&((__t643===1)&&((__t644=__t642[0]),(__t644==="ignore")))))))){if((!is_symbol(curr,env))){current.push(curr);return current.push(["symbol","true"]);}else{return null;}}else{if(((__t645=(__t642 instanceof Array))&&((__t646=(__t642["#"]===undefined))&&((__t647=((__tp0=__t642.length),true))&&((__t648=(__tp0===2))&&(((__tp1=__t642[0]),(__tp1==="symbol"))&&((s=__t642[1]),true))))))){vars.push(["symbol",s]);current.push(["assign",["symbol",s],curr]);return current.push(["value",true]);}else{if((__t648&&(((__tp1=__t642[0]),(__tp1==="value"))&&((v=__t642[1]),true)))){var x=["check",["macro",make_checker(lhs,["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if((__t647&&((__tp0===3)&&(((__tp1=__t642[0]),(__tp1==="test"))&&((condition=__t642[1]),true,(pattern=__t642[2]),true))))){helper(pattern,curr);current.push(condition);return newclause();}else{if((__t647&&((__tp0===1)&&((__tp1=__t642[0]),(__tp1==="placeholder"))))){(placeholder=gensym());vars.push(placeholder);current.push(["assign",placeholder,curr]);return current.push(["value",true]);}else{if((__t647&&((__tp0===3)&&(((__tp1=__t642[0]),(__tp1==="constant"))&&((c=__t642[1]),true,(pattern=__t642[2]),true))))){return helper(pattern,c);}else{if((__t647&&((__t648=(__tp0>=1))&&(((__tp1=__t642[0]),(__tp1==="all"))&&((xs=__t642.slice(1)),true))))){var temp=maybe_temp(curr);var __t672=xs;var __t673=__t672.length;for(var __t674=0;(__t674<__t673);(__t674++)){var __t675=__t672[__t674];var x;var other;if(((x=__t675),true)){helper(x,temp);}else{if(((other=__t675),true)){false;}else{throw ["Could not find a match",__t675];}}}false;return false;}else{if((__t648&&(((__tp1=__t642[0]),(__tp1==="any"))&&((xs=__t642.slice(1)),true)))){var normalize=function(vars){return function(){var __t679=[];var __t680=vars;var __t681=__t680.length;for(var __t682=0;(__t682<__t681);(__t682++)){var __t683=__t680[__t682];var __tp0;var __tp1;var v;var other;if(((__t683 instanceof Array)&&((__t683["#"]===undefined)&&(((__tp0=__t683.length),true)&&((__tp0===2)&&(((__tp1=__t683[0]),(__tp1==="symbol"))&&((v=__t683[1]),true,(v.slice(0,3)!=="__t")))))))){__t679.push(v);}else{if(((other=__t683),true)){false;}else{throw ["Could not find a match",__t683];}}}return __t679;}().sort().join(",");};var temp=maybe_temp(curr);var myvars=undefined;var clauses=[];var __t676=xs;var __t677=__t676.length;for(var __t678=0;(__t678<__t677);(__t678++)){var __t684=__t676[__t678];var x;var other;if(((x=__t684),true)){var p=parse_lhs(env,x,temp,gensym);var __t685=null;var _;if((myvars===undefined)){(myvars=p[0]);}else{if((normalize(p[0])!==normalize(myvars))){throw [Error("Must have the same set of variables in both branches!",(("["+String(myvars))+"]"),(("["+String(p[0]))+"]"))];}else{if(((_=__t685),true)){(vars=vars.concat(p[0]));}else{throw ["Could not find a match",__t685];}}}clauses.push(make_pattern_test(p[1]));}else{if(((other=__t684),true)){false;}else{throw ["Could not find a match",__t684];}}}false;current.push(make_or_pattern(clauses));(vars=vars.concat(myvars));return newclause();}else{if((__t647&&((__t648=(__tp0===3))&&((__t649=((__tp1=__t642[0]),(__tp1==="check")))&&(((__tp2=__t642[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3>=1)&&(((__tp4=__tp2[0]),(__tp4==="multi"))&&((checkers=__tp2.slice(1)),true,(expr=__t642[2]),true)))))))))){var temp=maybe_temp(curr);var __t686=checkers;var __t687=__t686.length;for(var __t688=0;(__t688<__t687);(__t688++)){var __t689=__t686[__t688];var checker;var other;if(((checker=__t689),true)){current.push(["send",checker,["data",temp]]);newclause();}else{if(((other=__t689),true)){false;}else{throw ["Could not find a match",__t689];}}}false;return helper(expr,temp);}else{if((__t649&&((checker=__t642[1]),true,(expr=__t642[2]),true))){var temp=maybe_temp(curr);current.push(["send",checker,["data",temp]]);newclause();return helper(expr,temp);}else{if((__t648&&(((__tp1=__t642[0]),(__tp1==="project"))&&((projector=__t642[1]),true,(expr=__t642[2]),true)))){var temp=maybe_temp(curr);var temp2=mktemp();current.push(["send",["symbol",":="],["data",temp2,["send",projector,["data",temp]]]],["send",temp2,["value",0]]);newclause();return helper(expr,["send",temp2,["value",1]]);}else{if((__t648&&(((__tp1=__t642[0]),(__tp1==="send"))&&((fname=__t642[1]),true,(spec=__t642[2]),true)))){return helper(fname,["send",["symbol","->"],["data",spec,curr]]);}else{if((__t647&&((__tp0>=2)&&(((__tp1=__t642[0]),(__tp1==="duck"))&&((i=__t642[1]),true,(args=__t642.slice(2)),true))))){var temp=maybe_temp(curr);current.push(["value",true]);var __tp0;var specs;var __tp1;var fw;var bw;var keys;var dflt;var rest;if((((__tp0=lhs_parse_specs(env,args)),(specs=__tp0),true,(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===5)&&((fw=__tp0[0]),true,(bw=__tp0[1]),true,(keys=__tp0[2]),true,(dflt=__tp0[3]),true,(rest=__tp0[4]),true)))))){(void 0);}else{throw "a condition failed";}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){return helper_array(temp,specs,i);}else{return null;}}else{if((__t647&&((__tp0>=1)&&(((__tp1=__t642[0]),(__tp1==="data"))&&((args=__t642.slice(1)),true))))){var temp=maybe_temp(curr);var __tp0;var specs;var __tp1;var fw;var bw;var keys;var dflt;var rest;if((((__tp0=lhs_parse_specs(env,args)),(specs=__tp0),true,(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===5)&&((fw=__tp0[0]),true,(bw=__tp0[1]),true,(keys=__tp0[2]),true,(dflt=__tp0[3]),true,(rest=__tp0[4]),true)))))){(void 0);}else{throw "a condition failed";}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){current.push(["send",["symbol","instanceof"],["data",temp,["symbol","Array"]]]);newclause();current.push(["send",["symbol","=="],["data",["send",temp,["value","#"]],["symbol","undefined"]]]);newclause();return helper_array(temp,specs,0);}else{return null;}}else{if(((other=__t642),true)){pr(other);pr(Error().stack);throw ["OopsG",other];}else{throw ["Could not find a match",__t642];}}}}}}}}}}}}}}}}};helper(lhs,rhs);if((current.length>1)){clauses.push(current);}else{null;}return [vars,clauses,placeholder];};var make_declarations=function(vars,val){var __t690=[];var __t691=vars;var __t692=__t691.length;for(var __t693=0;(__t693<__t692);(__t693++)){var __t694=__t691[__t693];var name;var other;if(((name=__t694),true)){__t690.push(["declare",name,["value",val]]);}else{if(((other=__t694),true)){false;}else{throw ["Could not find a match",__t694];}}}return __t690;};var make_pattern_test=function(clauses){var ands=clauses.pop();while((clauses.length>0)){(ands=["send",["symbol","and"],["data",clauses.pop(),ands]]);}return (ands||["value",true]);};var make_or_pattern=function(clauses){var ors=clauses.pop();while((clauses.length>0)){(ors=["send",["symbol","or"],["data",clauses.pop(),ors]]);}return ors;};var find_arrow=function(__t696){var expr;var __t695;(expr=__t696);true;(__t695=__t696);var __t697=__t695;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var x;var __t700;var __t701;var __t698;var __t699;var x;var x;var __tp0;var __tp1;var v;var __tp0;var kind;var args;var __t702=false;var __t703=false;var __t704=false;var __t705=false;var __t706=false;if(((__t702=(__t697 instanceof Array))&&((__t703=(__t697["#"]===undefined))&&((__t704=((__tp0=__t697.length),true))&&((__t705=(__tp0===2))&&((__t706=((__tp1=__t697[0]),(__tp1==="symbol")))&&((__tp2=__t697[1]),(__tp2==="match")))))))){var placeholder=gensym();return [placeholder,placeholder];}else{if((__t706&&((__tp2=__t697[1]),(__tp2==="|>")))){var placeholder=gensym();return [placeholder,placeholder];}else{if((__t706&&((__tp2=__t697[1]),(__tp2==="|>*")))){var placeholder=gensym();return [placeholder,["send",["symbol","*"],["data",["void"],placeholder]]];}else{if((((__t697 instanceof Array)&&((__t697["#"]===undefined)&&(((__t698=__t697.length),true)&&((__t698===2)&&(((__t699=__t697[0]),(__t699==="symbol"))&&((x=__t697[1]),true))))))||(((x=__t697),true,(__t697 instanceof Array))&&((__t697["#"]===undefined)&&(((__t700=__t697.length),true)&&((__t700===1)&&((__t701=__t697[0]),(__t701==="void")))))))){return [false,expr];}else{if((((x=__t697),true,(__t697 instanceof Array))&&((__t697["#"]===undefined)&&(((__tp0=__t697.length),true)&&((__tp0===2)&&(((__tp1=__t697[0]),(__tp1==="value"))&&((v=__t697[1]),true))))))){return [false,x];}else{if(((__t697 instanceof Array)&&((__t697["#"]===undefined)&&(((__tp0=__t697.length),true)&&((__tp0>=1)&&((kind=__t697[0]),true,(args=__t697.slice(1)),true)))))){var placeholder=false;var new_args=function(){var __t707=[];var __t708=args;var __t709=__t708.length;for(var __t710=0;(__t710<__t709);(__t710++)){var __t711=__t708[__t710];var arg;var other;if(((arg=__t711),true)){__t707.push(function(){var __tp0;var __tp1;var ph;var new_arg;if((((__tp0=find_arrow(arg)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((ph=__tp0[0]),true,(new_arg=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}if(ph){(placeholder=ph);}else{null;}return new_arg;}());}else{if(((other=__t711),true)){false;}else{throw ["Could not find a match",__t711];}}}return __t707;}();return [placeholder,patch_array([kind],new_args)];}else{throw ["Could not find a match",__t697];}}}}}}};var same=function(){var __t713=Array.prototype.slice.call(arguments,0);var __tp0;var __t714;if(((__t713 instanceof Array)&&((__t713["#"]===undefined)&&(((__tp0=__t713.length),true)&&((__tp0>=0)&&((__t714=__t713.slice(0)),true)))))){var __t715=__t714;var __tp0;var __tp1;var __tp2;var __tp3;var x;var __tp4;var __tp5;var __tp6;var y;var __tp0;var __tp1;var __tp2;var __tp3;var x;var __tp4;var __tp5;var __tp6;var y;var __tp0;var __tp1;var __tp2;var __tp3;var x;var __tp4;var __tp5;var __tp6;var y;var __tp0;var __tp1;var __tp2;var __tp3;var f;var x;var __tp4;var __tp5;var __tp6;var g;var y;var __tp0;var __tp1;var __tp2;var kind1;var xs;var __tp3;var __tp4;var kind2;var ys;var other;var __t716=false;var __t717=false;var __t718=false;var __t719=false;var __t720=false;var __t721=false;var __t722=false;var __t723=false;if(((__t716=(__t715 instanceof Array))&&((__t717=(__t715["#"]===undefined))&&((__t718=((__tp0=__t715.length),true))&&((__t719=(__tp0===2))&&((__t720=((__tp1=__t715[0]),(__tp1 instanceof Array)))&&((__t721=(__tp1["#"]===undefined))&&((__t722=((__tp2=__tp1.length),true))&&((__t723=(__tp2===2))&&(((__tp3=__tp1[0]),(__tp3==="symbol"))&&(((x=__tp1[1]),true,(__tp4=__t715[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&((y=__tp4[1]),true)))))))))))))))){return (x===y);}else{if((__t723&&(((__tp3=__tp1[0]),(__tp3==="value"))&&(((x=__tp1[1]),true,(__tp4=__t715[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="value"))&&((y=__tp4[1]),true))))))))){return (x===y);}else{if((__t723&&(((__tp3=__tp1[0]),(__tp3==="macro"))&&(((x=__tp1[1]),true,(__tp4=__t715[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="macro"))&&((y=__tp4[1]),true))))))))){return (x===y);}else{if((__t722&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((f=__tp1[1]),true,(x=__tp1[2]),true,(__tp4=__t715[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===3)&&(((__tp6=__tp4[0]),(__tp6==="send"))&&((g=__tp4[1]),true,(y=__tp4[2]),true)))))))))){return (same(f,g)&&same(x,y));}else{if((__t722&&((__tp2>=1)&&(((kind1=__tp1[0]),true,(xs=__tp1.slice(1)),true,(__tp3=__t715[1]),(__tp3 instanceof Array))&&((__tp3["#"]===undefined)&&(((__tp4=__tp3.length),true)&&((__tp4>=1)&&((kind2=__tp3[0]),true,(ys=__tp3.slice(1)),true)))))))){var allequal=xs.every(function(x,i){return same(x,send(ys,i));});return (((kind1===kind2)&&(xs.length===ys.length))&&allequal);}else{if(((other=__t715),true)){return false;}else{throw ["Could not find a match",__t715];}}}}}}}else{throw ["Could not find a match",__t713];}};stdenv.register_macro("|>",function(__t725,__t724){var __tp0;var context;var env;if(((__t725 instanceof Array)&&((__t725["#"]===undefined)&&(((__tp0=__t725.length),true)&&((__tp0===2)&&((context=__t725[0]),true,(env=__t725[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t726=__t724;var __tp0;var __tp1;var __tp0;var __tp1;var to_match;var cl;var __t727=false;var __t728=false;var __t729=false;if(((__t727=(__t726 instanceof Array))&&((__t728=(__t726["#"]===undefined))&&((__t729=((__tp0=__t726.length),true))&&((__tp0===1)&&((__tp1=__t726[0]),(__tp1==="void"))))))){return ["placeholder"];}else{if((__t729&&((__tp0===3)&&(((__tp1=__t726[0]),(__tp1==="data"))&&((to_match=__t726[1]),true,(cl=__t726[2]),true))))){var temp=gensym();var clauses=function(){var __t730=cl;var __tp0;var __tp1;var cls;var other;if(((__t730 instanceof Array)&&((__t730["#"]===undefined)&&(((__tp0=__t730.length),true)&&((__tp0>=1)&&(((__tp1=__t730[0]),(__tp1==="multi"))&&((cls=__t730.slice(1)),true))))))){return cls;}else{if(((other=__t730),true)){return [other];}else{throw ["Could not find a match",__t730];}}}();var cached_conditions=[];var stmts=["multi",["declare",temp,to_match]];(clauses=function(){var __t731=[];var __t732=clauses;var __t733=__t732.length;for(var __t734=0;(__t734<__t733);(__t734++)){var __t735=__t732[__t734];var clause;var other;if(((clause=__t735),true)){__t731.push(function(){var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var lhs;var body;if(((clause instanceof Array)&&((clause["#"]===undefined)&&(((__tp0=clause.length),true)&&((__tp0===3)&&(((__tp1=clause[0]),(__tp1==="send"))&&(((__tp2=clause[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=clause[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((lhs=__tp6[1]),true,(body=__tp6[2]),true)))))))))))))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var decls;var conditions;var placeholder;if((((__tp0=parse_lhs(env,lhs,temp)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===3)&&((decls=__tp0[0]),true,(conditions=__tp0[1]),true,(placeholder=__tp0[2]),true)))))){(void 0);}else{throw "a condition failed";}(stmts=stmts.concat(make_declarations(decls)));var b=function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,body]];}else{return body;}}();var f=function(x){return ["done",expand(["expr",env],x)];};return [conditions.map(f),b];}());}else{if(((other=__t735),true)){false;}else{throw ["Could not find a match",__t735];}}}return __t731;}());var shares=function(){var f=function(__t736,i){var __tp0;var conditions;var body;if(((__t736 instanceof Array)&&((__t736["#"]===undefined)&&(((__tp0=__t736.length),true)&&((__tp0===2)&&((conditions=__t736[0]),true,(body=__t736[1]),true)))))){(void 0);}else{throw "a condition failed";}var res=0;var prev_conditions=send(clauses,i)[0];var nc=conditions.length;for(var j=0;((j<nc)&&same(send(conditions,j),send(prev_conditions,j)));(j++)){(res++);}return res;};return clauses.slice(1).map(f);}();var max=send(Math.max,shares);shares.push(0);var vars=[];(vars=vars.concat(function(){var __t737=[];var __t738=range(1,max);var __t739=__t738.length;for(var __t740=0;(__t740<__t739);(__t740++)){var __t741=__t738[__t740];var _;var other;if(((_=__t741),true)){__t737.push(gensym());}else{if(((other=__t741),true)){false;}else{throw ["Could not find a match",__t741];}}}return __t737;}()));(stmts=stmts.concat(make_declarations(vars,false)));var shared_last=0;var new_clauses=clauses.map(function(__t742,i){var __tp0;var conditions;var body;if(((__t742 instanceof Array)&&((__t742["#"]===undefined)&&(((__tp0=__t742.length),true)&&((__tp0===2)&&((conditions=__t742[0]),true,(body=__t742[1]),true)))))){(void 0);}else{throw "a condition failed";}var shared=function(){if(shared_last){return [send(vars,(shared_last-1))];}else{return [];}}();var n_to_share=Math.max(shared_last,send(shares,i));var to_share=conditions.slice(shared_last,n_to_share).map(function(x,j){return ["assign",send(vars,(shared_last+j)),x];});(shared_last=send(shares,i));var rest=conditions.slice(n_to_share);return [shared.concat(to_share).concat(rest),body];});(clauses=new_clauses);var r=["js_throw",["data",["value","Could not find a match"],temp]];while((clauses.length>0)){var __tp0;var __tp1;var conditions;var body;if((((__tp0=clauses.pop()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((conditions=__tp0[0]),true,(body=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var test=make_pattern_test(conditions);(r=["if",test,body,r]);}stmts.push(r);return stmts;}else{throw ["Could not find a match",__t726];}}});var qqstruct=function(name,args){return patch_array(["data",["value",name]],args);};var qq=function(__t744){var expr;var __t743;(expr=__t744);true;(__t743=__t744);var __t745=__t743;var __tp0;var __tp1;var s;var __tp0;var __tp1;var __tp0;var __tp1;var v;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var insert;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var insert;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var insert;var __tp0;var name;var args;var __t746=false;var __t747=false;var __t748=false;var __t749=false;var __t750=false;var __t751=false;var __t752=false;var __t753=false;var __t754=false;var __t755=false;if(((__t746=(__t745 instanceof Array))&&((__t747=(__t745["#"]===undefined))&&((__t748=((__tp0=__t745.length),true))&&((__tp0===2)&&(((__tp1=__t745[0]),(__tp1==="symbol"))&&((s=__t745[1]),true))))))){return qqstruct("symbol",[["value",s]]);}else{if((__t748&&((__tp0===1)&&((__tp1=__t745[0]),(__tp1==="void"))))){return qqstruct("void",[]);}else{if((__t748&&((__tp0===2)&&(((__tp1=__t745[0]),(__tp1==="value"))&&((v=__t745[1]),true))))){return qqstruct("value",[expr]);}else{if((__t748&&((__t749=(__tp0===3))&&((__t750=((__tp1=__t745[0]),(__tp1==="send")))&&((__t751=((__tp2=__t745[1]),(__tp2 instanceof Array)))&&((__t752=(__tp2["#"]===undefined))&&((__t753=((__tp3=__tp2.length),true))&&((__t754=(__tp3===2))&&((__t755=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="^"))&&(((__tp6=__t745[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((insert=__tp6[2]),true))))))))))))))))))))){return insert;}else{if((__t755&&(((__tp5=__tp2[1]),(__tp5==="^="))&&(((__tp6=__t745[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((insert=__tp6[2]),true)))))))))))))){return qqstruct("value",[insert]);}else{if((__t755&&(((__tp5=__tp2[1]),(__tp5==="^*"))&&(((__tp6=__t745[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((insert=__tp6[2]),true)))))))))))))){return ["send",["symbol","*"],["data",["void"],insert]];}else{if((__t748&&((__tp0>=1)&&((name=__t745[0]),true,(args=__t745.slice(1)),true)))){return qqstruct(name,function(){var __t756=[];var __t757=args;var __t758=__t757.length;for(var __t759=0;(__t759<__t758);(__t759++)){var __t760=__t757[__t759];var arg;var other;if(((arg=__t760),true)){__t756.push(qq(arg));}else{if(((other=__t760),true)){false;}else{throw ["Could not find a match",__t760];}}}return __t756;}());}else{throw ["Could not find a match",__t745];}}}}}}}};stdenv.register_macro("'",function(__t761,__t762){var __tp0;var context;var env;if(((__t761 instanceof Array)&&((__t761["#"]===undefined)&&(((__tp0=__t761.length),true)&&((__tp0===2)&&((context=__t761[0]),true,(env=__t761[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var expr;if(((__t762 instanceof Array)&&((__t762["#"]===undefined)&&(((__tp0=__t762.length),true)&&((__tp0===3)&&(((__tp1=__t762[0]),(__tp1==="data"))&&(((__tp2=__t762[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((expr=__t762[2]),true)))))))))))){(void 0);}else{throw "a condition failed";}return qq(expr);});stdenv.register_macro("provide",function(__t763,__t764){var __tp0;var context;var env;if(((__t763 instanceof Array)&&((__t763["#"]===undefined)&&(((__tp0=__t763.length),true)&&((__tp0===2)&&((context=__t763[0]),true,(env=__t763[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var expr;if(((__t764 instanceof Array)&&((__t764["#"]===undefined)&&(((__tp0=__t764.length),true)&&((__tp0===2)&&(((__tp1=__t764[0]),(__tp1==="data"))&&(((__tp2=__t764[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((expr=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}return ["sink",["multi"].concat(function(){var __t765=[];var __t766=expr;var __t767=__t766.length;for(var __t768=0;(__t768<__t767);(__t768++)){var __t769=__t766[__t768];var s;var __tp0;var __tp1;var name;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var s;var __tp9;var __t772;var __t773;var name;var __t770;var __t771;var name;var other;var other;var __t774=false;if((((s=__t769),true,(__t769 instanceof Array))&&((__t769["#"]===undefined)&&(((__tp0=__t769.length),true)&&((__tp0===2)&&(((__tp1=__t769[0]),(__tp1==="symbol"))&&((name=__t769[1]),true))))))){__t765.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if(((__t769 instanceof Array)&&((__t769["#"]===undefined)&&(((__tp0=__t769.length),true)&&((__tp0===3)&&(((__tp1=__t769[0]),(__tp1==="send"))&&(((__tp2=__t769[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t769[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((s=__tp6[1]),true,(__tp9=__tp6[2]),(((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t770=__tp9.length),true)&&((__t770===2)&&(((__t771=__tp9[0]),(__t771==="symbol"))&&((name=__tp9[1]),true))))))||((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t772=__tp9.length),true)&&((__t772===2)&&(((__t773=__tp9[0]),(__t773==="value"))&&((name=__tp9[1]),true))))))))))))))))))))))))){__t765.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if((__t774=((other=__t769),true))){__t765.push(function(){throw ErrorFactory(["syntax","provide"]).create("Each clause of provide must be 'sym' or 'sym as name'");}());}else{if(__t774){false;}else{throw ["Could not find a match",__t769];}}}}}return __t765;}())];});stdenv.register_macro("require",function(__t775,__t776){var __tp0;var context;var env;if(((__t775 instanceof Array)&&((__t775["#"]===undefined)&&(((__tp0=__t775.length),true)&&((__tp0===2)&&((context=__t775[0]),true,(env=__t775[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;if(((__t776 instanceof Array)&&((__t776["#"]===undefined)&&(((__tp0=__t776.length),true)&&((__tp0===2)&&(((__tp1=__t776[0]),(__tp1==="data"))&&((expr=__t776[1]),true))))))){(void 0);}else{throw "a condition failed";}var stmts=[];var topfetch=function(pkg,v){stmts.push(["send",["symbol","="],["data",v,["send",["send",["symbol","___node"],["send",["symbol","."],["data",["void"],["symbol","require"]]]],["data",["value",pkg]]]]]);return v;};var produce=function(__t777,fetch){var __t778=__t777;var __tp0;var __tp1;var s;var __tp0;var __tp1;var __tp2;var s;var __t781;var __t782;var subp;var __t779;var __t780;var subp;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __t785;var __t786;var pkg;var __t783;var __t784;var pkg;var s;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var pkg;var subp;var __t787=false;var __t788=false;var __t789=false;var __t790=false;var __t791=false;var __t792=false;var __t793=false;var __t794=false;var __t795=false;var __t796=false;if(((__t787=(__t778 instanceof Array))&&((__t788=(__t778["#"]===undefined))&&((__t789=((__tp0=__t778.length),true))&&((__t790=(__tp0===2))&&(((__tp1=__t778[0]),(__tp1==="symbol"))&&((s=__t778[1]),true))))))){return fetch(s,["symbol",s]);}else{if((__t790&&(((__tp1=__t778[0]),(__tp1==="value"))&&(((__tp2=__t778[1]),(typeof(__tp2)==="string"))&&((s=__tp2),true))))){return fetch(s,gensym());}else{if((((__t778 instanceof Array)&&((__t778["#"]===undefined)&&(((__t779=__t778.length),true)&&((__t779>=1)&&(((__t780=__t778[0]),(__t780==="multi"))&&((subp=__t778.slice(1)),true))))))||((__t778 instanceof Array)&&((__t778["#"]===undefined)&&(((__t781=__t778.length),true)&&((__t781>=1)&&(((__t782=__t778[0]),(__t782==="data"))&&((subp=__t778.slice(1)),true)))))))){var __t797=[];var __t798=subp;var __t799=__t798.length;for(var __t800=0;(__t800<__t799);(__t800++)){var __t801=__t798[__t800];var p;var other;if(((p=__t801),true)){__t797.push(produce(p,fetch));}else{if(((other=__t801),true)){false;}else{throw ["Could not find a match",__t801];}}}return __t797;}else{if(((__t787=(__t778 instanceof Array))&&((__t788=(__t778["#"]===undefined))&&((__t789=((__tp0=__t778.length),true))&&((__t790=(__tp0===3))&&((__t791=((__tp1=__t778[0]),(__tp1==="send")))&&((__t792=((__tp2=__t778[1]),(__tp2 instanceof Array)))&&((__t793=(__tp2["#"]===undefined))&&((__t794=((__tp3=__tp2.length),true))&&((__t795=(__tp3===2))&&((__t796=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t778[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t783=__tp9.length),true)&&((__t783===2)&&(((__t784=__tp9[0]),(__t784==="value"))&&((pkg=__tp9[1]),true))))))||((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t785=__tp9.length),true)&&((__t785===2)&&(((__t786=__tp9[0]),(__t786==="symbol"))&&((pkg=__tp9[1]),true))))))))&&((s=__tp6[2]),true))))))))))))))))))){return fetch(pkg,s);}else{if((__t796&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=__t778[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((pkg=__tp6[1]),true,(subp=__tp6[2]),true))))))))){var pkgv=produce(pkg,fetch);return produce(subp,function(pkg,v){return stmts.push(["send",["symbol","="],["data",v,["send",pkgv,["value",pkg]]]]);});}else{throw ["Could not find a match",__t778];}}}}}};produce(expr,topfetch);return patch_array(["multi"],stmts);});stdenv.register_macro("%",function(__t802,__t803){var __tp0;var context;var env;if(((__t802 instanceof Array)&&((__t802["#"]===undefined)&&(((__tp0=__t802.length),true)&&((__tp0===2)&&((context=__t802[0]),true,(env=__t802[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var descr;var contents;if(((__t803 instanceof Array)&&((__t803["#"]===undefined)&&(((__tp0=__t803.length),true)&&((__tp0===3)&&(((__tp1=__t803[0]),(__tp1==="data"))&&((descr=__t803[1]),true,(contents=__t803[2]),true))))))){(void 0);}else{throw "a condition failed";}var tags=["data"];var parse=function(__t804){var __t805=__t804;var __tp0;var __tp1;var __tp0;var __tp1;var s;var __tp0;var __tp1;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __t808;var __t809;var x;var __t806;var __t807;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __t812;var __t813;var x;var __t810;var __t811;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __t816;var __t817;var prop;var __t814;var __t815;var prop;var value;var __tp0;var __tp1;var expr;var rest;var __t820;var __t821;var args;var __t818;var __t819;var args;var __t822=false;var __t823=false;var __t824=false;var __t825=false;var __t826=false;var __t827=false;var __t828=false;var __t829=false;var __t830=false;var __t831=false;if(((__t822=(__t805 instanceof Array))&&((__t823=(__t805["#"]===undefined))&&((__t824=((__tp0=__t805.length),true))&&((__tp0===1)&&((__tp1=__t805[0]),(__tp1==="void"))))))){return null;}else{if((__t824&&((__t825=(__tp0===2))&&(((__tp1=__t805[0]),(__tp1==="symbol"))&&((s=__t805[1]),true))))){return tags.push(["value",("+"+s)]);}else{if((__t825&&(((__tp1=__t805[0]),(__tp1==="value"))&&((x=__t805[1]),true)))){return tags.push(["value",("+"+x)]);}else{if((__t824&&((__t825=(__tp0===3))&&((__t826=((__tp1=__t805[0]),(__tp1==="send")))&&((__t827=((__tp2=__t805[1]),(__tp2 instanceof Array)))&&((__t828=(__tp2["#"]===undefined))&&((__t829=((__tp3=__tp2.length),true))&&((__t830=(__tp3===2))&&((__t831=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="."))&&(((__tp6=__t805[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((__tp12=__tp6[2]),(((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t806=__tp12.length),true)&&((__t806===2)&&(((__t807=__tp12[0]),(__t807==="symbol"))&&((x=__tp12[1]),true))))))||((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t808=__tp12.length),true)&&((__t808===2)&&(((__t809=__tp12[0]),(__t809==="value"))&&((x=__tp12[1]),true)))))))))))))))))))))))))))){return tags.push(["value",x]);}else{if((__t831&&(((__tp5=__tp2[1]),(__tp5==="#"))&&(((__tp6=__t805[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((__tp12=__tp6[2]),(((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t810=__tp12.length),true)&&((__t810===2)&&(((__t811=__tp12[0]),(__t811==="symbol"))&&((x=__tp12[1]),true))))))||((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t812=__tp12.length),true)&&((__t812===2)&&(((__t813=__tp12[0]),(__t813==="value"))&&((x=__tp12[1]),true))))))))))))))))))))){return tags.push(["value",("#"+x)]);}else{if((__t831&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t805[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t814=__tp9.length),true)&&((__t814===2)&&(((__t815=__tp9[0]),(__t815==="symbol"))&&((prop=__tp9[1]),true))))))||((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t816=__tp9.length),true)&&((__t816===2)&&(((__t817=__tp9[0]),(__t817==="value"))&&((prop=__tp9[1]),true))))))))&&((value=__tp6[2]),true)))))))))){return tags.push(["send",["send",["symbol","#"],["data",["void"],["symbol","assoc"]]],["data",["value",prop],value]]);}else{if((__t826&&((expr=__t805[1]),true,(rest=__t805[2]),true))){parse(expr);return parse(rest);}else{if((((__t805 instanceof Array)&&((__t805["#"]===undefined)&&(((__t818=__t805.length),true)&&((__t818>=1)&&(((__t819=__t805[0]),(__t819==="multi"))&&((args=__t805.slice(1)),true))))))||((__t805 instanceof Array)&&((__t805["#"]===undefined)&&(((__t820=__t805.length),true)&&((__t820>=1)&&(((__t821=__t805[0]),(__t821==="data"))&&((args=__t805.slice(1)),true)))))))){return args.forEach(parse);}else{throw ["Could not find a match",__t805];}}}}}}}}};parse(descr);(contents=function(){var __t832=contents;var __tp0;var __tp1;var __tp0;var __tp1;var args;var x;var __t833=false;var __t834=false;var __t835=false;if(((__t833=(__t832 instanceof Array))&&((__t834=(__t832["#"]===undefined))&&((__t835=((__tp0=__t832.length),true))&&((__tp0===1)&&((__tp1=__t832[0]),(__tp1==="void"))))))){return ["data"];}else{if((__t835&&((__tp0>=1)&&(((__tp1=__t832[0]),(__tp1==="multi"))&&((args=__t832.slice(1)),true))))){return patch_array(["data"],args);}else{if(((x=__t832),true)){return x;}else{throw ["Could not find a match",__t832];}}}}());return ["send",["symbol","Node"],["data",tags,contents]];});var var_operator=function(temp){return function(_,expr){var f=function(__t836){var __t837=__t836;var __tp0;var __tp1;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __t838;var other;var __t839=false;var __t840=false;var __t841=false;if(((__t839=(__t837 instanceof Array))&&((__t840=(__t837["#"]===undefined))&&((__t841=((__tp0=__t837.length),true))&&((__tp0===1)&&((__tp1=__t837[0]),(__tp1==="void"))))))){return temp;}else{if((__t841&&((__tp0===3)&&(((__tp1=__t837[0]),(__tp1==="data"))&&(((__tp2=__t837[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((__t838=__t837[2]),true)))))))))){var __t842=__t838;var __tp0;var __tp1;var s;var __tp0;var __tp1;var obj;var msg;var other;var __t843=false;var __t844=false;var __t845=false;if(((__t843=(__t842 instanceof Array))&&((__t844=(__t842["#"]===undefined))&&((__t845=((__tp0=__t842.length),true))&&((__tp0===2)&&(((__tp1=__t842[0]),(__tp1==="symbol"))&&((s=__t842[1]),true))))))){return ["send",temp,["value",s]];}else{if((__t845&&((__tp0===3)&&(((__tp1=__t842[0]),(__tp1==="send"))&&((obj=__t842[1]),true,(msg=__t842[2]),true))))){var x=f(["data",["void"],obj]);return ["send",x,msg];}else{if(((other=__t842),true)){return ["send",temp,other];}else{throw ["Could not find a match",__t842];}}}}else{if(((other=__t837),true)){return ["send",temp,other];}else{throw ["Could not find a match",__t837];}}}};return f(expr);};};stdenv.register_macro("chain",function(__t846,__t847){var __tp0;var context;var env;if(((__t846 instanceof Array)&&((__t846["#"]===undefined)&&(((__tp0=__t846.length),true)&&((__tp0===2)&&((context=__t846[0]),true,(env=__t846[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var defn;var body;if(((__t847 instanceof Array)&&((__t847["#"]===undefined)&&(((__tp0=__t847.length),true)&&((__tp0===3)&&(((__tp1=__t847[0]),(__tp1==="data"))&&((defn=__t847[1]),true,(body=__t847[2]),true))))))){(void 0);}else{throw "a condition failed";}var newenv=env.fork();var temp=gensym();var __tp0;var __tp1;var variable;var expr;if((((__tp0=function(){var __t848=defn;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var x;var y;var other;if(((__t848 instanceof Array)&&((__t848["#"]===undefined)&&(((__tp0=__t848.length),true)&&((__tp0===3)&&(((__tp1=__t848[0]),(__tp1==="send"))&&(((__tp2=__t848[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t848[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((x=__tp6[1]),true,(y=__tp6[2]),true)))))))))))))))))){return [y,x];}else{if(((other=__t848),true)){return [["symbol","@"],other];}else{throw ["Could not find a match",__t848];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((variable=__tp0[0]),true,(expr=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var var_str;if(((variable instanceof Array)&&((variable["#"]===undefined)&&(((__tp0=variable.length),true)&&((__tp0===2)&&(((__tp1=variable[0]),(__tp1==="symbol"))&&((var_str=variable[1]),true))))))){(void 0);}else{throw "a condition failed";}newenv.register_macro(var_str,var_operator(temp));var stmts=["multi"].concat(function(){var __t849=[];var __t850=aslist(body);var __t851=__t850.length;for(var __t852=0;(__t852<__t851);(__t852++)){var __t853=__t850[__t852];var x;var other;if(((x=__t853),true)){__t849.push(["send",["symbol",":="],["data",temp,x]]);}else{if(((other=__t853),true)){false;}else{throw ["Could not find a match",__t853];}}}return __t849;}());var v=["multi",["send",["symbol","="],["data",temp,expr]],stmts,temp];return ["done",expand([context,newenv],v)];});stdenv.register_macro("using",function(__t854,__t855){var __tp0;var context;var env;if(((__t854 instanceof Array)&&((__t854["#"]===undefined)&&(((__tp0=__t854.length),true)&&((__tp0===2)&&((context=__t854[0]),true,(env=__t854[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var defn;var body;if(((__t855 instanceof Array)&&((__t855["#"]===undefined)&&(((__tp0=__t855.length),true)&&((__tp0===3)&&(((__tp1=__t855[0]),(__tp1==="data"))&&((defn=__t855[1]),true,(body=__t855[2]),true))))))){(void 0);}else{throw "a condition failed";}var newenv=env.fork();var temp=gensym();var __tp0;var __tp1;var variable;var expr;if((((__tp0=function(){var __t856=defn;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var x;var y;var other;if(((__t856 instanceof Array)&&((__t856["#"]===undefined)&&(((__tp0=__t856.length),true)&&((__tp0===3)&&(((__tp1=__t856[0]),(__tp1==="send"))&&(((__tp2=__t856[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t856[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((x=__tp6[1]),true,(y=__tp6[2]),true)))))))))))))))))){return [y,x];}else{if(((other=__t856),true)){return [["symbol","@"],other];}else{throw ["Could not find a match",__t856];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((variable=__tp0[0]),true,(expr=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var var_str;if(((variable instanceof Array)&&((variable["#"]===undefined)&&(((__tp0=variable.length),true)&&((__tp0===2)&&(((__tp1=variable[0]),(__tp1==="symbol"))&&((var_str=variable[1]),true))))))){(void 0);}else{throw "a condition failed";}newenv.register_macro(var_str,var_operator(temp));var v=["multi",["send",["symbol","="],["data",temp,expr]],body];return ["done",expand([context,newenv],v)];});var partition=function(xs,predicate){var t=[];var f=[];var __t857=xs;var __t858=__t857.length;for(var __t859=0;(__t859<__t858);(__t859++)){var __t860=__t857[__t859];var x;var x;var other;if(((x=__t860),true,predicate(x))){t.push(x);}else{if(((x=__t860),true)){f.push(x);}else{if(((other=__t860),true)){false;}else{throw ["Could not find a match",__t860];}}}}false;return [t,f];};stdenv.register_macro("class",function(__t861,arg){var __tp0;var context;var env;if(((__t861 instanceof Array)&&((__t861["#"]===undefined)&&(((__tp0=__t861.length),true)&&((__tp0===2)&&((context=__t861[0]),true,(env=__t861[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var clsvar;var __tp2;var __tp3;var body;if((((__tp0=function(){var __t865=arg;var __tp0;var __tp1;var body;var __tp0;var __tp1;var name;var body;var __t866=false;var __t867=false;var __t868=false;if(((__t866=(__t865 instanceof Array))&&((__t867=(__t865["#"]===undefined))&&((__t868=((__tp0=__t865.length),true))&&((__tp0===2)&&(((__tp1=__t865[0]),(__tp1==="data"))&&((body=__t865[1]),true))))))){return [gensym(),body];}else{if((__t868&&((__tp0===3)&&(((__tp1=__t865[0]),(__tp1==="data"))&&((name=__t865[1]),true,(body=__t865[2]),true))))){return [name,body];}else{throw ["Could not find a match",__t865];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&(((clsvar=__tp0[0]),true,(__tp2=__tp0[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((body=__tp3[1]),true))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var ctors;var clauses;if((((__tp0=partition(body,function(__t869){var __t870=__t869;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __tp13;var __tp14;var __tp15;var _;var _;var otherwise;if(((__t870 instanceof Array)&&((__t870["#"]===undefined)&&(((__tp0=__t870.length),true)&&((__tp0===3)&&(((__tp1=__t870[0]),(__tp1==="send"))&&(((__tp2=__t870[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t870[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="send"))&&(((__tp12=__tp9[1]),(__tp12 instanceof Array))&&((__tp12["#"]===undefined)&&(((__tp13=__tp12.length),true)&&((__tp13===2)&&(((__tp14=__tp12[0]),(__tp14==="symbol"))&&(((__tp15=__tp12[1]),(__tp15==="constructor"))&&((_=__tp9[2]),true,(_=__tp6[2]),true))))))))))))))))))))))))))))){return true;}else{if(((otherwise=__t870),true)){return false;}else{throw ["Could not find a match",__t870];}}})),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((ctors=__tp0[0]),true,(clauses=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var ctor_args;var ctor_body;if((((__tp0=function(){var __t871=ctors;var __tp0;var __tp0;var __t872;var __t873=false;var __t874=false;var __t875=false;if(((__t873=(__t871 instanceof Array))&&((__t874=(__t871["#"]===undefined))&&((__t875=((__tp0=__t871.length),true))&&(__tp0===0))))){return [["data"],[]];}else{if((__t875&&((__tp0===1)&&((__t872=__t871[0]),true)))){var __t876=__t872;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var _;var args;var __tp12;var __tp13;var body;if(((__t876 instanceof Array)&&((__t876["#"]===undefined)&&(((__tp0=__t876.length),true)&&((__tp0===3)&&(((__tp1=__t876[0]),(__tp1==="send"))&&(((__tp2=__t876[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t876[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="send"))&&(((_=__tp9[1]),true,(args=__tp9[2]),true,(__tp12=__tp6[2]),(__tp13=___projector(aslist)(__tp12)),__tp13[0])&&((body=__tp13[1]),true)))))))))))))))))))))))){return [args,body];}else{throw ["Could not find a match",__t876];}}else{throw ["Could not find a match",__t871];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((ctor_args=__tp0[0]),true,(ctor_body=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var selfvar=gensym();(ctor_body=function(){var prep=["send",["symbol","="],["data",selfvar,["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["send",["symbol","?"],["data",clsvar,["void"]]],["symbol","this"]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","this"]]]]];var ret=selfvar;return patch_array(["multi",prep],ctor_body,[ret]);}());var newenv=env.fork();newenv.register_macro("@",var_operator(selfvar));var defns=[];var static_defns=[];var __t862=clauses;var __t863=__t862.length;for(var __t864=0;(__t864<__t863);(__t864++)){var __t877=__t862[__t864];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var body;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var name;var args;var __tp12;var __tp13;var body;var other;var __t878=false;var __t879=false;var __t880=false;var __t881=false;var __t882=false;var __t883=false;var __t884=false;var __t885=false;var __t886=false;var __t887=false;if(((__t878=(__t877 instanceof Array))&&((__t879=(__t877["#"]===undefined))&&((__t880=((__tp0=__t877.length),true))&&((__t881=(__tp0===3))&&((__t882=((__tp1=__t877[0]),(__tp1==="send")))&&((__t883=((__tp2=__t877[1]),(__tp2 instanceof Array)))&&((__t884=(__tp2["#"]===undefined))&&((__t885=((__tp3=__tp2.length),true))&&((__t886=(__tp3===2))&&((__t887=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="static"))&&(((__tp6=__t877[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===2)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp10=___projector(aslist)(__tp9)),__tp10[0])&&((body=__tp10[1]),true))))))))))))))))))){(static_defns=static_defns.concat(body));}else{if((__t887&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t877[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="send"))&&(((name=__tp9[1]),true,(args=__tp9[2]),true,(__tp12=__tp6[2]),(__tp13=___projector(aslist)(__tp12)),__tp13[0])&&((body=__tp13[1]),true))))))))))))))){(name=function(){var __t888=name;var __tp0;var __tp1;var _;var __tp0;var __tp1;var n;var __t889=false;var __t890=false;var __t891=false;var __t892=false;if(((__t889=(__t888 instanceof Array))&&((__t890=(__t888["#"]===undefined))&&((__t891=((__tp0=__t888.length),true))&&((__t892=(__tp0===2))&&(((__tp1=__t888[0]),(__tp1==="value"))&&((_=__t888[1]),true))))))){return name;}else{if((__t892&&(((__tp1=__t888[0]),(__tp1==="symbol"))&&((n=__t888[1]),true)))){return ["value",n];}else{throw ["Could not find a match",__t888];}}}());defns.push(["send",["symbol",":="],["data",["send",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],name],["send",["symbol","->"],["data",args,patch_array(["multi",["send",["symbol","="],["data",selfvar,["symbol","this"]]]],body)]]]]);}else{if(((other=__t877),true)){false;}else{throw ["Could not find a match",__t877];}}}}false;return ["done",expand([context,newenv],patch_array(["multi",["send",["symbol","="],["data",clsvar,["send",["symbol","->"],["data",ctor_args,ctor_body]]]],["send",["symbol","augment"],["data",clsvar,patch_array(["data"],static_defns)]]],defns,[clsvar]))];});stdenv.register_macro("do",function(__t893,__t894){var __tp0;var context;var env;if(((__t893 instanceof Array)&&((__t893["#"]===undefined)&&(((__tp0=__t893.length),true)&&((__tp0===2)&&((context=__t893[0]),true,(env=__t893[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var body;if(((__t894 instanceof Array)&&((__t894["#"]===undefined)&&(((__tp0=__t894.length),true)&&((__tp0===2)&&(((__tp1=__t894[0]),(__tp1==="data"))&&(((__tp2=__t894[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((body=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}return patch_array(["multi"],body);});stdenv.register_macro("then",function(__t895,__t896){var __tp0;var context;var env;if(((__t895 instanceof Array)&&((__t895["#"]===undefined)&&(((__tp0=__t895.length),true)&&((__tp0===2)&&((context=__t895[0]),true,(env=__t895[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var body;if(((__t896 instanceof Array)&&((__t896["#"]===undefined)&&(((__tp0=__t896.length),true)&&((__tp0===2)&&(((__tp1=__t896[0]),(__tp1==="data"))&&(((__tp2=__t896[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((body=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}return patch_array(["multi"],body);});var group=function(xs,classifier){var groups=[];var curr=[];var newgroup=function(){if((curr.length>0)){groups.push(curr);}else{null;}return (curr=[]);};var __t897=xs;var __t898=__t897.length;for(var __t899=0;(__t899<__t898);(__t899++)){var __t900=__t897[__t899];var x;var other;if(((x=__t900),true)){if(classifier(x)){newgroup();}else{null;}curr.push(x);}else{if(((other=__t900),true)){false;}else{throw ["Could not find a match",__t900];}}}false;newgroup();return groups;};var blocktest_wrap=function(label,expr,accumulator){var value=gensym();return ["multi",["send",["symbol","="],["data",value,["send",["symbol","!!"],["data",["multi",["send",["symbol","|>"],["data",expr,["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","true"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","success"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","false"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","failure"]]],["data",["symbol","x"]]]]]]]]],["send",["symbol","->"],["data",["symbol","__err"],["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","__err"]]]]]]]]],["send",["send",accumulator,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","test_result"]]],["data",label,value]]]]];};var blocktest_mac=function(label,tests,acc){var ok=gensym();var stmts=[];stmts.push(["send",["symbol","="],["data",ok,["symbol","true"]]]);var __t901=tests;var __t902=__t901.length;for(var __t903=0;(__t903<__t902);(__t903++)){var __t904=__t901[__t903];var stmt;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var _;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var new_label;var __tp9;var __tp10;var new_tests;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var sources;var __tp9;var __tp10;var clauses;var expr;var other;var __t905=false;var __t906=false;var __t907=false;var __t908=false;var __t909=false;var __t910=false;var __t911=false;var __t912=false;var __t913=false;var __t914=false;if((((stmt=__t904),true,(__t904 instanceof Array))&&((__t904["#"]===undefined)&&(((__tp0=__t904.length),true)&&((__tp0===3)&&(((__tp1=__t904[0]),(__tp1==="send"))&&(((__tp2=__t904[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="do"))&&((_=__t904[2]),true))))))))))))){stmts.push(["send",["symbol","!!"],["data",stmt,["send",["symbol","->"],["data",["symbol","__err"],["multi",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["symbol","__err"]]]]],["send",["symbol",":="],["data",ok,["symbol","false"]]]]]]]]);}else{if(((__t905=(__t904 instanceof Array))&&((__t906=(__t904["#"]===undefined))&&((__t907=((__tp0=__t904.length),true))&&((__t908=(__tp0===3))&&((__t909=((__tp1=__t904[0]),(__tp1==="send")))&&((__t910=((__tp2=__t904[1]),(__tp2 instanceof Array)))&&((__t911=(__tp2["#"]===undefined))&&((__t912=((__tp3=__tp2.length),true))&&((__t913=(__tp3===2))&&((__t914=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="=>"))&&(((__tp6=__t904[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((new_label=__tp6[1]),true,(__tp9=__tp6[2]),(__tp10=___projector(aslist)(__tp9)),__tp10[0])&&((new_tests=__tp10[1]),true))))))))))))))))))){var labv=gensym();stmts.push(["multi",["send",["symbol","="],["data",labv,["send",["symbol","++"],["data",label,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],new_label]]]]],patch_array(["multi"],blocktest_mac(labv,new_tests,acc))]);}else{if((__t914&&(((__tp5=__tp2[1]),(__tp5==="each"))&&(((__tp6=__t904[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((sources=__tp6[1]),true,(__tp9=__tp6[2]),(__tp10=___projector(aslist)(__tp9)),__tp10[0])&&((clauses=__tp10[1]),true)))))))))){var loopvar=gensym();(clauses=function(){var __t915=[];var __t916=clauses;var __t917=__t916.length;for(var __t918=0;(__t918<__t917);(__t918++)){var __t919=__t916[__t918];var clause;var other;if(((clause=__t919),true)){__t915.push(function(){var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var lhs;var rhs;if(((clause instanceof Array)&&((clause["#"]===undefined)&&(((__tp0=clause.length),true)&&((__tp0===3)&&(((__tp1=clause[0]),(__tp1==="send"))&&(((__tp2=clause[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=clause[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((lhs=__tp6[1]),true,(rhs=__tp6[2]),true)))))))))))))))))){(void 0);}else{throw "a condition failed";}var x=blocktest_mac(["send",["symbol","++"],["data",label,["data",loopvar]]],___projector(aslist)(rhs)[1],acc);return ["send",["symbol","->"],["data",lhs,patch_array(["multi"],x)]];}());}else{if(((other=__t919),true)){false;}else{throw ["Could not find a match",__t919];}}}return __t915;}());clauses.push(["send",["symbol","->"],["data",["symbol","__no"],["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["value","No handler for test case"],["symbol","__no"]]]]]]]);stmts.push(build_each(sources,patch_array(["multi"],clauses),["multi"],["multi"],loopvar));}else{if(((expr=__t904),true)){stmts.push(["send",["symbol","if"],["data",ok,["multi",["send",["symbol","then"],["data",blocktest_wrap(label,expr,acc)]],["send",["symbol","else"],["data",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","aborted"]]],["data",label,["send",["symbol","'"],["data",["void"],expr]]]]]]]]]]]);}else{if(((other=__t904),true)){false;}else{throw ["Could not find a match",__t904];}}}}}}false;stmts.push(acc);return stmts;};stdenv.register_macro("blocktest",function(__t920,__t921){var __tp0;var context;var env;if(((__t920 instanceof Array)&&((__t920["#"]===undefined)&&(((__tp0=__t920.length),true)&&((__tp0===2)&&((context=__t920[0]),true,(env=__t920[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var args;if(((__t921 instanceof Array)&&((__t921["#"]===undefined)&&(((__tp0=__t921.length),true)&&((__tp0>=1)&&(((__tp1=__t921[0]),(__tp1==="data"))&&((args=__t921.slice(1)),true))))))){(void 0);}else{throw "a condition failed";}var acc=gensym();var labv=gensym();var stmts=["multi",["send",["symbol","="],["data",acc,["data"]]]];var rval=function(){var __t922=args;var __tp0;var __tp1;var __tp2;var tests;var __tp0;var labels;var __tp1;var __tp2;var tests;var __t923=false;var __t924=false;var __t925=false;if(((__t923=(__t922 instanceof Array))&&((__t924=(__t922["#"]===undefined))&&((__t925=((__tp0=__t922.length),true))&&((__tp0===1)&&(((__tp1=__t922[0]),(__tp2=___projector(aslist)(__tp1)),__tp2[0])&&((tests=__tp2[1]),true))))))){stmts.push(["send",["symbol","="],["data",labv,["data"]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{if((__t925&&((__tp0===2)&&(((labels=__t922[0]),true,(__tp1=__t922[1]),(__tp2=___projector(aslist)(__tp1)),__tp2[0])&&((tests=__tp2[1]),true))))){stmts.push(["send",["symbol","="],["data",labv,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],labels]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{throw ["Could not find a match",__t922];}}}();return rval;});stdenv.register_macro("macro",function(__t926,expr){var __tp0;var context;var env;if(((__t926 instanceof Array)&&((__t926["#"]===undefined)&&(((__tp0=__t926.length),true)&&((__tp0===2)&&((context=__t926[0]),true,(env=__t926[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var name;var __tp6;var __tp7;var sname;var args;var body;if(((expr instanceof Array)&&((expr["#"]===undefined)&&(((__tp0=expr.length),true)&&((__tp0===3)&&(((__tp1=expr[0]),(__tp1==="data"))&&(((__tp2=expr[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="send"))&&(((__tp5=__tp2[1]),(name=__tp5),true,(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((sname=__tp5[1]),true,(args=__tp2[2]),true,(body=expr[2]),true))))))))))))))))){(void 0);}else{throw "a condition failed";}var fn=["send",["symbol","->"],["data",args,body]];var code=generate_from_ast(fn);var efn=eval((("("+code.slice(0,(-1)))+")"));env.register_macro(sname,efn);return ["value",undefined];});stdenv.register_macro("match",function(__t928,__t927){var __tp0;var context;var env;if(((__t928 instanceof Array)&&((__t928["#"]===undefined)&&(((__tp0=__t928.length),true)&&((__tp0===2)&&((context=__t928[0]),true,(env=__t928[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t929=__t927;var __tp0;var __tp1;var __tp0;var __tp1;var obj;var clauses;var __tp0;var __tp1;var clauses;var __t930=false;var __t931=false;var __t932=false;if(((__t930=(__t929 instanceof Array))&&((__t931=(__t929["#"]===undefined))&&((__t932=((__tp0=__t929.length),true))&&((__tp0===1)&&((__tp1=__t929[0]),(__tp1==="void"))))))){return ["placeholder"];}else{if((__t932&&((__tp0===3)&&(((__tp1=__t929[0]),(__tp1==="data"))&&((obj=__t929[1]),true,(clauses=__t929[2]),true))))){return ["send",["symbol","|>"],["data",obj,clauses]];}else{if((__t932&&((__tp0===2)&&(((__tp1=__t929[0]),(__tp1==="data"))&&((clauses=__t929[1]),true))))){return ["send",["symbol","|>"],["data",["value",null],clauses]];}else{throw ["Could not find a match",__t929];}}}});(exports["stdenv"]=stdenv);
