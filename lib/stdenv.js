var τ1085=function(type){var τ1086=type["::check"];var f;if((τ1086===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ1086),true)){return function(value){return f.call(type,value);};}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1086}));}}};
var τ1087=function(dest,values){for(k in values){if(values.hasOwnProperty(k)){(dest[k]=send(values,k));}else{null;}}return dest;};
var τ1077=function(){var τ1078=function(tags){var τ1079=function(){if((!τ1085(τ1078)(this))){return Object.create(τ1078.prototype);}else{return this;}}();(τ1079["tags"]=tags);return τ1079;};τ1087(τ1078);(τ1078.prototype["create"]=function(){var τ1080=Array.prototype.slice.call(arguments,0);var τp0;var message;var args;if(((τ1080 instanceof Array)&&(((τp0=τ1080.length),true)&&((τp0>=0)&&((message=function(){if((0>=τp0)){return "";}else{return τ1080[0];}}()),true,(args=τ1080.slice(1)),true))))){var τ1079=this;var e=Error(message);(e["::tags"]=τ1079.tags);(e["args"]=args);(e["name"]=["E"].concat(τ1079.tags).join("."));return e;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1080}));}});(τ1078.prototype["::check"]=function(e){var τ1079=this;if(((!e)||(!τ1085(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var τ1081=τ1079.tags;var τ1082=τ1081.length;for(var τ1083=0;(τ1083<τ1082);(τ1083++)){var τ1084=τ1081[τ1083];var tag;var other;if(((tag=τ1084),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=τ1084),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1084}));}}}false;return true;});(τ1078.prototype["::deconstruct"]=function(e){var τ1079=this;return e.args;});return τ1078;}();
var τ1088=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};
var τ1089=function(τ1090){var τ1091=τ1090;var x;var x;var other;if((((typeof(τ1091)==="string")&&((x=τ1091),true))||((typeof(τ1091)==="number")&&((x=τ1091),true)))){return ["value",x];}else{if(((other=τ1091),true)){return other["::serialize_ast"]();}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1091}));}}};
var send=function(obj,τ1070){var msg;var τ1069;(msg=τ1070);true;(τ1069=τ1070);var τ1071=τ1069;var other;if(((typeof(τ1071)==="string")||(typeof(τ1071)==="number"))){return obj[msg];}else{if(((other=τ1071),true)){return obj["::send"](msg);}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1071}));}}};(Array[":::project"]=function(τ1073){var value;var τ1072;(value=τ1073);true;(τ1072=τ1073);var τ1074=τ1072;var _;if(τ1085(Array)(τ1074)){return [true,value];}else{if(((_=τ1074),true)){return [true,[value]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1074}));}}});(Array.prototype["::check"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){return false;}else{null;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){var rval=this.slice(0);rval.push(value);return [true,rval];}else{null;}}return [true,value];}else{var rval=this.slice(0);rval.push(value);return [true,rval];}});(Array.prototype[":::deconstruct"]=function(value){return [true,value.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return τ1088(["array"],this.map(τ1089));});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var τ1075=value.match(this);var m;var m;if(((τ1075===null)&&((m=τ1075),true))){return [false,null];}else{if(((m=τ1075),true)){return [true,m];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1075}));}}});(RegExp.prototype[":::deconstruct"]=function(value){var τ1076=value.match(this);var m;var m;if(((τ1076===null)&&((m=τ1076),true))){return [false,null];}else{if(((m=τ1076),true)){return [true,m];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1076}));}}});(Function.prototype["::send"]=function(args){return this.apply(this,args);});
var τ1575=function(type){return function(value){var τ1576=type[":::project"];var f;if((τ1576===(void 0))){var τ1577=type["::project"];var f;if((τ1577===(void 0))){return [true,type(value)];}else{if(((f=τ1577),true)){var τ1579;try{(τ1579=[true,f(value)]);}catch(τ1578){(τ1579=[false,null]);}return τ1579;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1577}));}}}else{if(((f=τ1576),true)){return f.call(type,value);}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1576}));}}};};
var τ1580=function(from,to){var rval=[];for(var i=from;(i<=to);(i++)){rval.push(i);}return rval;};var τ1092=require("./expand");var Env=τ1092.Env;var nullenv=τ1092.nullenv;var expand=τ1092.expand;var τ1093=require("./helpers");var aslist=τ1093.aslist;var transform=τ1093.transform;var gensym=τ1093.gensym;var gensym_factory=τ1093.gensym_factory;var τ1094=require("./util");var enumerate=τ1094.enumerate;var items=τ1094.items;var partition=τ1094.partition;var uuid=function(){var τp0;var τp1;var τp2;var s;if((((τp0=gensym()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&(((τp2=τp0[0]),(τp2==="symbol"))&&((s=τp0[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return s;};var Embedded=function(code){var τ1095=function(){if((!τ1085(Embedded)(this))){return Object.create(Embedded.prototype);}else{return this;}}();(τ1095["code"]=code);(τ1095["::id"]=uuid());return τ1095;};τ1087(Embedded);(Embedded.prototype["::serialize_ast"]=function(){var τ1095=this;return expand(["top",stdenv],τ1095.code);});Embedded;var stdenv=Env(nullenv);var τ1096=items(({"+":"___plus","-":"___minus","*":"___times","/":"___div","mod":"___mod","^":"___binxor","&":"___binand","|":"___binor","&.":"___binand","|.":"___binor","&&":"___and","||":"___or","and":"___and","or":"___or","not":"___not","===":"___is","!==":"___isnt","!=":"___neq","<":"___lt",">":"___gt","<=":"___lte",">=":"___gte","<<":"___shl",">>":"___shr",">>>":"___shr2","in":"___in","instanceof":"___instanceof","--":"___minusminus"}));var τ1097=τ1096.length;for(var τ1098=0;(τ1098<τ1097);(τ1098++)){var τ1099=τ1096[τ1098];var τp0;var k;var v;var other;if(((τ1099 instanceof Array)&&(((τp0=τ1099.length),true)&&((τp0===2)&&((k=τ1099[0]),true,(v=τ1099[1]),true))))){stdenv.register(k,["symbol",v]);}else{if(((other=τ1099),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1099}));}}}false;stdenv.register("___hasprop",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","match"],["symbol","key"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["send",["symbol","?"],["data",["symbol","undefined"],["void"]]]]],["symbol","false"]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["symbol","x"]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","String"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","Number"],["void"]]],["symbol","x"]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","Number"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["symbol","x"],["send",["symbol","in"],["data",["symbol","key"],["symbol","x"]]]]]]]])]);stdenv.register("___projector",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["symbol","type"],["value",":::project"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","match"],["data",["send",["symbol","type"],["value","::project"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["data",["symbol","true"],["send",["symbol","type"],["data",["symbol","value"]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["symbol","!!"],["data",["data",["symbol","true"],["send",["symbol","f"],["data",["symbol","value"]]]],["data",["symbol","false"],["symbol","null"]]]]]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]])]);stdenv.register("___checker",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","match"],["data",["send",["symbol","type"],["value","::check"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","type"]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]])]);stdenv.register("___deconstructor",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["symbol","type"],["value",":::deconstruct"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","match"],["data",["send",["symbol","type"],["value","::deconstruct"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","?"],["data",["void"],["multi",["send",["symbol","=>"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["data",["symbol","true"],["symbol","value"]]]],["send",["symbol","=>"],["data",["symbol","else"],["data",["symbol","false"],["symbol","null"]]]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["symbol","!!"],["data",["data",["symbol","true"],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]],["data",["symbol","false"],["symbol","null"]]]]]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]])]);stdenv.register("___serialize_ast",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","match"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["symbol","x"]],["send",["send",["symbol","?"],["data",["symbol","Number"],["void"]]],["symbol","x"]]]],["send",["send",["symbol","#"],["data",["void"],["symbol","value"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","other"],["value","::serialize_ast"]],["data"]]]]]]])]);stdenv.register("ErrorFactory",["value",Embedded(["send",["symbol","class"],["data",["multi",["send",["symbol","="],["data",["send",["symbol","constructor"],["data",["symbol","tags"]]],["send",["symbol",":="],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["symbol","tags"]]]]],["send",["symbol","="],["data",["send",["symbol","create"],["data",["send",["symbol","="],["data",["symbol","message"],["value",""]]],["send",["symbol","*"],["data",["void"],["symbol","args"]]]]],["multi",["send",["symbol","="],["data",["symbol","e"],["send",["symbol","Error"],["data",["symbol","message"]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["value","::tags"]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]],["symbol","args"]]],["send",["symbol",":="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","name"]]]],["send",["send",["send",["symbol","++"],["data",["data",["send",["symbol","."],["data",["void"],["symbol","E"]]]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol","."],["data",["void"],["symbol","join"]]]],["data",["value","."]]]]],["symbol","e"]]]],["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","e"]]],["multi",["send",["symbol","if"],["data",["send",["symbol","or"],["data",["send",["symbol","not"],["data",["void"],["symbol","e"]]],["send",["symbol","not"],["data",["void"],["send",["send",["symbol","?"],["data",["symbol","Error"],["void"]]],["symbol","e"]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","="],["data",["symbol","tags"],["send",["symbol","or"],["data",["send",["symbol","e"],["value","::tags"]],["data"]]]]],["send",["symbol","each"],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["symbol","tag"],["send",["symbol","=="],["data",["send",["send",["symbol","tags"],["send",["symbol","."],["data",["void"],["symbol","indexOf"]]]],["data",["symbol","tag"]]],["send",["symbol","-"],["data",["void"],["value",1]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","="],["data",["send",["value","::deconstruct"],["data",["symbol","e"]]],["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]]]]]]])]);stdenv.register("patch_array",["value",Embedded(["send",["symbol","->"],["data",["data"],["multi",["send",["symbol","="],["data",["symbol","r"],["data"]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","arguments"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol",":="],["data",["symbol","r"],["send",["send",["symbol","r"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["send",["symbol","___js_fetch"],["data",["symbol","arguments"],["symbol","i"]]]]]]]]],["symbol","r"]]]])]);stdenv.register("range",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","from"],["symbol","to"]],["multi",["send",["symbol","="],["data",["symbol","rval"],["data"]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["symbol","from"]]],["send",["symbol","<="],["data",["symbol","i"],["symbol","to"]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","i"]]]]],["symbol","rval"]]]])]);stdenv.register("&:",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","dest"],["symbol","values"]],["multi",["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","values"]]],["send",["symbol","if"],["data",["send",["send",["symbol","values"],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["data",["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","values"],["symbol","k"]]]]]]]],["symbol","dest"]]]])]);stdenv.register("&+",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","a"],["symbol","b"]],["multi",["send",["symbol","="],["data",["symbol","dest"],["data",["symbol","="]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","a"]]],["send",["symbol","if"],["data",["send",["send",["symbol","a"],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["data",["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","a"],["symbol","k"]]]]]]]]],["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","b"]]],["send",["symbol","if"],["data",["send",["send",["symbol","b"],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["data",["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","___js_fetch"],["data",["symbol","b"],["symbol","k"]]]]]]]]],["symbol","dest"]]]])]);stdenv.register_macro("++",function(_,τ1100){var τ1101=τ1100;var τp0;var τp1;var τp2;var τp3;var τp4;var x;var τp0;var τp1;var x;var τp2;var τp3;var τp4;var τp0;var τp1;var x;var y;var τp0;var τp1;var τ1102=false;var τ1103=false;var τ1104=false;var τ1105=false;if(((τ1102=(τ1101 instanceof Array))&&((τ1103=((τp0=τ1101.length),true))&&((τ1104=(τp0===3))&&((τ1105=((τp1=τ1101[0]),(τp1==="data")))&&(((τp2=τ1101[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((x=τ1101[2]),true)))))))))){return ["send",["symbol","___plusplus"],["data",["void"],x]];}else{if((τ1105&&(((x=τ1101[1]),true,(τp2=τ1101[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void"))))))){return ["send",["symbol","___plusplus"],["data",x,["void"]]];}else{if((τ1105&&((x=τ1101[1]),true,(y=τ1101[2]),true))){return ["send",["send",x,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",y]];}else{if((τ1103&&((τp0===1)&&((τp1=τ1101[0]),(τp1==="void"))))){return ["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","y"]]]]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1101}));}}}}});stdenv.register_macro("..",function(_,τ1106){var τ1107=τ1106;var τp0;var τp1;var τp2;var τp3;var τp4;var x;var τp0;var τp1;var x;var τp2;var τp3;var τp4;var τp0;var τp1;var x;var y;var τp0;var τp1;var τ1108=false;var τ1109=false;var τ1110=false;var τ1111=false;if(((τ1108=(τ1107 instanceof Array))&&((τ1109=((τp0=τ1107.length),true))&&((τ1110=(τp0===3))&&((τ1111=((τp1=τ1107[0]),(τp1==="data")))&&(((τp2=τ1107[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((x=τ1107[2]),true)))))))))){return ["send",["symbol","range"],["data",["value",1],x]];}else{if((τ1111&&(((x=τ1107[1]),true,(τp2=τ1107[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void"))))))){return ["send",["symbol","range"],["data",x]];}else{if((τ1111&&((x=τ1107[1]),true,(y=τ1107[2]),true))){return ["send",["symbol","range"],["data",x,y]];}else{if((τ1109&&((τp0===1)&&((τp1=τ1107[0]),(τp1==="void"))))){return ["symbol","range"];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1107}));}}}}});stdenv.register_macro("**",function(τ1112,τ1113){var τp0;var context;var env;if(((τ1112 instanceof Array)&&(((τp0=τ1112.length),true)&&((τp0===2)&&((context=τ1112[0]),true,(env=τ1112[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1113 instanceof Array)&&(((τp0=τ1113.length),true)&&((τp0===3)&&(((τp1=τ1113[0]),(τp1==="data"))&&((a=τ1113[1]),true,(b=τ1113[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]],["data",a,b]];});stdenv.register_macro("//",function(τ1114,τ1115){var τp0;var context;var env;if(((τ1114 instanceof Array)&&(((τp0=τ1114.length),true)&&((τp0===2)&&((context=τ1114[0]),true,(env=τ1114[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1115 instanceof Array)&&(((τp0=τ1115.length),true)&&((τp0===3)&&(((τp1=τ1115[0]),(τp1==="data"))&&((a=τ1115[1]),true,(b=τ1115[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","floor"]]]],["data",["send",["symbol","/"],["data",a,b]]]];});var make_checker=function(value,op){return function(τ1116,τ1117){var τp0;var context;var env;if(((τ1116 instanceof Array)&&(((τp0=τ1116.length),true)&&((τp0===2)&&((context=τ1116[0]),true,(env=τ1116[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;if(((τ1117 instanceof Array)&&(((τp0=τ1117.length),true)&&((τp0===2)&&(((τp1=τ1117[0]),(τp1==="data"))&&((expr=τ1117[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",op,["data",expr,value]];};};var errf_macro=function(tags){return function(τ1119,τ1118){var τp0;var context;var env;if(((τ1119 instanceof Array)&&(((τp0=τ1119.length),true)&&((τp0===2)&&((context=τ1119[0]),true,(env=τ1119[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1120=τ1118;var τp0;var τp1;var τp0;var τp1;var args;var other;var τ1121=false;var τ1122=false;if(((τ1121=(τ1120 instanceof Array))&&((τ1122=((τp0=τ1120.length),true))&&((τp0===1)&&((τp1=τ1120[0]),(τp1==="void")))))){return ["send",["symbol","ErrorFactory"],["data",τ1088(["data"],tags)]];}else{if((τ1122&&((τp0>=1)&&(((τp1=τ1120[0]),(τp1==="data"))&&((args=τ1120.slice(1)),true))))){return ["send",["send",["send",["symbol","ErrorFactory"],["data",τ1088(["data"],tags)]],["send",["symbol","."],["data",["void"],["symbol","create"]]]],τ1088(["data"],args)];}else{if(((other=τ1120),true)){return ["macro",errf_macro(tags.concat([other]))];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1120}));}}}};};stdenv.register_macro("E",errf_macro([]));stdenv.register_macro("#",function(τ1123,τ1124){var τp0;var context;var env;if(((τ1123 instanceof Array)&&(((τp0=τ1123.length),true)&&((τp0===2)&&((context=τ1123[0]),true,(env=τ1123[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var tag;if(((τ1124 instanceof Array)&&(((τp0=τ1124.length),true)&&((τp0===3)&&(((τp1=τ1124[0]),(τp1==="data"))&&(((τp2=τ1124[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&(((τp5=τ1124[2]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===2)&&(((τp7=τp5[0]),(τp7==="symbol"))&&((tag=τp5[1]),true)))))))))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}(tag=["value",tag]);var f=function(τ1126,expr){var τp0;var τ1125;var env;if(((τ1126 instanceof Array)&&(((τp0=τ1126.length),true)&&((τp0===2)&&((τ1125=τ1126[0]),true,(env=τ1126[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1127=τ1125;var _;if((τ1127==="pattern")){var checker_mac=function(){var f1=function(_,τ1131){var τp0;var τp1;var expr;if(((τ1131 instanceof Array)&&(((τp0=τ1131.length),true)&&((τp0===2)&&(((τp1=τ1131[0]),(τp1==="data"))&&((expr=τ1131[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",["symbol","instanceof"],["data",expr,["symbol","Array"]]];};var f2=function(_,τ1132){var τp0;var τp1;var expr;if(((τ1132 instanceof Array)&&(((τp0=τ1132.length),true)&&((τp0===2)&&(((τp1=τ1132[0]),(τp1==="data"))&&((expr=τ1132[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",["symbol","=="],["data",["send",expr,["value",0]],tag]];};return ["multi",["macro",f1],["macro",f2]];}();var τ1128=expr;var τp0;var τp1;var subp;var τp0;var τp1;var other;var τ1129=false;var τ1130=false;if(((τ1129=(τ1128 instanceof Array))&&((τ1130=((τp0=τ1128.length),true))&&((τp0>=1)&&(((τp1=τ1128[0]),(τp1==="data"))&&((subp=τ1128.slice(1)),true)))))){return τ1088(["data",tag],subp);}else{if((τ1130&&((τp0===1)&&((τp1=τ1128[0]),(τp1==="void"))))){return ["check",checker_mac,["ignore"]];}else{if(((other=τ1128),true)){return ["check",checker_mac,expr];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1128}));}}}}else{if(((_=τ1127),true)){var τ1133=expr;var τp0;var τp1;var τp0;var τp1;var args;var other;var τ1134=false;var τ1135=false;if(((τ1134=(τ1133 instanceof Array))&&((τ1135=((τp0=τ1133.length),true))&&((τp0===1)&&((τp1=τ1133[0]),(τp1==="void")))))){return ["data",tag];}else{if((τ1135&&((τp0>=1)&&(((τp1=τ1133[0]),(τp1==="data"))&&((args=τ1133.slice(1)),true))))){return τ1088(["data",tag],args);}else{if(((other=τ1133),true)){return ["send",["data",tag],other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1133}));}}}}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1127}));}}};return ["macro",f];});stdenv.register_macro("when",function(τ1137,τ1138){var τp0;var context;var env;if(((τ1137 instanceof Array)&&(((τp0=τ1137.length),true)&&((τp0===2)&&((context=τ1137[0]),true,(env=τ1137[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var τ1136;var condition;if(((τ1138 instanceof Array)&&(((τp0=τ1138.length),true)&&((τp0===3)&&(((τp1=τ1138[0]),(τp1==="data"))&&((τ1136=τ1138[1]),true,(condition=τ1138[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1139=τ1136;var τp0;var τp1;var other;if(((τ1139 instanceof Array)&&(((τp0=τ1139.length),true)&&((τp0===1)&&((τp1=τ1139[0]),(τp1==="void")))))){return ["test",condition,["ignore"]];}else{if(((other=τ1139),true)){return ["test",condition,other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1139}));}}});var andf=function(τ1140,expr){var τp0;var context;var env;if(((τ1140 instanceof Array)&&(((τp0=τ1140.length),true)&&((τp0===2)&&((context=τ1140[0]),true,(env=τ1140[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1141=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var a;var b;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1142=false;var τ1143=false;var τ1144=false;if(((τ1142=(τ1141 instanceof Array))&&((τ1143=((τp0=τ1141.length),true))&&((τ1144=(τp0===2))&&(((τp1=τ1141[0]),(τp1==="pattern"))&&(((τp2=τ1141[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((a=τp2[1]),true,(b=τp2[2]),true)))))))))){return ["all",a,b];}else{if((τ1144&&(((_=τ1141[0]),true,(τp1=τ1141[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return ["symbol","___and"];}else{if(((other=τ1141),true)){return ["send",["symbol","___and"],expr];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1141}));}}}};stdenv.register_macro("&&",andf);stdenv.register_macro("and",andf);var orf=function(τ1145,expr){var τp0;var context;var env;if(((τ1145 instanceof Array)&&(((τp0=τ1145.length),true)&&((τp0===2)&&((context=τ1145[0]),true,(env=τ1145[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1146=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var a;var b;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1147=false;var τ1148=false;var τ1149=false;if(((τ1147=(τ1146 instanceof Array))&&((τ1148=((τp0=τ1146.length),true))&&((τ1149=(τp0===2))&&(((τp1=τ1146[0]),(τp1==="pattern"))&&(((τp2=τ1146[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((a=τp2[1]),true,(b=τp2[2]),true)))))))))){return ["any",a,b];}else{if((τ1149&&(((_=τ1146[0]),true,(τp1=τ1146[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return ["symbol","___or"];}else{if(((other=τ1146),true)){return ["send",["symbol","___or"],expr];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1146}));}}}};stdenv.register_macro("||",orf);stdenv.register_macro("or",orf);var partial_pattern=function(operator){(operator=["symbol",operator]);return function(τ1150,expr){var τp0;var context;var env;if(((τ1150 instanceof Array)&&(((τp0=τ1150.length),true)&&((τp0===2)&&((context=τ1150[0]),true,(env=τ1150[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1151=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var val;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1152=false;var τ1153=false;var τ1154=false;if(((τ1152=(τ1151 instanceof Array))&&((τ1153=((τp0=τ1151.length),true))&&((τ1154=(τp0===2))&&(((τp1=τ1151[0]),(τp1==="pattern"))&&(((τp2=τ1151[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===1)&&(((τp7=τp5[0]),(τp7==="void"))&&((val=τp2[2]),true)))))))))))))){return ["check",["macro",make_checker(val,operator)],["ignore"]];}else{if((τ1154&&(((_=τ1151[0]),true,(τp1=τ1151[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return operator;}else{if(((other=τ1151),true)){return ["send",operator,expr];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1151}));}}}};};stdenv.register_macro("==",partial_pattern("___eq"));stdenv.register_macro("!=",partial_pattern("___neq"));stdenv.register_macro("<=",partial_pattern("___lte"));stdenv.register_macro(">=",partial_pattern("___gte"));stdenv.register_macro("<",partial_pattern("___lt"));stdenv.register_macro(">",partial_pattern("___gt"));stdenv.register_macro("*",function(τ1155,expr){var τp0;var context;var env;if(((τ1155 instanceof Array)&&(((τp0=τ1155.length),true)&&((τp0===2)&&((context=τ1155[0]),true,(env=τ1155[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1156=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var val;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1157=false;var τ1158=false;var τ1159=false;if(((τ1157=(τ1156 instanceof Array))&&((τ1158=((τp0=τ1156.length),true))&&((τ1159=(τp0===2))&&(((τp1=τ1156[0]),(τp1==="pattern"))&&(((τp2=τ1156[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void")))))))))){return ["dynsplice",["ignore"]];}else{if((τ1159&&(((τp1=τ1156[0]),((τp1==="pattern")||(τp1==="data")))&&(((τp2=τ1156[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===1)&&(((τp7=τp5[0]),(τp7==="void"))&&((val=τp2[2]),true)))))))))))){return ["dynsplice",val];}else{if((τ1159&&(((_=τ1156[0]),true,(τp1=τ1156[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return ["symbol","___times"];}else{if(((other=τ1156),true)){return ["send",["symbol","___times"],expr];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1156}));}}}}});stdenv.register_macro(".",function(τ1161,τ1160){var τp0;var context;var env;if(((τ1161 instanceof Array)&&(((τp0=τ1161.length),true)&&((τp0===2)&&((context=τ1161[0]),true,(env=τ1161[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1162=τ1160;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var s;var other;if(((τ1162 instanceof Array)&&(((τp0=τ1162.length),true)&&((τp0===3)&&(((τp1=τ1162[0]),(τp1==="data"))&&(((τp2=τ1162[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&(((τp5=τ1162[2]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===2)&&(((τp7=τp5[0]),(τp7==="symbol"))&&((s=τp5[1]),true)))))))))))))){return ["value",s];}else{if(((other=τ1162),true)){throw τ1077(["syntax","dot"]).create("'.' macro was given an illegal argument",({"arg":other}));}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1162}));}}});stdenv.register_macro("where",function(τ1164,τ1163){var τp0;var context;var env;if(((τ1164 instanceof Array)&&(((τp0=τ1164.length),true)&&((τp0===2)&&((context=τ1164[0]),true,(env=τ1164[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1165=τ1163;var τp0;var τp1;var a;var b;var other;if(((τ1165 instanceof Array)&&(((τp0=τ1165.length),true)&&((τp0===3)&&(((τp1=τ1165[0]),(τp1==="data"))&&((a=τ1165[1]),true,(b=τ1165[2]),true)))))){return ["send",["symbol","let"],["data",b,a]];}else{if(((other=τ1165),true)){throw τ1077(["syntax","where"]).create("'where' macro was given an illegal argument",({"arg":other}));}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1165}));}}});stdenv.register_macro("let",function(τ1167,τ1166){var τp0;var context;var env;if(((τ1167 instanceof Array)&&(((τp0=τ1167.length),true)&&((τp0===2)&&((context=τ1167[0]),true,(env=τ1167[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1168=τ1166;var τp0;var τp1;var a;var b;var other;if(((τ1168 instanceof Array)&&(((τp0=τ1168.length),true)&&((τp0===3)&&(((τp1=τ1168[0]),(τp1==="data"))&&((a=τ1168[1]),true,(b=τ1168[2]),true)))))){var bindings=aslist(a);var body=aslist(b);return τ1088(["multi"],bindings,body);}else{if(((other=τ1168),true)){throw τ1077(["syntax","let"]).create("'let' macro was given an illegal argument",({"arg":other}));}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1168}));}}});stdenv.register_macro("->",function(τ1169,τ1170){var τp0;var context;var env;if(((τ1169 instanceof Array)&&(((τp0=τ1169.length),true)&&((τp0===2)&&((context=τ1169[0]),true,(env=τ1169[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var args;var stmts;if(((τ1170 instanceof Array)&&(((τp0=τ1170.length),true)&&((τp0===3)&&(((τp1=τ1170[0]),(τp1==="data"))&&((args=τ1170[1]),true,(stmts=τ1170[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var placeholder;var τp2;var τp3;var τp4;var newargs;if((((τp0=find_arrow(args)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&(((placeholder=τp0[0]),true,(τp2=τp0[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3>=1)&&(((τp4=τp2[0]),(τp4==="data"))&&((newargs=τp2.slice(1)),true))))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var fw;var bw;var keys;var dflt;var rest;if((((τp0=lhs_parse_specs(env,newargs)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===5)&&((fw=τp0[0]),true,(bw=τp0[1]),true,(keys=τp0[2]),true,(dflt=τp0[3]),true,(rest=τp0[4]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}if(((rest||dflt.length)||keys.length)){var body=["send",["symbol","match"],["data",["send",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","arguments"],["value",0]]],["send",["symbol","->"],["data",args,stmts]]]];return ["lambda",[],body];}else{var body=["multi"];(newargs=function(){var τ1171=[];var τ1172=newargs;var τ1173=τ1172.length;for(var τ1174=0;(τ1174<τ1173);(τ1174++)){var τ1175=τ1172[τ1174];var τp0;var τp1;var s;var other;var other;var τ1176=false;if(((τ1175 instanceof Array)&&(((τp0=τ1175.length),true)&&((τp0===2)&&(((τp1=τ1175[0]),(τp1==="symbol"))&&((s=τ1175[1]),true)))))){τ1171.push(["symbol",s]);}else{if((τ1176=((other=τ1175),true))){τ1171.push(function(){var t=gensym();body.push(["send",["symbol","="],["data",other,t]]);return t;}());}else{if(τ1176){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1175}));}}}}return τ1171;}());body.push(function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,stmts]];}else{return stmts;}}());return ["lambda",newargs,body];}});var build_each=function(source,patterns,τ1177,τ1178,lvar){var τp0;var prelude;if((((τp0=τ1575(aslist)(τ1177)),τp0[0])&&((prelude=τp0[1]),true))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var tail;if((((τp0=τ1575(aslist)(τ1178)),τp0[0])&&((tail=τp0[1]),true))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var temp=gensym();var len=gensym();(lvar=(lvar||gensym()));var stmts=τ1088(["multi"],prelude).concat([["send",["symbol","="],["data",temp,source]],["send",["symbol","="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]);var loop=function(){var a=["send",["symbol","="],["data",lvar,["value",0]]];var b=["send",["symbol","<"],["data",lvar,len]];var c=["send",["symbol","++"],["data",lvar,["void"]]];var body=["send",["symbol","|>"],["data",["send",["symbol","___js_fetch"],["data",temp,lvar]],patterns]];return ["js_for",a,b,c,body];}();stmts.push(loop);var stmts=stmts.concat(tail);return stmts;};stdenv.register_macro("each",function(τ1180,τ1181){var τp0;var τ1179;var env;if(((τ1180 instanceof Array)&&(((τp0=τ1180.length),true)&&((τp0===2)&&((τ1179=τ1180[0]),true,(env=τ1180[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var arr;var τp2;var τp3;var patterns;if(((τ1181 instanceof Array)&&(((τp0=τ1181.length),true)&&((τp0===3)&&(((τp1=τ1181[0]),(τp1==="data"))&&(((arr=τ1181[1]),true,(τp2=τ1181[2]),(τp3=τ1575(aslist)(τp2)),τp3[0])&&((patterns=τp3[1]),true))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1182=τ1179;var other;if((τ1182==="multi")){patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,τ1088(["multi"],patterns),["multi"],["symbol","false"]);}else{if(((other=τ1182),true)){var res=gensym();(patterns=function(){var τ1183=[];var τ1184=patterns;var τ1185=τ1184.length;for(var τ1186=0;(τ1186<τ1185);(τ1186++)){var τ1187=τ1184[τ1186];var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var patt;var expr;var other;var other;var τ1188=false;if(((τ1187 instanceof Array)&&(((τp0=τ1187.length),true)&&((τp0===3)&&(((τp1=τ1187[0]),(τp1==="send"))&&(((τp2=τ1187[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=τ1187[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((patt=τp6[1]),true,(expr=τp6[2]),true))))))))))))))){τ1183.push(["send",["symbol","->"],["data",patt,["send",["send",res,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",expr]]]]);}else{if((τ1188=((other=τ1187),true))){τ1183.push(function(){throw "INVALID_PATTERN";}());}else{if(τ1188){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1187}));}}}}return τ1183;}());patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,τ1088(["multi"],patterns),["send",["symbol","="],["data",res,["data"]]],res);}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1182}));}}});stdenv.register_macro("=>",function(τ1190,τ1191){var τp0;var τ1189;var env;if(((τ1190 instanceof Array)&&(((τp0=τ1190.length),true)&&((τp0===2)&&((τ1189=τ1190[0]),true,(env=τ1190[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var binding;var value;if(((τ1191 instanceof Array)&&(((τp0=τ1191.length),true)&&((τp0===3)&&(((τp1=τ1191[0]),(τp1==="data"))&&((binding=τ1191[1]),true,(value=τ1191[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1192=τ1189;var context;if(((τ1192==="data")||(τ1192==="pattern"))){var τ1193=binding;var τp0;var τp1;var _;if(((τ1193 instanceof Array)&&(((τp0=τ1193.length),true)&&((τp0===1)&&((τp1=τ1193[0]),(τp1==="void")))))){return ["assoc",value];}else{if(((_=τ1193),true)){return ["assoc",binding,value];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1193}));}}}else{if(((context=τ1192),true)){throw (("Illegal context for '=>' ("+context)+")");}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1192}));}}});stdenv.register_macro("as",function(τ1194,τ1195){var τp0;var context;var env;if(((τ1194 instanceof Array)&&(((τp0=τ1194.length),true)&&((τp0===2)&&((context=τ1194[0]),true,(env=τ1194[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;var variable;if(((τ1195 instanceof Array)&&(((τp0=τ1195.length),true)&&((τp0===3)&&(((τp1=τ1195[0]),(τp1==="data"))&&((expr=τ1195[1]),true,(variable=τ1195[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1196=context;var _;if((τ1196==="pattern")){return ["constant",expr,variable];}else{if(((_=τ1196),true)){return ["send",["symbol","="],["data",variable,expr]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1196}));}}});stdenv.register_macro("=",function(τ1197,expr){var τp0;var context;var env;if(((τ1197 instanceof Array)&&(((τp0=τ1197.length),true)&&((τp0===2)&&((context=τ1197[0]),true,(env=τ1197[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1198=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var lhs;var rhs;var τp0;var τp1;var τp2;var τp3;var τp4;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var f;var args;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var b;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var patt;var value;var other;var τ1199=false;var τ1200=false;var τ1201=false;var τ1202=false;var τ1203=false;var τ1204=false;var τ1205=false;var τ1206=false;if(((τ1199=(τ1198 instanceof Array))&&((τ1200=((τp0=τ1198.length),true))&&((τ1201=(τp0===2))&&(((τp1=τ1198[0]),((τp1==="multi")||(τp1==="expr")))&&(((τp2=τ1198[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((lhs=τp2[1]),true,(rhs=τp2[2]),true)))))))))){var _src=((lhs.location&&lhs.location.source)&&lhs.location.source.url);var _start=(lhs.location&&lhs.location.start);var _end=(lhs.location&&lhs.location.end);var τp0;var τp1;var τp2;var τp3;var vars;var clauses;var ph;if((((τp0=parse_lhs(env,lhs,rhs)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===3)&&(((τp2=τp0[0]),(τp3=τ1575(make_declarations)(τp2)),τp3[0])&&((vars=τp3[1]),true,(clauses=τp0[1]),true,(ph=τp0[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var r=τ1088(["splice"],vars);var mkif=function(x){return ["if",x,["symbol","undefined"],["send",["symbol","throw"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["value","The value failed to match"]]]]];};var τ1207=clauses;var τp0;var clause;var _;if(((τ1207 instanceof Array)&&(((τp0=τ1207.length),true)&&((τp0===1)&&((clause=τ1207[0]),true))))){var τ1208=send(clause,(clause.length-1));var τp0;var τp1;var τp2;var other;if(((τ1208 instanceof Array)&&(((τp0=τ1208.length),true)&&((τp0===2)&&(((τp1=τ1208[0]),(τp1==="value"))&&((τp2=τ1208[1]),(τp2===true))))))){(r=function(){if(((vars.length===1)&&(clause.length===3))){return τ1088(["declare"],clause[1].slice(1));}else{return r.concat(clause.slice(1,(-1)));}}());}else{if(((other=τ1208),true)){r.push(mkif(clause));}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1208}));}}}else{if(((_=τ1207),true)){var ands=make_pattern_test(clauses);r.push(mkif(ands));}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1207}));}}return r;}else{if((τ1201&&((τ1202=((τp1=τ1198[0]),(τp1==="data")))&&((τ1203=((τp2=τ1198[1]),(τp2 instanceof Array)))&&((τ1204=((τp3=τp2.length),true))&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void")))))))){return ["assoc"];}else{if((τ1204&&((τ1205=(τp3===3))&&((τ1206=((τp4=τp2[0]),(τp4==="data")))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===3)&&(((τp7=τp5[0]),(τp7==="send"))&&((f=τp5[1]),true,(args=τp5[2]),true,(value=τp2[2]),true))))))))){(f=function(){var τ1209=f;var τp0;var τp1;var _;var τp0;var τp1;var z;var τ1210=false;var τ1211=false;var τ1212=false;if(((τ1210=(τ1209 instanceof Array))&&((τ1211=((τp0=τ1209.length),true))&&((τ1212=(τp0===2))&&(((τp1=τ1209[0]),(τp1==="value"))&&((_=τ1209[1]),true)))))){return f;}else{if((τ1212&&(((τp1=τ1209[0]),(τp1==="symbol"))&&((z=τ1209[1]),true)))){return ["value",z];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1209}));}}}());return ["assoc",f,["send",["symbol","->"],["data",args,value]]];}else{if((τ1206&&((b=τp2[1]),true,(value=τp2[2]),true))){(b=function(){var τ1213=b;var τp0;var τp1;var _;var τp0;var τp1;var z;var τ1214=false;var τ1215=false;var τ1216=false;if(((τ1214=(τ1213 instanceof Array))&&((τ1215=((τp0=τ1213.length),true))&&((τ1216=(τp0===2))&&(((τp1=τ1213[0]),(τp1==="value"))&&((_=τ1213[1]),true)))))){return b;}else{if((τ1216&&(((τp1=τ1213[0]),(τp1==="symbol"))&&((z=τ1213[1]),true)))){return ["value",z];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1213}));}}}());return ["assoc",b,value];}else{if((τ1201&&(((τp1=τ1198[0]),(τp1==="pattern"))&&(((τp2=τ1198[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((patt=τp2[1]),true,(value=τp2[2]),true)))))))){return ["default",patt,value];}else{if(((other=τ1198),true)){throw (("Illegal context for '=' ("+context)+")");}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1198}));}}}}}}});var make_assigner=function(op){return function(τ1217,τ1218){var τp0;var context;var env;if(((τ1217 instanceof Array)&&(((τp0=τ1217.length),true)&&((τp0===2)&&((context=τ1217[0]),true,(env=τ1217[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1218 instanceof Array)&&(((τp0=τ1218.length),true)&&((τp0===3)&&(((τp1=τ1218[0]),(τp1==="data"))&&((a=τ1218[1]),true,(b=τ1218[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["assign",a,["send",["symbol",op],["data",a,b]]];};};stdenv.register_macro(":=",function(τ1219,τ1220){var τp0;var context;var env;if(((τ1219 instanceof Array)&&(((τp0=τ1219.length),true)&&((τp0===2)&&((context=τ1219[0]),true,(env=τ1219[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1220 instanceof Array)&&(((τp0=τ1220.length),true)&&((τp0===3)&&(((τp1=τ1220[0]),(τp1==="data"))&&((a=τ1220[1]),true,(b=τ1220[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["assign",a,b];});stdenv.register_macro("+=",make_assigner("+"));stdenv.register_macro("-=",make_assigner("-"));stdenv.register_macro("*=",make_assigner("*"));stdenv.register_macro("/=",make_assigner("/"));stdenv.register_macro("<<=",make_assigner("<<"));stdenv.register_macro(">>=",make_assigner(">>"));stdenv.register_macro(">>>=",make_assigner(">>>"));stdenv.register_macro("++=",make_assigner("++"));stdenv.register_macro("?=",make_assigner("match"));stdenv.register_macro("if",function(τ1222,τ1221){var τp0;var context;var env;if(((τ1222 instanceof Array)&&(((τp0=τ1222.length),true)&&((τp0===2)&&((context=τ1222[0]),true,(env=τ1222[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1223=τ1221;var τp0;var τp1;var test;var a;var b;var τp0;var τp1;var test;var τp2;var τp3;var τ1224;var other;var τ1225=false;var τ1226=false;if(((τ1225=(τ1223 instanceof Array))&&((τ1226=((τp0=τ1223.length),true))&&((τp0===4)&&(((τp1=τ1223[0]),(τp1==="data"))&&((test=τ1223[1]),true,(a=τ1223[2]),true,(b=τ1223[3]),true)))))){return ["if",test,a,b];}else{if((τ1226&&((τp0===3)&&(((τp1=τ1223[0]),(τp1==="data"))&&(((test=τ1223[1]),true,(τp2=τ1223[2]),(τp3=τ1575(aslist)(τp2)),τp3[0])&&((τ1224=τp3[1]),true)))))){var τ1227=τ1224;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var s1;var τp13;var τp14;var τp15;var τp16;var τp17;var τp18;var τp19;var τp20;var τp21;var τp22;var τp23;var τp24;var s2;var τp0;var s1;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var s2;var other;var τ1228=false;var τ1229=false;if(((τ1228=(τ1227 instanceof Array))&&((τ1229=((τp0=τ1227.length),true))&&((τp0===2)&&(((τp1=τ1227[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="then"))&&(((τp8=τp1[2]),(τp8 instanceof Array))&&(((τp9=τp8.length),true)&&((τp9===2)&&(((τp10=τp8[0]),(τp10==="data"))&&(((τp11=τp8[1]),(τp12=τ1575(aslist)(τp11)),τp12[0])&&(((s1=τp12[1]),true,(τp13=τ1227[1]),(τp13 instanceof Array))&&(((τp14=τp13.length),true)&&((τp14===3)&&(((τp15=τp13[0]),(τp15==="send"))&&(((τp16=τp13[1]),(τp16 instanceof Array))&&(((τp17=τp16.length),true)&&((τp17===2)&&(((τp18=τp16[0]),(τp18==="symbol"))&&(((τp19=τp16[1]),(τp19==="else"))&&(((τp20=τp13[2]),(τp20 instanceof Array))&&(((τp21=τp20.length),true)&&((τp21===2)&&(((τp22=τp20[0]),(τp22==="data"))&&(((τp23=τp20[1]),(τp24=τ1575(aslist)(τp23)),τp24[0])&&((s2=τp24[1]),true))))))))))))))))))))))))))))))))){return ["if",test,τ1088(["multi"],s1),τ1088(["multi"],s2)];}else{if((τ1229&&((τp0>=1)&&(((s1=τ1227.slice(0,-1)),true,(τp1=send(τ1227,(τp0-1))),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="else"))&&(((τp8=τp1[2]),(τp8 instanceof Array))&&(((τp9=τp8.length),true)&&((τp9===2)&&(((τp10=τp8[0]),(τp10==="data"))&&(((τp11=τp8[1]),(τp12=τ1575(aslist)(τp11)),τp12[0])&&((s2=τp12[1]),true)))))))))))))))))){return ["if",test,τ1088(["multi"],s1),τ1088(["multi"],s2)];}else{if(((other=τ1227),true)){return ["if",test,τ1088(["multi"],other),["value",null]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1227}));}}}}else{if(((other=τ1223),true)){throw Error("error in if");}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1223}));}}}});stdenv.register_macro("cond",function(τ1230,τ1231){var τp0;var context;var env;if(((τ1230 instanceof Array)&&(((τp0=τ1230.length),true)&&((τp0===2)&&((context=τ1230[0]),true,(env=τ1230[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var clauses;if(((τ1231 instanceof Array)&&(((τp0=τ1231.length),true)&&((τp0===2)&&(((τp1=τ1231[0]),(τp1==="data"))&&((clauses=τ1231[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var handle=function(xs){var τ1232=xs;var τp0;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var test;var body;var rest;var τ1233=false;var τ1234=false;if(((τ1233=(τ1232 instanceof Array))&&((τ1234=((τp0=τ1232.length),true))&&(τp0===0)))){return ["value",false];}else{if((τ1234&&((τp0>=1)&&(((τp1=τ1232[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="=>"))&&(((τp8=τp1[2]),(τp8 instanceof Array))&&(((τp9=τp8.length),true)&&((τp9===3)&&(((τp10=τp8[0]),(τp10==="data"))&&((test=τp8[1]),true,(body=τp8[2]),true,(rest=τ1232.slice(1)),true))))))))))))))))){(test=function(){var τ1235=test;var τp0;var τp1;var τp2;var _;if(((τ1235 instanceof Array)&&(((τp0=τ1235.length),true)&&((τp0===2)&&(((τp1=τ1235[0]),(τp1==="symbol"))&&((τp2=τ1235[1]),(τp2==="else"))))))){return ["value",true];}else{if(((_=τ1235),true)){return test;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1235}));}}}());return ["if",test,body,handle(rest)];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1232}));}}};return handle(aslist(clauses));});stdenv.register_macro("while",function(τ1236,expr){var τp0;var context;var env;if(((τ1236 instanceof Array)&&(((τp0=τ1236.length),true)&&((τp0===2)&&((context=τ1236[0]),true,(env=τ1236[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var test;var body;if(((expr instanceof Array)&&(((τp0=expr.length),true)&&((τp0===3)&&(((τp1=expr[0]),(τp1==="data"))&&((test=expr[1]),true,(body=expr[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["js_while",test,body];});stdenv.register_macro("for",function(τ1238,τ1237){var τp0;var context;var env;if(((τ1238 instanceof Array)&&(((τp0=τ1238.length),true)&&((τp0===2)&&((context=τ1238[0]),true,(env=τ1238[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1239=τ1237;var τp0;var τp1;var τp2;var τp3;var τp4;var a;var b;var c;var body;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var a;var b;var body;var τ1240=false;var τ1241=false;var τ1242=false;var τ1243=false;var τ1244=false;var τ1245=false;if(((τ1240=(τ1239 instanceof Array))&&((τ1241=((τp0=τ1239.length),true))&&((τ1242=(τp0===3))&&((τ1243=((τp1=τ1239[0]),(τp1==="data")))&&((τ1244=((τp2=τ1239[1]),(τp2 instanceof Array)))&&((τ1245=((τp3=τp2.length),true))&&((τp3===4)&&(((τp4=τp2[0]),(τp4==="multi"))&&((a=τp2[1]),true,(b=τp2[2]),true,(c=τp2[3]),true,(body=τ1239[2]),true)))))))))){return ["js_for",a,b,c,body];}else{if((τ1245&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="send"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===2)&&(((τp7=τp5[0]),(τp7==="symbol"))&&(((τp8=τp5[1]),(τp8==="in"))&&(((τp9=τp2[2]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="data"))&&((a=τp9[1]),true,(b=τp9[2]),true,(body=τ1239[2]),true)))))))))))))){return ["js_for_in",a,b,body];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1239}));}}});stdenv.register_macro("!!",function(τ1247,τ1248){var τp0;var τ1246;var env;if(((τ1247 instanceof Array)&&(((τp0=τ1247.length),true)&&((τp0===2)&&((τ1246=τ1247[0]),true,(env=τ1247[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;var matchers;if(((τ1248 instanceof Array)&&(((τp0=τ1248.length),true)&&((τp0===3)&&(((τp1=τ1248[0]),(τp1==="data"))&&((expr=τ1248[1]),true,(matchers=τ1248[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1249=τ1246;var other;if((τ1249==="multi")){var excv=gensym();var m=function(){var τ1250=aslist(matchers);var ms;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var _;var x;if((((ms=τ1250),true,(τ1250 instanceof Array))&&(((τp0=τ1250.length),true)&&((τp0>=1)&&(((τp1=τ1250[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="->"))&&((_=τp1[2]),true,τ1250.slice(1),true)))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,τ1088(["multi"],ms)]];}else{if(((x=τ1250),true)){return matchers;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1250}));}}}();var f=["send",["symbol","->"],["data",["data",excv],m]];return ["multi",["js_try",expr,f,["void"]]];}else{if(((other=τ1249),true)){var excv=gensym();var res=gensym();var m=function(){var τ1251=aslist(matchers);var ms;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var _;var x;if((((ms=τ1251),true,(τ1251 instanceof Array))&&(((τp0=τ1251.length),true)&&((τp0>=1)&&(((τp1=τ1251[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="->"))&&((_=τp1[2]),true,τ1251.slice(1),true)))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,τ1088(["multi"],ms)]];}else{if(((x=τ1251),true)){return matchers;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1251}));}}}();var f=["send",["symbol","->"],["data",["data",excv],["send",["symbol",":="],["data",res,m]]]];return ["multi",["declare",res,["value",undefined]],["js_try",["assign",res,expr],f,["void"]],res];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1249}));}}});stdenv.register_macro("new",function(_,expr){return ["js_new",expr];});stdenv.register_macro("return",function(_,expr){return ["js_return",expr];});stdenv.register_macro("delete",function(_,expr){return ["js_delete",expr];});stdenv.register_macro("throw",function(_,expr){return ["js_throw",expr];});stdenv.register_macro("break",function(_,expr){return ["js_break"];});stdenv.register_macro("continue",function(_,expr){return ["js_continue"];});var rx_wrap=function(x){return (("(?:"+x)+")");};var rx_quote=function(x){return x.replace(RegExp("([.?*+\\^$\\[\\]\\(\\)\\{\\}|\\\\])","g"),"\\$1");};var rx_quote2=function(x){return x.replace(RegExp("([\\[\\]\\(\\)\\{\\}\\^])","g"),"\\$1");};var rx_build2=function(τ1252){var τ1253=τ1252;var τp0;var τp1;var τ1254;var τp0;var τp1;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var s;var τp0;var τp1;var τp2;var τp3;var τp4;var τ1255;var τp5;var τp6;var τp7;var a;var b;var τp0;var τp1;var args;var τp0;var τp1;var args;var otherA;var τ1256=false;var τ1257=false;var τ1258=false;var τ1259=false;var τ1260=false;var τ1261=false;var τ1262=false;var τ1263=false;if(((τ1256=(τ1253 instanceof Array))&&((τ1257=((τp0=τ1253.length),true))&&((τ1258=(τp0===2))&&(((τp1=τ1253[0]),(τp1==="symbol"))&&((τ1254=τ1253[1]),true)))))){var τ1264=τ1254;if((τ1264==="any")){return ".";}else{if((τ1264==="start")){return "^";}else{if((τ1264==="end")){return "$";}else{if((τ1264==="alpha")){return "\\a";}else{if((τ1264==="digit")){return "\\d";}else{if((τ1264==="word")){return "\\w";}else{if((τ1264==="space")){return "\\s";}else{if((τ1264==="boundary")){return "\\b";}else{if((τ1264==="a")){return "\\a";}else{if((τ1264==="d")){return "\\d";}else{if((τ1264==="w")){return "\\w";}else{if((τ1264==="s")){return "\\s";}else{if((τ1264==="b")){return "\\b";}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1264}));}}}}}}}}}}}}}}else{if((τ1258&&(((τp1=τ1253[0]),(τp1==="value"))&&((x=τ1253[1]),true)))){return rx_quote(x);}else{if((τ1257&&((τ1258=(τp0===3))&&((τ1259=((τp1=τ1253[0]),(τp1==="send")))&&((τ1260=((τp2=τ1253[1]),(τp2 instanceof Array)))&&((τ1261=((τp3=τp2.length),true))&&((τ1262=(τp3===2))&&((τ1263=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="raw"))&&(((τp6=τ1253[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===2)&&(((τp8=τp6[0]),(τp8==="value"))&&((s=τp6[1]),true)))))))))))))){return s;}else{if((τ1263&&(((τ1255=τp2[1]),true,(τp5=τ1253[2]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===3)&&(((τp7=τp5[0]),(τp7==="data"))&&((a=τp5[1]),true,(b=τp5[2]),true))))))){var τ1265=τ1255;if((τ1265==="||")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((τ1265==="or")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((τ1265==="*")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return rx_wrap((rx_build2(b)+"*"));}else{if((τ1265==="+")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return rx_wrap((rx_build2(b)+"+"));}else{if((τ1265==="?")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return rx_wrap((rx_build2(b)+"?"));}else{if((τ1265==="in")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var v;if(((b instanceof Array)&&(((τp0=b.length),true)&&((τp0===2)&&(((τp1=b[0]),(τp1==="value"))&&((v=b[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var x=rx_quote2(v);return (("["+x)+"]");}else{if((τ1265==="not")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τp13;var τp14;var v;if(((b instanceof Array)&&(((τp0=b.length),true)&&((τp0===3)&&(((τp1=b[0]),(τp1==="send"))&&(((τp2=b[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="in"))&&(((τp6=b[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&(((τp12=τp6[2]),(τp12 instanceof Array))&&(((τp13=τp12.length),true)&&((τp13===2)&&(((τp14=τp12[0]),(τp14==="value"))&&((v=τp12[1]),true))))))))))))))))))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var x=rx_quote2(v);return (("[^"+x)+"]");}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1265}));}}}}}}}}else{if((τ1257&&((τ1258=(τp0>=1))&&(((τp1=τ1253[0]),(τp1==="data"))&&((args=τ1253.slice(1)),true))))){return (("("+args.map(rx_build2).join(""))+")");}else{if((τ1258&&(((τp1=τ1253[0]),(τp1==="multi"))&&((args=τ1253.slice(1)),true)))){return (("(?:"+args.map(rx_build2).join(""))+")");}else{if(((otherA=τ1253),true)){throw "OopsF";}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1253}));}}}}}}}};var mac=function(τ1266,expr,flags){var τp0;var context;var env;if(((τ1266 instanceof Array)&&(((τp0=τ1266.length),true)&&((τp0===2)&&((context=τ1266[0]),true,(env=τ1266[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}(flags=(flags||""));var τ1267=expr;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τp13;var τp14;var flag;var τp0;var τp1;var τp2;var v;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var arg;var τ1268=false;var τ1269=false;if(((τ1268=(τ1267 instanceof Array))&&((τ1269=((τp0=τ1267.length),true))&&((τp0===3)&&(((τp1=τ1267[0]),(τp1==="send"))&&(((τp2=τ1267[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="."))&&(((τp6=τ1267[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&(((τp12=τp6[2]),(τp12 instanceof Array))&&(((τp13=τp12.length),true)&&((τp13===2)&&(((τp14=τp12[0]),(τp14==="symbol"))&&((flag=τp12[1]),true))))))))))))))))))))))){var m=function(ctx,x){return mac(ctx,x,(flags+flag));};return ["macro",m];}else{if((τ1269&&((τp0===2)&&(((τp1=τ1267[0]),(τp1==="value"))&&(((τp2=τ1267[1]),(typeof(τp2)==="string"))&&((v=τp2),true)))))){return ["send",["symbol","RegExp"],["data",["value",v],["value",flags]]];}else{if((τ1269&&((τp0===3)&&(((τp1=τ1267[0]),(τp1==="send"))&&(((τp2=τ1267[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="'"))&&(((τp6=τ1267[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((arg=τp6[2]),true)))))))))))))))))){return ["send",["symbol","RegExp"],["data",["value",rx_build2(arg)],["value",flags]]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1267}));}}}};stdenv.register_macro("R",mac);stdenv.register_macro("?",function(τ1271,τ1270){var τp0;var context;var env;if(((τ1271 instanceof Array)&&(((τp0=τ1271.length),true)&&((τp0===2)&&((context=τ1271[0]),true,(env=τ1271[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1272=τ1270;var τp0;var τp1;var τp2;var τp3;var τp4;var expr;var τp0;var τp1;var expr;var τp2;var τp3;var τp4;var τ1273=false;var τ1274=false;var τ1275=false;var τ1276=false;if(((τ1273=(τ1272 instanceof Array))&&((τ1274=((τp0=τ1272.length),true))&&((τ1275=(τp0===3))&&((τ1276=((τp1=τ1272[0]),(τp1==="data")))&&(((τp2=τ1272[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((expr=τ1272[2]),true)))))))))){return ["send",["symbol","cond"],["data",expr]];}else{if((τ1276&&(((expr=τ1272[1]),true,(τp2=τ1272[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void"))))))){var orig_expr=expr;var checker=function(){var τ1277=expr;var τp0;var τp1;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var other;var τ1278=false;var τ1279=false;var τ1280=false;var τ1281=false;if(((τ1278=(τ1277 instanceof Array))&&((τ1279=((τp0=τ1277.length),true))&&((τp0===1)&&((τp1=τ1277[0]),(τp1==="void")))))){throw "can't use ? on its own";}else{if((τ1279&&((τ1280=(τp0===2))&&((τ1281=((τp1=τ1277[0]),(τp1==="symbol")))&&((τp2=τ1277[1]),(τp2==="String")))))){return ["macro",function(_,τ1282){var τp0;var τp1;var expr;if(((τ1282 instanceof Array)&&(((τp0=τ1282.length),true)&&((τp0===2)&&(((τp1=τ1282[0]),(τp1==="data"))&&((expr=τ1282[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","string"]]];}];}else{if((τ1281&&((τp2=τ1277[1]),(τp2==="Number")))){return ["macro",function(_,τ1283){var τp0;var τp1;var expr;if(((τ1283 instanceof Array)&&(((τp0=τ1283.length),true)&&((τp0===2)&&(((τp1=τ1283[0]),(τp1==="data"))&&((expr=τ1283[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","number"]]];}];}else{if((τ1281&&((τp2=τ1277[1]),(τp2==="true")))){return ["macro",function(_,τ1284){var τp0;var τp1;var expr;if(((τ1284 instanceof Array)&&(((τp0=τ1284.length),true)&&((τp0===2)&&(((τp1=τ1284[0]),(τp1==="data"))&&((expr=τ1284[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return expr;}];}else{if((τ1281&&((τp2=τ1277[1]),(τp2==="false")))){return ["macro",function(_,τ1285){var τp0;var τp1;var expr;if(((τ1285 instanceof Array)&&(((τp0=τ1285.length),true)&&((τp0===2)&&(((τp1=τ1285[0]),(τp1==="data"))&&((expr=τ1285[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["send",["symbol","not"],["data",["void"],expr]];}];}else{if((τ1281&&((τp2=τ1277[1]),(τp2==="null")))){return ["macro",make_checker(["value",null],["symbol","___is"])];}else{if((τ1281&&((τp2=τ1277[1]),(τp2==="undefined")))){return ["macro",make_checker(["value",undefined],["symbol","___is"])];}else{if(((other=τ1277),true)){return ["send",["symbol","___checker"],["data",expr]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1277}));}}}}}}}}}();var mac=function(τ1287,expr){var τp0;var τ1286;var env;if(((τ1287 instanceof Array)&&(((τp0=τ1287.length),true)&&((τp0===2)&&((τ1286=τ1287[0]),true,(env=τ1287[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1288=τ1286;var other;if((τ1288==="pattern")){var τ1289=expr;var τp0;var τp1;var subp;var τp0;var τp1;var other;var τ1290=false;var τ1291=false;if(((τ1290=(τ1289 instanceof Array))&&((τ1291=((τp0=τ1289.length),true))&&((τp0>=1)&&(((τp1=τ1289[0]),(τp1==="data"))&&((subp=τ1289.slice(1)),true)))))){var projector=["send",["symbol","___deconstructor"],["data",orig_expr]];return ["check",checker,["project",projector,τ1088(["duck",0],subp)]];}else{if((τ1291&&((τp0===1)&&((τp1=τ1289[0]),(τp1==="void"))))){return ["check",checker,["ignore"]];}else{if(((other=τ1289),true)){return ["check",checker,expr];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1289}));}}}}else{if(((other=τ1288),true)){return ["send",checker,["data",expr]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1288}));}}};return ["macro",mac];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1272}));}}});stdenv.register_macro("!",function(τ1292,τ1293){var τp0;var context;var env;if(((τ1292 instanceof Array)&&(((τp0=τ1292.length),true)&&((τp0===2)&&((context=τ1292[0]),true,(env=τ1292[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;var τp2;var τp3;var τp4;if(((τ1293 instanceof Array)&&(((τp0=τ1293.length),true)&&((τp0===3)&&(((τp1=τ1293[0]),(τp1==="data"))&&(((expr=τ1293[1]),true,(τp2=τ1293[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void")))))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var orig_expr=expr;var projector=function(){var τ1294=expr;var τp0;var τp1;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var other;var τ1295=false;var τ1296=false;var τ1297=false;var τ1298=false;if(((τ1295=(τ1294 instanceof Array))&&((τ1296=((τp0=τ1294.length),true))&&((τp0===1)&&((τp1=τ1294[0]),(τp1==="void")))))){throw "can't use ! on its own";}else{if((τ1296&&((τ1297=(τp0===2))&&((τ1298=((τp1=τ1294[0]),(τp1==="symbol")))&&((τp2=τ1294[1]),(τp2==="String")))))){return ["macro",function(_,τ1299){var τp0;var τp1;var expr;if(((τ1299 instanceof Array)&&(((τp0=τ1299.length),true)&&((τp0===2)&&(((τp1=τ1299[0]),(τp1==="data"))&&((expr=τ1299[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["data",["symbol","true"],["send",["symbol","String"],["data",expr]]];}];}else{if((τ1298&&((τp2=τ1294[1]),(τp2==="Number")))){return ["macro",function(_,τ1300){var τp0;var τp1;var expr;if(((τ1300 instanceof Array)&&(((τp0=τ1300.length),true)&&((τp0===2)&&(((τp1=τ1300[0]),(τp1==="data"))&&((expr=τ1300[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",expr]]];}];}else{if(((other=τ1294),true)){return ["send",["symbol","___projector"],["data",expr]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1294}));}}}}}();var mac=function(τ1302,expr){var τp0;var τ1301;var env;if(((τ1302 instanceof Array)&&(((τp0=τ1302.length),true)&&((τp0===2)&&((τ1301=τ1302[0]),true,(env=τ1302[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1303=τ1301;var other;if((τ1303==="pattern")){var τ1304=expr;var τp0;var τp1;var subp;var τp0;var τp1;var other;var τ1305=false;var τ1306=false;if(((τ1305=(τ1304 instanceof Array))&&((τ1306=((τp0=τ1304.length),true))&&((τp0>=1)&&(((τp1=τ1304[0]),(τp1==="data"))&&((subp=τ1304.slice(1)),true)))))){var dctor=["send",["symbol","___deconstructor"],["data",orig_expr]];return ["project",projector,["project",dctor,τ1088(["duck",0],subp)]];}else{if((τ1306&&((τp0===1)&&((τp1=τ1304[0]),(τp1==="void"))))){return ["project",projector,["ignore"]];}else{if(((other=τ1304),true)){return ["project",projector,expr];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1304}));}}}}else{if(((other=τ1303),true)){return ["send",["send",projector,["data",expr]],["value",1]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1303}));}}};return ["macro",mac];});var is_symbol=function(τ1307,env){var τ1308=τ1307;var τp0;var τp1;var s;var _;if(((τ1308 instanceof Array)&&(((τp0=τ1308.length),true)&&((τp0===2)&&(((τp1=τ1308[0]),(τp1==="symbol"))&&((s=τ1308[1]),true)))))){var τ1309=env.resolve(s);var τp0;var τp1;var m;var _;if(((τ1309 instanceof Array)&&(((τp0=τ1309.length),true)&&((τp0===2)&&(((τp1=τ1309[0]),(τp1==="macro"))&&((m=τ1309[1]),true)))))){return false;}else{if(((_=τ1309),true)){return true;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1309}));}}}else{if(((_=τ1308),true)){return false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1308}));}}};var lhs_parse_specs=function(env,specs){var fw=[];var bw=[];var keys=[];var defaults=[];var rest=undefined;(specs=specs.slice(0));while(specs.length){var x=specs.shift();var v=expand.step(["pattern",env],x);var τ1310=v;var τp0;var τp1;var variable;var τp0;var τp1;var key;var τp0;var τp1;var key;var value;var τp0;var τp1;var variable;var value;var τ1311;var otherwise;var τ1312=false;var τ1313=false;var τ1314=false;if(((τ1312=(τ1310 instanceof Array))&&((τ1313=((τp0=τ1310.length),true))&&((τ1314=(τp0===2))&&(((τp1=τ1310[0]),(τp1==="dynsplice"))&&((variable=τ1310[1]),true)))))){(rest=variable);}else{if((τ1314&&(((τp1=τ1310[0]),(τp1==="assoc"))&&((key=τ1310[1]),true)))){keys.push([key,key]);}else{if((τ1313&&((τ1314=(τp0===3))&&(((τp1=τ1310[0]),(τp1==="assoc"))&&((key=τ1310[1]),true,(value=τ1310[2]),true))))){keys.push([key,value]);}else{if((τ1314&&(((τp1=τ1310[0]),(τp1==="default"))&&((variable=τ1310[1]),true,(value=τ1310[2]),true,(τ1311=τ1310),true)))){var τ1315=τ1311;var otherwise;if(rest){throw Error("no defaults after rest arg");}else{if(((otherwise=τ1315),true)){defaults.push([variable,value]);}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1315}));}}}else{if((rest===undefined)){fw.push(v);}else{if(((otherwise=τ1310),true)){bw.push(v);}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1310}));}}}}}}}return [fw,bw,keys,defaults,rest];};var parse_lhs=function(env,lhs,rhs,gen){(gen=(gen||gensym_factory("p")));var vars=[];var clauses=[];var current=["multi"];var placeholder=null;var mktemp=function(){var t=gen();vars.push(t);return t;};var newclause=function(){if((current.length>1)){clauses.push(current);}else{null;}return (current=["multi"]);};var maybe_temp=function(x){if(is_symbol(x,env)){return x;}else{var temp=mktemp();current.push(["assign",temp,x]);return temp;}};var helper=function(lhs,curr){return helper_noexpand(expand.step(["pattern",env],lhs),curr);};var helper_noexpand=function(lhs,curr){var helper_keys=function(temp,keys){var τ1323=[];var τ1324=keys;var τ1325=τ1324.length;for(var τ1326=0;(τ1326<τ1325);(τ1326++)){var τ1327=τ1324[τ1326];var τp0;var τp1;var τ1330;var τ1331;var k;var τ1328;var τ1329;var k;var v;var other;if(((τ1327 instanceof Array)&&(((τp0=τ1327.length),true)&&((τp0===2)&&(((τp1=τ1327[0]),(((τp1 instanceof Array)&&(((τ1328=τp1.length),true)&&((τ1328===2)&&(((τ1329=τp1[0]),(τ1329==="symbol"))&&((k=τp1[1]),true)))))||((τp1 instanceof Array)&&(((τ1330=τp1.length),true)&&((τ1330===2)&&(((τ1331=τp1[0]),(τ1331==="value"))&&((k=τp1[1]),true)))))))&&((v=τ1327[1]),true)))))){τ1323.push((current.push(["send",["symbol","___hasprop"],["data",temp,["value",k]]]),newclause(),helper(v,["send",temp,["value",k]])));}else{if(((other=τ1327),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1327}));}}}return τ1323;};var helper_array=function(temp,specs,start){var τp0;var fw;var bw;var keys;var dflt;var rest;if(((specs instanceof Array)&&(((τp0=specs.length),true)&&((τp0===5)&&((fw=specs[0]),true,(bw=specs[1]),true,(keys=specs[2]),true,(dflt=specs[3]),true,(rest=specs[4]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var nfw=fw.length;var nbw=bw.length;var ndflt=dflt.length;var extract_length=true;var check_length=true;var len=(-1);if(extract_length){(len=mktemp());current.push(["send",["symbol",":="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["symbol","true"]);newclause();if(check_length){var lo=((nfw+nbw)+start);var hi=(lo+ndflt);if((rest===undefined)){if((lo===hi)){current.push(["send",["symbol","=="],["data",len,["value",lo]]]);}else{current.push(["send",["symbol","and"],["data",["send",["symbol",">="],["data",len,["value",lo]]],["send",["symbol","<="],["data",len,["value",hi]]]]]);}}else{current.push(["send",["symbol",">="],["data",len,["value",lo]]]);}newclause();}else{null;}}else{null;}var τ1332=enumerate(fw);var τ1333=τ1332.length;for(var τ1334=0;(τ1334<τ1333);(τ1334++)){var τ1342=τ1332[τ1334];var τp0;var j;var m;var other;if(((τ1342 instanceof Array)&&(((τp0=τ1342.length),true)&&((τp0===2)&&((j=τ1342[0]),true,(m=τ1342[1]),true))))){helper(m,["send",temp,["value",(j+start)]]);}else{if(((other=τ1342),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1342}));}}}false;var τ1335=enumerate(dflt);var τ1336=τ1335.length;for(var τ1337=0;(τ1337<τ1336);(τ1337++)){var τ1343=τ1335[τ1337];var τp0;var j;var τp1;var τp2;var patt;var value;var other;if(((τ1343 instanceof Array)&&(((τp0=τ1343.length),true)&&((τp0===2)&&(((j=τ1343[0]),true,(τp1=τ1343[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===2)&&((patt=τp1[0]),true,(value=τp1[1]),true)))))))){var idx=((j+nfw)+start);helper(patt,["send",["symbol","if"],["data",["send",["symbol",">="],["data",["value",idx],len]],value,["send",temp,["value",idx]]]]);}else{if(((other=τ1343),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1343}));}}}false;if((rest!==undefined)){var pos=((nfw+ndflt)+start);var slice=function(){if((nbw>0)){return ["data",["value",pos],["value",(-nbw)]];}else{return ["data",["value",pos]];}}();helper(rest,["send",["send",temp,["send",["symbol","."],["data",["void"],["symbol","slice"]]]],slice]);}else{null;}var τ1338=[];var τ1339=enumerate(bw);var τ1340=τ1339.length;for(var τ1341=0;(τ1341<τ1340);(τ1341++)){var τ1344=τ1339[τ1341];var τp0;var j;var m;var other;if(((τ1344 instanceof Array)&&(((τp0=τ1344.length),true)&&((τp0===2)&&((j=τ1344[0]),true,(m=τ1344[1]),true))))){τ1338.push(helper(m,["send",temp,["send",["symbol","-"],["data",len,["value",(nbw-j)]]]]));}else{if(((other=τ1344),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1344}));}}}return τ1338;};var τ1316=lhs;var τp0;var τp1;var τ1317;var τ1318;var τp0;var τp1;var s;var τp0;var τp1;var v;var τp0;var τp1;var condition;var pattern;var τp0;var τp1;var τp0;var τp1;var c;var pattern;var τp0;var τp1;var xs;var τp0;var τp1;var xs;var τp0;var τp1;var τp2;var τp3;var τp4;var checkers;var expr;var τp0;var τp1;var checker;var expr;var τp0;var τp1;var projector;var expr;var τp0;var τp1;var fname;var spec;var τp0;var τp1;var i;var args;var τp0;var τp1;var args;var other;var τ1319=false;var τ1320=false;var τ1321=false;var τ1322=false;if(((τ1316 instanceof Array)&&(((τp0=τ1316.length),true)&&((τp0===1)&&((τp1=τ1316[0]),(τp1==="void")))))){var x=["check",["macro",make_checker(["value",null],["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if(((τ1316==="_")||((τ1316 instanceof Array)&&(((τ1317=τ1316.length),true)&&((τ1317===1)&&((τ1318=τ1316[0]),(τ1318==="ignore"))))))){if((!is_symbol(curr,env))){current.push(curr);return current.push(["symbol","true"]);}else{return null;}}else{if(((τ1319=(τ1316 instanceof Array))&&((τ1320=((τp0=τ1316.length),true))&&((τ1321=(τp0===2))&&(((τp1=τ1316[0]),(τp1==="symbol"))&&((s=τ1316[1]),true)))))){vars.push(["symbol",s]);current.push(["assign",["symbol",s],curr]);return current.push(["value",true]);}else{if((τ1321&&(((τp1=τ1316[0]),(τp1==="value"))&&((v=τ1316[1]),true)))){var x=["check",["macro",make_checker(lhs,["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if((τ1320&&((τp0===3)&&(((τp1=τ1316[0]),(τp1==="test"))&&((condition=τ1316[1]),true,(pattern=τ1316[2]),true))))){helper(pattern,curr);current.push(condition);return newclause();}else{if((τ1320&&((τp0===1)&&((τp1=τ1316[0]),(τp1==="placeholder"))))){(placeholder=gensym());vars.push(placeholder);current.push(["assign",placeholder,curr]);return current.push(["value",true]);}else{if((τ1320&&((τp0===3)&&(((τp1=τ1316[0]),(τp1==="constant"))&&((c=τ1316[1]),true,(pattern=τ1316[2]),true))))){return helper(pattern,c);}else{if((τ1320&&((τ1321=(τp0>=1))&&(((τp1=τ1316[0]),(τp1==="all"))&&((xs=τ1316.slice(1)),true))))){var temp=maybe_temp(curr);var τ1345=xs;var τ1346=τ1345.length;for(var τ1347=0;(τ1347<τ1346);(τ1347++)){var τ1348=τ1345[τ1347];var x;var other;if(((x=τ1348),true)){helper(x,temp);}else{if(((other=τ1348),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1348}));}}}false;return false;}else{if((τ1321&&(((τp1=τ1316[0]),(τp1==="any"))&&((xs=τ1316.slice(1)),true)))){var normalize=function(vars){return function(){var τ1352=[];var τ1353=vars;var τ1354=τ1353.length;for(var τ1355=0;(τ1355<τ1354);(τ1355++)){var τ1356=τ1353[τ1355];var τp0;var τp1;var v;var other;if(((τ1356 instanceof Array)&&(((τp0=τ1356.length),true)&&((τp0===2)&&(((τp1=τ1356[0]),(τp1==="symbol"))&&((v=τ1356[1]),true,(v[0]!=="τ"))))))){τ1352.push(v);}else{if(((other=τ1356),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1356}));}}}return τ1352;}().sort().join(",");};var temp=maybe_temp(curr);var myvars=undefined;var clauses=[];var τ1349=xs;var τ1350=τ1349.length;for(var τ1351=0;(τ1351<τ1350);(τ1351++)){var τ1357=τ1349[τ1351];var x;var other;if(((x=τ1357),true)){var p=parse_lhs(env,x,temp,gensym);var τ1358=null;var _;if((myvars===undefined)){(myvars=p[0]);}else{if((normalize(p[0])!==normalize(myvars))){throw [Error("Must have the same set of variables in both branches!",(("["+String(myvars))+"]"),(("["+String(p[0]))+"]"))];}else{if(((_=τ1358),true)){(vars=vars.concat(p[0]));}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1358}));}}}clauses.push(make_pattern_test(p[1]));}else{if(((other=τ1357),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1357}));}}}false;current.push(make_or_pattern(clauses));(vars=vars.concat(myvars));return newclause();}else{if((τ1320&&((τ1321=(τp0===3))&&((τ1322=((τp1=τ1316[0]),(τp1==="check")))&&(((τp2=τ1316[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3>=1)&&(((τp4=τp2[0]),(τp4==="multi"))&&((checkers=τp2.slice(1)),true,(expr=τ1316[2]),true))))))))){var temp=maybe_temp(curr);var τ1359=checkers;var τ1360=τ1359.length;for(var τ1361=0;(τ1361<τ1360);(τ1361++)){var τ1362=τ1359[τ1361];var checker;var other;if(((checker=τ1362),true)){current.push(["send",checker,["data",temp]]);newclause();}else{if(((other=τ1362),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1362}));}}}false;return helper(expr,temp);}else{if((τ1322&&((checker=τ1316[1]),true,(expr=τ1316[2]),true))){var temp=maybe_temp(curr);current.push(["send",checker,["data",temp]]);newclause();return helper(expr,temp);}else{if((τ1321&&(((τp1=τ1316[0]),(τp1==="project"))&&((projector=τ1316[1]),true,(expr=τ1316[2]),true)))){var temp=maybe_temp(curr);var temp2=mktemp();current.push(["send",["symbol",":="],["data",temp2,["send",projector,["data",temp]]]],["send",temp2,["value",0]]);newclause();return helper(expr,["send",temp2,["value",1]]);}else{if((τ1321&&(((τp1=τ1316[0]),(τp1==="send"))&&((fname=τ1316[1]),true,(spec=τ1316[2]),true)))){return helper(fname,["send",["symbol","->"],["data",spec,curr]]);}else{if((τ1320&&((τp0>=2)&&(((τp1=τ1316[0]),(τp1==="duck"))&&((i=τ1316[1]),true,(args=τ1316.slice(2)),true))))){var temp=maybe_temp(curr);current.push(["value",true]);var τp0;var specs;var τp1;var fw;var bw;var keys;var dflt;var rest;if((((τp0=lhs_parse_specs(env,args)),(specs=τp0),true,(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===5)&&((fw=τp0[0]),true,(bw=τp0[1]),true,(keys=τp0[2]),true,(dflt=τp0[3]),true,(rest=τp0[4]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){return helper_array(temp,specs,i);}else{return null;}}else{if((τ1320&&((τp0>=1)&&(((τp1=τ1316[0]),(τp1==="data"))&&((args=τ1316.slice(1)),true))))){var temp=maybe_temp(curr);var τp0;var specs;var τp1;var fw;var bw;var keys;var dflt;var rest;if((((τp0=lhs_parse_specs(env,args)),(specs=τp0),true,(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===5)&&((fw=τp0[0]),true,(bw=τp0[1]),true,(keys=τp0[2]),true,(dflt=τp0[3]),true,(rest=τp0[4]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){current.push(["send",["symbol","instanceof"],["data",temp,["symbol","Array"]]]);newclause();return helper_array(temp,specs,0);}else{return null;}}else{if(((other=τ1316),true)){throw ["OopsG",other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1316}));}}}}}}}}}}}}}}}}};helper(lhs,rhs);if((current.length>1)){clauses.push(current);}else{null;}return [vars,clauses,placeholder];};var make_declarations=function(vars,val){var τ1363=[];var τ1364=vars;var τ1365=τ1364.length;for(var τ1366=0;(τ1366<τ1365);(τ1366++)){var τ1367=τ1364[τ1366];var name;var other;if(((name=τ1367),true)){τ1363.push(["declare",name,["value",val]]);}else{if(((other=τ1367),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1367}));}}}return τ1363;};var make_pattern_test=function(clauses){var ands=clauses.pop();while((clauses.length>0)){(ands=["send",["symbol","and"],["data",clauses.pop(),ands]]);}return (ands||["value",true]);};var make_or_pattern=function(clauses){var ors=clauses.pop();while((clauses.length>0)){(ors=["send",["symbol","or"],["data",clauses.pop(),ors]]);}return ors;};var find_arrow=function(τ1369){var expr;var τ1368;(expr=τ1369);true;(τ1368=τ1369);var τ1370=τ1368;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var x;var τ1373;var τ1374;var τ1371;var τ1372;var x;var x;var τp0;var τp1;var v;var τp0;var kind;var args;var τ1375=false;var τ1376=false;var τ1377=false;var τ1378=false;if(((τ1375=(τ1370 instanceof Array))&&((τ1376=((τp0=τ1370.length),true))&&((τ1377=(τp0===2))&&((τ1378=((τp1=τ1370[0]),(τp1==="symbol")))&&((τp2=τ1370[1]),(τp2==="match"))))))){var placeholder=gensym();return [placeholder,placeholder];}else{if((τ1378&&((τp2=τ1370[1]),(τp2==="|>")))){var placeholder=gensym();return [placeholder,placeholder];}else{if((τ1378&&((τp2=τ1370[1]),(τp2==="|>*")))){var placeholder=gensym();return [placeholder,["send",["symbol","*"],["data",["void"],placeholder]]];}else{if((((τ1370 instanceof Array)&&(((τ1371=τ1370.length),true)&&((τ1371===2)&&(((τ1372=τ1370[0]),(τ1372==="symbol"))&&((x=τ1370[1]),true)))))||(((x=τ1370),true,(τ1370 instanceof Array))&&(((τ1373=τ1370.length),true)&&((τ1373===1)&&((τ1374=τ1370[0]),(τ1374==="void"))))))){return [false,expr];}else{if((((x=τ1370),true,(τ1370 instanceof Array))&&(((τp0=τ1370.length),true)&&((τp0===2)&&(((τp1=τ1370[0]),(τp1==="value"))&&((v=τ1370[1]),true)))))){return [false,x];}else{if(((τ1370 instanceof Array)&&(((τp0=τ1370.length),true)&&((τp0>=1)&&((kind=τ1370[0]),true,(args=τ1370.slice(1)),true))))){var placeholder=false;var new_args=function(){var τ1379=[];var τ1380=args;var τ1381=τ1380.length;for(var τ1382=0;(τ1382<τ1381);(τ1382++)){var τ1383=τ1380[τ1382];var arg;var other;if(((arg=τ1383),true)){τ1379.push(function(){var τp0;var τp1;var ph;var new_arg;if((((τp0=find_arrow(arg)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((ph=τp0[0]),true,(new_arg=τp0[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}if(ph){(placeholder=ph);}else{null;}return new_arg;}());}else{if(((other=τ1383),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1383}));}}}return τ1379;}();return [placeholder,τ1088([kind],new_args)];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1370}));}}}}}}};var same=function(){var τ1385=Array.prototype.slice.call(arguments,0);var τp0;var τ1386;if(((τ1385 instanceof Array)&&(((τp0=τ1385.length),true)&&((τp0>=0)&&((τ1386=τ1385.slice(0)),true))))){var τ1387=τ1386;var τp0;var τp1;var τp2;var τp3;var x;var τp4;var τp5;var τp6;var y;var τp0;var τp1;var τp2;var τp3;var x;var τp4;var τp5;var τp6;var y;var τp0;var τp1;var τp2;var τp3;var x;var τp4;var τp5;var τp6;var y;var τp0;var τp1;var τp2;var τp3;var f;var x;var τp4;var τp5;var τp6;var g;var y;var τp0;var τp1;var τp2;var kind1;var xs;var τp3;var τp4;var kind2;var ys;var other;var τ1388=false;var τ1389=false;var τ1390=false;var τ1391=false;var τ1392=false;var τ1393=false;if(((τ1388=(τ1387 instanceof Array))&&((τ1389=((τp0=τ1387.length),true))&&((τ1390=(τp0===2))&&((τ1391=((τp1=τ1387[0]),(τp1 instanceof Array)))&&((τ1392=((τp2=τp1.length),true))&&((τ1393=(τp2===2))&&(((τp3=τp1[0]),(τp3==="symbol"))&&(((x=τp1[1]),true,(τp4=τ1387[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&((y=τp4[1]),true))))))))))))){return (x===y);}else{if((τ1393&&(((τp3=τp1[0]),(τp3==="value"))&&(((x=τp1[1]),true,(τp4=τ1387[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="value"))&&((y=τp4[1]),true)))))))){return (x===y);}else{if((τ1393&&(((τp3=τp1[0]),(τp3==="macro"))&&(((x=τp1[1]),true,(τp4=τ1387[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="macro"))&&((y=τp4[1]),true)))))))){return (x===y);}else{if((τ1392&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((f=τp1[1]),true,(x=τp1[2]),true,(τp4=τ1387[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===3)&&(((τp6=τp4[0]),(τp6==="send"))&&((g=τp4[1]),true,(y=τp4[2]),true))))))))){return (same(f,g)&&same(x,y));}else{if((τ1392&&((τp2>=1)&&(((kind1=τp1[0]),true,(xs=τp1.slice(1)),true,(τp3=τ1387[1]),(τp3 instanceof Array))&&(((τp4=τp3.length),true)&&((τp4>=1)&&((kind2=τp3[0]),true,(ys=τp3.slice(1)),true))))))){var allequal=xs.every(function(x,i){return same(x,send(ys,i));});return (((kind1===kind2)&&(xs.length===ys.length))&&allequal);}else{if(((other=τ1387),true)){return false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1387}));}}}}}}}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1385}));}};stdenv.register_macro("|>",function(τ1395,τ1394){var τp0;var context;var env;if(((τ1395 instanceof Array)&&(((τp0=τ1395.length),true)&&((τp0===2)&&((context=τ1395[0]),true,(env=τ1395[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1396=τ1394;var τp0;var τp1;var τp0;var τp1;var to_match;var cl;var τ1397=false;var τ1398=false;if(((τ1397=(τ1396 instanceof Array))&&((τ1398=((τp0=τ1396.length),true))&&((τp0===1)&&((τp1=τ1396[0]),(τp1==="void")))))){return ["placeholder"];}else{if((τ1398&&((τp0===3)&&(((τp1=τ1396[0]),(τp1==="data"))&&((to_match=τ1396[1]),true,(cl=τ1396[2]),true))))){var temp=gensym();var clauses=function(){var τ1399=cl;var τp0;var τp1;var cls;var other;if(((τ1399 instanceof Array)&&(((τp0=τ1399.length),true)&&((τp0>=1)&&(((τp1=τ1399[0]),(τp1==="multi"))&&((cls=τ1399.slice(1)),true)))))){return cls;}else{if(((other=τ1399),true)){return [other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1399}));}}}();var cached_conditions=[];var stmts=["multi",["declare",temp,to_match]];(clauses=function(){var τ1400=[];var τ1401=clauses;var τ1402=τ1401.length;for(var τ1403=0;(τ1403<τ1402);(τ1403++)){var τ1404=τ1401[τ1403];var clause;var other;if(((clause=τ1404),true)){τ1400.push(function(){var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var lhs;var body;if(((clause instanceof Array)&&(((τp0=clause.length),true)&&((τp0===3)&&(((τp1=clause[0]),(τp1==="send"))&&(((τp2=clause[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=clause[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((lhs=τp6[1]),true,(body=τp6[2]),true))))))))))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var decls;var conditions;var placeholder;if((((τp0=parse_lhs(env,lhs,temp)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===3)&&((decls=τp0[0]),true,(conditions=τp0[1]),true,(placeholder=τp0[2]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}(stmts=stmts.concat(make_declarations(decls)));var b=function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,body]];}else{return body;}}();var f=function(x){return ["done",expand(["expr",env],x)];};return [conditions.map(f),b];}());}else{if(((other=τ1404),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1404}));}}}return τ1400;}());var shares=function(){var f=function(τ1405,i){var τp0;var conditions;var body;if(((τ1405 instanceof Array)&&(((τp0=τ1405.length),true)&&((τp0===2)&&((conditions=τ1405[0]),true,(body=τ1405[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var res=0;var prev_conditions=send(clauses,i)[0];var nc=conditions.length;for(var j=0;((j<nc)&&same(send(conditions,j),send(prev_conditions,j)));(j++)){(res++);}return res;};return clauses.slice(1).map(f);}();var max=send(Math.max,shares);shares.push(0);var vars=[];(vars=vars.concat(function(){var τ1406=[];var τ1407=τ1580(1,max);var τ1408=τ1407.length;for(var τ1409=0;(τ1409<τ1408);(τ1409++)){var τ1410=τ1407[τ1409];var _;var other;if(((_=τ1410),true)){τ1406.push(gensym());}else{if(((other=τ1410),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1410}));}}}return τ1406;}()));(stmts=stmts.concat(make_declarations(vars,false)));var shared_last=0;var new_clauses=clauses.map(function(τ1411,i){var τp0;var conditions;var body;if(((τ1411 instanceof Array)&&(((τp0=τ1411.length),true)&&((τp0===2)&&((conditions=τ1411[0]),true,(body=τ1411[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var shared=function(){if(shared_last){return [send(vars,(shared_last-1))];}else{return [];}}();var n_to_share=Math.max(shared_last,send(shares,i));var to_share=conditions.slice(shared_last,n_to_share).map(function(x,j){return ["assign",send(vars,(shared_last+j)),x];});(shared_last=send(shares,i));var rest=conditions.slice(n_to_share);return [shared.concat(to_share).concat(rest),body];});(clauses=new_clauses);var r=["send",["symbol","throw"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["value","Could not find a match"],["data",["send",["symbol","="],["data",["symbol","value"],temp]]]]]];while((clauses.length>0)){var τp0;var τp1;var conditions;var body;if((((τp0=clauses.pop()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((conditions=τp0[0]),true,(body=τp0[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var test=make_pattern_test(conditions);(r=["if",test,body,r]);}stmts.push(r);return stmts;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1396}));}}});var qqstruct=function(name,args){return τ1088(["data",["value",name]],args);};var qq=function(τ1413){var expr;var τ1412;(expr=τ1413);true;(τ1412=τ1413);var τ1414=τ1412;var τp0;var τp1;var s;var τp0;var τp1;var τp0;var τp1;var v;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var insert;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var insert;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var insert;var τp0;var name;var args;var τ1415=false;var τ1416=false;var τ1417=false;var τ1418=false;var τ1419=false;var τ1420=false;var τ1421=false;var τ1422=false;if(((τ1415=(τ1414 instanceof Array))&&((τ1416=((τp0=τ1414.length),true))&&((τp0===2)&&(((τp1=τ1414[0]),(τp1==="symbol"))&&((s=τ1414[1]),true)))))){return qqstruct("symbol",[["value",s]]);}else{if((τ1416&&((τp0===1)&&((τp1=τ1414[0]),(τp1==="void"))))){return qqstruct("void",[]);}else{if((τ1416&&((τp0===2)&&(((τp1=τ1414[0]),(τp1==="value"))&&((v=τ1414[1]),true))))){return qqstruct("value",[expr]);}else{if((τ1416&&((τ1417=(τp0===3))&&((τ1418=((τp1=τ1414[0]),(τp1==="send")))&&((τ1419=((τp2=τ1414[1]),(τp2 instanceof Array)))&&((τ1420=((τp3=τp2.length),true))&&((τ1421=(τp3===2))&&((τ1422=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="^"))&&(((τp6=τ1414[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((insert=τp6[2]),true)))))))))))))))))){return insert;}else{if((τ1422&&(((τp5=τp2[1]),(τp5==="^="))&&(((τp6=τ1414[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((insert=τp6[2]),true)))))))))))){return qqstruct("value",[insert]);}else{if((τ1422&&(((τp5=τp2[1]),(τp5==="^*"))&&(((τp6=τ1414[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((insert=τp6[2]),true)))))))))))){return ["send",["symbol","*"],["data",["void"],insert]];}else{if((τ1416&&((τp0>=1)&&((name=τ1414[0]),true,(args=τ1414.slice(1)),true)))){return qqstruct(name,function(){var τ1423=[];var τ1424=args;var τ1425=τ1424.length;for(var τ1426=0;(τ1426<τ1425);(τ1426++)){var τ1427=τ1424[τ1426];var arg;var other;if(((arg=τ1427),true)){τ1423.push(qq(arg));}else{if(((other=τ1427),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1427}));}}}return τ1423;}());}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1414}));}}}}}}}};stdenv.register_macro("'",function(τ1428,τ1429){var τp0;var context;var env;if(((τ1428 instanceof Array)&&(((τp0=τ1428.length),true)&&((τp0===2)&&((context=τ1428[0]),true,(env=τ1428[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var τp4;var expr;if(((τ1429 instanceof Array)&&(((τp0=τ1429.length),true)&&((τp0===3)&&(((τp1=τ1429[0]),(τp1==="data"))&&(((τp2=τ1429[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((expr=τ1429[2]),true)))))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return qq(expr);});stdenv.register_macro("provide",function(τ1430,τ1431){var τp0;var context;var env;if(((τ1430 instanceof Array)&&(((τp0=τ1430.length),true)&&((τp0===2)&&((context=τ1430[0]),true,(env=τ1430[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var expr;if(((τ1431 instanceof Array)&&(((τp0=τ1431.length),true)&&((τp0===2)&&(((τp1=τ1431[0]),(τp1==="data"))&&(((τp2=τ1431[1]),(τp3=τ1575(aslist)(τp2)),τp3[0])&&((expr=τp3[1]),true))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return ["sink",["multi"].concat(function(){var τ1432=[];var τ1433=expr;var τ1434=τ1433.length;for(var τ1435=0;(τ1435<τ1434);(τ1435++)){var τ1436=τ1433[τ1435];var s;var τp0;var τp1;var name;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var s;var τp9;var τ1439;var τ1440;var name;var τ1437;var τ1438;var name;var other;var other;var τ1441=false;if((((s=τ1436),true,(τ1436 instanceof Array))&&(((τp0=τ1436.length),true)&&((τp0===2)&&(((τp1=τ1436[0]),(τp1==="symbol"))&&((name=τ1436[1]),true)))))){τ1432.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if(((τ1436 instanceof Array)&&(((τp0=τ1436.length),true)&&((τp0===3)&&(((τp1=τ1436[0]),(τp1==="send"))&&(((τp2=τ1436[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1436[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((s=τp6[1]),true,(τp9=τp6[2]),(((τp9 instanceof Array)&&(((τ1437=τp9.length),true)&&((τ1437===2)&&(((τ1438=τp9[0]),(τ1438==="symbol"))&&((name=τp9[1]),true)))))||((τp9 instanceof Array)&&(((τ1439=τp9.length),true)&&((τ1439===2)&&(((τ1440=τp9[0]),(τ1440==="value"))&&((name=τp9[1]),true))))))))))))))))))))){τ1432.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if((τ1441=((other=τ1436),true))){τ1432.push(function(){throw τ1077(["syntax","provide"]).create("Each clause of provide must be 'sym' or 'sym as name'");}());}else{if(τ1441){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1436}));}}}}}return τ1432;}())];});stdenv.register_macro("require",function(τ1442,τ1443){var τp0;var context;var env;if(((τ1442 instanceof Array)&&(((τp0=τ1442.length),true)&&((τp0===2)&&((context=τ1442[0]),true,(env=τ1442[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;if(((τ1443 instanceof Array)&&(((τp0=τ1443.length),true)&&((τp0===2)&&(((τp1=τ1443[0]),(τp1==="data"))&&((expr=τ1443[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var stmts=[];var topfetch=function(pkg,v){stmts.push(["send",["symbol","="],["data",v,["send",["send",["symbol","___node"],["send",["symbol","."],["data",["void"],["symbol","require"]]]],["data",["value",pkg]]]]]);return v;};var produce=function(τ1444,fetch){var τ1445=τ1444;var τp0;var τp1;var s;var τp0;var τp1;var τp2;var s;var τ1448;var τ1449;var subp;var τ1446;var τ1447;var subp;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τ1452;var τ1453;var pkg;var τ1450;var τ1451;var pkg;var s;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var pkg;var subp;var τ1454=false;var τ1455=false;var τ1456=false;var τ1457=false;var τ1458=false;var τ1459=false;var τ1460=false;var τ1461=false;if(((τ1454=(τ1445 instanceof Array))&&((τ1455=((τp0=τ1445.length),true))&&((τ1456=(τp0===2))&&(((τp1=τ1445[0]),(τp1==="symbol"))&&((s=τ1445[1]),true)))))){return fetch(s,["symbol",s]);}else{if((τ1456&&(((τp1=τ1445[0]),(τp1==="value"))&&(((τp2=τ1445[1]),(typeof(τp2)==="string"))&&((s=τp2),true))))){return fetch(s,gensym());}else{if((((τ1445 instanceof Array)&&(((τ1446=τ1445.length),true)&&((τ1446>=1)&&(((τ1447=τ1445[0]),(τ1447==="multi"))&&((subp=τ1445.slice(1)),true)))))||((τ1445 instanceof Array)&&(((τ1448=τ1445.length),true)&&((τ1448>=1)&&(((τ1449=τ1445[0]),(τ1449==="data"))&&((subp=τ1445.slice(1)),true))))))){var τ1462=[];var τ1463=subp;var τ1464=τ1463.length;for(var τ1465=0;(τ1465<τ1464);(τ1465++)){var τ1466=τ1463[τ1465];var p;var other;if(((p=τ1466),true)){τ1462.push(produce(p,fetch));}else{if(((other=τ1466),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1466}));}}}return τ1462;}else{if(((τ1454=(τ1445 instanceof Array))&&((τ1455=((τp0=τ1445.length),true))&&((τ1456=(τp0===3))&&((τ1457=((τp1=τ1445[0]),(τp1==="send")))&&((τ1458=((τp2=τ1445[1]),(τp2 instanceof Array)))&&((τ1459=((τp3=τp2.length),true))&&((τ1460=(τp3===2))&&((τ1461=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1445[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(((τp9 instanceof Array)&&(((τ1450=τp9.length),true)&&((τ1450===2)&&(((τ1451=τp9[0]),(τ1451==="value"))&&((pkg=τp9[1]),true)))))||((τp9 instanceof Array)&&(((τ1452=τp9.length),true)&&((τ1452===2)&&(((τ1453=τp9[0]),(τ1453==="symbol"))&&((pkg=τp9[1]),true)))))))&&((s=τp6[2]),true)))))))))))))))){return fetch(pkg,s);}else{if((τ1461&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=τ1445[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((pkg=τp6[1]),true,(subp=τp6[2]),true)))))))){var pkgv=produce(pkg,fetch);return produce(subp,function(pkg,v){return stmts.push(["send",["symbol","="],["data",v,["send",pkgv,["value",pkg]]]]);});}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1445}));}}}}}};produce(expr,topfetch);return τ1088(["multi"],stmts);});stdenv.register_macro("%",function(τ1467,τ1468){var τp0;var context;var env;if(((τ1467 instanceof Array)&&(((τp0=τ1467.length),true)&&((τp0===2)&&((context=τ1467[0]),true,(env=τ1467[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var descr;var contents;if(((τ1468 instanceof Array)&&(((τp0=τ1468.length),true)&&((τp0===3)&&(((τp1=τ1468[0]),(τp1==="data"))&&((descr=τ1468[1]),true,(contents=τ1468[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var tags=["data"];var parse=function(τ1469){var τ1470=τ1469;var τp0;var τp1;var τp0;var τp1;var s;var τp0;var τp1;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τ1473;var τ1474;var x;var τ1471;var τ1472;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τ1477;var τ1478;var x;var τ1475;var τ1476;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τ1481;var τ1482;var prop;var τ1479;var τ1480;var prop;var value;var τp0;var τp1;var expr;var rest;var τ1485;var τ1486;var args;var τ1483;var τ1484;var args;var τ1487=false;var τ1488=false;var τ1489=false;var τ1490=false;var τ1491=false;var τ1492=false;var τ1493=false;var τ1494=false;if(((τ1487=(τ1470 instanceof Array))&&((τ1488=((τp0=τ1470.length),true))&&((τp0===1)&&((τp1=τ1470[0]),(τp1==="void")))))){return null;}else{if((τ1488&&((τ1489=(τp0===2))&&(((τp1=τ1470[0]),(τp1==="symbol"))&&((s=τ1470[1]),true))))){return tags.push(["value",("+"+s)]);}else{if((τ1489&&(((τp1=τ1470[0]),(τp1==="value"))&&((x=τ1470[1]),true)))){return tags.push(["value",("+"+x)]);}else{if((τ1488&&((τ1489=(τp0===3))&&((τ1490=((τp1=τ1470[0]),(τp1==="send")))&&((τ1491=((τp2=τ1470[1]),(τp2 instanceof Array)))&&((τ1492=((τp3=τp2.length),true))&&((τ1493=(τp3===2))&&((τ1494=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="."))&&(((τp6=τ1470[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((τp12=τp6[2]),(((τp12 instanceof Array)&&(((τ1471=τp12.length),true)&&((τ1471===2)&&(((τ1472=τp12[0]),(τ1472==="symbol"))&&((x=τp12[1]),true)))))||((τp12 instanceof Array)&&(((τ1473=τp12.length),true)&&((τ1473===2)&&(((τ1474=τp12[0]),(τ1474==="value"))&&((x=τp12[1]),true)))))))))))))))))))))))){return tags.push(["value",x]);}else{if((τ1494&&(((τp5=τp2[1]),(τp5==="#"))&&(((τp6=τ1470[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((τp12=τp6[2]),(((τp12 instanceof Array)&&(((τ1475=τp12.length),true)&&((τ1475===2)&&(((τ1476=τp12[0]),(τ1476==="symbol"))&&((x=τp12[1]),true)))))||((τp12 instanceof Array)&&(((τ1477=τp12.length),true)&&((τ1477===2)&&(((τ1478=τp12[0]),(τ1478==="value"))&&((x=τp12[1]),true)))))))))))))))))){return tags.push(["value",("#"+x)]);}else{if((τ1494&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1470[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(((τp9 instanceof Array)&&(((τ1479=τp9.length),true)&&((τ1479===2)&&(((τ1480=τp9[0]),(τ1480==="symbol"))&&((prop=τp9[1]),true)))))||((τp9 instanceof Array)&&(((τ1481=τp9.length),true)&&((τ1481===2)&&(((τ1482=τp9[0]),(τ1482==="value"))&&((prop=τp9[1]),true)))))))&&((value=τp6[2]),true))))))))){return tags.push(["send",["send",["symbol","#"],["data",["void"],["symbol","assoc"]]],["data",["value",prop],value]]);}else{if((τ1490&&((expr=τ1470[1]),true,(rest=τ1470[2]),true))){parse(expr);return parse(rest);}else{if((((τ1470 instanceof Array)&&(((τ1483=τ1470.length),true)&&((τ1483>=1)&&(((τ1484=τ1470[0]),(τ1484==="multi"))&&((args=τ1470.slice(1)),true)))))||((τ1470 instanceof Array)&&(((τ1485=τ1470.length),true)&&((τ1485>=1)&&(((τ1486=τ1470[0]),(τ1486==="data"))&&((args=τ1470.slice(1)),true))))))){return args.forEach(parse);}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1470}));}}}}}}}}};parse(descr);(contents=function(){var τ1495=contents;var τp0;var τp1;var τp0;var τp1;var args;var x;var τ1496=false;var τ1497=false;if(((τ1496=(τ1495 instanceof Array))&&((τ1497=((τp0=τ1495.length),true))&&((τp0===1)&&((τp1=τ1495[0]),(τp1==="void")))))){return ["data"];}else{if((τ1497&&((τp0>=1)&&(((τp1=τ1495[0]),(τp1==="multi"))&&((args=τ1495.slice(1)),true))))){return τ1088(["data"],args);}else{if(((x=τ1495),true)){return x;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1495}));}}}}());return ["send",["symbol","Node"],["data",tags,contents]];});var var_operator=function(temp){return function(_,expr){var f=function(τ1498){var τ1499=τ1498;var τp0;var τp1;var τp0;var τp1;var τp2;var τp3;var τp4;var τ1500;var other;var τ1501=false;var τ1502=false;if(((τ1501=(τ1499 instanceof Array))&&((τ1502=((τp0=τ1499.length),true))&&((τp0===1)&&((τp1=τ1499[0]),(τp1==="void")))))){return temp;}else{if((τ1502&&((τp0===3)&&(((τp1=τ1499[0]),(τp1==="data"))&&(((τp2=τ1499[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((τ1500=τ1499[2]),true))))))))){var τ1503=τ1500;var τp0;var τp1;var s;var τp0;var τp1;var obj;var msg;var other;var τ1504=false;var τ1505=false;if(((τ1504=(τ1503 instanceof Array))&&((τ1505=((τp0=τ1503.length),true))&&((τp0===2)&&(((τp1=τ1503[0]),(τp1==="symbol"))&&((s=τ1503[1]),true)))))){return ["send",temp,["value",s]];}else{if((τ1505&&((τp0===3)&&(((τp1=τ1503[0]),(τp1==="send"))&&((obj=τ1503[1]),true,(msg=τ1503[2]),true))))){var x=f(["data",["void"],obj]);return ["send",x,msg];}else{if(((other=τ1503),true)){return ["send",temp,other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1503}));}}}}else{if(((other=τ1499),true)){return ["send",temp,other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1499}));}}}};return f(expr);};};stdenv.register_macro("chain",function(τ1506,τ1507){var τp0;var context;var env;if(((τ1506 instanceof Array)&&(((τp0=τ1506.length),true)&&((τp0===2)&&((context=τ1506[0]),true,(env=τ1506[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var defn;var body;if(((τ1507 instanceof Array)&&(((τp0=τ1507.length),true)&&((τp0===3)&&(((τp1=τ1507[0]),(τp1==="data"))&&((defn=τ1507[1]),true,(body=τ1507[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var newenv=env.fork();var temp=gensym();var τp0;var τp1;var variable;var expr;if((((τp0=function(){var τ1508=defn;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var x;var y;var other;if(((τ1508 instanceof Array)&&(((τp0=τ1508.length),true)&&((τp0===3)&&(((τp1=τ1508[0]),(τp1==="send"))&&(((τp2=τ1508[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1508[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((x=τp6[1]),true,(y=τp6[2]),true))))))))))))))){return [y,x];}else{if(((other=τ1508),true)){return [["symbol","@"],other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1508}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((variable=τp0[0]),true,(expr=τp0[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var var_str;if(((variable instanceof Array)&&(((τp0=variable.length),true)&&((τp0===2)&&(((τp1=variable[0]),(τp1==="symbol"))&&((var_str=variable[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}newenv.register_macro(var_str,var_operator(temp));var stmts=["multi"].concat(function(){var τ1509=[];var τ1510=aslist(body);var τ1511=τ1510.length;for(var τ1512=0;(τ1512<τ1511);(τ1512++)){var τ1513=τ1510[τ1512];var x;var other;if(((x=τ1513),true)){τ1509.push(["send",["symbol",":="],["data",temp,x]]);}else{if(((other=τ1513),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1513}));}}}return τ1509;}());var v=["multi",["send",["symbol","="],["data",temp,expr]],stmts,temp];return ["done",expand([context,newenv],v)];});stdenv.register_macro("using",function(τ1514,τ1515){var τp0;var context;var env;if(((τ1514 instanceof Array)&&(((τp0=τ1514.length),true)&&((τp0===2)&&((context=τ1514[0]),true,(env=τ1514[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var defn;var body;if(((τ1515 instanceof Array)&&(((τp0=τ1515.length),true)&&((τp0===3)&&(((τp1=τ1515[0]),(τp1==="data"))&&((defn=τ1515[1]),true,(body=τ1515[2]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var newenv=env.fork();var temp=gensym();var τp0;var τp1;var variable;var expr;if((((τp0=function(){var τ1516=defn;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var x;var y;var other;if(((τ1516 instanceof Array)&&(((τp0=τ1516.length),true)&&((τp0===3)&&(((τp1=τ1516[0]),(τp1==="send"))&&(((τp2=τ1516[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1516[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((x=τp6[1]),true,(y=τp6[2]),true))))))))))))))){return [y,x];}else{if(((other=τ1516),true)){return [["symbol","@"],other];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1516}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((variable=τp0[0]),true,(expr=τp0[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var var_str;if(((variable instanceof Array)&&(((τp0=variable.length),true)&&((τp0===2)&&(((τp1=variable[0]),(τp1==="symbol"))&&((var_str=variable[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}newenv.register_macro(var_str,var_operator(temp));var v=["multi",["send",["symbol","="],["data",temp,expr]],body];return ["done",expand([context,newenv],v)];});stdenv.register_macro("class",function(τ1517,arg){var τp0;var context;var env;if(((τ1517 instanceof Array)&&(((τp0=τ1517.length),true)&&((τp0===2)&&((context=τ1517[0]),true,(env=τ1517[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var clsvar;var τp2;var τp3;var body;if((((τp0=function(){var τ1521=arg;var τp0;var τp1;var body;var τp0;var τp1;var name;var body;var τ1522=false;var τ1523=false;if(((τ1522=(τ1521 instanceof Array))&&((τ1523=((τp0=τ1521.length),true))&&((τp0===2)&&(((τp1=τ1521[0]),(τp1==="data"))&&((body=τ1521[1]),true)))))){return [gensym(),body];}else{if((τ1523&&((τp0===3)&&(((τp1=τ1521[0]),(τp1==="data"))&&((name=τ1521[1]),true,(body=τ1521[2]),true))))){return [name,body];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1521}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&(((clsvar=τp0[0]),true,(τp2=τp0[1]),(τp3=τ1575(aslist)(τp2)),τp3[0])&&((body=τp3[1]),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var ctors;var clauses;if((((τp0=partition(body,function(τ1524){var τ1525=τ1524;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τp13;var τp14;var τp15;var _;var _;var otherwise;if(((τ1525 instanceof Array)&&(((τp0=τ1525.length),true)&&((τp0===3)&&(((τp1=τ1525[0]),(τp1==="send"))&&(((τp2=τ1525[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1525[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="send"))&&(((τp12=τp9[1]),(τp12 instanceof Array))&&(((τp13=τp12.length),true)&&((τp13===2)&&(((τp14=τp12[0]),(τp14==="symbol"))&&(((τp15=τp12[1]),(τp15==="constructor"))&&((_=τp9[2]),true,(_=τp6[2]),true)))))))))))))))))))))))){return true;}else{if(((otherwise=τ1525),true)){return false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1525}));}}})),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((ctors=τp0[0]),true,(clauses=τp0[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var ctor_args;var ctor_body;if((((τp0=function(){var τ1526=ctors;var τp0;var τp0;var τ1527;var τ1528=false;var τ1529=false;if(((τ1528=(τ1526 instanceof Array))&&((τ1529=((τp0=τ1526.length),true))&&(τp0===0)))){return [["data"],[]];}else{if((τ1529&&((τp0===1)&&((τ1527=τ1526[0]),true)))){var τ1530=τ1527;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var _;var args;var τp12;var τp13;var body;if(((τ1530 instanceof Array)&&(((τp0=τ1530.length),true)&&((τp0===3)&&(((τp1=τ1530[0]),(τp1==="send"))&&(((τp2=τ1530[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1530[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="send"))&&(((_=τp9[1]),true,(args=τp9[2]),true,(τp12=τp6[2]),(τp13=τ1575(aslist)(τp12)),τp13[0])&&((body=τp13[1]),true)))))))))))))))))))){return [args,body];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1530}));}}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1526}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((ctor_args=τp0[0]),true,(ctor_body=τp0[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var selfvar=gensym();(ctor_body=function(){var prep=["send",["symbol","="],["data",selfvar,["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["send",["symbol","?"],["data",clsvar,["void"]]],["symbol","this"]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","this"]]]]];var ret=selfvar;return τ1088(["multi",prep],ctor_body,[ret]);}());var newenv=env.fork();newenv.register_macro("@",var_operator(selfvar));var defns=[];var static_defns=[];var τ1518=clauses;var τ1519=τ1518.length;for(var τ1520=0;(τ1520<τ1519);(τ1520++)){var τ1531=τ1518[τ1520];var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var body;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var name;var args;var τp12;var τp13;var body;var other;var τ1532=false;var τ1533=false;var τ1534=false;var τ1535=false;var τ1536=false;var τ1537=false;var τ1538=false;var τ1539=false;if(((τ1532=(τ1531 instanceof Array))&&((τ1533=((τp0=τ1531.length),true))&&((τ1534=(τp0===3))&&((τ1535=((τp1=τ1531[0]),(τp1==="send")))&&((τ1536=((τp2=τ1531[1]),(τp2 instanceof Array)))&&((τ1537=((τp3=τp2.length),true))&&((τ1538=(τp3===2))&&((τ1539=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="static"))&&(((τp6=τ1531[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===2)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp10=τ1575(aslist)(τp9)),τp10[0])&&((body=τp10[1]),true)))))))))))))))){(static_defns=static_defns.concat(body));}else{if((τ1539&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1531[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="send"))&&(((name=τp9[1]),true,(args=τp9[2]),true,(τp12=τp6[2]),(τp13=τ1575(aslist)(τp12)),τp13[0])&&((body=τp13[1]),true))))))))))))){(name=function(){var τ1540=name;var τp0;var τp1;var _;var τp0;var τp1;var n;var τ1541=false;var τ1542=false;var τ1543=false;if(((τ1541=(τ1540 instanceof Array))&&((τ1542=((τp0=τ1540.length),true))&&((τ1543=(τp0===2))&&(((τp1=τ1540[0]),(τp1==="value"))&&((_=τ1540[1]),true)))))){return name;}else{if((τ1543&&(((τp1=τ1540[0]),(τp1==="symbol"))&&((n=τ1540[1]),true)))){return ["value",n];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1540}));}}}());defns.push(["send",["symbol",":="],["data",["send",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],name],["send",["symbol","->"],["data",args,τ1088(["multi",["send",["symbol","="],["data",selfvar,["symbol","this"]]]],body)]]]]);}else{if(((other=τ1531),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1531}));}}}}false;return ["done",expand([context,newenv],τ1088(["multi",["send",["symbol","="],["data",clsvar,["send",["symbol","->"],["data",ctor_args,ctor_body]]]],["send",["symbol","&:"],τ1088(["data",clsvar],static_defns)]],defns,[clsvar]))];});stdenv.register_macro("do",function(τ1544,τ1545){var τp0;var context;var env;if(((τ1544 instanceof Array)&&(((τp0=τ1544.length),true)&&((τp0===2)&&((context=τ1544[0]),true,(env=τ1544[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var body;if(((τ1545 instanceof Array)&&(((τp0=τ1545.length),true)&&((τp0===2)&&(((τp1=τ1545[0]),(τp1==="data"))&&(((τp2=τ1545[1]),(τp3=τ1575(aslist)(τp2)),τp3[0])&&((body=τp3[1]),true))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return τ1088(["multi"],body);});stdenv.register_macro("then",function(τ1546,τ1547){var τp0;var context;var env;if(((τ1546 instanceof Array)&&(((τp0=τ1546.length),true)&&((τp0===2)&&((context=τ1546[0]),true,(env=τ1546[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var body;if(((τ1547 instanceof Array)&&(((τp0=τ1547.length),true)&&((τp0===2)&&(((τp1=τ1547[0]),(τp1==="data"))&&(((τp2=τ1547[1]),(τp3=τ1575(aslist)(τp2)),τp3[0])&&((body=τp3[1]),true))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}return τ1088(["multi"],body);});var blocktest_wrap=function(label,expr,accumulator){var value=gensym();return ["multi",["send",["symbol","="],["data",value,["send",["symbol","!!"],["data",["multi",["send",["symbol","|>"],["data",expr,["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","true"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","success"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","false"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","failure"]]],["data",["symbol","x"]]]]]]]]],["send",["symbol","->"],["data",["symbol","__err"],["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","__err"]]]]]]]]],["send",["send",accumulator,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","test_result"]]],["data",label,value]]]]];};var blocktest_mac=function(label,tests,acc){var ok=gensym();var stmts=[];stmts.push(["send",["symbol","="],["data",ok,["symbol","true"]]]);var τ1548=tests;var τ1549=τ1548.length;for(var τ1550=0;(τ1550<τ1549);(τ1550++)){var τ1551=τ1548[τ1550];var stmt;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var _;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var new_label;var τp9;var τp10;var new_tests;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var sources;var τp9;var τp10;var clauses;var expr;var other;var τ1552=false;var τ1553=false;var τ1554=false;var τ1555=false;var τ1556=false;var τ1557=false;var τ1558=false;var τ1559=false;if((((stmt=τ1551),true,(τ1551 instanceof Array))&&(((τp0=τ1551.length),true)&&((τp0===3)&&(((τp1=τ1551[0]),(τp1==="send"))&&(((τp2=τ1551[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="do"))&&((_=τ1551[2]),true))))))))))){stmts.push(["send",["symbol","!!"],["data",stmt,["send",["symbol","->"],["data",["symbol","__err"],["multi",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["symbol","__err"]]]]],["send",["symbol",":="],["data",ok,["symbol","false"]]]]]]]]);}else{if(((τ1552=(τ1551 instanceof Array))&&((τ1553=((τp0=τ1551.length),true))&&((τ1554=(τp0===3))&&((τ1555=((τp1=τ1551[0]),(τp1==="send")))&&((τ1556=((τp2=τ1551[1]),(τp2 instanceof Array)))&&((τ1557=((τp3=τp2.length),true))&&((τ1558=(τp3===2))&&((τ1559=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="=>"))&&(((τp6=τ1551[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((new_label=τp6[1]),true,(τp9=τp6[2]),(τp10=τ1575(aslist)(τp9)),τp10[0])&&((new_tests=τp10[1]),true)))))))))))))))){var labv=gensym();stmts.push(["multi",["send",["symbol","="],["data",labv,["send",["symbol","++"],["data",label,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],new_label]]]]],τ1088(["multi"],blocktest_mac(labv,new_tests,acc))]);}else{if((τ1559&&(((τp5=τp2[1]),(τp5==="each"))&&(((τp6=τ1551[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((sources=τp6[1]),true,(τp9=τp6[2]),(τp10=τ1575(aslist)(τp9)),τp10[0])&&((clauses=τp10[1]),true))))))))){var loopvar=gensym();(clauses=function(){var τ1560=[];var τ1561=clauses;var τ1562=τ1561.length;for(var τ1563=0;(τ1563<τ1562);(τ1563++)){var τ1564=τ1561[τ1563];var clause;var other;if(((clause=τ1564),true)){τ1560.push(function(){var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var lhs;var rhs;if(((clause instanceof Array)&&(((τp0=clause.length),true)&&((τp0===3)&&(((τp1=clause[0]),(τp1==="send"))&&(((τp2=clause[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=clause[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((lhs=τp6[1]),true,(rhs=τp6[2]),true))))))))))))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var x=blocktest_mac(["send",["symbol","++"],["data",label,["data",loopvar]]],τ1575(aslist)(rhs)[1],acc);return ["send",["symbol","->"],["data",lhs,τ1088(["multi"],x)]];}());}else{if(((other=τ1564),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1564}));}}}return τ1560;}());clauses.push(["send",["symbol","->"],["data",["symbol","__no"],["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["value","No handler for test case"],["symbol","__no"]]]]]]]);stmts.push(build_each(sources,τ1088(["multi"],clauses),["multi"],["multi"],loopvar));}else{if(((expr=τ1551),true)){stmts.push(["send",["symbol","if"],["data",ok,["multi",["send",["symbol","then"],["data",blocktest_wrap(label,expr,acc)]],["send",["symbol","else"],["data",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","aborted"]]],["data",label,["send",["symbol","'"],["data",["void"],expr]]]]]]]]]]]);}else{if(((other=τ1551),true)){false;}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1551}));}}}}}}false;stmts.push(acc);return stmts;};stdenv.register_macro("blocktest",function(τ1565,τ1566){var τp0;var context;var env;if(((τ1565 instanceof Array)&&(((τp0=τ1565.length),true)&&((τp0===2)&&((context=τ1565[0]),true,(env=τ1565[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τp0;var τp1;var args;if(((τ1566 instanceof Array)&&(((τp0=τ1566.length),true)&&((τp0>=1)&&(((τp1=τ1566[0]),(τp1==="data"))&&((args=τ1566.slice(1)),true)))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var acc=gensym();var labv=gensym();var stmts=["multi",["send",["symbol","="],["data",acc,["data"]]]];var rval=function(){var τ1567=args;var τp0;var τp1;var τp2;var tests;var τp0;var labels;var τp1;var τp2;var tests;var τ1568=false;var τ1569=false;if(((τ1568=(τ1567 instanceof Array))&&((τ1569=((τp0=τ1567.length),true))&&((τp0===1)&&(((τp1=τ1567[0]),(τp2=τ1575(aslist)(τp1)),τp2[0])&&((tests=τp2[1]),true)))))){stmts.push(["send",["symbol","="],["data",labv,["data"]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{if((τ1569&&((τp0===2)&&(((labels=τ1567[0]),true,(τp1=τ1567[1]),(τp2=τ1575(aslist)(τp1)),τp2[0])&&((tests=τp2[1]),true))))){stmts.push(["send",["symbol","="],["data",labv,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],labels]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1567}));}}}();return rval;});stdenv.register_macro("match",function(τ1571,τ1570){var τp0;var context;var env;if(((τ1571 instanceof Array)&&(((τp0=τ1571.length),true)&&((τp0===2)&&((context=τ1571[0]),true,(env=τ1571[1]),true))))){undefined;}else{throw τ1077(["match"]).create("The value failed to match");}var τ1572=τ1570;var τp0;var τp1;var τp0;var τp1;var obj;var clauses;var τp0;var τp1;var clauses;var τ1573=false;var τ1574=false;if(((τ1573=(τ1572 instanceof Array))&&((τ1574=((τp0=τ1572.length),true))&&((τp0===1)&&((τp1=τ1572[0]),(τp1==="void")))))){return ["placeholder"];}else{if((τ1574&&((τp0===3)&&(((τp1=τ1572[0]),(τp1==="data"))&&((obj=τ1572[1]),true,(clauses=τ1572[2]),true))))){return ["send",["symbol","|>"],["data",obj,clauses]];}else{if((τ1574&&((τp0===2)&&(((τp1=τ1572[0]),(τp1==="data"))&&((clauses=τ1572[1]),true))))){return ["send",["symbol","|>"],["data",["value",null],clauses]];}else{throw τ1077(["match"]).create("Could not find a match",({"value":τ1572}));}}}});var stdprelude=Embedded(["multi",["send",["symbol","="],["data",["send",["symbol","send"],["data",["symbol","obj"],["send",["symbol","and"],["data",["symbol","msg"],["symbol","match"]]]]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["send",["symbol","?"],["data",["symbol","Number"],["void"]]]]],["send",["symbol","___js_fetch"],["data",["symbol","obj"],["symbol","msg"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","obj"],["value","::send"]],["data",["symbol","msg"]]]]]]]],["send",["symbol",":="],["data",["send",["symbol","Array"],["value",":::project"]],["send",["symbol","->"],["data",["data",["send",["symbol","and"],["data",["symbol","value"],["symbol","match"]]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Array"],["void"]]],["data",["symbol","true"],["symbol","value"]]]],["send",["symbol","->"],["data",["symbol","_"],["data",["symbol","true"],["data",["symbol","value"]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","else"],["data",["symbol","false"]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["multi",["send",["symbol","="],["data",["symbol","rval"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["value",0]]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","value"]]],["send",["symbol","return"],["data",["symbol","true"],["symbol","rval"]]]]]]]],["data",["symbol","true"],["symbol","value"]]]]],["send",["symbol","else"],["data",["multi",["send",["symbol","="],["data",["symbol","rval"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["value",0]]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","value"]]],["data",["symbol","true"],["symbol","rval"]]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::deconstruct"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["data",["symbol","true"],["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::serialize_ast"]],["send",["symbol","->"],["data",["data"],["send",["send",["symbol","#"],["data",["void"],["symbol","array"]]],["data",["send",["symbol","*"],["data",["void"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","map"]]]],["data",["symbol","___serialize_ast"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["symbol","m"]],["data",["symbol","false"],["symbol","null"]]]],["send",["symbol","->"],["data",["symbol","m"],["data",["symbol","true"],["symbol","m"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::deconstruct"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["symbol","m"]],["data",["symbol","false"],["symbol","null"]]]],["send",["symbol","->"],["data",["symbol","m"],["data",["symbol","true"],["symbol","m"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Function"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::send"]],["send",["symbol","->"],["data",["data",["symbol","args"]],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","apply"]]]],["data",["symbol","this"],["symbol","args"]]]]]]]]);(exports["stdenv"]=stdenv);(exports["stdprelude"]=stdprelude);
