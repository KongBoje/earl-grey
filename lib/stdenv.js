var τ1228=function(type){var τ1229=type["::check"];var f;if((τ1229===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ1229),true)){return function(value){return f.call(type,value);};}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1229}));}}};
var τ1230=function(dest,values){for(k in values){if(values.hasOwnProperty(k)){(dest[k]=send(values,k));}else{null;}}return dest;};
var τ1220=function(){var τ1221=function(tags){var τ1222=function(){if((!τ1228(τ1221)(this))){return Object.create(τ1221.prototype);}else{return this;}}();(τ1222["tags"]=tags);return τ1222;};τ1230(τ1221);(τ1221.prototype["create"]=function(){var τ1223=Array.prototype.slice.call(arguments,0);var τp0;var message;var args;if(((τ1223 instanceof Array)&&(((τp0=τ1223.length),true)&&((τp0>=0)&&((message=function(){if((0>=τp0)){return "";}else{return τ1223[0];}}()),true,(args=τ1223.slice(1)),true))))){var τ1222=this;var e=Error(message);(e["::tags"]=τ1222.tags);(e["args"]=args);(e["name"]=["E"].concat(τ1222.tags).join("."));return e;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1223}));}});(τ1221.prototype["::check"]=function(e){var τ1222=this;if(((!e)||(!τ1228(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var τ1224=τ1222.tags;var τ1225=τ1224.length;for(var τ1226=0;(τ1226<τ1225);(τ1226++)){var τ1227=τ1224[τ1226];var tag;var other;if(((tag=τ1227),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=τ1227),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1227}));}}}false;return true;});(τ1221.prototype["::deconstruct"]=function(e){var τ1222=this;return e.args;});return τ1221;}();
var τ1231=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};
var τ1232=function(τ1233){var τ1234=τ1233;var x;var x;var other;if((((typeof(τ1234)==="string")&&((x=τ1234),true))||((typeof(τ1234)==="number")&&((x=τ1234),true)))){return ["value",x];}else{if(((other=τ1234),true)){return other["::serialize_ast"]();}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1234}));}}};
var send=function(obj,τ1213){var msg;var τ1212;(msg=τ1213);true;(τ1212=τ1213);var τ1214=τ1212;var other;if(((typeof(τ1214)==="string")||(typeof(τ1214)==="number"))){return obj[msg];}else{if(((other=τ1214),true)){return obj["::send"](msg);}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1214}));}}};(Array[":::project"]=function(τ1216){var value;var τ1215;(value=τ1216);true;(τ1215=τ1216);var τ1217=τ1215;var _;if(τ1228(Array)(τ1217)){return [true,value];}else{if(((_=τ1217),true)){return [true,[value]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1217}));}}});(Array.prototype["::check"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){return false;}else{null;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){var rval=this.slice(0);rval.push(value);return [true,rval];}else{null;}}return [true,value];}else{var rval=this.slice(0);rval.push(value);return [true,rval];}});(Array.prototype[":::deconstruct"]=function(value){return [true,value.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return τ1231(["array"],this.map(τ1232));});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var τ1218=value.match(this);var m;var m;if(((τ1218===null)&&((m=τ1218),true))){return [false,null];}else{if(((m=τ1218),true)){return [true,m];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1218}));}}});(RegExp.prototype[":::deconstruct"]=function(value){var τ1219=value.match(this);var m;var m;if(((τ1219===null)&&((m=τ1219),true))){return [false,null];}else{if(((m=τ1219),true)){return [true,m];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1219}));}}});(Function.prototype["::send"]=function(args){return this.apply(this,args);});
var τ1723=function(type){return function(value){var τ1724=type[":::project"];var f;if((τ1724===(void 0))){var τ1725=type["::project"];var f;if((τ1725===(void 0))){return [true,type(value)];}else{if(((f=τ1725),true)){var τ1727;try{(τ1727=[true,f(value)]);}catch(τ1726){(τ1727=[false,null]);}return τ1727;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1725}));}}}else{if(((f=τ1724),true)){return f.call(type,value);}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1724}));}}};};
var τ1728=function(from,to){var rval=[];for(var i=from;(i<=to);(i++)){rval.push(i);}return rval;};var τ1235=require("./expand");var Env=τ1235.Env;var nullenv=τ1235.nullenv;var expand=τ1235.expand;var τ1236=require("./helpers");var aslist=τ1236.aslist;var transform=τ1236.transform;var gensym=τ1236.gensym;var gensym_factory=τ1236.gensym_factory;var τ1237=require("./util");var enumerate=τ1237.enumerate;var items=τ1237.items;var partition=τ1237.partition;var uuid=function(){var τp0;var τp1;var τp2;var s;if((((τp0=gensym()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&(((τp2=τp0[0]),(τp2==="symbol"))&&((s=τp0[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return s;};var Embedded=function(code){var τ1238=function(){if((!τ1228(Embedded)(this))){return Object.create(Embedded.prototype);}else{return this;}}();(τ1238["code"]=code);(τ1238["::id"]=uuid());return τ1238;};τ1230(Embedded);(Embedded.prototype["::serialize_ast"]=function(){var τ1238=this;return expand(["top",stdenv],τ1238.code);});Embedded;var stdenv=Env(nullenv);var τ1239=items(({"+":"___plus","-":"___minus","*":"___times","/":"___div","mod":"___mod","^":"___binxor","&":"___binand","|":"___binor","&&":"___and","||":"___or","and":"___and","or":"___or","not":"___not","===":"___is","!==":"___isnt","!=":"___neq","<":"___lt",">":"___gt","<=":"___lte",">=":"___gte","<<":"___shl",">>":"___shr",">>>":"___shr2","in":"___in","instanceof":"___instanceof","--":"___minusminus"}));var τ1240=τ1239.length;for(var τ1241=0;(τ1241<τ1240);(τ1241++)){var τ1242=τ1239[τ1241];var τp0;var k;var v;var other;if(((τ1242 instanceof Array)&&(((τp0=τ1242.length),true)&&((τp0===2)&&((k=τ1242[0]),true,(v=τ1242[1]),true))))){stdenv.register(k,["symbol",v]);}else{if(((other=τ1242),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1242}));}}}false;stdenv.register("___hasprop",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","match"],["symbol","key"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["send",["symbol","?"],["data",["symbol","undefined"],["void"]]]]],["symbol","false"]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["symbol","x"]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","String"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","Number"],["void"]]],["symbol","x"]],["send",["symbol","in"],["data",["symbol","key"],["send",["symbol","Number"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]]]],["send",["symbol","->"],["data",["symbol","x"],["send",["symbol","in"],["data",["symbol","key"],["symbol","x"]]]]]]]])]);stdenv.register("___projector",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["symbol","type"],["value",":::project"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","match"],["data",["send",["symbol","type"],["value","::project"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["data",["symbol","true"],["send",["symbol","type"],["data",["symbol","value"]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["symbol","!!"],["data",["data",["symbol","true"],["send",["symbol","f"],["data",["symbol","value"]]]],["data",["symbol","false"],["symbol","null"]]]]]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]])]);stdenv.register("___checker",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","match"],["data",["send",["symbol","type"],["value","::check"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","type"]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]])]);stdenv.register("___deconstructor",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","type"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["symbol","type"],["value",":::deconstruct"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","match"],["data",["send",["symbol","type"],["value","::deconstruct"]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","undefined"],["void"]]],["send",["symbol","?"],["data",["void"],["multi",["send",["symbol","=>"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["data",["symbol","true"],["symbol","value"]]]],["send",["symbol","=>"],["data",["symbol","else"],["data",["symbol","false"],["symbol","null"]]]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["symbol","!!"],["data",["data",["symbol","true"],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]],["data",["symbol","false"],["symbol","null"]]]]]]]]]]],["send",["symbol","->"],["data",["symbol","f"],["send",["send",["symbol","f"],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","type"],["symbol","value"]]]]]]]]]]]])]);stdenv.register("___serialize_ast",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","match"]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["symbol","x"]],["send",["send",["symbol","?"],["data",["symbol","Number"],["void"]]],["symbol","x"]]]],["send",["send",["symbol","#"],["data",["void"],["symbol","value"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","other"],["value","::serialize_ast"]],["data"]]]]]]])]);stdenv.register("ErrorFactory",["value",Embedded(["send",["symbol","class"],["data",["multi",["send",["symbol","="],["data",["send",["symbol","constructor"],["data",["symbol","tags"]]],["send",["symbol",":="],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["symbol","tags"]]]]],["send",["symbol","="],["data",["send",["symbol","create"],["data",["send",["symbol","="],["data",["symbol","message"],["value",""]]],["send",["symbol","*"],["data",["void"],["symbol","args"]]]]],["multi",["send",["symbol","="],["data",["symbol","e"],["send",["symbol","Error"],["data",["symbol","message"]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["value","::tags"]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol",":="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]],["symbol","args"]]],["send",["symbol",":="],["data",["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","name"]]]],["send",["send",["send",["symbol","++"],["data",["data",["send",["symbol","."],["data",["void"],["symbol","E"]]]],["send",["symbol","@"],["data",["void"],["symbol","tags"]]]]],["send",["symbol","."],["data",["void"],["symbol","join"]]]],["data",["value","."]]]]],["symbol","e"]]]],["send",["symbol","="],["data",["send",["value","::check"],["data",["symbol","e"]]],["multi",["send",["symbol","if"],["data",["send",["symbol","or"],["data",["send",["symbol","not"],["data",["void"],["symbol","e"]]],["send",["symbol","not"],["data",["void"],["send",["send",["symbol","?"],["data",["symbol","Error"],["void"]]],["symbol","e"]]]]]],["send",["symbol","return"],["symbol","false"]]]],["send",["symbol","="],["data",["symbol","tags"],["send",["symbol","or"],["data",["send",["symbol","e"],["value","::tags"]],["data"]]]]],["send",["symbol","each"],["data",["send",["symbol","@"],["data",["void"],["symbol","tags"]]],["send",["symbol","->"],["data",["send",["symbol","when"],["data",["symbol","tag"],["send",["symbol","=="],["data",["send",["send",["symbol","tags"],["send",["symbol","."],["data",["void"],["symbol","indexOf"]]]],["data",["symbol","tag"]]],["send",["symbol","-"],["data",["void"],["value",1]]]]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","="],["data",["send",["value","::deconstruct"],["data",["symbol","e"]]],["send",["symbol","e"],["send",["symbol","."],["data",["void"],["symbol","args"]]]]]]]]])]);stdenv.register("patch_array",["value",Embedded(["send",["symbol","->"],["data",["data"],["multi",["send",["symbol","="],["data",["symbol","r"],["data"]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","arguments"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol",":="],["data",["symbol","r"],["send",["send",["symbol","r"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["send",["symbol","___js_fetch"],["data",["symbol","arguments"],["symbol","i"]]]]]]]]],["symbol","r"]]]])]);stdenv.register("range",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","from"],["symbol","to"]],["multi",["send",["symbol","="],["data",["symbol","rval"],["data"]]],["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["symbol","from"]]],["send",["symbol","<="],["data",["symbol","i"],["symbol","to"]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","i"]]]]],["symbol","rval"]]]])]);stdenv.register("&:",["value",Embedded(["send",["symbol","->"],["data",["data",["symbol","dest"],["symbol","values"]],["multi",["send",["symbol","for"],["data",["send",["symbol","in"],["data",["symbol","k"],["symbol","values"]]],["send",["symbol","if"],["data",["send",["send",["symbol","values"],["send",["symbol","."],["data",["void"],["symbol","hasOwnProperty"]]]],["data",["symbol","k"]]],["send",["symbol",":="],["data",["send",["symbol","dest"],["symbol","k"]],["send",["symbol","values"],["symbol","k"]]]]]]]],["symbol","dest"]]]])]);stdenv.register_macro("++",function(_,τ1243){var τ1244=τ1243;var τp0;var τp1;var τp2;var τp3;var τp4;var x;var τp0;var τp1;var x;var τp2;var τp3;var τp4;var τp0;var τp1;var x;var y;var τp0;var τp1;var τ1245=false;var τ1246=false;var τ1247=false;var τ1248=false;if(((τ1245=(τ1244 instanceof Array))&&((τ1246=((τp0=τ1244.length),true))&&((τ1247=(τp0===3))&&((τ1248=((τp1=τ1244[0]),(τp1==="data")))&&(((τp2=τ1244[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((x=τ1244[2]),true)))))))))){return ["send",["symbol","___plusplus"],["data",["void"],x]];}else{if((τ1248&&(((x=τ1244[1]),true,(τp2=τ1244[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void"))))))){return ["send",["symbol","___plusplus"],["data",x,["void"]]];}else{if((τ1248&&((x=τ1244[1]),true,(y=τ1244[2]),true))){return ["send",["send",x,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",y]];}else{if((τ1246&&((τp0===1)&&((τp1=τ1244[0]),(τp1==="void"))))){return ["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","y"]]]]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1244}));}}}}});stdenv.register_macro("..",function(_,τ1249){var τ1250=τ1249;var τp0;var τp1;var τp2;var τp3;var τp4;var x;var τp0;var τp1;var x;var τp2;var τp3;var τp4;var τp0;var τp1;var x;var y;var τp0;var τp1;var τ1251=false;var τ1252=false;var τ1253=false;var τ1254=false;if(((τ1251=(τ1250 instanceof Array))&&((τ1252=((τp0=τ1250.length),true))&&((τ1253=(τp0===3))&&((τ1254=((τp1=τ1250[0]),(τp1==="data")))&&(((τp2=τ1250[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((x=τ1250[2]),true)))))))))){return ["send",["symbol","range"],["data",["value",1],x]];}else{if((τ1254&&(((x=τ1250[1]),true,(τp2=τ1250[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void"))))))){return ["send",["symbol","range"],["data",x]];}else{if((τ1254&&((x=τ1250[1]),true,(y=τ1250[2]),true))){return ["send",["symbol","range"],["data",x,y]];}else{if((τ1252&&((τp0===1)&&((τp1=τ1250[0]),(τp1==="void"))))){return ["symbol","range"];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1250}));}}}}});var make_checker=function(value,op){return function(τ1255,τ1256){var τp0;var context;var env;if(((τ1255 instanceof Array)&&(((τp0=τ1255.length),true)&&((τp0===2)&&((context=τ1255[0]),true,(env=τ1255[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;if(((τ1256 instanceof Array)&&(((τp0=τ1256.length),true)&&((τp0===2)&&(((τp1=τ1256[0]),(τp1==="data"))&&((expr=τ1256[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",op,["data",expr,value]];};};stdenv.register_macro("**",function(τ1257,τ1258){var τp0;var context;var env;if(((τ1257 instanceof Array)&&(((τp0=τ1257.length),true)&&((τp0===2)&&((context=τ1257[0]),true,(env=τ1257[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1258 instanceof Array)&&(((τp0=τ1258.length),true)&&((τp0===3)&&(((τp1=τ1258[0]),(τp1==="data"))&&((a=τ1258[1]),true,(b=τ1258[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]],["data",a,b]];});stdenv.register_macro("//",function(τ1259,τ1260){var τp0;var context;var env;if(((τ1259 instanceof Array)&&(((τp0=τ1259.length),true)&&((τp0===2)&&((context=τ1259[0]),true,(env=τ1259[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1260 instanceof Array)&&(((τp0=τ1260.length),true)&&((τp0===3)&&(((τp1=τ1260[0]),(τp1==="data"))&&((a=τ1260[1]),true,(b=τ1260[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","floor"]]]],["data",["send",["symbol","/"],["data",a,b]]]];});var errf_macro=function(tags){return function(τ1262,τ1261){var τp0;var context;var env;if(((τ1262 instanceof Array)&&(((τp0=τ1262.length),true)&&((τp0===2)&&((context=τ1262[0]),true,(env=τ1262[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1263=τ1261;var τp0;var τp1;var τp0;var τp1;var args;var other;var τ1264=false;var τ1265=false;if(((τ1264=(τ1263 instanceof Array))&&((τ1265=((τp0=τ1263.length),true))&&((τp0===1)&&((τp1=τ1263[0]),(τp1==="void")))))){return ["send",["symbol","ErrorFactory"],["data",τ1231(["data"],tags)]];}else{if((τ1265&&((τp0>=1)&&(((τp1=τ1263[0]),(τp1==="data"))&&((args=τ1263.slice(1)),true))))){return ["send",["send",["send",["symbol","ErrorFactory"],["data",τ1231(["data"],tags)]],["send",["symbol","."],["data",["void"],["symbol","create"]]]],τ1231(["data"],args)];}else{if(((other=τ1263),true)){return ["macro",errf_macro(tags.concat([other]))];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1263}));}}}};};stdenv.register_macro("E",errf_macro([]));stdenv.register_macro("#",function(τ1266,τ1267){var τp0;var context;var env;if(((τ1266 instanceof Array)&&(((τp0=τ1266.length),true)&&((τp0===2)&&((context=τ1266[0]),true,(env=τ1266[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var tag;if(((τ1267 instanceof Array)&&(((τp0=τ1267.length),true)&&((τp0===3)&&(((τp1=τ1267[0]),(τp1==="data"))&&(((τp2=τ1267[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&(((τp5=τ1267[2]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===2)&&(((τp7=τp5[0]),(τp7==="symbol"))&&((tag=τp5[1]),true)))))))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}(tag=["value",tag]);var f=function(τ1269,expr){var τp0;var τ1268;var env;if(((τ1269 instanceof Array)&&(((τp0=τ1269.length),true)&&((τp0===2)&&((τ1268=τ1269[0]),true,(env=τ1269[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1270=τ1268;var _;if((τ1270==="pattern")){var checker_mac=function(){var f1=function(_,τ1274){var τp0;var τp1;var expr;if(((τ1274 instanceof Array)&&(((τp0=τ1274.length),true)&&((τp0===2)&&(((τp1=τ1274[0]),(τp1==="data"))&&((expr=τ1274[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",["symbol","instanceof"],["data",expr,["symbol","Array"]]];};var f2=function(_,τ1275){var τp0;var τp1;var expr;if(((τ1275 instanceof Array)&&(((τp0=τ1275.length),true)&&((τp0===2)&&(((τp1=τ1275[0]),(τp1==="data"))&&((expr=τ1275[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",["symbol","=="],["data",["send",expr,["value",0]],tag]];};return ["multi",["macro",f1],["macro",f2]];}();var τ1271=expr;var τp0;var τp1;var subp;var τp0;var τp1;var other;var τ1272=false;var τ1273=false;if(((τ1272=(τ1271 instanceof Array))&&((τ1273=((τp0=τ1271.length),true))&&((τp0>=1)&&(((τp1=τ1271[0]),(τp1==="data"))&&((subp=τ1271.slice(1)),true)))))){return τ1231(["data",tag],subp);}else{if((τ1273&&((τp0===1)&&((τp1=τ1271[0]),(τp1==="void"))))){return ["check",checker_mac,["ignore"]];}else{if(((other=τ1271),true)){return ["check",checker_mac,expr];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1271}));}}}}else{if(((_=τ1270),true)){var τ1276=expr;var τp0;var τp1;var τp0;var τp1;var args;var other;var τ1277=false;var τ1278=false;if(((τ1277=(τ1276 instanceof Array))&&((τ1278=((τp0=τ1276.length),true))&&((τp0===1)&&((τp1=τ1276[0]),(τp1==="void")))))){return ["data",tag];}else{if((τ1278&&((τp0>=1)&&(((τp1=τ1276[0]),(τp1==="data"))&&((args=τ1276.slice(1)),true))))){return τ1231(["data",tag],args);}else{if(((other=τ1276),true)){return ["send",["data",tag],other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1276}));}}}}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1270}));}}};return ["macro",f];});stdenv.register_macro("when",function(τ1280,τ1281){var τp0;var context;var env;if(((τ1280 instanceof Array)&&(((τp0=τ1280.length),true)&&((τp0===2)&&((context=τ1280[0]),true,(env=τ1280[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τ1279;var condition;if(((τ1281 instanceof Array)&&(((τp0=τ1281.length),true)&&((τp0===3)&&(((τp1=τ1281[0]),(τp1==="data"))&&((τ1279=τ1281[1]),true,(condition=τ1281[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1282=τ1279;var τp0;var τp1;var other;if(((τ1282 instanceof Array)&&(((τp0=τ1282.length),true)&&((τp0===1)&&((τp1=τ1282[0]),(τp1==="void")))))){return ["test",condition,["ignore"]];}else{if(((other=τ1282),true)){return ["test",condition,other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1282}));}}});var andf=function(τ1283,expr){var τp0;var context;var env;if(((τ1283 instanceof Array)&&(((τp0=τ1283.length),true)&&((τp0===2)&&((context=τ1283[0]),true,(env=τ1283[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1284=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var a;var b;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1285=false;var τ1286=false;var τ1287=false;if(((τ1285=(τ1284 instanceof Array))&&((τ1286=((τp0=τ1284.length),true))&&((τ1287=(τp0===2))&&(((τp1=τ1284[0]),(τp1==="pattern"))&&(((τp2=τ1284[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((a=τp2[1]),true,(b=τp2[2]),true)))))))))){return ["all",a,b];}else{if((τ1287&&(((_=τ1284[0]),true,(τp1=τ1284[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return ["symbol","___and"];}else{if(((other=τ1284),true)){return ["send",["symbol","___and"],expr];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1284}));}}}};stdenv.register_macro("&&",andf);stdenv.register_macro("and",andf);var orf=function(τ1288,expr){var τp0;var context;var env;if(((τ1288 instanceof Array)&&(((τp0=τ1288.length),true)&&((τp0===2)&&((context=τ1288[0]),true,(env=τ1288[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1289=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var a;var b;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1290=false;var τ1291=false;var τ1292=false;if(((τ1290=(τ1289 instanceof Array))&&((τ1291=((τp0=τ1289.length),true))&&((τ1292=(τp0===2))&&(((τp1=τ1289[0]),(τp1==="pattern"))&&(((τp2=τ1289[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((a=τp2[1]),true,(b=τp2[2]),true)))))))))){return ["any",a,b];}else{if((τ1292&&(((_=τ1289[0]),true,(τp1=τ1289[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return ["symbol","___or"];}else{if(((other=τ1289),true)){return ["send",["symbol","___or"],expr];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1289}));}}}};stdenv.register_macro("||",orf);stdenv.register_macro("or",orf);var partial_pattern=function(operator){(operator=["symbol",operator]);return function(τ1293,expr){var τp0;var context;var env;if(((τ1293 instanceof Array)&&(((τp0=τ1293.length),true)&&((τp0===2)&&((context=τ1293[0]),true,(env=τ1293[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1294=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var val;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1295=false;var τ1296=false;var τ1297=false;if(((τ1295=(τ1294 instanceof Array))&&((τ1296=((τp0=τ1294.length),true))&&((τ1297=(τp0===2))&&(((τp1=τ1294[0]),(τp1==="pattern"))&&(((τp2=τ1294[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===1)&&(((τp7=τp5[0]),(τp7==="void"))&&((val=τp2[2]),true)))))))))))))){return ["check",["macro",make_checker(val,operator)],["ignore"]];}else{if((τ1297&&(((_=τ1294[0]),true,(τp1=τ1294[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return operator;}else{if(((other=τ1294),true)){return ["send",operator,expr];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1294}));}}}};};stdenv.register_macro("==",partial_pattern("___eq"));stdenv.register_macro("!=",partial_pattern("___neq"));stdenv.register_macro("<=",partial_pattern("___lte"));stdenv.register_macro(">=",partial_pattern("___gte"));stdenv.register_macro("<",partial_pattern("___lt"));stdenv.register_macro(">",partial_pattern("___gt"));stdenv.register_macro("*",function(τ1298,expr){var τp0;var context;var env;if(((τ1298 instanceof Array)&&(((τp0=τ1298.length),true)&&((τp0===2)&&((context=τ1298[0]),true,(env=τ1298[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1299=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var val;var τp0;var _;var τp1;var τp2;var τp3;var other;var τ1300=false;var τ1301=false;var τ1302=false;if(((τ1300=(τ1299 instanceof Array))&&((τ1301=((τp0=τ1299.length),true))&&((τ1302=(τp0===2))&&(((τp1=τ1299[0]),(τp1==="pattern"))&&(((τp2=τ1299[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void")))))))))){return ["dynsplice",["ignore"]];}else{if((τ1302&&(((τp1=τ1299[0]),((τp1==="pattern")||(τp1==="data")))&&(((τp2=τ1299[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===1)&&(((τp7=τp5[0]),(τp7==="void"))&&((val=τp2[2]),true)))))))))))){return ["dynsplice",val];}else{if((τ1302&&(((_=τ1299[0]),true,(τp1=τ1299[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===1)&&((τp3=τp1[0]),(τp3==="void"))))))){return ["symbol","___times"];}else{if(((other=τ1299),true)){return ["send",["symbol","___times"],expr];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1299}));}}}}});stdenv.register_macro(".",function(τ1304,τ1303){var τp0;var context;var env;if(((τ1304 instanceof Array)&&(((τp0=τ1304.length),true)&&((τp0===2)&&((context=τ1304[0]),true,(env=τ1304[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1305=τ1303;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var s;var other;if(((τ1305 instanceof Array)&&(((τp0=τ1305.length),true)&&((τp0===3)&&(((τp1=τ1305[0]),(τp1==="data"))&&(((τp2=τ1305[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&(((τp5=τ1305[2]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===2)&&(((τp7=τp5[0]),(τp7==="symbol"))&&((s=τp5[1]),true)))))))))))))){return ["value",s];}else{if(((other=τ1305),true)){throw τ1220(["syntax","dot"]).create("'.' macro was given an illegal argument",({"arg":other}));}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1305}));}}});stdenv.register_macro("where",function(τ1307,τ1306){var τp0;var context;var env;if(((τ1307 instanceof Array)&&(((τp0=τ1307.length),true)&&((τp0===2)&&((context=τ1307[0]),true,(env=τ1307[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1308=τ1306;var τp0;var τp1;var a;var b;var other;if(((τ1308 instanceof Array)&&(((τp0=τ1308.length),true)&&((τp0===3)&&(((τp1=τ1308[0]),(τp1==="data"))&&((a=τ1308[1]),true,(b=τ1308[2]),true)))))){return ["send",["symbol","let"],["data",b,a]];}else{if(((other=τ1308),true)){throw τ1220(["syntax","where"]).create("'where' macro was given an illegal argument",({"arg":other}));}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1308}));}}});stdenv.register_macro("let",function(τ1310,τ1309){var τp0;var context;var env;if(((τ1310 instanceof Array)&&(((τp0=τ1310.length),true)&&((τp0===2)&&((context=τ1310[0]),true,(env=τ1310[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1311=τ1309;var τp0;var τp1;var a;var b;var other;if(((τ1311 instanceof Array)&&(((τp0=τ1311.length),true)&&((τp0===3)&&(((τp1=τ1311[0]),(τp1==="data"))&&((a=τ1311[1]),true,(b=τ1311[2]),true)))))){var bindings=aslist(a);var body=aslist(b);return τ1231(["multi"],bindings,body);}else{if(((other=τ1311),true)){throw τ1220(["syntax","let"]).create("'let' macro was given an illegal argument",({"arg":other}));}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1311}));}}});stdenv.register_macro("->",function(τ1312,τ1313){var τp0;var context;var env;if(((τ1312 instanceof Array)&&(((τp0=τ1312.length),true)&&((τp0===2)&&((context=τ1312[0]),true,(env=τ1312[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var args;var stmts;if(((τ1313 instanceof Array)&&(((τp0=τ1313.length),true)&&((τp0===3)&&(((τp1=τ1313[0]),(τp1==="data"))&&((args=τ1313[1]),true,(stmts=τ1313[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var placeholder;var τp2;var τp3;var τp4;var newargs;if((((τp0=find_arrow(args)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&(((placeholder=τp0[0]),true,(τp2=τp0[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3>=1)&&(((τp4=τp2[0]),(τp4==="data"))&&((newargs=τp2.slice(1)),true))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var fw;var bw;var keys;var dflt;var rest;if((((τp0=lhs_parse_specs(env,newargs)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===5)&&((fw=τp0[0]),true,(bw=τp0[1]),true,(keys=τp0[2]),true,(dflt=τp0[3]),true,(rest=τp0[4]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}if(((rest||dflt.length)||keys.length)){var body=["send",["symbol","match"],["data",["send",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","arguments"],["value",0]]],["send",["symbol","->"],["data",args,stmts]]]];return ["lambda",[],body];}else{var body=["multi"];(newargs=function(){var τ1314=[];var τ1315=newargs;var τ1316=τ1315.length;for(var τ1317=0;(τ1317<τ1316);(τ1317++)){var τ1318=τ1315[τ1317];var τp0;var τp1;var s;var other;var other;var τ1319=false;if(((τ1318 instanceof Array)&&(((τp0=τ1318.length),true)&&((τp0===2)&&(((τp1=τ1318[0]),(τp1==="symbol"))&&((s=τ1318[1]),true)))))){τ1314.push(["symbol",s]);}else{if((τ1319=((other=τ1318),true))){τ1314.push(function(){var t=gensym();body.push(["send",["symbol","="],["data",other,t]]);return t;}());}else{if(τ1319){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1318}));}}}}return τ1314;}());body.push(function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,stmts]];}else{return stmts;}}());return ["lambda",newargs,body];}});var build_each=function(source,patterns,τ1320,τ1321,lvar){var τp0;var prelude;if((((τp0=τ1723(aslist)(τ1320)),τp0[0])&&((prelude=τp0[1]),true))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var tail;if((((τp0=τ1723(aslist)(τ1321)),τp0[0])&&((tail=τp0[1]),true))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var temp=gensym();var len=gensym();(lvar=(lvar||gensym()));var stmts=τ1231(["multi"],prelude).concat([["send",["symbol","="],["data",temp,source]],["send",["symbol","="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]);var loop=function(){var a=["send",["symbol","="],["data",lvar,["value",0]]];var b=["send",["symbol","<"],["data",lvar,len]];var c=["send",["symbol","++"],["data",lvar,["void"]]];var body=["send",["symbol","|>"],["data",["send",["symbol","___js_fetch"],["data",temp,lvar]],patterns]];return ["js_for",a,b,c,body];}();stmts.push(loop);var stmts=stmts.concat(tail);return stmts;};stdenv.register_macro("each",function(τ1323,τ1324){var τp0;var τ1322;var env;if(((τ1323 instanceof Array)&&(((τp0=τ1323.length),true)&&((τp0===2)&&((τ1322=τ1323[0]),true,(env=τ1323[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var arr;var τp2;var τp3;var patterns;if(((τ1324 instanceof Array)&&(((τp0=τ1324.length),true)&&((τp0===3)&&(((τp1=τ1324[0]),(τp1==="data"))&&(((arr=τ1324[1]),true,(τp2=τ1324[2]),(τp3=τ1723(aslist)(τp2)),τp3[0])&&((patterns=τp3[1]),true))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1325=τ1322;var other;if((τ1325==="multi")){patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,τ1231(["multi"],patterns),["multi"],["symbol","false"]);}else{if(((other=τ1325),true)){var res=gensym();(patterns=function(){var τ1326=[];var τ1327=patterns;var τ1328=τ1327.length;for(var τ1329=0;(τ1329<τ1328);(τ1329++)){var τ1330=τ1327[τ1329];var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var patt;var expr;var other;var other;var τ1331=false;if(((τ1330 instanceof Array)&&(((τp0=τ1330.length),true)&&((τp0===3)&&(((τp1=τ1330[0]),(τp1==="send"))&&(((τp2=τ1330[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=τ1330[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((patt=τp6[1]),true,(expr=τp6[2]),true))))))))))))))){τ1326.push(["send",["symbol","->"],["data",patt,["send",["send",res,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",expr]]]]);}else{if((τ1331=((other=τ1330),true))){τ1326.push(INVALID_PATTERN);}else{if(τ1331){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1330}));}}}}return τ1326;}());patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,τ1231(["multi"],patterns),["send",["symbol","="],["data",res,["data"]]],res);}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1325}));}}});stdenv.register_macro("=>",function(τ1333,τ1334){var τp0;var τ1332;var env;if(((τ1333 instanceof Array)&&(((τp0=τ1333.length),true)&&((τp0===2)&&((τ1332=τ1333[0]),true,(env=τ1333[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var binding;var value;if(((τ1334 instanceof Array)&&(((τp0=τ1334.length),true)&&((τp0===3)&&(((τp1=τ1334[0]),(τp1==="data"))&&((binding=τ1334[1]),true,(value=τ1334[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1335=τ1332;var context;if(((τ1335==="data")||(τ1335==="pattern"))){var τ1336=binding;var τp0;var τp1;var _;if(((τ1336 instanceof Array)&&(((τp0=τ1336.length),true)&&((τp0===1)&&((τp1=τ1336[0]),(τp1==="void")))))){return ["assoc",value];}else{if(((_=τ1336),true)){return ["assoc",binding,value];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1336}));}}}else{if(((context=τ1335),true)){throw (("Illegal context for '=>' ("+context)+")");}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1335}));}}});stdenv.register_macro("as",function(τ1337,τ1338){var τp0;var context;var env;if(((τ1337 instanceof Array)&&(((τp0=τ1337.length),true)&&((τp0===2)&&((context=τ1337[0]),true,(env=τ1337[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;var variable;if(((τ1338 instanceof Array)&&(((τp0=τ1338.length),true)&&((τp0===3)&&(((τp1=τ1338[0]),(τp1==="data"))&&((expr=τ1338[1]),true,(variable=τ1338[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1339=context;var _;if((τ1339==="pattern")){return ["constant",expr,variable];}else{if(((_=τ1339),true)){return ["send",["symbol","="],["data",variable,expr]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1339}));}}});stdenv.register_macro("=",function(τ1340,expr){var τp0;var context;var env;if(((τ1340 instanceof Array)&&(((τp0=τ1340.length),true)&&((τp0===2)&&((context=τ1340[0]),true,(env=τ1340[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1341=[context,expr];var τp0;var τp1;var τp2;var τp3;var τp4;var lhs;var rhs;var τp0;var τp1;var τp2;var τp3;var τp4;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var f;var args;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var b;var value;var τp0;var τp1;var τp2;var τp3;var τp4;var patt;var value;var other;var τ1342=false;var τ1343=false;var τ1344=false;var τ1345=false;var τ1346=false;var τ1347=false;var τ1348=false;var τ1349=false;if(((τ1342=(τ1341 instanceof Array))&&((τ1343=((τp0=τ1341.length),true))&&((τ1344=(τp0===2))&&(((τp1=τ1341[0]),((τp1==="multi")||(τp1==="expr")))&&(((τp2=τ1341[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((lhs=τp2[1]),true,(rhs=τp2[2]),true)))))))))){var _src=((lhs.location&&lhs.location.source)&&lhs.location.source.url);var _start=(lhs.location&&lhs.location.start);var _end=(lhs.location&&lhs.location.end);var τp0;var τp1;var τp2;var τp3;var vars;var clauses;var ph;if((((τp0=parse_lhs(env,lhs,rhs)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===3)&&(((τp2=τp0[0]),(τp3=τ1723(make_declarations)(τp2)),τp3[0])&&((vars=τp3[1]),true,(clauses=τp0[1]),true,(ph=τp0[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var r=τ1231(["splice"],vars);var mkif=function(x){return ["if",x,["symbol","undefined"],["send",["symbol","throw"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["value","The value failed to match"]]]]];};var τ1350=clauses;var τp0;var clause;var _;if(((τ1350 instanceof Array)&&(((τp0=τ1350.length),true)&&((τp0===1)&&((clause=τ1350[0]),true))))){var τ1351=send(clause,(clause.length-1));var τp0;var τp1;var τp2;var other;if(((τ1351 instanceof Array)&&(((τp0=τ1351.length),true)&&((τp0===2)&&(((τp1=τ1351[0]),(τp1==="value"))&&((τp2=τ1351[1]),(τp2===true))))))){(r=function(){if(((vars.length===1)&&(clause.length===3))){return τ1231(["declare"],clause[1].slice(1));}else{return r.concat(clause.slice(1,(-1)));}}());}else{if(((other=τ1351),true)){r.push(mkif(clause));}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1351}));}}}else{if(((_=τ1350),true)){var ands=make_pattern_test(clauses);r.push(mkif(ands));}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1350}));}}return r;}else{if((τ1344&&((τ1345=((τp1=τ1341[0]),(τp1==="data")))&&((τ1346=((τp2=τ1341[1]),(τp2 instanceof Array)))&&((τ1347=((τp3=τp2.length),true))&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void")))))))){return ["assoc"];}else{if((τ1347&&((τ1348=(τp3===3))&&((τ1349=((τp4=τp2[0]),(τp4==="data")))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===3)&&(((τp7=τp5[0]),(τp7==="send"))&&((f=τp5[1]),true,(args=τp5[2]),true,(value=τp2[2]),true))))))))){(f=function(){var τ1352=f;var τp0;var τp1;var _;var τp0;var τp1;var z;var τ1353=false;var τ1354=false;var τ1355=false;if(((τ1353=(τ1352 instanceof Array))&&((τ1354=((τp0=τ1352.length),true))&&((τ1355=(τp0===2))&&(((τp1=τ1352[0]),(τp1==="value"))&&((_=τ1352[1]),true)))))){return f;}else{if((τ1355&&(((τp1=τ1352[0]),(τp1==="symbol"))&&((z=τ1352[1]),true)))){return ["value",z];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1352}));}}}());return ["assoc",f,["send",["symbol","->"],["data",args,value]]];}else{if((τ1349&&((b=τp2[1]),true,(value=τp2[2]),true))){(b=function(){var τ1356=b;var τp0;var τp1;var _;var τp0;var τp1;var z;var τ1357=false;var τ1358=false;var τ1359=false;if(((τ1357=(τ1356 instanceof Array))&&((τ1358=((τp0=τ1356.length),true))&&((τ1359=(τp0===2))&&(((τp1=τ1356[0]),(τp1==="value"))&&((_=τ1356[1]),true)))))){return b;}else{if((τ1359&&(((τp1=τ1356[0]),(τp1==="symbol"))&&((z=τ1356[1]),true)))){return ["value",z];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1356}));}}}());return ["assoc",b,value];}else{if((τ1344&&(((τp1=τ1341[0]),(τp1==="pattern"))&&(((τp2=τ1341[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="data"))&&((patt=τp2[1]),true,(value=τp2[2]),true)))))))){return ["default",patt,value];}else{if(((other=τ1341),true)){throw (("Illegal context for '=' ("+context)+")");}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1341}));}}}}}}});var make_assigner=function(op){return function(τ1360,τ1361){var τp0;var context;var env;if(((τ1360 instanceof Array)&&(((τp0=τ1360.length),true)&&((τp0===2)&&((context=τ1360[0]),true,(env=τ1360[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1361 instanceof Array)&&(((τp0=τ1361.length),true)&&((τp0===3)&&(((τp1=τ1361[0]),(τp1==="data"))&&((a=τ1361[1]),true,(b=τ1361[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["assign",a,["send",["symbol",op],["data",a,b]]];};};stdenv.register_macro(":=",function(τ1362,τ1363){var τp0;var context;var env;if(((τ1362 instanceof Array)&&(((τp0=τ1362.length),true)&&((τp0===2)&&((context=τ1362[0]),true,(env=τ1362[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var a;var b;if(((τ1363 instanceof Array)&&(((τp0=τ1363.length),true)&&((τp0===3)&&(((τp1=τ1363[0]),(τp1==="data"))&&((a=τ1363[1]),true,(b=τ1363[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["assign",a,b];});stdenv.register_macro("+=",make_assigner("+"));stdenv.register_macro("-=",make_assigner("-"));stdenv.register_macro("*=",make_assigner("*"));stdenv.register_macro("/=",make_assigner("/"));stdenv.register_macro("<<=",make_assigner("<<"));stdenv.register_macro(">>=",make_assigner(">>"));stdenv.register_macro(">>>=",make_assigner(">>>"));stdenv.register_macro("++=",make_assigner("++"));stdenv.register_macro("?=",make_assigner("match"));stdenv.register_macro("if",function(τ1365,τ1364){var τp0;var context;var env;if(((τ1365 instanceof Array)&&(((τp0=τ1365.length),true)&&((τp0===2)&&((context=τ1365[0]),true,(env=τ1365[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1366=τ1364;var τp0;var τp1;var test;var a;var b;var τp0;var τp1;var test;var τp2;var τp3;var τ1367;var other;var τ1368=false;var τ1369=false;if(((τ1368=(τ1366 instanceof Array))&&((τ1369=((τp0=τ1366.length),true))&&((τp0===4)&&(((τp1=τ1366[0]),(τp1==="data"))&&((test=τ1366[1]),true,(a=τ1366[2]),true,(b=τ1366[3]),true)))))){return ["if",test,a,b];}else{if((τ1369&&((τp0===3)&&(((τp1=τ1366[0]),(τp1==="data"))&&(((test=τ1366[1]),true,(τp2=τ1366[2]),(τp3=τ1723(aslist)(τp2)),τp3[0])&&((τ1367=τp3[1]),true)))))){var τ1370=τ1367;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var s1;var τp13;var τp14;var τp15;var τp16;var τp17;var τp18;var τp19;var τp20;var τp21;var τp22;var τp23;var τp24;var s2;var τp0;var s1;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var s2;var other;var τ1371=false;var τ1372=false;if(((τ1371=(τ1370 instanceof Array))&&((τ1372=((τp0=τ1370.length),true))&&((τp0===2)&&(((τp1=τ1370[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="then"))&&(((τp8=τp1[2]),(τp8 instanceof Array))&&(((τp9=τp8.length),true)&&((τp9===2)&&(((τp10=τp8[0]),(τp10==="data"))&&(((τp11=τp8[1]),(τp12=τ1723(aslist)(τp11)),τp12[0])&&(((s1=τp12[1]),true,(τp13=τ1370[1]),(τp13 instanceof Array))&&(((τp14=τp13.length),true)&&((τp14===3)&&(((τp15=τp13[0]),(τp15==="send"))&&(((τp16=τp13[1]),(τp16 instanceof Array))&&(((τp17=τp16.length),true)&&((τp17===2)&&(((τp18=τp16[0]),(τp18==="symbol"))&&(((τp19=τp16[1]),(τp19==="else"))&&(((τp20=τp13[2]),(τp20 instanceof Array))&&(((τp21=τp20.length),true)&&((τp21===2)&&(((τp22=τp20[0]),(τp22==="data"))&&(((τp23=τp20[1]),(τp24=τ1723(aslist)(τp23)),τp24[0])&&((s2=τp24[1]),true))))))))))))))))))))))))))))))))){return ["if",test,τ1231(["multi"],s1),τ1231(["multi"],s2)];}else{if((τ1372&&((τp0>=1)&&(((s1=τ1370.slice(0,-1)),true,(τp1=send(τ1370,(τp0-1))),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="else"))&&(((τp8=τp1[2]),(τp8 instanceof Array))&&(((τp9=τp8.length),true)&&((τp9===2)&&(((τp10=τp8[0]),(τp10==="data"))&&(((τp11=τp8[1]),(τp12=τ1723(aslist)(τp11)),τp12[0])&&((s2=τp12[1]),true)))))))))))))))))){return ["if",test,τ1231(["multi"],s1),τ1231(["multi"],s2)];}else{if(((other=τ1370),true)){return ["if",test,τ1231(["multi"],other),["value",null]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1370}));}}}}else{if(((other=τ1366),true)){throw Error("error in if");}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1366}));}}}});stdenv.register_macro("cond",function(τ1373,τ1374){var τp0;var context;var env;if(((τ1373 instanceof Array)&&(((τp0=τ1373.length),true)&&((τp0===2)&&((context=τ1373[0]),true,(env=τ1373[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var clauses;if(((τ1374 instanceof Array)&&(((τp0=τ1374.length),true)&&((τp0===2)&&(((τp1=τ1374[0]),(τp1==="data"))&&((clauses=τ1374[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var handle=function(xs){var τ1375=xs;var τp0;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var test;var body;var rest;var τ1376=false;var τ1377=false;if(((τ1376=(τ1375 instanceof Array))&&((τ1377=((τp0=τ1375.length),true))&&(τp0===0)))){return ["value",false];}else{if((τ1377&&((τp0>=1)&&(((τp1=τ1375[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="=>"))&&(((τp8=τp1[2]),(τp8 instanceof Array))&&(((τp9=τp8.length),true)&&((τp9===3)&&(((τp10=τp8[0]),(τp10==="data"))&&((test=τp8[1]),true,(body=τp8[2]),true,(rest=τ1375.slice(1)),true))))))))))))))))){(test=function(){var τ1378=test;var τp0;var τp1;var τp2;var _;if(((τ1378 instanceof Array)&&(((τp0=τ1378.length),true)&&((τp0===2)&&(((τp1=τ1378[0]),(τp1==="symbol"))&&((τp2=τ1378[1]),(τp2==="else"))))))){return ["value",true];}else{if(((_=τ1378),true)){return test;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1378}));}}}());return ["if",test,body,handle(rest)];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1375}));}}};return handle(aslist(clauses));});stdenv.register_macro("while",function(τ1379,expr){var τp0;var context;var env;if(((τ1379 instanceof Array)&&(((τp0=τ1379.length),true)&&((τp0===2)&&((context=τ1379[0]),true,(env=τ1379[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var test;var body;if(((expr instanceof Array)&&(((τp0=expr.length),true)&&((τp0===3)&&(((τp1=expr[0]),(τp1==="data"))&&((test=expr[1]),true,(body=expr[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["js_while",test,body];});stdenv.register_macro("for",function(τ1381,τ1380){var τp0;var context;var env;if(((τ1381 instanceof Array)&&(((τp0=τ1381.length),true)&&((τp0===2)&&((context=τ1381[0]),true,(env=τ1381[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1382=τ1380;var τp0;var τp1;var τp2;var τp3;var τp4;var a;var b;var c;var body;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var a;var b;var body;var τ1383=false;var τ1384=false;var τ1385=false;var τ1386=false;var τ1387=false;var τ1388=false;if(((τ1383=(τ1382 instanceof Array))&&((τ1384=((τp0=τ1382.length),true))&&((τ1385=(τp0===3))&&((τ1386=((τp1=τ1382[0]),(τp1==="data")))&&((τ1387=((τp2=τ1382[1]),(τp2 instanceof Array)))&&((τ1388=((τp3=τp2.length),true))&&((τp3===4)&&(((τp4=τp2[0]),(τp4==="multi"))&&((a=τp2[1]),true,(b=τp2[2]),true,(c=τp2[3]),true,(body=τ1382[2]),true)))))))))){return ["js_for",a,b,c,body];}else{if((τ1388&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="send"))&&(((τp5=τp2[1]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===2)&&(((τp7=τp5[0]),(τp7==="symbol"))&&(((τp8=τp5[1]),(τp8==="in"))&&(((τp9=τp2[2]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="data"))&&((a=τp9[1]),true,(b=τp9[2]),true,(body=τ1382[2]),true)))))))))))))){return ["js_for_in",a,b,body];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1382}));}}});stdenv.register_macro("!!",function(τ1390,τ1391){var τp0;var τ1389;var env;if(((τ1390 instanceof Array)&&(((τp0=τ1390.length),true)&&((τp0===2)&&((τ1389=τ1390[0]),true,(env=τ1390[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;var matchers;if(((τ1391 instanceof Array)&&(((τp0=τ1391.length),true)&&((τp0===3)&&(((τp1=τ1391[0]),(τp1==="data"))&&((expr=τ1391[1]),true,(matchers=τ1391[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1392=τ1389;var other;if((τ1392==="multi")){var excv=gensym();var m=function(){var τ1393=aslist(matchers);var ms;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var _;var x;if((((ms=τ1393),true,(τ1393 instanceof Array))&&(((τp0=τ1393.length),true)&&((τp0>=1)&&(((τp1=τ1393[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="->"))&&((_=τp1[2]),true,τ1393.slice(1),true)))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,τ1231(["multi"],ms)]];}else{if(((x=τ1393),true)){return matchers;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1393}));}}}();var f=["send",["symbol","->"],["data",["data",excv],m]];return ["multi",["js_try",expr,f,["void"]]];}else{if(((other=τ1392),true)){var excv=gensym();var res=gensym();var m=function(){var τ1394=aslist(matchers);var ms;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var _;var x;if((((ms=τ1394),true,(τ1394 instanceof Array))&&(((τp0=τ1394.length),true)&&((τp0>=1)&&(((τp1=τ1394[0]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((τp4=τp1[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&(((τp7=τp4[1]),(τp7==="->"))&&((_=τp1[2]),true,τ1394.slice(1),true)))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,τ1231(["multi"],ms)]];}else{if(((x=τ1394),true)){return matchers;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1394}));}}}();var f=["send",["symbol","->"],["data",["data",excv],["send",["symbol",":="],["data",res,m]]]];return ["multi",["declare",res,["value",undefined]],["js_try",["assign",res,expr],f,["void"]],res];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1392}));}}});stdenv.register_macro("new",function(_,expr){return ["js_new",expr];});stdenv.register_macro("return",function(_,expr){return ["js_return",expr];});stdenv.register_macro("delete",function(_,expr){return ["js_delete",expr];});stdenv.register_macro("throw",function(_,expr){return ["js_throw",expr];});stdenv.register_macro("break",function(_,expr){return ["js_break"];});stdenv.register_macro("continue",function(_,expr){return ["js_continue"];});var rx_wrap=function(x){return (("(?:"+x)+")");};var rx_quote=function(x){return x.replace(RegExp("([.?*+\\^$\\[\\]\\(\\)\\{\\}|\\\\])","g"),"\\$1");};var rx_quote2=function(x){return x.replace(RegExp("([\\[\\]\\(\\)\\{\\}\\^])","g"),"\\$1");};var rx_build2=function(τ1395){var τ1396=τ1395;var τp0;var τp1;var τ1397;var τp0;var τp1;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var s;var τp0;var τp1;var τp2;var τp3;var τp4;var τ1398;var τp5;var τp6;var τp7;var a;var b;var τp0;var τp1;var args;var τp0;var τp1;var args;var otherA;var τ1399=false;var τ1400=false;var τ1401=false;var τ1402=false;var τ1403=false;var τ1404=false;var τ1405=false;var τ1406=false;if(((τ1399=(τ1396 instanceof Array))&&((τ1400=((τp0=τ1396.length),true))&&((τ1401=(τp0===2))&&(((τp1=τ1396[0]),(τp1==="symbol"))&&((τ1397=τ1396[1]),true)))))){var τ1407=τ1397;if((τ1407==="any")){return ".";}else{if((τ1407==="start")){return "^";}else{if((τ1407==="end")){return "$";}else{if((τ1407==="alpha")){return "\\a";}else{if((τ1407==="digit")){return "\\d";}else{if((τ1407==="word")){return "\\w";}else{if((τ1407==="space")){return "\\s";}else{if((τ1407==="boundary")){return "\\b";}else{if((τ1407==="a")){return "\\a";}else{if((τ1407==="d")){return "\\d";}else{if((τ1407==="w")){return "\\w";}else{if((τ1407==="s")){return "\\s";}else{if((τ1407==="b")){return "\\b";}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1407}));}}}}}}}}}}}}}}else{if((τ1401&&(((τp1=τ1396[0]),(τp1==="value"))&&((x=τ1396[1]),true)))){return rx_quote(x);}else{if((τ1400&&((τ1401=(τp0===3))&&((τ1402=((τp1=τ1396[0]),(τp1==="send")))&&((τ1403=((τp2=τ1396[1]),(τp2 instanceof Array)))&&((τ1404=((τp3=τp2.length),true))&&((τ1405=(τp3===2))&&((τ1406=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="raw"))&&(((τp6=τ1396[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===2)&&(((τp8=τp6[0]),(τp8==="value"))&&((s=τp6[1]),true)))))))))))))){return s;}else{if((τ1406&&(((τ1398=τp2[1]),true,(τp5=τ1396[2]),(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===3)&&(((τp7=τp5[0]),(τp7==="data"))&&((a=τp5[1]),true,(b=τp5[2]),true))))))){var τ1408=τ1398;if((τ1408==="||")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((τ1408==="or")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((τ1408==="*")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return rx_wrap((rx_build2(b)+"*"));}else{if((τ1408==="+")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return rx_wrap((rx_build2(b)+"+"));}else{if((τ1408==="?")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return rx_wrap((rx_build2(b)+"?"));}else{if((τ1408==="in")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var v;if(((b instanceof Array)&&(((τp0=b.length),true)&&((τp0===2)&&(((τp1=b[0]),(τp1==="value"))&&((v=b[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var x=rx_quote2(v);return (("["+x)+"]");}else{if((τ1408==="not")){var τp0;var τp1;if(((a instanceof Array)&&(((τp0=a.length),true)&&((τp0===1)&&((τp1=a[0]),(τp1==="void")))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τp13;var τp14;var v;if(((b instanceof Array)&&(((τp0=b.length),true)&&((τp0===3)&&(((τp1=b[0]),(τp1==="send"))&&(((τp2=b[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="in"))&&(((τp6=b[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&(((τp12=τp6[2]),(τp12 instanceof Array))&&(((τp13=τp12.length),true)&&((τp13===2)&&(((τp14=τp12[0]),(τp14==="value"))&&((v=τp12[1]),true))))))))))))))))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var x=rx_quote2(v);return (("[^"+x)+"]");}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1408}));}}}}}}}}else{if((τ1400&&((τ1401=(τp0>=1))&&(((τp1=τ1396[0]),(τp1==="data"))&&((args=τ1396.slice(1)),true))))){return (("("+args.map(rx_build2).join(""))+")");}else{if((τ1401&&(((τp1=τ1396[0]),(τp1==="multi"))&&((args=τ1396.slice(1)),true)))){return (("(?:"+args.map(rx_build2).join(""))+")");}else{if(((otherA=τ1396),true)){throw "OopsF";}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1396}));}}}}}}}};var mac=function(τ1409,expr,flags){var τp0;var context;var env;if(((τ1409 instanceof Array)&&(((τp0=τ1409.length),true)&&((τp0===2)&&((context=τ1409[0]),true,(env=τ1409[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}(flags=(flags||""));var τ1410=expr;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τp13;var τp14;var flag;var τp0;var τp1;var τp2;var v;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var arg;var τ1411=false;var τ1412=false;if(((τ1411=(τ1410 instanceof Array))&&((τ1412=((τp0=τ1410.length),true))&&((τp0===3)&&(((τp1=τ1410[0]),(τp1==="send"))&&(((τp2=τ1410[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="."))&&(((τp6=τ1410[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&(((τp12=τp6[2]),(τp12 instanceof Array))&&(((τp13=τp12.length),true)&&((τp13===2)&&(((τp14=τp12[0]),(τp14==="symbol"))&&((flag=τp12[1]),true))))))))))))))))))))))){var m=function(ctx,x){return mac(ctx,x,(flags+flag));};return ["macro",m];}else{if((τ1412&&((τp0===2)&&(((τp1=τ1410[0]),(τp1==="value"))&&(((τp2=τ1410[1]),(typeof(τp2)==="string"))&&((v=τp2),true)))))){return ["send",["symbol","RegExp"],["data",["value",v],["value",flags]]];}else{if((τ1412&&((τp0===3)&&(((τp1=τ1410[0]),(τp1==="send"))&&(((τp2=τ1410[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="'"))&&(((τp6=τ1410[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((arg=τp6[2]),true)))))))))))))))))){return ["send",["symbol","RegExp"],["data",["value",rx_build2(arg)],["value",flags]]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1410}));}}}};stdenv.register_macro("R",mac);stdenv.register_macro("?",function(τ1414,τ1413){var τp0;var context;var env;if(((τ1414 instanceof Array)&&(((τp0=τ1414.length),true)&&((τp0===2)&&((context=τ1414[0]),true,(env=τ1414[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1415=τ1413;var τp0;var τp1;var τp2;var τp3;var τp4;var expr;var τp0;var τp1;var expr;var τp2;var τp3;var τp4;var τ1416=false;var τ1417=false;var τ1418=false;var τ1419=false;if(((τ1416=(τ1415 instanceof Array))&&((τ1417=((τp0=τ1415.length),true))&&((τ1418=(τp0===3))&&((τ1419=((τp1=τ1415[0]),(τp1==="data")))&&(((τp2=τ1415[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((expr=τ1415[2]),true)))))))))){return ["send",["symbol","cond"],["data",expr]];}else{if((τ1419&&(((expr=τ1415[1]),true,(τp2=τ1415[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void"))))))){var orig_expr=expr;var checker=function(){var τ1420=expr;var τp0;var τp1;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var other;var τ1421=false;var τ1422=false;var τ1423=false;var τ1424=false;if(((τ1421=(τ1420 instanceof Array))&&((τ1422=((τp0=τ1420.length),true))&&((τp0===1)&&((τp1=τ1420[0]),(τp1==="void")))))){throw "can't use ? on its own";}else{if((τ1422&&((τ1423=(τp0===2))&&((τ1424=((τp1=τ1420[0]),(τp1==="symbol")))&&((τp2=τ1420[1]),(τp2==="String")))))){return ["macro",function(_,τ1425){var τp0;var τp1;var expr;if(((τ1425 instanceof Array)&&(((τp0=τ1425.length),true)&&((τp0===2)&&(((τp1=τ1425[0]),(τp1==="data"))&&((expr=τ1425[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","string"]]];}];}else{if((τ1424&&((τp2=τ1420[1]),(τp2==="Number")))){return ["macro",function(_,τ1426){var τp0;var τp1;var expr;if(((τ1426 instanceof Array)&&(((τp0=τ1426.length),true)&&((τp0===2)&&(((τp1=τ1426[0]),(τp1==="data"))&&((expr=τ1426[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","number"]]];}];}else{if((τ1424&&((τp2=τ1420[1]),(τp2==="true")))){return ["macro",function(_,τ1427){var τp0;var τp1;var expr;if(((τ1427 instanceof Array)&&(((τp0=τ1427.length),true)&&((τp0===2)&&(((τp1=τ1427[0]),(τp1==="data"))&&((expr=τ1427[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return expr;}];}else{if((τ1424&&((τp2=τ1420[1]),(τp2==="false")))){return ["macro",function(_,τ1428){var τp0;var τp1;var expr;if(((τ1428 instanceof Array)&&(((τp0=τ1428.length),true)&&((τp0===2)&&(((τp1=τ1428[0]),(τp1==="data"))&&((expr=τ1428[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["send",["symbol","not"],["data",["void"],expr]];}];}else{if((τ1424&&((τp2=τ1420[1]),(τp2==="null")))){return ["macro",make_checker(["value",null],["symbol","___is"])];}else{if((τ1424&&((τp2=τ1420[1]),(τp2==="undefined")))){return ["macro",make_checker(["value",undefined],["symbol","___is"])];}else{if(((other=τ1420),true)){return ["send",["symbol","___checker"],["data",expr]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1420}));}}}}}}}}}();var mac=function(τ1430,expr){var τp0;var τ1429;var env;if(((τ1430 instanceof Array)&&(((τp0=τ1430.length),true)&&((τp0===2)&&((τ1429=τ1430[0]),true,(env=τ1430[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1431=τ1429;var other;if((τ1431==="pattern")){var τ1432=expr;var τp0;var τp1;var subp;var τp0;var τp1;var other;var τ1433=false;var τ1434=false;if(((τ1433=(τ1432 instanceof Array))&&((τ1434=((τp0=τ1432.length),true))&&((τp0>=1)&&(((τp1=τ1432[0]),(τp1==="data"))&&((subp=τ1432.slice(1)),true)))))){var projector=["send",["symbol","___deconstructor"],["data",orig_expr]];return ["check",checker,["project",projector,τ1231(["duck",0],subp)]];}else{if((τ1434&&((τp0===1)&&((τp1=τ1432[0]),(τp1==="void"))))){return ["check",checker,["ignore"]];}else{if(((other=τ1432),true)){return ["check",checker,expr];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1432}));}}}}else{if(((other=τ1431),true)){return ["send",checker,["data",expr]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1431}));}}};return ["macro",mac];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1415}));}}});stdenv.register_macro("!",function(τ1435,τ1436){var τp0;var context;var env;if(((τ1435 instanceof Array)&&(((τp0=τ1435.length),true)&&((τp0===2)&&((context=τ1435[0]),true,(env=τ1435[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;var τp2;var τp3;var τp4;if(((τ1436 instanceof Array)&&(((τp0=τ1436.length),true)&&((τp0===3)&&(((τp1=τ1436[0]),(τp1==="data"))&&(((expr=τ1436[1]),true,(τp2=τ1436[2]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&((τp4=τp2[0]),(τp4==="void")))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var orig_expr=expr;var projector=function(){var τ1437=expr;var τp0;var τp1;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var other;var τ1438=false;var τ1439=false;var τ1440=false;var τ1441=false;if(((τ1438=(τ1437 instanceof Array))&&((τ1439=((τp0=τ1437.length),true))&&((τp0===1)&&((τp1=τ1437[0]),(τp1==="void")))))){throw "can't use ! on its own";}else{if((τ1439&&((τ1440=(τp0===2))&&((τ1441=((τp1=τ1437[0]),(τp1==="symbol")))&&((τp2=τ1437[1]),(τp2==="String")))))){return ["macro",function(_,τ1442){var τp0;var τp1;var expr;if(((τ1442 instanceof Array)&&(((τp0=τ1442.length),true)&&((τp0===2)&&(((τp1=τ1442[0]),(τp1==="data"))&&((expr=τ1442[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["data",["symbol","true"],["send",["symbol","String"],["data",expr]]];}];}else{if((τ1441&&((τp2=τ1437[1]),(τp2==="Number")))){return ["macro",function(_,τ1443){var τp0;var τp1;var expr;if(((τ1443 instanceof Array)&&(((τp0=τ1443.length),true)&&((τp0===2)&&(((τp1=τ1443[0]),(τp1==="data"))&&((expr=τ1443[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",expr]]];}];}else{if(((other=τ1437),true)){return ["send",["symbol","___projector"],["data",expr]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1437}));}}}}}();var mac=function(τ1445,expr){var τp0;var τ1444;var env;if(((τ1445 instanceof Array)&&(((τp0=τ1445.length),true)&&((τp0===2)&&((τ1444=τ1445[0]),true,(env=τ1445[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1446=τ1444;var other;if((τ1446==="pattern")){var τ1447=expr;var τp0;var τp1;var subp;var τp0;var τp1;var other;var τ1448=false;var τ1449=false;if(((τ1448=(τ1447 instanceof Array))&&((τ1449=((τp0=τ1447.length),true))&&((τp0>=1)&&(((τp1=τ1447[0]),(τp1==="data"))&&((subp=τ1447.slice(1)),true)))))){var dctor=["send",["symbol","___deconstructor"],["data",orig_expr]];return ["project",projector,["project",dctor,τ1231(["duck",0],subp)]];}else{if((τ1449&&((τp0===1)&&((τp1=τ1447[0]),(τp1==="void"))))){return ["project",projector,["ignore"]];}else{if(((other=τ1447),true)){return ["project",projector,expr];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1447}));}}}}else{if(((other=τ1446),true)){return ["send",["send",projector,["data",expr]],["value",1]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1446}));}}};return ["macro",mac];});var is_symbol=function(τ1450,env){var τ1451=τ1450;var τp0;var τp1;var s;var _;if(((τ1451 instanceof Array)&&(((τp0=τ1451.length),true)&&((τp0===2)&&(((τp1=τ1451[0]),(τp1==="symbol"))&&((s=τ1451[1]),true)))))){var τ1452=env.resolve(s);var τp0;var τp1;var m;var _;if(((τ1452 instanceof Array)&&(((τp0=τ1452.length),true)&&((τp0===2)&&(((τp1=τ1452[0]),(τp1==="macro"))&&((m=τ1452[1]),true)))))){return false;}else{if(((_=τ1452),true)){return true;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1452}));}}}else{if(((_=τ1451),true)){return false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1451}));}}};var lhs_parse_specs=function(env,specs){var fw=[];var bw=[];var keys=[];var defaults=[];var rest=undefined;(specs=specs.slice(0));while(specs.length){var x=specs.shift();var v=expand.step(["pattern",env],x);var τ1453=v;var τp0;var τp1;var variable;var τp0;var τp1;var key;var τp0;var τp1;var key;var value;var τp0;var τp1;var variable;var value;var τ1454;var otherwise;var τ1455=false;var τ1456=false;var τ1457=false;if(((τ1455=(τ1453 instanceof Array))&&((τ1456=((τp0=τ1453.length),true))&&((τ1457=(τp0===2))&&(((τp1=τ1453[0]),(τp1==="dynsplice"))&&((variable=τ1453[1]),true)))))){(rest=variable);}else{if((τ1457&&(((τp1=τ1453[0]),(τp1==="assoc"))&&((key=τ1453[1]),true)))){keys.push([key,key]);}else{if((τ1456&&((τ1457=(τp0===3))&&(((τp1=τ1453[0]),(τp1==="assoc"))&&((key=τ1453[1]),true,(value=τ1453[2]),true))))){keys.push([key,value]);}else{if((τ1457&&(((τp1=τ1453[0]),(τp1==="default"))&&((variable=τ1453[1]),true,(value=τ1453[2]),true,(τ1454=τ1453),true)))){var τ1458=τ1454;var otherwise;if(rest){throw Error("no defaults after rest arg");}else{if(((otherwise=τ1458),true)){defaults.push([variable,value]);}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1458}));}}}else{if((rest===undefined)){fw.push(v);}else{if(((otherwise=τ1453),true)){bw.push(v);}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1453}));}}}}}}}return [fw,bw,keys,defaults,rest];};var parse_lhs=function(env,lhs,rhs,gen){(gen=(gen||gensym_factory("p")));var vars=[];var clauses=[];var current=["multi"];var placeholder=null;var mktemp=function(){var t=gen();vars.push(t);return t;};var newclause=function(){if((current.length>1)){clauses.push(current);}else{null;}return (current=["multi"]);};var maybe_temp=function(x){if(is_symbol(x,env)){return x;}else{var temp=mktemp();current.push(["assign",temp,x]);return temp;}};var helper=function(lhs,curr){return helper_noexpand(expand.step(["pattern",env],lhs),curr);};var helper_noexpand=function(lhs,curr){var helper_keys=function(temp,keys){var τ1466=[];var τ1467=keys;var τ1468=τ1467.length;for(var τ1469=0;(τ1469<τ1468);(τ1469++)){var τ1470=τ1467[τ1469];var τp0;var τp1;var τ1473;var τ1474;var k;var τ1471;var τ1472;var k;var v;var other;if(((τ1470 instanceof Array)&&(((τp0=τ1470.length),true)&&((τp0===2)&&(((τp1=τ1470[0]),(((τp1 instanceof Array)&&(((τ1471=τp1.length),true)&&((τ1471===2)&&(((τ1472=τp1[0]),(τ1472==="symbol"))&&((k=τp1[1]),true)))))||((τp1 instanceof Array)&&(((τ1473=τp1.length),true)&&((τ1473===2)&&(((τ1474=τp1[0]),(τ1474==="value"))&&((k=τp1[1]),true)))))))&&((v=τ1470[1]),true)))))){τ1466.push((current.push(["send",["symbol","___hasprop"],["data",temp,["value",k]]]),newclause(),helper(v,["send",temp,["value",k]])));}else{if(((other=τ1470),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1470}));}}}return τ1466;};var helper_array=function(temp,specs,start){var τp0;var fw;var bw;var keys;var dflt;var rest;if(((specs instanceof Array)&&(((τp0=specs.length),true)&&((τp0===5)&&((fw=specs[0]),true,(bw=specs[1]),true,(keys=specs[2]),true,(dflt=specs[3]),true,(rest=specs[4]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var nfw=fw.length;var nbw=bw.length;var ndflt=dflt.length;var extract_length=true;var check_length=true;if(extract_length){var len=mktemp();current.push(["send",["symbol",":="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["symbol","true"]);newclause();if(check_length){var lo=((nfw+nbw)+start);var hi=(lo+ndflt);if((rest===undefined)){if((lo===hi)){current.push(["send",["symbol","=="],["data",len,["value",lo]]]);}else{current.push(["send",["symbol","and"],["data",["send",["symbol",">="],["data",len,["value",lo]]],["send",["symbol","<="],["data",len,["value",hi]]]]]);}}else{current.push(["send",["symbol",">="],["data",len,["value",lo]]]);}newclause();}else{null;}}else{null;}var τ1475=enumerate(fw);var τ1476=τ1475.length;for(var τ1477=0;(τ1477<τ1476);(τ1477++)){var τ1485=τ1475[τ1477];var τp0;var j;var m;var other;if(((τ1485 instanceof Array)&&(((τp0=τ1485.length),true)&&((τp0===2)&&((j=τ1485[0]),true,(m=τ1485[1]),true))))){helper(m,["send",temp,["value",(j+start)]]);}else{if(((other=τ1485),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1485}));}}}false;var τ1478=enumerate(dflt);var τ1479=τ1478.length;for(var τ1480=0;(τ1480<τ1479);(τ1480++)){var τ1486=τ1478[τ1480];var τp0;var j;var τp1;var τp2;var patt;var value;var other;if(((τ1486 instanceof Array)&&(((τp0=τ1486.length),true)&&((τp0===2)&&(((j=τ1486[0]),true,(τp1=τ1486[1]),(τp1 instanceof Array))&&(((τp2=τp1.length),true)&&((τp2===2)&&((patt=τp1[0]),true,(value=τp1[1]),true)))))))){var idx=((j+nfw)+start);helper(patt,["send",["symbol","if"],["data",["send",["symbol",">="],["data",["value",idx],len]],value,["send",temp,["value",idx]]]]);}else{if(((other=τ1486),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1486}));}}}false;if((rest!==undefined)){var pos=((nfw+ndflt)+start);var slice=function(){if((nbw>0)){return ["data",["value",pos],["value",(-nbw)]];}else{return ["data",["value",pos]];}}();helper(rest,["send",["send",temp,["send",["symbol","."],["data",["void"],["symbol","slice"]]]],slice]);}else{null;}var τ1481=[];var τ1482=enumerate(bw);var τ1483=τ1482.length;for(var τ1484=0;(τ1484<τ1483);(τ1484++)){var τ1487=τ1482[τ1484];var τp0;var j;var m;var other;if(((τ1487 instanceof Array)&&(((τp0=τ1487.length),true)&&((τp0===2)&&((j=τ1487[0]),true,(m=τ1487[1]),true))))){τ1481.push(helper(m,["send",temp,["send",["symbol","-"],["data",len,["value",(nbw-j)]]]]));}else{if(((other=τ1487),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1487}));}}}return τ1481;};var τ1459=lhs;var τp0;var τp1;var τ1460;var τ1461;var τp0;var τp1;var s;var τp0;var τp1;var v;var τp0;var τp1;var condition;var pattern;var τp0;var τp1;var τp0;var τp1;var c;var pattern;var τp0;var τp1;var xs;var τp0;var τp1;var xs;var τp0;var τp1;var τp2;var τp3;var τp4;var checkers;var expr;var τp0;var τp1;var checker;var expr;var τp0;var τp1;var projector;var expr;var τp0;var τp1;var fname;var spec;var τp0;var τp1;var i;var args;var τp0;var τp1;var args;var other;var τ1462=false;var τ1463=false;var τ1464=false;var τ1465=false;if(((τ1459 instanceof Array)&&(((τp0=τ1459.length),true)&&((τp0===1)&&((τp1=τ1459[0]),(τp1==="void")))))){var x=["check",["macro",make_checker(["value",null],["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if(((τ1459==="_")||((τ1459 instanceof Array)&&(((τ1460=τ1459.length),true)&&((τ1460===1)&&((τ1461=τ1459[0]),(τ1461==="ignore"))))))){if((!is_symbol(curr,env))){current.push(curr);return current.push(["symbol","true"]);}else{return null;}}else{if(((τ1462=(τ1459 instanceof Array))&&((τ1463=((τp0=τ1459.length),true))&&((τ1464=(τp0===2))&&(((τp1=τ1459[0]),(τp1==="symbol"))&&((s=τ1459[1]),true)))))){vars.push(["symbol",s]);current.push(["assign",["symbol",s],curr]);return current.push(["value",true]);}else{if((τ1464&&(((τp1=τ1459[0]),(τp1==="value"))&&((v=τ1459[1]),true)))){var x=["check",["macro",make_checker(lhs,["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if((τ1463&&((τp0===3)&&(((τp1=τ1459[0]),(τp1==="test"))&&((condition=τ1459[1]),true,(pattern=τ1459[2]),true))))){helper(pattern,curr);current.push(condition);return newclause();}else{if((τ1463&&((τp0===1)&&((τp1=τ1459[0]),(τp1==="placeholder"))))){(placeholder=gensym());vars.push(placeholder);current.push(["assign",placeholder,curr]);return current.push(["value",true]);}else{if((τ1463&&((τp0===3)&&(((τp1=τ1459[0]),(τp1==="constant"))&&((c=τ1459[1]),true,(pattern=τ1459[2]),true))))){return helper(pattern,c);}else{if((τ1463&&((τ1464=(τp0>=1))&&(((τp1=τ1459[0]),(τp1==="all"))&&((xs=τ1459.slice(1)),true))))){var temp=maybe_temp(curr);var τ1488=xs;var τ1489=τ1488.length;for(var τ1490=0;(τ1490<τ1489);(τ1490++)){var τ1491=τ1488[τ1490];var x;var other;if(((x=τ1491),true)){helper(x,temp);}else{if(((other=τ1491),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1491}));}}}false;return false;}else{if((τ1464&&(((τp1=τ1459[0]),(τp1==="any"))&&((xs=τ1459.slice(1)),true)))){var normalize=function(vars){return function(){var τ1495=[];var τ1496=vars;var τ1497=τ1496.length;for(var τ1498=0;(τ1498<τ1497);(τ1498++)){var τ1499=τ1496[τ1498];var τp0;var τp1;var v;var other;if(((τ1499 instanceof Array)&&(((τp0=τ1499.length),true)&&((τp0===2)&&(((τp1=τ1499[0]),(τp1==="symbol"))&&((v=τ1499[1]),true,(v[0]!=="τ"))))))){τ1495.push(v);}else{if(((other=τ1499),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1499}));}}}return τ1495;}().sort().join(",");};var temp=maybe_temp(curr);var myvars=undefined;var clauses=[];var τ1492=xs;var τ1493=τ1492.length;for(var τ1494=0;(τ1494<τ1493);(τ1494++)){var τ1500=τ1492[τ1494];var x;var other;if(((x=τ1500),true)){var p=parse_lhs(env,x,temp,gensym);var τ1501=null;var _;if((myvars===undefined)){(myvars=p[0]);}else{if((normalize(p[0])!==normalize(myvars))){throw [Error("Must have the same set of variables in both branches!",(("["+String(myvars))+"]"),(("["+String(p[0]))+"]"))];}else{if(((_=τ1501),true)){(vars=vars.concat(p[0]));}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1501}));}}}clauses.push(make_pattern_test(p[1]));}else{if(((other=τ1500),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1500}));}}}false;current.push(make_or_pattern(clauses));(vars=vars.concat(myvars));return newclause();}else{if((τ1463&&((τ1464=(τp0===3))&&((τ1465=((τp1=τ1459[0]),(τp1==="check")))&&(((τp2=τ1459[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3>=1)&&(((τp4=τp2[0]),(τp4==="multi"))&&((checkers=τp2.slice(1)),true,(expr=τ1459[2]),true))))))))){var temp=maybe_temp(curr);var τ1502=checkers;var τ1503=τ1502.length;for(var τ1504=0;(τ1504<τ1503);(τ1504++)){var τ1505=τ1502[τ1504];var checker;var other;if(((checker=τ1505),true)){current.push(["send",checker,["data",temp]]);newclause();}else{if(((other=τ1505),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1505}));}}}false;return helper(expr,temp);}else{if((τ1465&&((checker=τ1459[1]),true,(expr=τ1459[2]),true))){var temp=maybe_temp(curr);current.push(["send",checker,["data",temp]]);newclause();return helper(expr,temp);}else{if((τ1464&&(((τp1=τ1459[0]),(τp1==="project"))&&((projector=τ1459[1]),true,(expr=τ1459[2]),true)))){var temp=maybe_temp(curr);var temp2=mktemp();current.push(["send",["symbol",":="],["data",temp2,["send",projector,["data",temp]]]],["send",temp2,["value",0]]);newclause();return helper(expr,["send",temp2,["value",1]]);}else{if((τ1464&&(((τp1=τ1459[0]),(τp1==="send"))&&((fname=τ1459[1]),true,(spec=τ1459[2]),true)))){return helper(fname,["send",["symbol","->"],["data",spec,curr]]);}else{if((τ1463&&((τp0>=2)&&(((τp1=τ1459[0]),(τp1==="duck"))&&((i=τ1459[1]),true,(args=τ1459.slice(2)),true))))){var temp=maybe_temp(curr);current.push(["value",true]);var τp0;var specs;var τp1;var fw;var bw;var keys;var dflt;var rest;if((((τp0=lhs_parse_specs(env,args)),(specs=τp0),true,(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===5)&&((fw=τp0[0]),true,(bw=τp0[1]),true,(keys=τp0[2]),true,(dflt=τp0[3]),true,(rest=τp0[4]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){return helper_array(temp,specs,i);}else{return null;}}else{if((τ1463&&((τp0>=1)&&(((τp1=τ1459[0]),(τp1==="data"))&&((args=τ1459.slice(1)),true))))){var temp=maybe_temp(curr);var τp0;var specs;var τp1;var fw;var bw;var keys;var dflt;var rest;if((((τp0=lhs_parse_specs(env,args)),(specs=τp0),true,(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===5)&&((fw=τp0[0]),true,(bw=τp0[1]),true,(keys=τp0[2]),true,(dflt=τp0[3]),true,(rest=τp0[4]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){current.push(["send",["symbol","instanceof"],["data",temp,["symbol","Array"]]]);newclause();return helper_array(temp,specs,0);}else{return null;}}else{if(((other=τ1459),true)){throw ["OopsG",other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1459}));}}}}}}}}}}}}}}}}};helper(lhs,rhs);if((current.length>1)){clauses.push(current);}else{null;}return [vars,clauses,placeholder];};var make_declarations=function(vars,val){var τ1506=[];var τ1507=vars;var τ1508=τ1507.length;for(var τ1509=0;(τ1509<τ1508);(τ1509++)){var τ1510=τ1507[τ1509];var name;var other;if(((name=τ1510),true)){τ1506.push(["declare",name,["value",val]]);}else{if(((other=τ1510),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1510}));}}}return τ1506;};var make_pattern_test=function(clauses){var ands=clauses.pop();while((clauses.length>0)){(ands=["send",["symbol","and"],["data",clauses.pop(),ands]]);}return (ands||["value",true]);};var make_or_pattern=function(clauses){var ors=clauses.pop();while((clauses.length>0)){(ors=["send",["symbol","or"],["data",clauses.pop(),ors]]);}return ors;};var find_arrow=function(τ1512){var expr;var τ1511;(expr=τ1512);true;(τ1511=τ1512);var τ1513=τ1511;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var τp0;var τp1;var τp2;var x;var τ1516;var τ1517;var τ1514;var τ1515;var x;var x;var τp0;var τp1;var v;var τp0;var kind;var args;var τ1518=false;var τ1519=false;var τ1520=false;var τ1521=false;if(((τ1518=(τ1513 instanceof Array))&&((τ1519=((τp0=τ1513.length),true))&&((τ1520=(τp0===2))&&((τ1521=((τp1=τ1513[0]),(τp1==="symbol")))&&((τp2=τ1513[1]),(τp2==="match"))))))){var placeholder=gensym();return [placeholder,placeholder];}else{if((τ1521&&((τp2=τ1513[1]),(τp2==="|>")))){var placeholder=gensym();return [placeholder,placeholder];}else{if((τ1521&&((τp2=τ1513[1]),(τp2==="|>*")))){var placeholder=gensym();return [placeholder,["send",["symbol","*"],["data",["void"],placeholder]]];}else{if((((τ1513 instanceof Array)&&(((τ1514=τ1513.length),true)&&((τ1514===2)&&(((τ1515=τ1513[0]),(τ1515==="symbol"))&&((x=τ1513[1]),true)))))||(((x=τ1513),true,(τ1513 instanceof Array))&&(((τ1516=τ1513.length),true)&&((τ1516===1)&&((τ1517=τ1513[0]),(τ1517==="void"))))))){return [false,expr];}else{if((((x=τ1513),true,(τ1513 instanceof Array))&&(((τp0=τ1513.length),true)&&((τp0===2)&&(((τp1=τ1513[0]),(τp1==="value"))&&((v=τ1513[1]),true)))))){return [false,x];}else{if(((τ1513 instanceof Array)&&(((τp0=τ1513.length),true)&&((τp0>=1)&&((kind=τ1513[0]),true,(args=τ1513.slice(1)),true))))){var placeholder=false;var new_args=function(){var τ1522=[];var τ1523=args;var τ1524=τ1523.length;for(var τ1525=0;(τ1525<τ1524);(τ1525++)){var τ1526=τ1523[τ1525];var arg;var other;if(((arg=τ1526),true)){τ1522.push(function(){var τp0;var τp1;var ph;var new_arg;if((((τp0=find_arrow(arg)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((ph=τp0[0]),true,(new_arg=τp0[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}if(ph){(placeholder=ph);}else{null;}return new_arg;}());}else{if(((other=τ1526),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1526}));}}}return τ1522;}();return [placeholder,τ1231([kind],new_args)];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1513}));}}}}}}};var same=function(){var τ1528=Array.prototype.slice.call(arguments,0);var τp0;var τ1529;if(((τ1528 instanceof Array)&&(((τp0=τ1528.length),true)&&((τp0>=0)&&((τ1529=τ1528.slice(0)),true))))){var τ1530=τ1529;var τp0;var τp1;var τp2;var τp3;var x;var τp4;var τp5;var τp6;var y;var τp0;var τp1;var τp2;var τp3;var x;var τp4;var τp5;var τp6;var y;var τp0;var τp1;var τp2;var τp3;var x;var τp4;var τp5;var τp6;var y;var τp0;var τp1;var τp2;var τp3;var f;var x;var τp4;var τp5;var τp6;var g;var y;var τp0;var τp1;var τp2;var kind1;var xs;var τp3;var τp4;var kind2;var ys;var other;var τ1531=false;var τ1532=false;var τ1533=false;var τ1534=false;var τ1535=false;var τ1536=false;if(((τ1531=(τ1530 instanceof Array))&&((τ1532=((τp0=τ1530.length),true))&&((τ1533=(τp0===2))&&((τ1534=((τp1=τ1530[0]),(τp1 instanceof Array)))&&((τ1535=((τp2=τp1.length),true))&&((τ1536=(τp2===2))&&(((τp3=τp1[0]),(τp3==="symbol"))&&(((x=τp1[1]),true,(τp4=τ1530[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="symbol"))&&((y=τp4[1]),true))))))))))))){return (x===y);}else{if((τ1536&&(((τp3=τp1[0]),(τp3==="value"))&&(((x=τp1[1]),true,(τp4=τ1530[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="value"))&&((y=τp4[1]),true)))))))){return (x===y);}else{if((τ1536&&(((τp3=τp1[0]),(τp3==="macro"))&&(((x=τp1[1]),true,(τp4=τ1530[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===2)&&(((τp6=τp4[0]),(τp6==="macro"))&&((y=τp4[1]),true)))))))){return (x===y);}else{if((τ1535&&((τp2===3)&&(((τp3=τp1[0]),(τp3==="send"))&&(((f=τp1[1]),true,(x=τp1[2]),true,(τp4=τ1530[1]),(τp4 instanceof Array))&&(((τp5=τp4.length),true)&&((τp5===3)&&(((τp6=τp4[0]),(τp6==="send"))&&((g=τp4[1]),true,(y=τp4[2]),true))))))))){return (same(f,g)&&same(x,y));}else{if((τ1535&&((τp2>=1)&&(((kind1=τp1[0]),true,(xs=τp1.slice(1)),true,(τp3=τ1530[1]),(τp3 instanceof Array))&&(((τp4=τp3.length),true)&&((τp4>=1)&&((kind2=τp3[0]),true,(ys=τp3.slice(1)),true))))))){var allequal=xs.every(function(x,i){return same(x,send(ys,i));});return (((kind1===kind2)&&(xs.length===ys.length))&&allequal);}else{if(((other=τ1530),true)){return false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1530}));}}}}}}}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1528}));}};stdenv.register_macro("|>",function(τ1538,τ1537){var τp0;var context;var env;if(((τ1538 instanceof Array)&&(((τp0=τ1538.length),true)&&((τp0===2)&&((context=τ1538[0]),true,(env=τ1538[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1539=τ1537;var τp0;var τp1;var τp0;var τp1;var to_match;var cl;var τ1540=false;var τ1541=false;if(((τ1540=(τ1539 instanceof Array))&&((τ1541=((τp0=τ1539.length),true))&&((τp0===1)&&((τp1=τ1539[0]),(τp1==="void")))))){return ["placeholder"];}else{if((τ1541&&((τp0===3)&&(((τp1=τ1539[0]),(τp1==="data"))&&((to_match=τ1539[1]),true,(cl=τ1539[2]),true))))){var temp=gensym();var clauses=function(){var τ1542=cl;var τp0;var τp1;var cls;var other;if(((τ1542 instanceof Array)&&(((τp0=τ1542.length),true)&&((τp0>=1)&&(((τp1=τ1542[0]),(τp1==="multi"))&&((cls=τ1542.slice(1)),true)))))){return cls;}else{if(((other=τ1542),true)){return [other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1542}));}}}();var cached_conditions=[];var stmts=["multi",["declare",temp,to_match]];(clauses=function(){var τ1543=[];var τ1544=clauses;var τ1545=τ1544.length;for(var τ1546=0;(τ1546<τ1545);(τ1546++)){var τ1547=τ1544[τ1546];var clause;var other;if(((clause=τ1547),true)){τ1543.push(function(){var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var lhs;var body;if(((clause instanceof Array)&&(((τp0=clause.length),true)&&((τp0===3)&&(((τp1=clause[0]),(τp1==="send"))&&(((τp2=clause[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=clause[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((lhs=τp6[1]),true,(body=τp6[2]),true))))))))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var decls;var conditions;var placeholder;if((((τp0=parse_lhs(env,lhs,temp)),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===3)&&((decls=τp0[0]),true,(conditions=τp0[1]),true,(placeholder=τp0[2]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}(stmts=stmts.concat(make_declarations(decls)));var b=function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,body]];}else{return body;}}();var f=function(x){return ["done",expand(["expr",env],x)];};return [conditions.map(f),b];}());}else{if(((other=τ1547),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1547}));}}}return τ1543;}());var shares=function(){var f=function(τ1548,i){var τp0;var conditions;var body;if(((τ1548 instanceof Array)&&(((τp0=τ1548.length),true)&&((τp0===2)&&((conditions=τ1548[0]),true,(body=τ1548[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var res=0;var prev_conditions=send(clauses,i)[0];var nc=conditions.length;for(var j=0;((j<nc)&&same(send(conditions,j),send(prev_conditions,j)));(j++)){(res++);}return res;};return clauses.slice(1).map(f);}();var max=send(Math.max,shares);shares.push(0);var vars=[];(vars=vars.concat(function(){var τ1549=[];var τ1550=τ1728(1,max);var τ1551=τ1550.length;for(var τ1552=0;(τ1552<τ1551);(τ1552++)){var τ1553=τ1550[τ1552];var _;var other;if(((_=τ1553),true)){τ1549.push(gensym());}else{if(((other=τ1553),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1553}));}}}return τ1549;}()));(stmts=stmts.concat(make_declarations(vars,false)));var shared_last=0;var new_clauses=clauses.map(function(τ1554,i){var τp0;var conditions;var body;if(((τ1554 instanceof Array)&&(((τp0=τ1554.length),true)&&((τp0===2)&&((conditions=τ1554[0]),true,(body=τ1554[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var shared=function(){if(shared_last){return [send(vars,(shared_last-1))];}else{return [];}}();var n_to_share=Math.max(shared_last,send(shares,i));var to_share=conditions.slice(shared_last,n_to_share).map(function(x,j){return ["assign",send(vars,(shared_last+j)),x];});(shared_last=send(shares,i));var rest=conditions.slice(n_to_share);return [shared.concat(to_share).concat(rest),body];});(clauses=new_clauses);var r=["send",["symbol","throw"],["send",["send",["symbol","E"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["value","Could not find a match"],["data",["send",["symbol","="],["data",["symbol","value"],temp]]]]]];while((clauses.length>0)){var τp0;var τp1;var conditions;var body;if((((τp0=clauses.pop()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((conditions=τp0[0]),true,(body=τp0[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var test=make_pattern_test(conditions);(r=["if",test,body,r]);}stmts.push(r);return stmts;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1539}));}}});var qqstruct=function(name,args){return τ1231(["data",["value",name]],args);};var qq=function(τ1556){var expr;var τ1555;(expr=τ1556);true;(τ1555=τ1556);var τ1557=τ1555;var τp0;var τp1;var s;var τp0;var τp1;var τp0;var τp1;var v;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var insert;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var insert;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var insert;var τp0;var name;var args;var τ1558=false;var τ1559=false;var τ1560=false;var τ1561=false;var τ1562=false;var τ1563=false;var τ1564=false;var τ1565=false;if(((τ1558=(τ1557 instanceof Array))&&((τ1559=((τp0=τ1557.length),true))&&((τp0===2)&&(((τp1=τ1557[0]),(τp1==="symbol"))&&((s=τ1557[1]),true)))))){return qqstruct("symbol",[["value",s]]);}else{if((τ1559&&((τp0===1)&&((τp1=τ1557[0]),(τp1==="void"))))){return qqstruct("void",[]);}else{if((τ1559&&((τp0===2)&&(((τp1=τ1557[0]),(τp1==="value"))&&((v=τ1557[1]),true))))){return qqstruct("value",[expr]);}else{if((τ1559&&((τ1560=(τp0===3))&&((τ1561=((τp1=τ1557[0]),(τp1==="send")))&&((τ1562=((τp2=τ1557[1]),(τp2 instanceof Array)))&&((τ1563=((τp3=τp2.length),true))&&((τ1564=(τp3===2))&&((τ1565=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="^"))&&(((τp6=τ1557[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((insert=τp6[2]),true)))))))))))))))))){return insert;}else{if((τ1565&&(((τp5=τp2[1]),(τp5==="^="))&&(((τp6=τ1557[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((insert=τp6[2]),true)))))))))))){return qqstruct("value",[insert]);}else{if((τ1565&&(((τp5=τp2[1]),(τp5==="^*"))&&(((τp6=τ1557[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((insert=τp6[2]),true)))))))))))){return ["send",["symbol","*"],["data",["void"],insert]];}else{if((τ1559&&((τp0>=1)&&((name=τ1557[0]),true,(args=τ1557.slice(1)),true)))){return qqstruct(name,function(){var τ1566=[];var τ1567=args;var τ1568=τ1567.length;for(var τ1569=0;(τ1569<τ1568);(τ1569++)){var τ1570=τ1567[τ1569];var arg;var other;if(((arg=τ1570),true)){τ1566.push(qq(arg));}else{if(((other=τ1570),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1570}));}}}return τ1566;}());}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1557}));}}}}}}}};stdenv.register_macro("'",function(τ1571,τ1572){var τp0;var context;var env;if(((τ1571 instanceof Array)&&(((τp0=τ1571.length),true)&&((τp0===2)&&((context=τ1571[0]),true,(env=τ1571[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var τp4;var expr;if(((τ1572 instanceof Array)&&(((τp0=τ1572.length),true)&&((τp0===3)&&(((τp1=τ1572[0]),(τp1==="data"))&&(((τp2=τ1572[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((expr=τ1572[2]),true)))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return qq(expr);});stdenv.register_macro("provide",function(τ1573,τ1574){var τp0;var context;var env;if(((τ1573 instanceof Array)&&(((τp0=τ1573.length),true)&&((τp0===2)&&((context=τ1573[0]),true,(env=τ1573[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var expr;if(((τ1574 instanceof Array)&&(((τp0=τ1574.length),true)&&((τp0===2)&&(((τp1=τ1574[0]),(τp1==="data"))&&(((τp2=τ1574[1]),(τp3=τ1723(aslist)(τp2)),τp3[0])&&((expr=τp3[1]),true))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return ["sink",["multi"].concat(function(){var τ1575=[];var τ1576=expr;var τ1577=τ1576.length;for(var τ1578=0;(τ1578<τ1577);(τ1578++)){var τ1579=τ1576[τ1578];var s;var τp0;var τp1;var name;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var s;var τp9;var τ1582;var τ1583;var name;var τ1580;var τ1581;var name;var other;var other;var τ1584=false;if((((s=τ1579),true,(τ1579 instanceof Array))&&(((τp0=τ1579.length),true)&&((τp0===2)&&(((τp1=τ1579[0]),(τp1==="symbol"))&&((name=τ1579[1]),true)))))){τ1575.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if(((τ1579 instanceof Array)&&(((τp0=τ1579.length),true)&&((τp0===3)&&(((τp1=τ1579[0]),(τp1==="send"))&&(((τp2=τ1579[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1579[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((s=τp6[1]),true,(τp9=τp6[2]),(((τp9 instanceof Array)&&(((τ1580=τp9.length),true)&&((τ1580===2)&&(((τ1581=τp9[0]),(τ1581==="symbol"))&&((name=τp9[1]),true)))))||((τp9 instanceof Array)&&(((τ1582=τp9.length),true)&&((τ1582===2)&&(((τ1583=τp9[0]),(τ1583==="value"))&&((name=τp9[1]),true))))))))))))))))))))){τ1575.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if((τ1584=((other=τ1579),true))){τ1575.push(function(){throw τ1220(["syntax","provide"]).create("Each clause of provide must be 'sym' or 'sym as name'");}());}else{if(τ1584){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1579}));}}}}}return τ1575;}())];});stdenv.register_macro("require",function(τ1585,τ1586){var τp0;var context;var env;if(((τ1585 instanceof Array)&&(((τp0=τ1585.length),true)&&((τp0===2)&&((context=τ1585[0]),true,(env=τ1585[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var expr;if(((τ1586 instanceof Array)&&(((τp0=τ1586.length),true)&&((τp0===2)&&(((τp1=τ1586[0]),(τp1==="data"))&&((expr=τ1586[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var stmts=[];var topfetch=function(pkg,v){stmts.push(["send",["symbol","="],["data",v,["send",["send",["symbol","___node"],["send",["symbol","."],["data",["void"],["symbol","require"]]]],["data",["value",pkg]]]]]);return v;};var produce=function(τ1587,fetch){var τ1588=τ1587;var τp0;var τp1;var s;var τp0;var τp1;var τp2;var s;var τ1591;var τ1592;var subp;var τ1589;var τ1590;var subp;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τ1595;var τ1596;var pkg;var τ1593;var τ1594;var pkg;var s;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var pkg;var subp;var τ1597=false;var τ1598=false;var τ1599=false;var τ1600=false;var τ1601=false;var τ1602=false;var τ1603=false;var τ1604=false;if(((τ1597=(τ1588 instanceof Array))&&((τ1598=((τp0=τ1588.length),true))&&((τ1599=(τp0===2))&&(((τp1=τ1588[0]),(τp1==="symbol"))&&((s=τ1588[1]),true)))))){return fetch(s,["symbol",s]);}else{if((τ1599&&(((τp1=τ1588[0]),(τp1==="value"))&&(((τp2=τ1588[1]),(typeof(τp2)==="string"))&&((s=τp2),true))))){return fetch(s,gensym());}else{if((((τ1588 instanceof Array)&&(((τ1589=τ1588.length),true)&&((τ1589>=1)&&(((τ1590=τ1588[0]),(τ1590==="multi"))&&((subp=τ1588.slice(1)),true)))))||((τ1588 instanceof Array)&&(((τ1591=τ1588.length),true)&&((τ1591>=1)&&(((τ1592=τ1588[0]),(τ1592==="data"))&&((subp=τ1588.slice(1)),true))))))){var τ1605=[];var τ1606=subp;var τ1607=τ1606.length;for(var τ1608=0;(τ1608<τ1607);(τ1608++)){var τ1609=τ1606[τ1608];var p;var other;if(((p=τ1609),true)){τ1605.push(produce(p,fetch));}else{if(((other=τ1609),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1609}));}}}return τ1605;}else{if(((τ1597=(τ1588 instanceof Array))&&((τ1598=((τp0=τ1588.length),true))&&((τ1599=(τp0===3))&&((τ1600=((τp1=τ1588[0]),(τp1==="send")))&&((τ1601=((τp2=τ1588[1]),(τp2 instanceof Array)))&&((τ1602=((τp3=τp2.length),true))&&((τ1603=(τp3===2))&&((τ1604=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1588[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(((τp9 instanceof Array)&&(((τ1593=τp9.length),true)&&((τ1593===2)&&(((τ1594=τp9[0]),(τ1594==="value"))&&((pkg=τp9[1]),true)))))||((τp9 instanceof Array)&&(((τ1595=τp9.length),true)&&((τ1595===2)&&(((τ1596=τp9[0]),(τ1596==="symbol"))&&((pkg=τp9[1]),true)))))))&&((s=τp6[2]),true)))))))))))))))){return fetch(pkg,s);}else{if((τ1604&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=τ1588[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((pkg=τp6[1]),true,(subp=τp6[2]),true)))))))){var pkgv=produce(pkg,fetch);return produce(subp,function(pkg,v){return stmts.push(["send",["symbol","="],["data",v,["send",pkgv,["value",pkg]]]]);});}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1588}));}}}}}};produce(expr,topfetch);return τ1231(["multi"],stmts);});stdenv.register_macro("%",function(τ1610,τ1611){var τp0;var context;var env;if(((τ1610 instanceof Array)&&(((τp0=τ1610.length),true)&&((τp0===2)&&((context=τ1610[0]),true,(env=τ1610[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var descr;var contents;if(((τ1611 instanceof Array)&&(((τp0=τ1611.length),true)&&((τp0===3)&&(((τp1=τ1611[0]),(τp1==="data"))&&((descr=τ1611[1]),true,(contents=τ1611[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var tags=["data"];var parse=function(τ1612){var τ1613=τ1612;var τp0;var τp1;var τp0;var τp1;var s;var τp0;var τp1;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τ1616;var τ1617;var x;var τ1614;var τ1615;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τ1620;var τ1621;var x;var τ1618;var τ1619;var x;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τ1624;var τ1625;var prop;var τ1622;var τ1623;var prop;var value;var τp0;var τp1;var expr;var rest;var τ1628;var τ1629;var args;var τ1626;var τ1627;var args;var τ1630=false;var τ1631=false;var τ1632=false;var τ1633=false;var τ1634=false;var τ1635=false;var τ1636=false;var τ1637=false;if(((τ1630=(τ1613 instanceof Array))&&((τ1631=((τp0=τ1613.length),true))&&((τp0===1)&&((τp1=τ1613[0]),(τp1==="void")))))){return null;}else{if((τ1631&&((τ1632=(τp0===2))&&(((τp1=τ1613[0]),(τp1==="symbol"))&&((s=τ1613[1]),true))))){return tags.push(["value",("+"+s)]);}else{if((τ1632&&(((τp1=τ1613[0]),(τp1==="value"))&&((x=τ1613[1]),true)))){return tags.push(["value",("+"+x)]);}else{if((τ1631&&((τ1632=(τp0===3))&&((τ1633=((τp1=τ1613[0]),(τp1==="send")))&&((τ1634=((τp2=τ1613[1]),(τp2 instanceof Array)))&&((τ1635=((τp3=τp2.length),true))&&((τ1636=(τp3===2))&&((τ1637=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="."))&&(((τp6=τ1613[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((τp12=τp6[2]),(((τp12 instanceof Array)&&(((τ1614=τp12.length),true)&&((τ1614===2)&&(((τ1615=τp12[0]),(τ1615==="symbol"))&&((x=τp12[1]),true)))))||((τp12 instanceof Array)&&(((τ1616=τp12.length),true)&&((τ1616===2)&&(((τ1617=τp12[0]),(τ1617==="value"))&&((x=τp12[1]),true)))))))))))))))))))))))){return tags.push(["value",x]);}else{if((τ1637&&(((τp5=τp2[1]),(τp5==="#"))&&(((τp6=τ1613[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===1)&&(((τp11=τp9[0]),(τp11==="void"))&&((τp12=τp6[2]),(((τp12 instanceof Array)&&(((τ1618=τp12.length),true)&&((τ1618===2)&&(((τ1619=τp12[0]),(τ1619==="symbol"))&&((x=τp12[1]),true)))))||((τp12 instanceof Array)&&(((τ1620=τp12.length),true)&&((τ1620===2)&&(((τ1621=τp12[0]),(τ1621==="value"))&&((x=τp12[1]),true)))))))))))))))))){return tags.push(["value",("#"+x)]);}else{if((τ1637&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1613[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(((τp9 instanceof Array)&&(((τ1622=τp9.length),true)&&((τ1622===2)&&(((τ1623=τp9[0]),(τ1623==="symbol"))&&((prop=τp9[1]),true)))))||((τp9 instanceof Array)&&(((τ1624=τp9.length),true)&&((τ1624===2)&&(((τ1625=τp9[0]),(τ1625==="value"))&&((prop=τp9[1]),true)))))))&&((value=τp6[2]),true))))))))){return tags.push(["send",["send",["symbol","#"],["data",["void"],["symbol","assoc"]]],["data",["value",prop],value]]);}else{if((τ1633&&((expr=τ1613[1]),true,(rest=τ1613[2]),true))){parse(expr);return parse(rest);}else{if((((τ1613 instanceof Array)&&(((τ1626=τ1613.length),true)&&((τ1626>=1)&&(((τ1627=τ1613[0]),(τ1627==="multi"))&&((args=τ1613.slice(1)),true)))))||((τ1613 instanceof Array)&&(((τ1628=τ1613.length),true)&&((τ1628>=1)&&(((τ1629=τ1613[0]),(τ1629==="data"))&&((args=τ1613.slice(1)),true))))))){return args.forEach(parse);}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1613}));}}}}}}}}};parse(descr);(contents=function(){var τ1638=contents;var τp0;var τp1;var τp0;var τp1;var args;var x;var τ1639=false;var τ1640=false;if(((τ1639=(τ1638 instanceof Array))&&((τ1640=((τp0=τ1638.length),true))&&((τp0===1)&&((τp1=τ1638[0]),(τp1==="void")))))){return ["data"];}else{if((τ1640&&((τp0>=1)&&(((τp1=τ1638[0]),(τp1==="multi"))&&((args=τ1638.slice(1)),true))))){return τ1231(["data"],args);}else{if(((x=τ1638),true)){return x;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1638}));}}}}());return ["send",["symbol","Node"],["data",tags,contents]];});var var_operator=function(temp){return function(_,expr){var f=function(τ1641){var τ1642=τ1641;var τp0;var τp1;var τp0;var τp1;var τp2;var τp3;var τp4;var τ1643;var other;var τ1644=false;var τ1645=false;if(((τ1644=(τ1642 instanceof Array))&&((τ1645=((τp0=τ1642.length),true))&&((τp0===1)&&((τp1=τ1642[0]),(τp1==="void")))))){return temp;}else{if((τ1645&&((τp0===3)&&(((τp1=τ1642[0]),(τp1==="data"))&&(((τp2=τ1642[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===1)&&(((τp4=τp2[0]),(τp4==="void"))&&((τ1643=τ1642[2]),true))))))))){var τ1646=τ1643;var τp0;var τp1;var s;var τp0;var τp1;var obj;var msg;var other;var τ1647=false;var τ1648=false;if(((τ1647=(τ1646 instanceof Array))&&((τ1648=((τp0=τ1646.length),true))&&((τp0===2)&&(((τp1=τ1646[0]),(τp1==="symbol"))&&((s=τ1646[1]),true)))))){return ["send",temp,["value",s]];}else{if((τ1648&&((τp0===3)&&(((τp1=τ1646[0]),(τp1==="send"))&&((obj=τ1646[1]),true,(msg=τ1646[2]),true))))){var x=f(["data",["void"],obj]);return ["send",x,msg];}else{if(((other=τ1646),true)){return ["send",temp,other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1646}));}}}}else{if(((other=τ1642),true)){return ["send",temp,other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1642}));}}}};return f(expr);};};stdenv.register_macro("chain",function(τ1649,τ1650){var τp0;var context;var env;if(((τ1649 instanceof Array)&&(((τp0=τ1649.length),true)&&((τp0===2)&&((context=τ1649[0]),true,(env=τ1649[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var defn;var body;if(((τ1650 instanceof Array)&&(((τp0=τ1650.length),true)&&((τp0===3)&&(((τp1=τ1650[0]),(τp1==="data"))&&((defn=τ1650[1]),true,(body=τ1650[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var newenv=env.fork();var temp=gensym();var τp0;var τp1;var variable;var expr;if((((τp0=function(){var τ1651=defn;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var x;var y;var other;if(((τ1651 instanceof Array)&&(((τp0=τ1651.length),true)&&((τp0===3)&&(((τp1=τ1651[0]),(τp1==="send"))&&(((τp2=τ1651[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1651[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((x=τp6[1]),true,(y=τp6[2]),true))))))))))))))){return [y,x];}else{if(((other=τ1651),true)){return [["symbol","@"],other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1651}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((variable=τp0[0]),true,(expr=τp0[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var var_str;if(((variable instanceof Array)&&(((τp0=variable.length),true)&&((τp0===2)&&(((τp1=variable[0]),(τp1==="symbol"))&&((var_str=variable[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}newenv.register_macro(var_str,var_operator(temp));var stmts=["multi"].concat(function(){var τ1652=[];var τ1653=aslist(body);var τ1654=τ1653.length;for(var τ1655=0;(τ1655<τ1654);(τ1655++)){var τ1656=τ1653[τ1655];var x;var other;if(((x=τ1656),true)){τ1652.push(["send",["symbol",":="],["data",temp,x]]);}else{if(((other=τ1656),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1656}));}}}return τ1652;}());var v=["multi",["send",["symbol","="],["data",temp,expr]],stmts,temp];return ["done",expand([context,newenv],v)];});stdenv.register_macro("using",function(τ1657,τ1658){var τp0;var context;var env;if(((τ1657 instanceof Array)&&(((τp0=τ1657.length),true)&&((τp0===2)&&((context=τ1657[0]),true,(env=τ1657[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var defn;var body;if(((τ1658 instanceof Array)&&(((τp0=τ1658.length),true)&&((τp0===3)&&(((τp1=τ1658[0]),(τp1==="data"))&&((defn=τ1658[1]),true,(body=τ1658[2]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var newenv=env.fork();var temp=gensym();var τp0;var τp1;var variable;var expr;if((((τp0=function(){var τ1659=defn;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var x;var y;var other;if(((τ1659 instanceof Array)&&(((τp0=τ1659.length),true)&&((τp0===3)&&(((τp1=τ1659[0]),(τp1==="send"))&&(((τp2=τ1659[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="as"))&&(((τp6=τ1659[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((x=τp6[1]),true,(y=τp6[2]),true))))))))))))))){return [y,x];}else{if(((other=τ1659),true)){return [["symbol","@"],other];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1659}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((variable=τp0[0]),true,(expr=τp0[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var var_str;if(((variable instanceof Array)&&(((τp0=variable.length),true)&&((τp0===2)&&(((τp1=variable[0]),(τp1==="symbol"))&&((var_str=variable[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}newenv.register_macro(var_str,var_operator(temp));var v=["multi",["send",["symbol","="],["data",temp,expr]],body];return ["done",expand([context,newenv],v)];});stdenv.register_macro("class",function(τ1660,arg){var τp0;var context;var env;if(((τ1660 instanceof Array)&&(((τp0=τ1660.length),true)&&((τp0===2)&&((context=τ1660[0]),true,(env=τ1660[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var clsvar;var τp2;var τp3;var body;if((((τp0=function(){var τ1664=arg;var τp0;var τp1;var body;var τp0;var τp1;var name;var body;var τ1665=false;var τ1666=false;if(((τ1665=(τ1664 instanceof Array))&&((τ1666=((τp0=τ1664.length),true))&&((τp0===2)&&(((τp1=τ1664[0]),(τp1==="data"))&&((body=τ1664[1]),true)))))){return [gensym(),body];}else{if((τ1666&&((τp0===3)&&(((τp1=τ1664[0]),(τp1==="data"))&&((name=τ1664[1]),true,(body=τ1664[2]),true))))){return [name,body];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1664}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&(((clsvar=τp0[0]),true,(τp2=τp0[1]),(τp3=τ1723(aslist)(τp2)),τp3[0])&&((body=τp3[1]),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var ctors;var clauses;if((((τp0=partition(body,function(τ1667){var τ1668=τ1667;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var τp12;var τp13;var τp14;var τp15;var _;var _;var otherwise;if(((τ1668 instanceof Array)&&(((τp0=τ1668.length),true)&&((τp0===3)&&(((τp1=τ1668[0]),(τp1==="send"))&&(((τp2=τ1668[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1668[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="send"))&&(((τp12=τp9[1]),(τp12 instanceof Array))&&(((τp13=τp12.length),true)&&((τp13===2)&&(((τp14=τp12[0]),(τp14==="symbol"))&&(((τp15=τp12[1]),(τp15==="constructor"))&&((_=τp9[2]),true,(_=τp6[2]),true)))))))))))))))))))))))){return true;}else{if(((otherwise=τ1668),true)){return false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1668}));}}})),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((ctors=τp0[0]),true,(clauses=τp0[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var ctor_args;var ctor_body;if((((τp0=function(){var τ1669=ctors;var τp0;var τp0;var τ1670;var τ1671=false;var τ1672=false;if(((τ1671=(τ1669 instanceof Array))&&((τ1672=((τp0=τ1669.length),true))&&(τp0===0)))){return [["data"],[]];}else{if((τ1672&&((τp0===1)&&((τ1670=τ1669[0]),true)))){var τ1673=τ1670;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var _;var args;var τp12;var τp13;var body;if(((τ1673 instanceof Array)&&(((τp0=τ1673.length),true)&&((τp0===3)&&(((τp1=τ1673[0]),(τp1==="send"))&&(((τp2=τ1673[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1673[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="send"))&&(((_=τp9[1]),true,(args=τp9[2]),true,(τp12=τp6[2]),(τp13=τ1723(aslist)(τp12)),τp13[0])&&((body=τp13[1]),true)))))))))))))))))))){return [args,body];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1673}));}}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1669}));}}}()),(τp0 instanceof Array))&&(((τp1=τp0.length),true)&&((τp1===2)&&((ctor_args=τp0[0]),true,(ctor_body=τp0[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var selfvar=gensym();(ctor_body=function(){var prep=["send",["symbol","="],["data",selfvar,["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["send",["symbol","?"],["data",clsvar,["void"]]],["symbol","this"]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","this"]]]]];var ret=selfvar;return τ1231(["multi",prep],ctor_body,[ret]);}());var newenv=env.fork();newenv.register_macro("@",var_operator(selfvar));var defns=[];var static_defns=[];var τ1661=clauses;var τ1662=τ1661.length;for(var τ1663=0;(τ1663<τ1662);(τ1663++)){var τ1674=τ1661[τ1663];var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var body;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var τp9;var τp10;var τp11;var name;var args;var τp12;var τp13;var body;var other;var τ1675=false;var τ1676=false;var τ1677=false;var τ1678=false;var τ1679=false;var τ1680=false;var τ1681=false;var τ1682=false;if(((τ1675=(τ1674 instanceof Array))&&((τ1676=((τp0=τ1674.length),true))&&((τ1677=(τp0===3))&&((τ1678=((τp1=τ1674[0]),(τp1==="send")))&&((τ1679=((τp2=τ1674[1]),(τp2 instanceof Array)))&&((τ1680=((τp3=τp2.length),true))&&((τ1681=(τp3===2))&&((τ1682=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="static"))&&(((τp6=τ1674[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===2)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp10=τ1723(aslist)(τp9)),τp10[0])&&((body=τp10[1]),true)))))))))))))))){(static_defns=static_defns.concat(body));}else{if((τ1682&&(((τp5=τp2[1]),(τp5==="="))&&(((τp6=τ1674[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((τp9=τp6[1]),(τp9 instanceof Array))&&(((τp10=τp9.length),true)&&((τp10===3)&&(((τp11=τp9[0]),(τp11==="send"))&&(((name=τp9[1]),true,(args=τp9[2]),true,(τp12=τp6[2]),(τp13=τ1723(aslist)(τp12)),τp13[0])&&((body=τp13[1]),true))))))))))))){(name=function(){var τ1683=name;var τp0;var τp1;var _;var τp0;var τp1;var n;var τ1684=false;var τ1685=false;var τ1686=false;if(((τ1684=(τ1683 instanceof Array))&&((τ1685=((τp0=τ1683.length),true))&&((τ1686=(τp0===2))&&(((τp1=τ1683[0]),(τp1==="value"))&&((_=τ1683[1]),true)))))){return name;}else{if((τ1686&&(((τp1=τ1683[0]),(τp1==="symbol"))&&((n=τ1683[1]),true)))){return ["value",n];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1683}));}}}());defns.push(["send",["symbol",":="],["data",["send",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],name],["send",["symbol","->"],["data",args,τ1231(["multi",["send",["symbol","="],["data",selfvar,["symbol","this"]]]],body)]]]]);}else{if(((other=τ1674),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1674}));}}}}false;return ["done",expand([context,newenv],τ1231(["multi",["send",["symbol","="],["data",clsvar,["send",["symbol","->"],["data",ctor_args,ctor_body]]]],["send",["symbol","&:"],τ1231(["data",clsvar],static_defns)]],defns,[clsvar]))];});stdenv.register_macro("do",function(τ1687,τ1688){var τp0;var context;var env;if(((τ1687 instanceof Array)&&(((τp0=τ1687.length),true)&&((τp0===2)&&((context=τ1687[0]),true,(env=τ1687[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var body;if(((τ1688 instanceof Array)&&(((τp0=τ1688.length),true)&&((τp0===2)&&(((τp1=τ1688[0]),(τp1==="data"))&&(((τp2=τ1688[1]),(τp3=τ1723(aslist)(τp2)),τp3[0])&&((body=τp3[1]),true))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return τ1231(["multi"],body);});stdenv.register_macro("then",function(τ1689,τ1690){var τp0;var context;var env;if(((τ1689 instanceof Array)&&(((τp0=τ1689.length),true)&&((τp0===2)&&((context=τ1689[0]),true,(env=τ1689[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var body;if(((τ1690 instanceof Array)&&(((τp0=τ1690.length),true)&&((τp0===2)&&(((τp1=τ1690[0]),(τp1==="data"))&&(((τp2=τ1690[1]),(τp3=τ1723(aslist)(τp2)),τp3[0])&&((body=τp3[1]),true))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}return τ1231(["multi"],body);});var group=function(xs,classifier){var groups=[];var curr=[];var newgroup=function(){if((curr.length>0)){groups.push(curr);}else{null;}return (curr=[]);};var τ1691=xs;var τ1692=τ1691.length;for(var τ1693=0;(τ1693<τ1692);(τ1693++)){var τ1694=τ1691[τ1693];var x;var other;if(((x=τ1694),true)){if(classifier(x)){newgroup();}else{null;}curr.push(x);}else{if(((other=τ1694),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1694}));}}}false;newgroup();return groups;};var blocktest_wrap=function(label,expr,accumulator){var value=gensym();return ["multi",["send",["symbol","="],["data",value,["send",["symbol","!!"],["data",["multi",["send",["symbol","|>"],["data",expr,["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","true"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","success"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","false"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","failure"]]],["data",["symbol","x"]]]]]]]]],["send",["symbol","->"],["data",["symbol","__err"],["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","__err"]]]]]]]]],["send",["send",accumulator,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","test_result"]]],["data",label,value]]]]];};var blocktest_mac=function(label,tests,acc){var ok=gensym();var stmts=[];stmts.push(["send",["symbol","="],["data",ok,["symbol","true"]]]);var τ1695=tests;var τ1696=τ1695.length;for(var τ1697=0;(τ1697<τ1696);(τ1697++)){var τ1698=τ1695[τ1697];var stmt;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var _;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var new_label;var τp9;var τp10;var new_tests;var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var sources;var τp9;var τp10;var clauses;var expr;var other;var τ1699=false;var τ1700=false;var τ1701=false;var τ1702=false;var τ1703=false;var τ1704=false;var τ1705=false;var τ1706=false;if((((stmt=τ1698),true,(τ1698 instanceof Array))&&(((τp0=τ1698.length),true)&&((τp0===3)&&(((τp1=τ1698[0]),(τp1==="send"))&&(((τp2=τ1698[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="do"))&&((_=τ1698[2]),true))))))))))){stmts.push(["send",["symbol","!!"],["data",stmt,["send",["symbol","->"],["data",["symbol","__err"],["multi",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["symbol","__err"]]]]],["send",["symbol",":="],["data",ok,["symbol","false"]]]]]]]]);}else{if(((τ1699=(τ1698 instanceof Array))&&((τ1700=((τp0=τ1698.length),true))&&((τ1701=(τp0===3))&&((τ1702=((τp1=τ1698[0]),(τp1==="send")))&&((τ1703=((τp2=τ1698[1]),(τp2 instanceof Array)))&&((τ1704=((τp3=τp2.length),true))&&((τ1705=(τp3===2))&&((τ1706=((τp4=τp2[0]),(τp4==="symbol")))&&(((τp5=τp2[1]),(τp5==="=>"))&&(((τp6=τ1698[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((new_label=τp6[1]),true,(τp9=τp6[2]),(τp10=τ1723(aslist)(τp9)),τp10[0])&&((new_tests=τp10[1]),true)))))))))))))))){var labv=gensym();stmts.push(["multi",["send",["symbol","="],["data",labv,["send",["symbol","++"],["data",label,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],new_label]]]]],τ1231(["multi"],blocktest_mac(labv,new_tests,acc))]);}else{if((τ1706&&(((τp5=τp2[1]),(τp5==="each"))&&(((τp6=τ1698[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&(((sources=τp6[1]),true,(τp9=τp6[2]),(τp10=τ1723(aslist)(τp9)),τp10[0])&&((clauses=τp10[1]),true))))))))){var loopvar=gensym();(clauses=function(){var τ1707=[];var τ1708=clauses;var τ1709=τ1708.length;for(var τ1710=0;(τ1710<τ1709);(τ1710++)){var τ1711=τ1708[τ1710];var clause;var other;if(((clause=τ1711),true)){τ1707.push(function(){var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var τp6;var τp7;var τp8;var lhs;var rhs;if(((clause instanceof Array)&&(((τp0=clause.length),true)&&((τp0===3)&&(((τp1=clause[0]),(τp1==="send"))&&(((τp2=clause[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===2)&&(((τp4=τp2[0]),(τp4==="symbol"))&&(((τp5=τp2[1]),(τp5==="->"))&&(((τp6=clause[2]),(τp6 instanceof Array))&&(((τp7=τp6.length),true)&&((τp7===3)&&(((τp8=τp6[0]),(τp8==="data"))&&((lhs=τp6[1]),true,(rhs=τp6[2]),true))))))))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var x=blocktest_mac(["send",["symbol","++"],["data",label,["data",loopvar]]],τ1723(aslist)(rhs)[1],acc);return ["send",["symbol","->"],["data",lhs,τ1231(["multi"],x)]];}());}else{if(((other=τ1711),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1711}));}}}return τ1707;}());clauses.push(["send",["symbol","->"],["data",["symbol","__no"],["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["value","No handler for test case"],["symbol","__no"]]]]]]]);stmts.push(build_each(sources,τ1231(["multi"],clauses),["multi"],["multi"],loopvar));}else{if(((expr=τ1698),true)){stmts.push(["send",["symbol","if"],["data",ok,["multi",["send",["symbol","then"],["data",blocktest_wrap(label,expr,acc)]],["send",["symbol","else"],["data",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","aborted"]]],["data",label,["send",["symbol","'"],["data",["void"],expr]]]]]]]]]]]);}else{if(((other=τ1698),true)){false;}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1698}));}}}}}}false;stmts.push(acc);return stmts;};stdenv.register_macro("blocktest",function(τ1712,τ1713){var τp0;var context;var env;if(((τ1712 instanceof Array)&&(((τp0=τ1712.length),true)&&((τp0===2)&&((context=τ1712[0]),true,(env=τ1712[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var args;if(((τ1713 instanceof Array)&&(((τp0=τ1713.length),true)&&((τp0>=1)&&(((τp1=τ1713[0]),(τp1==="data"))&&((args=τ1713.slice(1)),true)))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var acc=gensym();var labv=gensym();var stmts=["multi",["send",["symbol","="],["data",acc,["data"]]]];var rval=function(){var τ1714=args;var τp0;var τp1;var τp2;var tests;var τp0;var labels;var τp1;var τp2;var tests;var τ1715=false;var τ1716=false;if(((τ1715=(τ1714 instanceof Array))&&((τ1716=((τp0=τ1714.length),true))&&((τp0===1)&&(((τp1=τ1714[0]),(τp2=τ1723(aslist)(τp1)),τp2[0])&&((tests=τp2[1]),true)))))){stmts.push(["send",["symbol","="],["data",labv,["data"]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{if((τ1716&&((τp0===2)&&(((labels=τ1714[0]),true,(τp1=τ1714[1]),(τp2=τ1723(aslist)(τp1)),τp2[0])&&((tests=τp2[1]),true))))){stmts.push(["send",["symbol","="],["data",labv,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],labels]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1714}));}}}();return rval;});stdenv.register_macro("macro",function(τ1717,expr){var τp0;var context;var env;if(((τ1717 instanceof Array)&&(((τp0=τ1717.length),true)&&((τp0===2)&&((context=τ1717[0]),true,(env=τ1717[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τp0;var τp1;var τp2;var τp3;var τp4;var τp5;var name;var τp6;var τp7;var sname;var args;var body;if(((expr instanceof Array)&&(((τp0=expr.length),true)&&((τp0===3)&&(((τp1=expr[0]),(τp1==="data"))&&(((τp2=expr[1]),(τp2 instanceof Array))&&(((τp3=τp2.length),true)&&((τp3===3)&&(((τp4=τp2[0]),(τp4==="send"))&&(((τp5=τp2[1]),(name=τp5),true,(τp5 instanceof Array))&&(((τp6=τp5.length),true)&&((τp6===2)&&(((τp7=τp5[0]),(τp7==="symbol"))&&((sname=τp5[1]),true,(args=τp2[2]),true,(body=expr[2]),true)))))))))))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var fn=["send",["symbol","->"],["data",args,body]];var code=generate_from_ast(fn);var efn=eval((("("+code.slice(0,(-1)))+")"));env.register_macro(sname,efn);return ["value",undefined];});stdenv.register_macro("match",function(τ1719,τ1718){var τp0;var context;var env;if(((τ1719 instanceof Array)&&(((τp0=τ1719.length),true)&&((τp0===2)&&((context=τ1719[0]),true,(env=τ1719[1]),true))))){undefined;}else{throw τ1220(["match"]).create("The value failed to match");}var τ1720=τ1718;var τp0;var τp1;var τp0;var τp1;var obj;var clauses;var τp0;var τp1;var clauses;var τ1721=false;var τ1722=false;if(((τ1721=(τ1720 instanceof Array))&&((τ1722=((τp0=τ1720.length),true))&&((τp0===1)&&((τp1=τ1720[0]),(τp1==="void")))))){return ["placeholder"];}else{if((τ1722&&((τp0===3)&&(((τp1=τ1720[0]),(τp1==="data"))&&((obj=τ1720[1]),true,(clauses=τ1720[2]),true))))){return ["send",["symbol","|>"],["data",obj,clauses]];}else{if((τ1722&&((τp0===2)&&(((τp1=τ1720[0]),(τp1==="data"))&&((clauses=τ1720[1]),true))))){return ["send",["symbol","|>"],["data",["value",null],clauses]];}else{throw τ1220(["match"]).create("Could not find a match",({"value":τ1720}));}}}});var stdprelude=Embedded(["multi",["send",["symbol","="],["data",["send",["symbol","send"],["data",["symbol","obj"],["send",["symbol","and"],["data",["symbol","msg"],["symbol","match"]]]]],["multi",["send",["symbol","->"],["data",["send",["symbol","or"],["data",["send",["symbol","?"],["data",["symbol","String"],["void"]]],["send",["symbol","?"],["data",["symbol","Number"],["void"]]]]],["send",["symbol","___js_fetch"],["data",["symbol","obj"],["symbol","msg"]]]]],["send",["symbol","->"],["data",["symbol","other"],["send",["send",["symbol","obj"],["value","::send"]],["data",["symbol","msg"]]]]]]]],["send",["symbol",":="],["data",["send",["symbol","Array"],["value",":::project"]],["send",["symbol","->"],["data",["data",["send",["symbol","and"],["data",["symbol","value"],["symbol","match"]]]],["multi",["send",["symbol","->"],["data",["send",["symbol","?"],["data",["symbol","Array"],["void"]]],["data",["symbol","true"],["symbol","value"]]]],["send",["symbol","->"],["data",["symbol","_"],["data",["symbol","true"],["data",["symbol","value"]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["send",["symbol","return"],["symbol","false"]]]]]],["symbol","true"]]]],["send",["symbol","else"],["data",["symbol","false"]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","if"],["data",["send",["symbol","instanceof"],["data",["symbol","value"],["symbol","Array"]]],["multi",["send",["symbol","then"],["data",["multi",["send",["symbol","for"],["data",["multi",["send",["symbol","="],["data",["symbol","i"],["value",0]]],["send",["symbol","<"],["data",["symbol","i"],["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["send",["symbol","++"],["data",["symbol","i"],["void"]]]],["send",["symbol","if"],["data",["send",["symbol","!="],["data",["send",["symbol","this"],["symbol","i"]],["send",["symbol","value"],["symbol","i"]]]],["multi",["send",["symbol","="],["data",["symbol","rval"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["value",0]]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","value"]]],["send",["symbol","return"],["data",["symbol","true"],["symbol","rval"]]]]]]]],["data",["symbol","true"],["symbol","value"]]]]],["send",["symbol","else"],["data",["multi",["send",["symbol","="],["data",["symbol","rval"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["value",0]]]]],["send",["send",["symbol","rval"],["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["symbol","value"]]],["data",["symbol","true"],["symbol","rval"]]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::deconstruct"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["data",["symbol","true"],["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["data",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::serialize_ast"]],["send",["symbol","->"],["data",["data"],["send",["send",["symbol","#"],["data",["void"],["symbol","array"]]],["data",["send",["symbol","*"],["data",["void"],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","map"]]]],["data",["symbol","___serialize_ast"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::check"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::project"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["symbol","m"]],["data",["symbol","false"],["symbol","null"]]]],["send",["symbol","->"],["data",["symbol","m"],["data",["symbol","true"],["symbol","m"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","RegExp"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value",":::deconstruct"]],["send",["symbol","->"],["data",["data",["symbol","value"]],["send",["symbol","match"],["data",["send",["send",["symbol","value"],["send",["symbol","."],["data",["void"],["symbol","match"]]]],["data",["symbol","this"]]],["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","null"],["void"]]],["symbol","m"]],["data",["symbol","false"],["symbol","null"]]]],["send",["symbol","->"],["data",["symbol","m"],["data",["symbol","true"],["symbol","m"]]]]]]]]]]],["send",["symbol",":="],["data",["send",["send",["symbol","Function"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["value","::send"]],["send",["symbol","->"],["data",["data",["symbol","args"]],["send",["send",["symbol","this"],["send",["symbol","."],["data",["void"],["symbol","apply"]]]],["data",["symbol","this"],["symbol","args"]]]]]]]]);(exports["stdenv"]=stdenv);(exports["stdprelude"]=stdprelude);
