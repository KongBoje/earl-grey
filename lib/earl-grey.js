var τ11=function(type$150){var f$153;(f$153=type$150["::check"]);;if((f$153===(void 0))){return function(value$158){return (value$158 instanceof type$150);};}else{return function(value$161){return f$153.call(type$150,value$161);};}};
var τ12=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var τ13=function(temp$163$165){var ph$169;(ph$169=temp$163$165);;var m$167$174;(m$167$174=ph$169);;var bridge$168$179;var x$183;(bridge$168$179=m$167$174);if((((typeof(bridge$168$179)==="string")&&((x$183=bridge$168$179),true))||((typeof(bridge$168$179)==="number")&&((x$183=bridge$168$179),true)))){return ["value",x$183];}else{var other$190;(other$190=m$167$174);return other$190["::serialize_ast"]();}};
var send$12;(send$12=function(obj$17,temp$15$18){var ph$22;var msg$23;var t0$25;(t0$25=temp$15$18);(msg$23=t0$25);(ph$22=t0$25);;var m$20$29;(m$20$29=ph$22);;var bridge$21$34;(bridge$21$34=m$20$29);if(((typeof(bridge$21$34)==="string")||(typeof(bridge$21$34)==="number"))){return obj$17[msg$23];}else{var other$42;(other$42=m$20$29);return obj$17["::send"](msg$23);}});;(Array[":::project"]=function(temp$45$47){var ph$50;var value$51;var t0$53;(t0$53=temp$45$47);(value$51=t0$53);(ph$50=t0$53);;var m$49$57;(m$49$57=ph$50);;if(τ11(Array)(m$49$57)){return [true,value$51];}else{m$49$57;return [true,[value$51]];}});(Array.prototype["::check"]=function(value$71){if((value$71 instanceof Array)){var i$76;(i$76=0);;$74:for(;(i$76<this.length);(i$76++)){if((τ12(this,i$76)!==τ12(value$71,i$76))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$85){if((value$85 instanceof Array)){var i$90;(i$90=0);;$88:for(;(i$90<this.length);(i$90++)){if((τ12(this,i$90)!==τ12(value$85,i$90))){return [true,[value$85]];}}return [true,value$85.slice(this.length)];}else{return [true,[value$85]];}});(Array.prototype[":::deconstruct"]=function(value$99){return [true,value$99.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map(τ13));});(RegExp.prototype["::check"]=function(value$104){return value$104.match(this);});(RegExp.prototype[":::project"]=function(value$107){var m$109$111;(m$109$111=value$107.match(this));;var m$119;if((m$109$111===null)){(m$119=m$109$111);return [false,null];}else{var m$124;(m$124=m$109$111);return [true,m$124];}});(RegExp.prototype[":::deconstruct"]=function(value$127){var m$129$131;(m$129$131=value$127.match(this));;var m$139;if((m$129$131===null)){(m$139=m$129$131);return [false,null];}else{var m$144;(m$144=m$129$131);return [true,m$144];}});(Function.prototype["::send"]=function(args$147){return this.apply(this,args$147);});
var τ14=function(dest$392,values$393){var k$398;(k$398=null);$396:for(k$398 in values$393){if(values$393.hasOwnProperty(k$398)){(dest$392[k$398]=values$393[k$398]);}}return dest$392;};var $194$200;var Source$201;var Location$202;var highlight_locations$203;var $195$204;var tokenize$205;var $196$206;var parse$207;var $197$208;var expand$209;var $198$210;var stdenv$211;var stdprelude$212;var $199$213;var translate$214;var Translator$215;var e2$216;var opt$217;var generate_from_ast$218;var generate$219;var generate2$220;var Generator$221;var Generator2$222;($194$200=require("./location"));;(Source$201=$194$200.Source);;(Location$202=$194$200.Location);;(highlight_locations$203=$194$200.highlight_locations);;($195$204=require("./lex"));;(tokenize$205=$195$204.tokenize);;($196$206=require("./parse"));;(parse$207=$196$206.parse);;($197$208=require("./expand"));;(expand$209=$197$208.expand);;($198$210=require("./stdenv"));;(stdenv$211=$198$210.stdenv);;(stdprelude$212=$198$210.stdprelude);;($199$213=require("./translate-js"));;(translate$214=$199$213.translate);;(Translator$215=$199$213.Translator);;(e2$216=require("./stdenv2"));;(opt$217=require("./opt"));;(generate_from_ast$218=function(ast$280){var ex$283;(ex$283=expand$209(["top",stdenv$211.fork()],["multi",ast$280]));;return translate$214(ex$283,"stmt");});;(generate$219=function(source$291,prelude$292){var t$295;var p$296;var ex$297;(t$295=tokenize$205(source$291));;(p$296=parse$207(t$295));;(ex$297=expand$209(["top",stdenv$211.fork()],["multi",p$296]));;return ((prelude$292||"")+translate$214(ex$297,"stmt"));});;(generate2$220=function(source$311){return Generator2$222().generate(source$311);});;(Generator$221=function(){var it$0$319;(it$0$319=function(){if((!τ11(Generator$221)(this))){return Object.create(Generator$221.prototype);}else{return this;}}());;(it$0$319["tr"]=Translator$215(stdprelude$212));return it$0$319;});;(Generator$221.prototype["generate"]=function(source$328){var t$336;var p$337;var ex$338;var rval$339;var it$0$331;(it$0$331=this);;(t$336=tokenize$205(source$328));;(p$337=parse$207(t$336));;(ex$338=expand$209(["top",stdenv$211.fork()],["multi",p$337]));;(rval$339=it$0$331.tr.translate(ex$338,"stmt"));;return (it$0$331.tr.dump_store()+rval$339);});τ14(Generator$221,({}));Generator$221;(Generator2$222=function(){var it$0$357;(it$0$357=function(){if((!τ11(Generator2$222)(this))){return Object.create(Generator2$222.prototype);}else{return this;}}());;(it$0$357["tr"]=Translator$215(e2$216.stdprelude));return it$0$357;});;(Generator2$222.prototype["generate"]=function(source$366){var t$374;var p$375;var ex$376;var rval$377;var it$0$369;(it$0$369=this);;(t$374=tokenize$205(source$366));;(p$375=parse$207(t$374));;(ex$376=e2$216.expand(["top"],e2$216.topscope,e2$216.bind_ast(["multi",p$375],e2$216.stdenv.fork())));;(ex$376=opt$217.hoist(ex$376));(rval$377=it$0$369.tr.translate(ex$376,"stmt"));;return (it$0$369.tr.dump_store()+rval$377);});τ14(Generator2$222,({}));Generator2$222;(exports["Source"]=Source$201);(exports["Location"]=Location$202);(exports["highlight_locations"]=highlight_locations$203);(exports["tokenize"]=tokenize$205);(exports["parse"]=parse$207);(exports["generate_from_ast"]=generate_from_ast$218);(exports["generate"]=generate$219);(exports["Generator"]=Generator$221);(exports["Generator2"]=Generator2$222);(exports["generate2"]=generate2$220);
