var items=function(obj){var results=[];for(k in obj){results.push([k,send(obj,k)]);}return results;};var enumerate=function(arr){var results=[];var l=arr.length;for(var i=0;(i<l);(i++)){results.push([i,send(arr,i)]);}return results;};var send=function(obj,msg){var __t855=msg;var other;if(((typeof(__t855)==="string")||(typeof(__t855)==="number"))){return obj[msg];}else{if(((other=__t855),true)){return obj["::send"](msg);}else{throw ["Could not find a match",__t855];}}};(Function.prototype["::send"]=function(args){return this.apply(this,args);});var augment=function(dest,values){for(k in values){(dest[k]=send(values,k));}return dest;};var patch_array=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};var range=function(from,to){var rval=[];for(var i=from;(i<=to);(i++)){rval.push(i);}return rval;};var StructFactory=function(name){var make=function(){var r=Array.prototype.slice.call(arguments,0);(r["#"]=name);return r;};(make[":::project"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return [true,value];}else{if(true){return [true,make(value)];}else{return false;}}});(make["::check"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return true;}else{if(true){return false;}else{return false;}}});(make[":::deconstruct"]=function(value){if(((value instanceof Array)&&(value["#"]===name))){return [true,value.slice(0)];}else{if(true){return [false,false];}else{return false;}}});return make;};var Struct=function(name){var r=Array.prototype.slice.call(arguments,1);(r["#"]=name);return r;};(Struct["::check"]=function(value){if((value instanceof Array)){return (value["#"]!==undefined);}else{if(true){return false;}else{return false;}}});(Struct[":::deconstruct"]=function(value){if(((value instanceof Array)&&(value["#"]!==undefined))){return [true,[value["#"]].concat(value.slice(0))];}else{if(true){return [false,null];}else{return false;}}});var pr_terminus=function(node){var r=HTML(node,"span");var pre=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">");var post=("</div>"+String.fromCharCode(7));return console.log(((pre+r)+post));};var pr=function(__t856,r){var __t857=__t856;var n;var x;if((___checker(Node)(__t857)&&((n=__t857),true))){return pr_terminus(n);}else{if(((x=__t857),true)){return pr_terminus((r||repr)(x));}else{throw ["Could not find a match",__t857];}}};var repr=function(__t859,__t860){var x;var __t858;(x=__t859);true;(__t858=__t859);var recur;var recur;if(((___checker(Function)(__t860)&&((recur=__t860),true))||((recur=repr),true))){(void 0);}else{throw "a condition failed";}var __t861=__t858;var __tp0;var __tp1;var __tp2;var tag;var entries;var entries;var other;if((__t861===true)){return Node(["special","true"],"true");}else{if((__t861===false)){return Node(["special","false"],"false");}else{if((__t861===null)){return Node(["special","nil"],"null");}else{if((__t861===(void 0))){return Node(["special","nil"],"undefined");}else{if((typeof(__t861)==="number")){return Node(["num"],String(x));}else{if((typeof(__t861)==="string")){return Node(["str"],x);}else{if((___checker(Struct)(__t861)&&(((__tp0=___deconstructor(Struct)(__t861)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2>=1)&&((tag=__tp1[0]),true,(entries=__tp1.slice(1)),true)))))){return Node(["struct"],[Node(["sym"],tag),Node(["sequence"],function(){var __t862=[];var __t863=entries;var __t864=__t863.length;for(var __t865=0;(__t865<__t864);(__t865++)){var __t866=__t863[__t865];var x;var other;if(((x=__t866),true)){__t862.push(recur(x,repr));}else{if(((other=__t866),true)){false;}else{throw ["Could not find a match",__t866];}}}return __t862;}())]);}else{if((___checker(Array)(__t861)&&((entries=__t861),true))){return Node(["sequence"],function(){var __t867=[];var __t868=entries;var __t869=__t868.length;for(var __t870=0;(__t870<__t869);(__t870++)){var __t871=__t868[__t870];var x;var other;if(((x=__t871),true)){__t867.push(recur(x,repr));}else{if(((other=__t871),true)){false;}else{throw ["Could not find a match",__t871];}}}return __t867;}());}else{if(x["::repr"]){return x["::repr"](recur);}else{if((Object.getPrototypeOf(x)===Object.prototype)){return Node(["table"],function(){var __t872=[];var __t873=items(x);var __t874=__t873.length;for(var __t875=0;(__t875<__t874);(__t875++)){var __t876=__t873[__t875];var __tp0;var k;var v;var other;if(((__t876 instanceof Array)&&((__t876["#"]===undefined)&&(((__tp0=__t876.length),true)&&((__tp0===2)&&((k=__t876[0]),true,(v=__t876[1]),true)))))){__t872.push(Node(["pairing"],[recur(k,repr),recur(v,repr)]));}else{if(((other=__t876),true)){false;}else{throw ["Could not find a match",__t876];}}}return __t872;}());}else{if(((other=__t861),true)){return Node(["unknown"],other.toString());}else{throw ["Could not find a match",__t861];}}}}}}}}}}}};var ___checker=function(type){var __t877=type["::check"];var f;if((__t877===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=__t877),true)){return function(value){return f.call(type,value);};}else{throw ["Could not find a match",__t877];}}};var checker=___checker;var ___projector=function(type){return function(value){var __t878=type[":::project"];var f;if((__t878===(void 0))){var __t879=type["::project"];var f;if((__t879===(void 0))){return [true,type(value)];}else{if(((f=__t879),true)){var __t881;try{(__t881=[true,f(value)]);}catch(__t880){(__t881=[false,null]);}return __t881;}else{throw ["Could not find a match",__t879];}}}else{if(((f=__t878),true)){return f.call(type,value);}else{throw ["Could not find a match",__t878];}}};};var projector=___projector;var ___deconstructor=function(type){return function(value){var __t882=type[":::deconstruct"];var f;if((__t882===(void 0))){var __t883=type["::deconstruct"];var f;if((__t883===(void 0))){if((value instanceof Array)){return [true,value];}else{if(true){return [false,null];}else{return false;}}}else{if(((f=__t883),true)){var __t885;try{(__t885=[true,f.call(type,value)]);}catch(__t884){(__t885=[false,null]);}return __t885;}else{throw ["Could not find a match",__t883];}}}else{if(((f=__t882),true)){return f.call(type,value);}else{throw ["Could not find a match",__t882];}}};};var deconstructor=___deconstructor;(Array[":::project"]=function(value){var __t886=value;var _;if(___checker(Array)(__t886)){return [true,value];}else{if(((_=__t886),true)){return [true,[value]];}else{throw ["Could not find a match",__t886];}}});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var __t887=value.match(this);var m;var m;if(((__t887===null)&&((m=__t887),true))){return [false,null];}else{if(((m=__t887),true)){return [true,m];}else{throw ["Could not find a match",__t887];}}});(RegExp.prototype[":::deconstruct"]=function(value){var __t888=value.match(this);var m;var m;if(((__t888===null)&&((m=__t888),true))){return [false,null];}else{if(((m=__t888),true)){return [true,m];}else{throw ["Could not find a match",__t888];}}});var Node=function(__t843,__t844){var __tp0;var classes;if((((__tp0=___projector(Array)(__t843)),__tp0[0])&&((classes=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var __tp0;var children;if((((__tp0=___projector(Array)(__t844)),__tp0[0])&&((children=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var __t842=function(){if((!___checker(Node)(this))){return Object.create(Node.prototype);}else{return this;}}();(__t842["classes"]=classes.sort());(__t842["children"]=children);return __t842;};augment(Node,({"::check":function(x){return ((x&&x.classes)&&x.children);},"::deconstruct":function(x){return [x.classes,x.children];}}));(Node.prototype["::check"]=function(n){var __t842=this;var __t845=__t842.classes;var __t846=__t845.length;for(var __t847=0;(__t847<__t846);(__t847++)){var __t848=__t845[__t847];var c;var other;if(((c=__t848),true,(n.classes.indexOf(c)===(-1)))){return false;}else{if(((other=__t848),true)){false;}else{throw ["Could not find a match",__t848];}}}false;return true;});Node;var escape_html=function(__t889){var __tp0;var s;if((((__tp0=[true,String(__t889)]),__tp0[0])&&((s=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var repl=({"&":"&amp;","<":"&lt;",">":"&gt;"});return s.replace(RegExp("[&<>]","g"),function(x){return send(repl,x);});};var quotify=function(__t890){var __tp0;var s;if((((__tp0=[true,String(__t890)]),__tp0[0])&&((s=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}return s.replace(RegExp("[\"\\\\]","g"),function(x){return ("\\"+x);});};var HTML=function(__t891,default_tag){var __t892=__t891;var s;var children;var __tp0;var __tp1;var __tp2;var tags;var children;var other;if(((typeof(__t892)==="string")&&((s=__t892),true))){return escape_html(s);}else{if((___checker(Array)(__t892)&&((children=__t892),true))){return function(){var __t893=[];var __t894=children;var __t895=__t894.length;for(var __t896=0;(__t896<__t895);(__t896++)){var __t897=__t894[__t896];var child;var other;if(((child=__t897),true)){__t893.push(HTML(child,default_tag));}else{if(((other=__t897),true)){false;}else{throw ["Could not find a match",__t897];}}}return __t893;}().join("");}else{if((___checker(Node)(__t892)&&(((__tp0=___deconstructor(Node)(__t892)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2===2)&&((tags=__tp1[0]),true,(children=__tp1[1]),true)))))){var tag=(default_tag||"span");var classes=[];var id=null;var kv=[];var sub=[];var __t898=tags;var __t899=__t898.length;for(var __t900=0;(__t900<__t899);(__t900++)){var __t902=__t898[__t900];var __tp0;var __tp1;var __tp2;var k;var v;var __tp0;var __tp1;var __tp2;var k;var __tp0;var __tp1;var __tp2;var _;var m;var __tp0;var __tp1;var __tp2;var _;var m;var s;var other;var __t903=false;var __t904=false;var __t905=false;if(((__t903=(__t902["#"]==="assoc"))&&((__t904=((__tp0=[true,__t902]),__tp0[0]))&&((__t905=((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true))&&((__tp2===2)&&((k=__tp1[0]),true,(v=__tp1[1]),true)))))){kv.push([k,v]);}else{if((__t905&&((__tp2===1)&&((k=__tp1[0]),true)))){kv.push([k,undefined]);}else{if((___checker(RegExp("(?:^\\+((?:.*)))",""))(__t902)&&(((__tp0=___deconstructor(RegExp("(?:^\\+((?:.*)))",""))(__t902)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2===2)&&((_=__tp1[0]),true,(m=__tp1[1]),true)))))){(tag=m);}else{if((___checker(RegExp("(?:^#((?:.*)))",""))(__t902)&&(((__tp0=___deconstructor(RegExp("(?:^#((?:.*)))",""))(__t902)),__tp0[0])&&(((__tp1=__tp0[1]),true,(__tp2=__tp1.length),true)&&((__tp2===2)&&((_=__tp1[0]),true,(m=__tp1[1]),true)))))){(id=m);}else{if(((typeof(__t902)==="string")&&((s=__t902),true))){classes.push(s);}else{if(((other=__t902),true)){false;}else{throw ["Could not find a match",__t902];}}}}}}}false;var accum=function(){if((tag==="raw")){return [];}else{return ["<",tag];}}();if(id){(accum=accum.concat(" id=\"",id,"\""));}else{false;}if(classes.length){(accum=accum.concat(" class=\"",quotify(classes.join(" ")),"\""));}else{false;}if(kv){var __t906=[];var __t907=kv;var __t908=__t907.length;for(var __t909=0;(__t909<__t908);(__t909++)){var __t910=__t907[__t909];var __tp0;var k;var v;var other;if(((__t910 instanceof Array)&&((__t910["#"]===undefined)&&(((__tp0=__t910.length),true)&&((__tp0===2)&&((k=__t910[0]),true,(v=__t910[1]),true)))))){__t906.push((accum=accum.concat(function(){if((v!==null)){return [" ",k,"=\"",quotify(v),"\""];}else{return [" ",k];}}())));}else{if(((other=__t910),true)){false;}else{throw ["Could not find a match",__t910];}}}__t906;}else{false;}(children=function(){var __t911=tag;var other;if((__t911==="raw")){var __t912=[];var __t913=children;var __t914=__t913.length;for(var __t915=0;(__t915<__t914);(__t915++)){var __t916=__t913[__t915];var s;var c;var other;if(((typeof(__t916)==="string")&&((s=__t916),true))){__t912.push(s);}else{if(((c=__t916),true)){__t912.push(HTML(c,default_tag));}else{if(((other=__t916),true)){false;}else{throw ["Could not find a match",__t916];}}}}return __t912;}else{if(((other=__t911),true)){var __t917=[];var __t918=children;var __t919=__t918.length;for(var __t920=0;(__t920<__t919);(__t920++)){var __t921=__t918[__t920];var c;var other;if(((c=__t921),true)){__t917.push(HTML(c,default_tag));}else{if(((other=__t921),true)){false;}else{throw ["Could not find a match",__t921];}}}return __t917;}else{throw ["Could not find a match",__t911];}}}());var __t901=tag;var other;if((__t901==="raw")){return accum.concat(children).join("");}else{if(((other=__t901),true)){var x=patch_array([">"],children,["</",tag,">"]);return accum.concat(x).join("");}else{throw ["Could not find a match",__t901];}}}else{if(((other=__t892),true)){return HTML([true,String(other)][1],default_tag);}else{throw ["Could not find a match",__t892];}}}}};var ErrorFactory=function(tags){var __t849=function(){if((!___checker(ErrorFactory)(this))){return Object.create(ErrorFactory.prototype);}else{return this;}}();(__t849["tags"]=tags);return __t849;};augment(ErrorFactory,[]);(ErrorFactory.prototype["create"]=function(){var __t850=Array.prototype.slice.call(arguments,0);var __tp0;var message;var args;if(((__t850 instanceof Array)&&((__t850["#"]===undefined)&&(((__tp0=__t850.length),true)&&((__tp0>=0)&&((message=function(){if((0>=__tp0)){return "";}else{return __t850[0];}}()),true,(args=__t850.slice(1)),true)))))){var __t849=this;var e=Error(message);(e["::tags"]=__t849.tags);(e["args"]=args);(e["name"]=["E"].concat(__t849.tags).join("."));return e;}else{throw ["Could not find a match",__t850];}});(ErrorFactory.prototype["::check"]=function(e){var __t849=this;if(((!e)||(!___checker(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var __t851=__t849.tags;var __t852=__t851.length;for(var __t853=0;(__t853<__t852);(__t853++)){var __t854=__t851[__t853];var tag;var other;if(((tag=__t854),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=__t854),true)){false;}else{throw ["Could not find a match",__t854];}}}false;return true;});(ErrorFactory.prototype["::deconstruct"]=function(e){var __t849=this;return e.args;});ErrorFactory;
var binsearch=function(xs,x){var lo=0;var hi=(xs.length-1);while((lo<=hi)){var mid=(lo+((hi-lo)>>1));var v=send(xs,mid);var __t15=send(xs,mid);var _;if((__t15<x)){(lo=(mid+1));}else{if((__t15>x)){(hi=(mid-1));}else{if(((_=__t15),true)){return (mid+1);}else{throw ["Could not find a match",__t15];}}}}return lo;};var __lt____lt____colon__=function(x,y){(x["location"]=function(){if(((!y)||___checker(Location)(y))){return y;}else{return y.location;}}());return x;};var __plus____plus____colon__=function(x,y){(x=function(){if(((!x)||___checker(Location)(x))){return x;}else{return x.location;}}());(y=function(){if(((!y)||___checker(Location)(y))){return y;}else{return y.location;}}());var __t17;try{(__t17=merge_locations([x,y]));}catch(__t16){(__t17=undefined);}return __t17;};var Source=function(){var __t1=Array.prototype.slice.call(arguments,0);var __tp0;var text;var url;if(((__t1 instanceof Array)&&((__t1["#"]===undefined)&&(((__tp0=__t1.length),true)&&(((__tp0>=1)&&(__tp0<=2))&&((text=__t1[0]),true,(url=function(){if((1>=__tp0)){return false;}else{return __t1[1];}}()),true)))))){var __t0=function(){if((!___checker(Source)(this))){return Object.create(Source.prototype);}else{return this;}}();(__t0["text"]=text);(__t0["url"]=url);(__t0["counts"]=[]);var curr=0;var __t2=text.split("\n");var __t3=__t2.length;for(var __t4=0;(__t4<__t3);(__t4++)){var __t5=__t2[__t4];var line;var other;if(((line=__t5),true)){__t0.counts.push(curr);(curr=(curr+(line.length+1)));}else{if(((other=__t5),true)){false;}else{throw ["Could not find a match",__t5];}}}false;__t0.counts.push(curr);(__t0["nlines"]=(__t0.counts.length-1));return __t0;}else{throw ["Could not find a match",__t1];}};augment(Source,[]);(Source.prototype["linecol"]=function(pos){var __t0=this;var line=binsearch(__t0.counts,pos);var col=(pos-send(__t0.counts,(line-1)));return [line,col];});(Source.prototype["highlight_lines"]=function(l1,l2,spans){var __t0=this;return highlight_lines(__t0.text,__t0.counts,[(l1-1),(l2-1)],spans);});Source;var Location=function(source,start,end){var __t6=function(){if((!___checker(Location)(this))){return Object.create(Location.prototype);}else{return this;}}();(__t6["source"]=(source||Source("",null)));(__t6["start"]=start);(__t6["end"]=end);return __t6;};augment(Location,[]);(Location.prototype["text"]=function(){var __t6=this;return __t6.source.text.slice(__t6.start,__t6.end);});(Location.prototype["linerange"]=function(){var __t6=this;var __t7=__t6.linecol();var __tp0;var __tp1;var __tp2;var l1;var _;var __t8;if(((__t7 instanceof Array)&&((__t7["#"]===undefined)&&(((__tp0=__t7.length),true)&&((__tp0===2)&&(((__tp1=__t7[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===2)&&((l1=__tp1[0]),true,(_=__tp1[1]),true,(__t8=__t7[1]),true)))))))))){var __t9=__t8;var __tp0;var l2;var _;if((__t9===null)){return [l1,l1];}else{if(((__t9 instanceof Array)&&((__t9["#"]===undefined)&&(((__tp0=__t9.length),true)&&((__tp0===2)&&((l2=__t9[0]),true,(_=__t9[1]),true)))))){return [l1,l2];}else{throw ["Could not find a match",__t9];}}}else{throw ["Could not find a match",__t7];}});(Location.prototype["linecol"]=function(){var __t6=this;var start=__t6.source.linecol(__t6.start);var end=function(){if((__t6.start===__t6.end)){return null;}else{return __t6.source.linecol((__t6.end-1));}}();return [start,end];});(Location.prototype["ref"]=function(){var __t6=this;var __t10=__t6.linecol();var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var l1;var __tp5;var __tp6;var c1;var __t11;if(((__t10 instanceof Array)&&((__t10["#"]===undefined)&&(((__tp0=__t10.length),true)&&((__tp0===2)&&(((__tp1=__t10[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===2)&&(((__tp3=__tp1[0]),(__tp4=[true,String(__tp3)]),__tp4[0])&&(((l1=__tp4[1]),true,(__tp5=__tp1[1]),(__tp6=[true,String(__tp5)]),__tp6[0])&&((c1=__tp6[1]),true,(__t11=__t10[1]),true)))))))))))){var __t12=__t11;var __tp0;var __tp1;var __tp2;var l2;var __tp3;var __tp4;var c2;if((__t12===null)){return ((l1+":")+c1);}else{if(((__t12 instanceof Array)&&((__t12["#"]===undefined)&&(((__tp0=__t12.length),true)&&((__tp0===2)&&(((__tp1=__t12[0]),(__tp2=[true,String(__tp1)]),__tp2[0])&&(((l2=__tp2[1]),true,(__tp3=__t12[1]),(__tp4=[true,String(__tp3)]),__tp4[0])&&((c2=__tp4[1]),true)))))))){var __t13=null;var otherwise;if(((l1===l2)&&(c1===c2))){return ((l1+":")+c1);}else{if((l1===l2)){return ((((l1+":")+c1)+"-")+c2);}else{if(((otherwise=__t13),true)){return ((((((l1+":")+c1)+"-")+l1)+":")+c2);}else{throw ["Could not find a match",__t13];}}}}else{throw ["Could not find a match",__t12];}}}else{throw ["Could not find a match",__t10];}});(Location.prototype["highlight"]=function(){var __t14=Array.prototype.slice.call(arguments,0);var __tp0;var cls;var context;if(((__t14 instanceof Array)&&((__t14["#"]===undefined)&&(((__tp0=__t14.length),true)&&(((__tp0>=0)&&(__tp0<=2))&&((cls=function(){if((0>=__tp0)){return "hl1";}else{return __t14[0];}}()),true,(context=function(){if((1>=__tp0)){return 0;}else{return __t14[1];}}()),true)))))){var __t6=this;return highlight_locations([[__t6,cls]],context);}else{throw ["Could not find a match",__t14];}});Location;var highlight=function(){var __t18=Array.prototype.slice.call(arguments,0);var __tp0;var text;var spans;var offset;if(((__t18 instanceof Array)&&((__t18["#"]===undefined)&&(((__tp0=__t18.length),true)&&(((__tp0>=2)&&(__tp0<=3))&&((text=__t18[0]),true,(spans=__t18[1]),true,(offset=function(){if((2>=__tp0)){return 0;}else{return __t18[2];}}()),true)))))){return Node([],function(){var __t19=[];var __t20=morsel(spans);var __t21=__t20.length;for(var __t22=0;(__t22<__t21);(__t22++)){var __t23=__t20[__t22];var __tp0;var start;var end;var attributes;var other;if(((__t23 instanceof Array)&&((__t23["#"]===undefined)&&(((__tp0=__t23.length),true)&&((__tp0===3)&&((start=__t23[0]),true,(end=__t23[1]),true,(attributes=__t23[2]),true)))))){__t19.push(function(){var xstart=Math.max((start-offset),0);var xend=Math.min((end-offset),text.length);return Node(attributes,[text.slice(xstart,xend)]);}());}else{if(((other=__t23),true)){false;}else{throw ["Could not find a match",__t23];}}}return __t19;}());}else{throw ["Could not find a match",__t18];}};var highlight_lines=function(text,linelocs,__t24,spans){var __tp0;var l1;var l2;if(((__t24 instanceof Array)&&((__t24["#"]===undefined)&&(((__tp0=__t24.length),true)&&((__tp0===2)&&((l1=__t24[0]),true,(l2=__t24[1]),true)))))){(void 0);}else{throw "a condition failed";}return Node(["+span"],function(){var __t25=[];var __t26=range(l1,l2);var __t27=__t26.length;for(var __t28=0;(__t28<__t27);(__t28++)){var __t29=__t26[__t28];var lineno;var other;if(((lineno=__t29),true)){__t25.push(function(){var start=send(linelocs,lineno);var end=send(linelocs,(lineno+1));return Node(["+span"],[Node(["lineno"],(lineno+1)),Node(["source"],highlight(text,patch_array([[start,end,[]]],clamp(spans,start,end))))]);}());}else{if(((other=__t29),true)){false;}else{throw ["Could not find a match",__t29];}}}return __t25;}());};var clamp=function(spans,bot,top){var __t30=[];var __t31=spans;var __t32=__t31.length;for(var __t33=0;(__t33<__t32);(__t33++)){var __t34=__t31[__t33];var __tp0;var start;var end;var attr;var other;if(((__t34 instanceof Array)&&((__t34["#"]===undefined)&&(((__tp0=__t34.length),true)&&((__tp0===3)&&((start=__t34[0]),true,(end=__t34[1]),true,(attr=__t34[2]),true,((end>=bot)&&(start<=top)))))))){__t30.push([Math.max(start,bot),Math.min(end,top),attr]);}else{if(((other=__t34),true)){false;}else{throw ["Could not find a match",__t34];}}}return __t30;};var morsel=function(spans){var jump=function(active,bot,top){var e=send(Math.min,patch_array([top],function(){var __t35=[];var __t36=active;var __t37=__t36.length;for(var __t38=0;(__t38<__t37);(__t38++)){var __t39=__t36[__t38];var __tp0;var _;var x;var _;var other;if(((__t39 instanceof Array)&&((__t39["#"]===undefined)&&(((__tp0=__t39.length),true)&&((__tp0===3)&&((_=__t39[0]),true,(x=__t39[1]),true,(_=__t39[2]),true)))))){__t35.push(x);}else{if(((other=__t39),true)){false;}else{throw ["Could not find a match",__t39];}}}return __t35;}()));var attributes=send(patch_array,function(){var __t40=[];var __t41=active;var __t42=__t41.length;for(var __t43=0;(__t43<__t42);(__t43++)){var __t44=__t41[__t43];var __tp0;var _;var _;var X;var other;if(((__t44 instanceof Array)&&((__t44["#"]===undefined)&&(((__tp0=__t44.length),true)&&((__tp0===3)&&((_=__t44[0]),true,(_=__t44[1]),true,(X=__t44[2]),true)))))){__t40.push(X);}else{if(((other=__t44),true)){false;}else{throw ["Could not find a match",__t44];}}}return __t40;}());return [e,[bot,e,attributes]];};var jumptill=function(active,bot,top){if((bot===top)){return [[],active];}else{if(true){var __tp0;var __tp1;var newbot;var span;if((((__tp0=jump(active,bot,top)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((newbot=__tp0[0]),true,(span=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var newactive=function(){var __t45=[];var __t46=active;var __t47=__t46.length;for(var __t48=0;(__t48<__t47);(__t48++)){var __t49=__t46[__t48];var x;var __tp0;var _;var e;var attr;var other;if((((x=__t49),true,(__t49 instanceof Array))&&((__t49["#"]===undefined)&&(((__tp0=__t49.length),true)&&((__tp0===3)&&((_=__t49[0]),true,(e=__t49[1]),true,(attr=__t49[2]),true,(e>newbot))))))){__t45.push(x);}else{if(((other=__t49),true)){false;}else{throw ["Could not find a match",__t49];}}}return __t45;}();var __tp0;var __tp1;var spans;var remainder;if((((__tp0=jumptill(newactive,newbot,top)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((spans=__tp0[0]),true,(remainder=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}return [[span].concat(spans),remainder];}else{return false;}}};var process=function(start,active,rem){var __t50=[start,active,rem];var __tp0;var _;var __tp1;var __tp2;var __tp3;var __tp4;var __tp0;var start;var active;var __tp1;var __tp2;var __tp0;var start;var active;var __tp1;var __tp2;var __tp3;var next;var __tp4;var target;var end;var attr;var rest;var __t51=false;var __t52=false;var __t53=false;var __t54=false;var __t55=false;var __t56=false;var __t57=false;if(((__t51=(__t50 instanceof Array))&&((__t52=(__t50["#"]===undefined))&&((__t53=((__tp0=__t50.length),true))&&((__t54=(__tp0===3))&&(((_=__t50[0]),true,(__tp1=__t50[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===0)&&(((__tp3=__t50[2]),(__tp3 instanceof Array))&&((__tp3["#"]===undefined)&&(((__tp4=__tp3.length),true)&&(__tp4===0))))))))))))){return [];}else{if((__t54&&((__t55=((start=__t50[0]),true,(active=__t50[1]),true,(__tp1=__t50[2]),(__tp1 instanceof Array)))&&((__t56=(__tp1["#"]===undefined))&&((__t57=((__tp2=__tp1.length),true))&&(__tp2===0)))))){var top=send(Math.max,function(){var __t58=[];var __t59=active;var __t60=__t59.length;for(var __t61=0;(__t61<__t60);(__t61++)){var __t62=__t59[__t61];var __tp0;var _;var e;var _;var other;if(((__t62 instanceof Array)&&((__t62["#"]===undefined)&&(((__tp0=__t62.length),true)&&((__tp0===3)&&((_=__t62[0]),true,(e=__t62[1]),true,(_=__t62[2]),true)))))){__t58.push(e);}else{if(((other=__t62),true)){false;}else{throw ["Could not find a match",__t62];}}}return __t58;}());var bot=Math.min(start,top);var __tp0;var __tp1;var spans;var _;if((((__tp0=jumptill(active,start,top)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((spans=__tp0[0]),true,(_=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}return spans;}else{if((__t57&&((__tp2>=1)&&(((__tp3=__tp1[0]),(next=__tp3),true,(__tp3 instanceof Array))&&((__tp3["#"]===undefined)&&(((__tp4=__tp3.length),true)&&((__tp4===3)&&((target=__tp3[0]),true,(end=__tp3[1]),true,(attr=__tp3[2]),true,(rest=__tp1.slice(1)),true)))))))){var __tp0;var __tp1;var spans;var newactive;if((((__tp0=jumptill(active,start,target)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((spans=__tp0[0]),true,(newactive=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}return spans.concat(process(target,[next].concat(newactive),rest));}else{throw ["Could not find a match",__t50];}}}};var thespans=spans.sort(function(__t63,__t64){var __tp0;var s1;var e1;var _;if(((__t63 instanceof Array)&&((__t63["#"]===undefined)&&(((__tp0=__t63.length),true)&&((__tp0===3)&&((s1=__t63[0]),true,(e1=__t63[1]),true,(_=__t63[2]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var s2;var e2;var _;if(((__t64 instanceof Array)&&((__t64["#"]===undefined)&&(((__tp0=__t64.length),true)&&((__tp0===3)&&((s2=__t64[0]),true,(e2=__t64[1]),true,(_=__t64[2]),true)))))){(void 0);}else{throw "a condition failed";}if((s1===s2)){return (e1-e2);}else{return (s1-s2);}});return process(thespans[0][0],[],thespans);};var highlight_locations=function(){var __t65=Array.prototype.slice.call(arguments,0);var __tp0;var locations;var context;if(((__t65 instanceof Array)&&((__t65["#"]===undefined)&&(((__tp0=__t65.length),true)&&(((__tp0>=1)&&(__tp0<=2))&&((locations=__t65[0]),true,(context=function(){if((1>=__tp0)){return 0;}else{return __t65[1];}}()),true)))))){var loc=merge_locations(function(){var __t66=[];var __t67=locations;var __t68=__t67.length;for(var __t69=0;(__t69<__t68);(__t69++)){var __t70=__t67[__t69];var __tp0;var x;var cls;var other;if(((__t70 instanceof Array)&&((__t70["#"]===undefined)&&(((__tp0=__t70.length),true)&&((__tp0===2)&&((x=__t70[0]),true,(cls=__t70[1]),true)))))){__t66.push(x);}else{if(((other=__t70),true)){false;}else{throw ["Could not find a match",__t70];}}}return __t66;}());var src=loc.source;var __tp0;var __tp1;var l1;var l2;if((((__tp0=loc.linerange()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((l1=__tp0[0]),true,(l2=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var first=Math.max(1,(l1-context));var last=Math.min(src.nlines,(l2+context));return src.highlight_lines(first,last,function(){var __t71=[];var __t72=locations;var __t73=__t72.length;for(var __t74=0;(__t74<__t73);(__t74++)){var __t75=__t72[__t74];var __tp0;var loc;var cls;var other;if(((__t75 instanceof Array)&&((__t75["#"]===undefined)&&(((__tp0=__t75.length),true)&&((__tp0===2)&&((loc=__t75[0]),true,(cls=__t75[1]),true)))))){__t71.push([loc.start,loc.end,[cls]]);}else{if(((other=__t75),true)){false;}else{throw ["Could not find a match",__t75];}}}return __t71;}());}else{throw ["Could not find a match",__t65];}};var merge_locations=function(__t76){var __t77=__t76;var __tp0;var __tp0;var loc;var __tp0;var locs;var __t78=false;var __t79=false;var __t80=false;if(((__t78=(__t77 instanceof Array))&&((__t79=(__t77["#"]===undefined))&&((__t80=((__tp0=__t77.length),true))&&(__tp0===0))))){return Location(null,0,0);}else{if((__t80&&((__tp0===1)&&((loc=__t77[0]),true)))){return loc;}else{if((__t80&&((__tp0>=0)&&((locs=__t77.slice(0)),true)))){var start=send(Math.min,function(){var __t81=[];var __t82=locs;var __t83=__t82.length;for(var __t84=0;(__t84<__t83);(__t84++)){var __t85=__t82[__t84];var loc;var other;if(((loc=__t85),true)){__t81.push(loc.start);}else{if(((other=__t85),true)){false;}else{throw ["Could not find a match",__t85];}}}return __t81;}());var end=send(Math.max,function(){var __t86=[];var __t87=locs;var __t88=__t87.length;for(var __t89=0;(__t89<__t88);(__t89++)){var __t90=__t87[__t89];var loc;var other;if(((loc=__t90),true)){__t86.push(loc.end);}else{if(((other=__t90),true)){false;}else{throw ["Could not find a match",__t90];}}}return __t86;}());return Location(locs[0].source,start,end);}else{throw ["Could not find a match",__t77];}}}};var special_ops=({"(":"PFX","[":"PFX","{":"PFX",")":"SFX","]":"SFX","}":"SFX",",":"IFX",":":"IFX",".":"PFX","'":"PFX"});var regexps=function(){var id=RegExp("(?:^[a-zA-Z$_](?:[a-zA-Z$_0-9]*))","");var id_f=function(m,wsb,wsa,last_op){return ["ID","ID",m[0]];};var numr=RegExp("(?:^((?:\\d+))[rR]((?:[A-Za-z0-9_]+))(?:(?:\\.((?:[A-Za-z0-9_]+)))?))","");var numr_f=function(m,wsb,wsa,last_op){var __tp0;var _;var radix;var intp;var frac;if(((m instanceof Array)&&((m["#"]===undefined)&&(((__tp0=m.length),true)&&((__tp0===4)&&((_=m[0]),true,(radix=m[1]),true,(intp=m[2]),true,(frac=m[3]),true)))))){(void 0);}else{throw "a condition failed";}(value=parseInt(intp.replace(RegExp("_","g"),""),radix));if(frac){(frac=frac.replace(RegExp("_","g"),""));(value=(value+(parseInt(frac,radix)/Math.pow(radix,frac.length))));}else{null;}return ["ID","NUM",value];};var num=RegExp("(?:^((?:[0-9_]+))(?:(?:\\.((?:\\d+)))?)(?:(?:[eE]((?:[+-]?)(?:[0-9_]+)))?))","");var num_f=function(m,wsb,wsa,last_op){return ["ID","NUM",parseFloat(m[0].replace(RegExp("_","g"),""))];};var str=RegExp("(?:^\"((?:(?:(?:\\\\\\\\|\\\\\")|[^\"])*))\")","");var str_f=function(m,wsb,wsa,last_op){var repl=({"\\\"":"\"","\\\\":"\\","\\n":"\n"});var r=m[1].replace(RegExp("((?:(?:\\\\\"|\\\\\\\\)|\\\\n))","g"),function(m){return send(repl,m);});return ["ID","STR",r];};var op=RegExp("(?:^(?:[+\\-*/~\\^<>=%&|?!@#.:']+))","");var op2=RegExp("(?:^[\\[\\{\\}\\],])","");var op3=RegExp("(?:^(?:(?:(?:(?:(?:(?:(?:(?:(?:(?:with|where)|when)|and)|not)|or)|in)|instanceof)|mod)|each)|as)\\b)","");var op4=RegExp("(?:^`((?:[A-Za-z0-9_]+))`)","");var op_f=function(m,wsb,wsa,last_op,column){var op=(m[1]||m[0]);var __t91=null;var _;if((op==="|")){return ["INDENT",(column-1)];}else{if((op in special_ops)){var fixity=send(special_ops,op);var width=function(){var __t92=fixity;var other;if((__t92==="IFX")){if((wsb||wsa)){return "wide";}else{return "short";}}else{if((__t92==="SFX")){if(wsb){return "wide";}else{return "short";}}else{if((__t92==="PFX")){if(wsa){return "wide";}else{return "short";}}else{if(((other=__t92),true)){throw ErrorFactory(["should_never_happen"]).create("unknown fixity");}else{throw ["Could not find a match",__t92];}}}}}();return ["OP",fixity,width,op];}else{if((wsa&&wsb)){return ["OP",function(){if(last_op){return "PFX";}else{return "IFX";}}(),"wide",op];}else{if(((!wsa)&&(!wsb))){return ["OP",function(){if(last_op){return "PFX";}else{return "IFX";}}(),"short",op];}else{if((wsa&&last_op)){return ["OP","PFX","wide",op];}else{if(wsa){return ["OP","SFX","short",op];}else{if(wsb){return ["OP","PFX","short",op];}else{if(((_=__t91),true)){return ["OP","PFX","short",op];}else{throw ["Could not find a match",__t91];}}}}}}}}};var indent=RegExp("(?:^(?:(?:\n((?: *)))+))","");var indent_f=function(m,wsb,wsa,last_op){var ilen=m[1].length;return ["INDENT",ilen];};var cmnt=RegExp("(?:^;(?:[^\n]*))","");var cmnt_f=function(m,wsb,wsa,last_op){return ["IGNORE"];};var unkn=RegExp("(?:^.)","");var unkn_f=function(m,wsb,wsa,last_op){return ["ILLEGAL",m[0]];};return [[op3,op_f],[id,id_f],[numr,numr_f],[num,num_f],[str,str_f],[op,op_f],[op2,op_f],[op4,op_f],[indent,indent_f],[cmnt,cmnt_f],[unkn,unkn_f]];}();var ws_re=RegExp("(?:^(?: *)(?:(?:\n(?: *)\\\\(?: *))*))","");var eol_re=RegExp("(?:^(?: *)(?:\n|$))","");var indent_tracker=function(){var curr=false;var stack=[];var stacks=[stack];return function(__t94){var token;var __t93;(token=__t94);true;(__t93=__t94);var __t95=__t93;var __tp0;var __tp1;var __tp2;var new_indent;var __t96;var __tp0;var __tp1;var stuff;var __tp0;var __tp1;var fixity;var width;var __tp2;var __tp0;var __tp1;var fixity;var width;var __tp2;var other;var __t97=false;var __t98=false;var __t99=false;var __t100=false;var __t101=false;if(((__t97=(__t95 instanceof Array))&&((__t98=(__t95["#"]===undefined))&&((__t99=((__tp0=__t95.length),true))&&((__tp0===2)&&(((__tp1=__t95[0]),(__tp1==="INDENT"))&&((__tp2=__t95[1]),(new_indent=__tp2),true,(__t96=__tp2),true))))))){var __t102=__t96;if((curr===false)){(curr=new_indent);return [["OP","IFX","wide",","]];}else{if((__t102>curr)){send(stack.push(curr),(curr=new_indent));return [["OP","PFX","wide","["]];}else{if((__t102===curr)){return [["OP","IFX","wide",","]];}else{if((__t102<curr)){var rval=[];while(((stack.length>0)&&(new_indent<curr))){(curr=stack.pop());rval.push(["OP","SFX","wide","]"]);}rval.push(["OP","IFX","wide",","]);return rval;}else{throw ["Could not find a match",__t102];}}}}}else{if((__t99&&((__tp0>=1)&&(((__tp1=__t95[0]),(__tp1==="ID"))&&((stuff=__t95.slice(1)),true))))){return [token];}else{if((__t99&&((__t100=(__tp0===4))&&((__t101=((__tp1=__t95[0]),(__tp1==="OP")))&&((fixity=__t95[1]),true,(width=__t95[2]),true,(__tp2=__t95[3]),((__tp2==="[")||(__tp2==="{"))))))){stack.push(curr);stacks.push(stack);(stack=[]);(curr=false);return [token];}else{if((__t101&&((fixity=__t95[1]),true,(width=__t95[2]),true,(__tp2=__t95[3]),((__tp2==="]")||(__tp2==="}"))))){var rval=function(){var __t103=[];var __t104=stack;var __t105=__t104.length;for(var __t106=0;(__t106<__t105);(__t106++)){var __t107=__t104[__t106];var _;var other;if(((_=__t107),true)){__t103.push(["OP","SFX","short","]"]);}else{if(((other=__t107),true)){false;}else{throw ["Could not find a match",__t107];}}}return __t103;}();(stack=stacks.pop());(curr=stack.pop());rval.push(token);return rval;}else{if(((other=__t95),true)){return [token];}else{throw ["Could not find a match",__t95];}}}}}};};var process_token=function(src,token,last_op,wsa,wsb,pos,endpos,accum){var __tp0;var type;var result;if(((token instanceof Array)&&((token["#"]===undefined)&&(((__tp0=token.length),true)&&((__tp0>=1)&&((type=token[0]),true,(result=token.slice(1)),true)))))){(void 0);}else{throw "a condition failed";}__lt____lt____colon__(result,token);var __t108=type;var other;if((__t108==="IGNORE")){return last_op;}else{if((__t108==="ID")){if((!last_op)){var w=["IFX",function(){if(wsb){return "wide";}else{return "short";}}(),"WHITE"];(w["location"]=Location(src,pos,pos));accum.push(w);}else{null;}accum.push(result);return false;}else{if((__t108==="OP")){if(last_op){var v=["VOID"];(v["location"]=Location(src,pos,pos));accum.push(v);}else{null;}var __t109=result[0];if((__t109==="IFX")){accum.push(result);return true;}else{if((__t109==="PFX")){if((!last_op)){var w=["IFX",function(){if(wsb){return "wide";}else{return "short";}}(),"WHITE"];(w["location"]=Location(src,pos,pos));var v=["VOID"];(v["location"]=Location(src,pos,pos));accum.push(w);accum.push(v);}else{null;}accum.push(result);return true;}else{if((__t109==="SFX")){accum.push(result);var v=["VOID"];(v["location"]=Location(src,endpos,endpos));accum.push(v);return false;}else{throw ["Could not find a match",__t109];}}}}else{if((__t108==="ILLEGAL")){throw ErrorFactory(["syntax","illegal"]).create("unknown character",({"chr":token}));}else{if(((other=__t108),true)){throw ErrorFactory(["should_never_happen"]).create("unknown token type",({"token":token}));}else{throw ["Could not find a match",__t108];}}}}}};var tokenize=function(src){var text=src.text;var last_op=true;var results=[];var wsb=text.match(ws_re)[0].length;(text=text.slice(wsb));(pos=wsb);(column=0);var indent=indent_tracker();while(text){for(var i=0;(i<regexps.length);(++i)){var __tp0;var __tp1;var re;var fn;if((((__tp0=send(regexps,i)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((re=__tp0[0]),true,(fn=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var m=text.match(re);if(m){var skip=m[0].length;var endpos=(pos+skip);(column=function(){var splits=m[0].split("\n");if((splits.length>1)){return send(splits,(splits.length-1)).length;}else{return (column+skip);}}());(text=text.slice(skip));var wsa=text.match(ws_re)[0].length;var eol=(text.match(eol_re)&&true);var bwsb=(wsb>0);var bwsa=function(){if(eol){return bwsb;}else{return (wsa>0);}}();var token=fn(m,bwsb,bwsa,last_op,column);var tokens=indent(token);var __t110=tokens;var __t111=__t110.length;for(var __t112=0;(__t112<__t111);(__t112++)){var __t113=__t110[__t112];var x;var other;if(((x=__t113),true)){(x["location"]=Location(src,pos,endpos));(last_op=process_token(src,x,last_op,bwsa,bwsb,pos,endpos,results));}else{if(((other=__t113),true)){false;}else{throw ["Could not find a match",__t113];}}}false;(text=text.slice(wsa));(column=(column+wsa));(wsb=wsa);(pos=(endpos+wsa));break;}else{null;}}}if(last_op){var v=["VOID"];(v["location"]=[pos,pos]);results.push(v);}else{null;}return results;};var MAX=(1/0);var order_map=({"IFX":({"wide":({",":[[15,1],[15,1]],"with":[[15,999],[15,10]],"each":[[15,11],[15,10]],"where":[[15,11],[15,10]],"!!":[[15,11],[15,10]],"|>":[[15,11],[15,10]],"->":[[15,11],[15,10]],"=>":[[15,11],[15,10]],"=":[[15,11],[15,10]],":=":[[15,11],[15,10]],"+=":[[15,11],[15,10]],"-=":[[15,11],[15,10]],"*=":[[15,11],[15,10]],"/=":[[15,11],[15,10]],"<<=":[[15,11],[15,10]],">>=":[[15,11],[15,10]],">>>=":[[15,11],[15,10]],"++=":[[15,11],[15,10]],"?=":[[15,11],[15,10]],"%":[[15,11],[15,10]],"when":[[15,100],[15,101]],"||":[[15,110],[15,111]],"&&":[[15,120],[15,121]],"or":[[15,110],[15,111]],"and":[[15,120],[15,121]],"not":[[15,130],[15,131]],"==":[[15,200],[15,201]],"!=":[[15,200],[15,201]],">=":[[15,200],[15,201]],"<=":[[15,200],[15,201]],">":[[15,200],[15,201]],"<":[[15,200],[15,201]],"^.":[[15,400],[15,401]],"|.":[[15,410],[15,411]],"&.":[[15,420],[15,421]],"<<":[[1,500],[1,501]],">>":[[1,500],[1,501]],">>>":[[1,500],[1,501]],"+":[[1,550],[1,551]],"-":[[1,550],[1,551]],"*":[[1,560],[1,561]],"/":[[1,560],[1,561]],"mod":[[1,560],[1,561]],"**":[[1,571],[1,570]],"DEFAULT":[[8,900],[4,901]],"WHITE":[[15,1002],[15,1001]],":":[[15,1001],[15,2]]}),"short":({"DEFAULT":[[15,1800],[15,1801]],"WHITE":[[15,2000],[15,2001]],",":[[15,1],[15,1]],":":[[15,1001],[15,2]]})}),"PFX":({"wide":({"DEFAULT":[[15,MAX],[15,900]],"when":[[15,MAX],[15,101]],"not":[[15,MAX],[15,131]],".":[[15,MAX],[15,3000]],"#":[[15,MAX],[15,3000]],"~":[[15,MAX],[15,3000]],"@":[[15,MAX],[15,3000]],"<>":[[15,MAX],[15,5]],"(":[[15,MAX],[15,1]],"[":[[15,MAX],[15,1]],"{":[[15,MAX],[15,1]]}),"short":({"DEFAULT":[[15,MAX],[15,1901]],".":[[15,MAX],[15,3000]],"#":[[15,MAX],[15,3000]],"~":[[15,MAX],[15,3000]],"@":[[15,MAX],[15,3000]],"(":[[15,MAX],[15,1]],"[":[[15,MAX],[15,1]],"{":[[15,MAX],[15,1]]})}),"SFX":({"wide":({"DEFAULT":[[15,901],[15,MAX]],")":[[15,1],[15,MAX]],"]":[[15,1],[15,MAX]],"}":[[15,1],[15,MAX]]}),"short":({"DEFAULT":[[15,1900],[15,MAX]],")":[[15,1],[15,MAX]],"]":[[15,1],[15,MAX]],"}":[[15,1],[15,MAX]]})})});var DONE=(-1);var NONE=0;var LEFT=1;var RIGHT=2;var BOTH=3;var oparse=function(next,order,finalize){var between=finalize(next());var right_op=next();var stack=[];var left_op=null;var current=null;while(true){var o=function(){if(((!left_op)&&(!right_op))){return DONE;}else{return ((((!left_op)&&RIGHT)||((!right_op)&&LEFT))||order(left_op,right_op));}}();var __t114=o;var other;if((__t114===DONE)){return between;}else{if((__t114===LEFT)){current.push(between);(between=finalize(current));var v=stack.pop();(left_op=v[0]);(current=v[1]);}else{if((__t114===RIGHT)){stack.push([left_op,current]);(left_op=right_op);(current=[[right_op],between]);(between=finalize(next()));(right_op=next());}else{if((__t114===BOTH)){current[0].push(right_op);current.push(between);(left_op=right_op);(between=finalize(next()));(right_op=next());}else{if(((other=__t114),true)){throw ErrorFactory(["should_never_happen"]).create("undefined priority",({"left":left_op,"right":right_op}));}else{throw ["Could not find a match",__t114];}}}}}}};var consult=function(__t115){var __tp0;var fixity;var width;var op;if(((__t115 instanceof Array)&&((__t115["#"]===undefined)&&(((__tp0=__t115.length),true)&&((__tp0===3)&&((fixity=__t115[0]),true,(width=__t115[1]),true,(op=__t115[2]),true)))))){(void 0);}else{throw "a condition failed";}var map=send(send(order_map,fixity),width);return (send(map,op)||map.DEFAULT);};var order=function(o1,o2){var __tp0;var __tp1;var code1;var ord1;if((((__tp0=consult(o1)[1]),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((code1=__tp0[0]),true,(ord1=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var code2;var ord2;if((((__tp0=consult(o2)[0]),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((code2=__tp0[0]),true,(ord2=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t116=null;if(((code1&code2)===0)){throw ErrorFactory(["syntax","order"]).create("Cannot mix operators in the given order",({"left":o1,"right":o2}));}else{if((ord1>ord2)){return LEFT;}else{if((ord1<ord2)){return RIGHT;}else{if((ord1===ord2)){return BOTH;}else{throw ["Could not find a match",__t116];}}}}};var finalize=function(token){return finaliz(token);};var finaliz=function(__t118){var token;var __t117;(token=__t118);true;(__t117=__t118);var __t119=__t117;var __tp0;var __tp1;var value;var __tp0;var __tp1;var value;var __tp0;var __tp1;var value;var __tp0;var __tp1;var __tp0;var ops;var args;var other;var __t120=false;var __t121=false;var __t122=false;var __t123=false;if(((__t120=(__t119 instanceof Array))&&((__t121=(__t119["#"]===undefined))&&((__t122=((__tp0=__t119.length),true))&&((__t123=(__tp0===2))&&(((__tp1=__t119[0]),(__tp1==="ID"))&&((value=__t119[1]),true))))))){return __lt____lt____colon__(["symbol",value],token);}else{if((__t123&&(((__tp1=__t119[0]),(__tp1==="NUM"))&&((value=__t119[1]),true)))){return __lt____lt____colon__(["value",value],token);}else{if((__t123&&(((__tp1=__t119[0]),(__tp1==="STR"))&&((value=__t119[1]),true)))){return __lt____lt____colon__(["value",value],token);}else{if((__t122&&((__tp0===1)&&((__tp1=__t119[0]),(__tp1==="VOID"))))){return __lt____lt____colon__(["void"],token);}else{if((__t122&&((__tp0>=1)&&((ops=__t119[0]),true,(args=__t119.slice(1)),true)))){var sumloc=ops[0].location;var __t124=ops.slice(1);var __t125=__t124.length;for(var __t126=0;(__t126<__t125);(__t126++)){var __t140=__t124[__t126];var op;var other;if(((op=__t140),true)){(sumloc=__plus____plus____colon__(sumloc,op));}else{if(((other=__t140),true)){false;}else{throw ["Could not find a match",__t140];}}}false;var __t127=args;var __t128=__t127.length;for(var __t129=0;(__t129<__t128);(__t129++)){var __t141=__t127[__t129];var arg;var other;if(((arg=__t141),true)){(sumloc=__plus____plus____colon__(sumloc,arg));}else{if(((other=__t141),true)){false;}else{throw ["Could not find a match",__t141];}}}false;var orig_ops=ops;(ops=function(){var __t142=[];var __t143=ops;var __t144=__t143.length;for(var __t145=0;(__t145<__t144);(__t145++)){var __t146=__t143[__t145];var o;var other;if(((o=__t146),true)){__t142.push(o[2]);}else{if(((other=__t146),true)){false;}else{throw ["Could not find a match",__t146];}}}return __t142;}());var op=ops[0];var __t130=[ops,args];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var f;var arg;var body;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var f;var body;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var target;var __tp6;var _b;var __tp7;var body;var __tp0;var __tp1;var __tp2;var __tp3;var _;var _;var __tp0;var __tp1;var __tp2;var __tp3;var _;var _;var __tp0;var __tp1;var __tp2;var __tp3;var _;var __tp0;var __tp1;var __tp2;var _;var __t131;var other;var __t132=false;var __t133=false;var __t134=false;var __t135=false;var __t136=false;var __t137=false;var __t138=false;var __t139=false;if(((__t132=(__t130 instanceof Array))&&((__t133=(__t130["#"]===undefined))&&((__t134=((__tp0=__t130.length),true))&&((__t135=(__tp0===2))&&((__t136=((__tp1=__t130[0]),(__tp1 instanceof Array)))&&((__t137=(__tp1["#"]===undefined))&&((__t138=((__tp2=__tp1.length),true))&&((__tp2===2)&&(((__tp3=__tp1[0]),(__tp3==="WHITE"))&&(((__tp4=__tp1[1]),(__tp4===":"))&&(((__tp5=__t130[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===3)&&((f=__tp5[0]),true,(arg=__tp5[1]),true,(body=__tp5[2]),true)))))))))))))))){return __lt____lt____colon__(["send",f,__lt____lt____colon__(["data",arg,body],__plus____plus____colon__(arg,body))],sumloc);}else{if((__t138&&((__t139=(__tp2===1))&&(((__tp3=__tp1[0]),(__tp3===":"))&&(((__tp4=__t130[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&((f=__tp4[0]),true,(body=__tp4[1]),true))))))))){return __lt____lt____colon__(["send",f,__lt____lt____colon__(["data",body],body)],sumloc);}else{if((__t139&&(((__tp3=__tp1[0]),(__tp3==="with"))&&(((__tp4=__t130[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((target=__tp4[0]),true,(__tp6=__tp4[1]),(_b=__tp6),true,(__tp7=___projector(aslist)(__tp6)),__tp7[0])&&((body=__tp7[1]),true))))))))){var inserted=false;var result=transform(target,function(__t148){var expr;var __t147;(expr=__t148);true;(__t147=__t148);var __t149=__t147;var __tp0;var __tp1;var __tp2;var x;var __tp0;var __tp1;var f;var __tp2;var __tp3;var __tp4;var a;var b;var __tp0;var __tp1;var args;if(((__t149 instanceof Array)&&((__t149["#"]===undefined)&&(((__tp0=__t149.length),true)&&((__tp0===2)&&(((__tp1=__t149[0]),(__tp1==="symbol"))&&((__tp2=__t149[1]),(__tp2==="...")))))))){(inserted=true);return __lt____lt____colon__(patch_array(["multi"],body),_b);}else{if((((x=__t149),true,x.fromop)&&((__t149 instanceof Array)&&((__t149["#"]===undefined)&&(((__tp0=__t149.length),true)&&((__tp0===3)&&(((__tp1=__t149[0]),(__tp1==="send"))&&(((f=__t149[1]),true,(__tp2=__t149[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((a=__tp2[1]),true,(b=__tp2[2]),true))))))))))))){return ["send",this(f),__lt____lt____colon__(["data",this(a),this(b)],__plus____plus____colon__(a,b))];}else{if(((__t149 instanceof Array)&&((__t149["#"]===undefined)&&(((__tp0=__t149.length),true)&&((__tp0>=1)&&(((__tp1=__t149[0]),(__tp1==="data"))&&((args=__t149.slice(1)),true))))))){(tr=this);var res=["data"].concat(patch_array.apply(null,function(){var __t150=[];var __t151=args;var __t152=__t151.length;for(var __t153=0;(__t153<__t152);(__t153++)){var __t154=__t151[__t153];var __tp0;var __tp1;var __tp2;var other;var other;var __t155=false;if(((__t154 instanceof Array)&&((__t154["#"]===undefined)&&(((__tp0=__t154.length),true)&&((__tp0===2)&&(((__tp1=__t154[0]),(__tp1==="symbol"))&&((__tp2=__t154[1]),(__tp2==="...")))))))){__t150.push(((inserted=true),body));}else{if((__t155=((other=__t154),true))){__t150.push([__lt____lt____colon__(tr(other),other)]);}else{if(__t155){false;}else{throw ["Could not find a match",__t154];}}}}return __t150;}()));return __lt____lt____colon__(res,expr);}else{throw ["Could not find a match",__t149];}}}});if((!inserted)){var __t156=target;var __tp0;var __tp1;var __tp0;var __tp1;var f;var __tp2;var orig_args;var __tp3;var __tp4;var args;var __tp0;var __tp1;var args;var other;var __t157=false;var __t158=false;var __t159=false;if(((__t156 instanceof Array)&&((__t156["#"]===undefined)&&(((__tp0=__t156.length),true)&&((__tp0===1)&&((__tp1=__t156[0]),(__tp1==="void"))))))){return __lt____lt____colon__(patch_array(["data"],body),sumloc);}else{if(target.fromop){return __lt____lt____colon__(["send",target,__lt____lt____colon__(patch_array(["data"],body),_b)],sumloc);}else{if(((__t157=(__t156 instanceof Array))&&((__t158=(__t156["#"]===undefined))&&((__t159=((__tp0=__t156.length),true))&&((__tp0===3)&&(((__tp1=__t156[0]),(__tp1==="send"))&&(((f=__t156[1]),true,(__tp2=__t156[2]),(orig_args=__tp2),true,(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3>=1)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((args=__tp2.slice(1)),true)))))))))))){return __lt____lt____colon__(["send",f,__lt____lt____colon__(patch_array(["data"],args,body),__plus____plus____colon__(orig_args,_b))],sumloc);}else{if((__t159&&((__tp0>=1)&&(((__tp1=__t156[0]),(__tp1==="data"))&&((args=__t156.slice(1)),true))))){return __lt____lt____colon__(target.concat(body),sumloc);}else{if(((other=__t156),true)){return __lt____lt____colon__(["send",target,__lt____lt____colon__(patch_array(["data"],body),_b)],sumloc);}else{throw ["Could not find a match",__t156];}}}}}}else{return __lt____lt____colon__(result,sumloc);}}else{if((__t138&&((__t139=(__tp2>=1))&&(((__tp3=__tp1[0]),((__tp3==="[")||(__tp3===",")))&&((_=__tp1.slice(1)),true,(_=__t130[1]),true))))){if((op==="[")){(args=args.slice(1,(-1)));}else{null;}(args=function(){var f=function(__t160){var __t161=__t160;var __tp0;var __tp1;var other;if(((__t161 instanceof Array)&&((__t161["#"]===undefined)&&(((__tp0=__t161.length),true)&&((__tp0===1)&&((__tp1=__t161[0]),(__tp1==="void"))))))){return false;}else{if(((other=__t161),true)){return true;}else{throw ["Could not find a match",__t161];}}};return args.filter(f);}());var result=function(){var __t162=args;var __tp0;var __tp0;var x;var other;var __t163=false;var __t164=false;var __t165=false;if(((__t163=(__t162 instanceof Array))&&((__t164=(__t162["#"]===undefined))&&((__t165=((__tp0=__t162.length),true))&&(__tp0===0))))){return ["value",undefined];}else{if((__t165&&((__tp0===1)&&((x=__t162[0]),true)))){return x;}else{if(((other=__t162),true)){return patch_array(["multi"],args);}else{throw ["Could not find a match",__t162];}}}}();return __lt____lt____colon__(result,sumloc);}else{if((__t139&&(((__tp3=__tp1[0]),(__tp3==="{"))&&((_=__tp1.slice(1)),true,(_=__t130[1]),true)))){var f=function(__t166){var __t167=__t166;var __tp0;var __tp1;var other;if(((__t167 instanceof Array)&&((__t167["#"]===undefined)&&(((__tp0=__t167.length),true)&&((__tp0===1)&&((__tp1=__t167[0]),(__tp1==="void"))))))){return false;}else{if(((other=__t167),true)){return true;}else{throw ["Could not find a match",__t167];}}};return __lt____lt____colon__(patch_array(["data"],args.slice(1,(-1)).filter(f)),sumloc);}else{if((__t138&&((__t139=(__tp2===1))&&(((__tp3=__tp1[0]),(__tp3==="WHITE"))&&((_=__t130[1]),true))))){return __lt____lt____colon__(patch_array(["send"],args),sumloc);}else{if((__t139&&((_=__tp1[0]),true,(__t131=__t130[1]),true))){var __t168=__t131;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp0;var a;var b;var __t169=false;var __t170=false;var __t171=false;var __t172=false;if(((__t169=(__t168 instanceof Array))&&((__t170=(__t168["#"]===undefined))&&((__t171=((__tp0=__t168.length),true))&&((__t172=(__tp0===2))&&(((__tp1=__t168[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&(((__tp3=__tp1[0]),(__tp3==="void"))&&(((__tp4=__t168[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===1)&&((__tp6=__tp4[0]),(__tp6==="void")))))))))))))))){return __lt____lt____colon__(["symbol",op],orig_ops[0]);}else{if((__t172&&((a=__t168[0]),true,(b=__t168[1]),true))){var oloc=orig_ops[0].location;var abloc=__plus____plus____colon__(a,b);var oabloc=__plus____plus____colon__(orig_ops[0],abloc);var rval=__lt____lt____colon__(["send",__lt____lt____colon__(["symbol",op],oloc),__lt____lt____colon__(["data",a,b],abloc)],__plus____plus____colon__(oloc,abloc));(rval["fromop"]=true);return rval;}else{throw ["Could not find a match",__t168];}}}else{if(((other=__t130),true)){throw ErrorFactory(["should_never_happen"]).create("unknown node",({"node":token}));}else{throw ["Could not find a match",__t130];}}}}}}}}}else{if(((other=__t119),true)){throw ErrorFactory(["should_never_happen"]).create("unknown node (B)",({"node":token}));}else{throw ["Could not find a match",__t119];}}}}}}};var parse=function(src){var results=tokenize(src);var next=function(){return results.shift();};return oparse(next,order,finalize);};var libf=function(f){return ["symbol",f];};var Env=function(parent){var store=Object();var self=function(expr){return ["bind_env",self,expr];};(self["resolve"]=function(name){var attempt=send(store,name);if(attempt){return attempt;}else{return self.parent.resolve(name);}});(self["register"]=function(name,value){return (store[name]=value);});(self["register_macro"]=function(name,m){return (store[name]=["macro",m]);});(self["fork"]=function(){return Env(self);});(self["parent"]=parent);(self["store"]=store);return self;};var js_contexts=({"js_for":["multi","multi","multi","multi"]});var expand=function(__t173,expr){var __tp0;var context;var env;if(((__t173 instanceof Array)&&((__t173["#"]===undefined)&&(((__tp0=__t173.length),true)&&((__tp0===2)&&((context=__t173[0]),true,(env=__t173[1]),true)))))){(void 0);}else{throw "a condition failed";}(expr=expand.step([context,env],expr));var __t174=expr;var __tp0;var __tp1;var s;var __tp0;var __tp1;var __tp0;var __tp1;var f;var arg;var __tp0;var __tp1;var v;var __tp0;var __tp1;var type;var args;var __tp0;var __tp1;var args;var __tp0;var __tp1;var args;var __tp0;var __tp1;var bindings;var body;var __tp0;var __tp1;var binding;var value;var __tp0;var __tp1;var lhs;var rhs;var __tp0;var __tp1;var type;var args;var __tp0;var __tp1;var expr;var other;var __t175=false;var __t176=false;var __t177=false;var __t178=false;if(((__t175=(__t174 instanceof Array))&&((__t176=(__t174["#"]===undefined))&&((__t177=((__tp0=__t174.length),true))&&((__tp0===2)&&(((__tp1=__t174[0]),(__tp1==="symbol"))&&((s=__t174[1]),true))))))){return expr;}else{if((__t177&&((__tp0===1)&&((__tp1=__t174[0]),(__tp1==="void"))))){return ["void"];}else{if((__t177&&((__tp0===3)&&(((__tp1=__t174[0]),(__tp1==="send"))&&((f=__t174[1]),true,(arg=__t174[2]),true))))){(f=expand(["head",env],f));return ["send",f,expand(["tail",env],arg)];}else{if((__t177&&((__tp0===2)&&(((__tp1=__t174[0]),(__tp1==="value"))&&((v=__t174[1]),true))))){return expr;}else{if((__t177&&((__t178=(__tp0>=1))&&(((__tp1=__t174[0]),(type=__tp1),true,((__tp1==="array")||(__tp1==="object")))&&((args=__t174.slice(1)),true))))){var arr=[];while((args.length>0)){var __t179=expand.step([type,env],args.shift());var __tp0;var __tp1;var stmts;var other;if(((__t179 instanceof Array)&&((__t179["#"]===undefined)&&(((__tp0=__t179.length),true)&&((__tp0>=1)&&(((__tp1=__t179[0]),(__tp1==="splice"))&&((stmts=__t179.slice(1)),true))))))){(args=stmts.concat(args));}else{if(((other=__t179),true)){arr.push(other);}else{throw ["Could not find a match",__t179];}}}return [type].concat(function(){var __t180=[];var __t181=arr;var __t182=__t181.length;for(var __t183=0;(__t183<__t182);(__t183++)){var __t184=__t181[__t183];var x;var other;if(((x=__t184),true)){__t180.push(expand([type,env],x));}else{if(((other=__t184),true)){false;}else{throw ["Could not find a match",__t184];}}}return __t180;}());}else{if((__t178&&(((__tp1=__t174[0]),(__tp1==="multi"))&&((args=__t174.slice(1)),true)))){var arr=[];while((args.length>0)){var type=function(){if((args.length===1)){return "expr";}else{return "multi";}}();var __t185=expand.step([type,env],args.shift());var __tp0;var __tp1;var stmts;var __tp0;var __tp1;var stmt;var other;var __t186=false;var __t187=false;var __t188=false;if(((__t186=(__t185 instanceof Array))&&((__t187=(__t185["#"]===undefined))&&((__t188=((__tp0=__t185.length),true))&&((__tp0>=1)&&(((__tp1=__t185[0]),(__tp1==="splice"))&&((stmts=__t185.slice(1)),true))))))){(args=stmts.concat(args));}else{if((__t188&&((__tp0===2)&&(((__tp1=__t185[0]),(__tp1==="sink"))&&((stmt=__t185[1]),true))))){args.push(stmt);}else{if(((other=__t185),true)){arr.push([other,type]);}else{throw ["Could not find a match",__t185];}}}}return ["multi"].concat(function(){var __t189=[];var __t190=arr;var __t191=__t190.length;for(var __t192=0;(__t192<__t191);(__t192++)){var __t193=__t190[__t192];var __tp0;var x;var type;var other;if(((__t193 instanceof Array)&&((__t193["#"]===undefined)&&(((__tp0=__t193.length),true)&&((__tp0===2)&&((x=__t193[0]),true,(type=__t193[1]),true)))))){__t189.push(expand([type,env],x));}else{if(((other=__t193),true)){false;}else{throw ["Could not find a match",__t193];}}}return __t189;}());}else{if((__t178&&(((__tp1=__t174[0]),(__tp1==="data"))&&((args=__t174.slice(1)),true)))){var is_obj=false;var obj=["object"];var arr=["array"];var parts=[];var newpart=function(){var __t194=arr;var __tp0;var __tp1;var other;if(((__t194 instanceof Array)&&((__t194["#"]===undefined)&&(((__tp0=__t194.length),true)&&((__tp0===1)&&((__tp1=__t194[0]),(__tp1==="array"))))))){return false;}else{if(((other=__t194),true)){parts.push(arr);return (arr=["array"]);}else{throw ["Could not find a match",__t194];}}};while((args.length>0)){var __t195=expand.step([type,env],args.shift());var __tp0;var __tp1;var __tp0;var __tp1;var k;var v;var __tp0;var __tp1;var exprs;var __tp0;var __tp1;var expr;var other;var __t196=false;var __t197=false;var __t198=false;if(((__t196=(__t195 instanceof Array))&&((__t197=(__t195["#"]===undefined))&&((__t198=((__tp0=__t195.length),true))&&((__tp0===1)&&((__tp1=__t195[0]),(__tp1==="assoc"))))))){(is_obj=true);}else{if((__t198&&((__tp0===3)&&(((__tp1=__t195[0]),(__tp1==="assoc"))&&((k=__t195[1]),true,(v=__t195[2]),true))))){(is_obj=true);obj.push(["array",k,v]);}else{if((__t198&&((__tp0>=1)&&(((__tp1=__t195[0]),(__tp1==="splice"))&&((exprs=__t195.slice(1)),true))))){(args=exprs.concat(args));}else{if((__t198&&((__tp0===2)&&(((__tp1=__t195[0]),(__tp1==="dynsplice"))&&((expr=__t195[1]),true))))){newpart();parts.push(expr);}else{if(((other=__t195),true)){arr.push(other);}else{throw ["Could not find a match",__t195];}}}}}}newpart();var r=function(){var __t199=parts;var __tp0;var __tp0;var __tp0;var __tp1;var arr;var __tp2;var __tp3;var things;var other;var __t200=false;var __t201=false;var __t202=false;var __t203=false;if(((__t200=(__t199 instanceof Array))&&((__t201=(__t199["#"]===undefined))&&((__t202=((__tp0=__t199.length),true))&&((__t203=(__tp0===0))&&is_obj))))){return obj;}else{if(__t203){return ["array"];}else{if((__t202&&((__tp0===1)&&(((__tp1=__t199[0]),(arr=__tp1),true,(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2>=1)&&(((__tp3=__tp1[0]),(__tp3==="array"))&&((things=__tp1.slice(1)),true))))))))){if(is_obj){arr.push(obj);}else{null;}return arr;}else{if(((other=__t199),true)){if(is_obj){parts.push(["array",obj]);}else{null;}var patch=libf("patch_array");return ["send",patch,patch_array(["array"],parts)];}else{throw ["Could not find a match",__t199];}}}}}();return expand([context,env],r);}else{if((__t177&&((__t178=(__tp0===3))&&(((__tp1=__t174[0]),(__tp1==="lambda"))&&((bindings=__t174[1]),true,(body=__t174[2]),true))))){return ["lambda",function(){var __t204=[];var __t205=bindings;var __t206=__t205.length;for(var __t207=0;(__t207<__t206);(__t207++)){var __t208=__t205[__t207];var x;var other;if(((x=__t208),true)){__t204.push(expand(["decl",env],x));}else{if(((other=__t208),true)){false;}else{throw ["Could not find a match",__t208];}}}return __t204;}(),expand(["expr",env],body)];}else{if((__t178&&(((__tp1=__t174[0]),(__tp1==="declare"))&&((binding=__t174[1]),true,(value=__t174[2]),true)))){return ["declare",expand(["decl",env],binding),expand(["expr",env],value)];}else{if((__t178&&(((__tp1=__t174[0]),(__tp1==="assign"))&&((lhs=__t174[1]),true,(rhs=__t174[2]),true)))){return ["assign",expand(["decl",env],lhs),expand(["expr",env],rhs)];}else{if((__t177&&((__tp0>=1)&&(((__tp1=__t174[0]),(type=__tp1),true,(((((((((((__tp1==="js_while")||(__tp1==="js_for"))||(__tp1==="js_for_in"))||(__tp1==="js_break"))||(__tp1==="js_continue"))||(__tp1==="js_return"))||(__tp1==="js_delete"))||(__tp1==="js_throw"))||(__tp1==="js_try"))||(__tp1==="js_new"))||(__tp1==="if")))&&((args=__t174.slice(1)),true))))){var ctxs=(send(js_contexts,type)||[]);var f=function(x,i){return expand([(send(ctxs,i)||"expr"),env],x);};return patch_array([type],args.map(f));}else{if((__t177&&((__tp0===2)&&(((__tp1=__t174[0]),(__tp1==="done"))&&((expr=__t174[1]),true))))){return expr;}else{if(((other=__t174),true)){throw ErrorFactory(["syntax","illegal_node"]).create("An illegal node was found in expand",({"node":other}));}else{throw ["Could not find a match",__t174];}}}}}}}}}}}}}};(expand["step"]=function(__t210,__t211){var __tp0;var context;var env;if(((__t210 instanceof Array)&&((__t210["#"]===undefined)&&(((__tp0=__t210.length),true)&&((__tp0===2)&&((context=__t210[0]),true,(env=__t210[1]),true)))))){(void 0);}else{throw "a condition failed";}var expr;var __t209;(expr=__t211);true;(__t209=__t211);var __t212=__t209;var __tp0;var __tp1;var s;var __tp0;var __tp1;var __tp0;var __tp1;var m;var __tp0;var __tp1;var m;var __tp0;var __tp1;var f;var arg;var __tp0;var type;var args;var other;var __t213=false;var __t214=false;var __t215=false;var __t216=false;var __t217=false;if(((__t213=(__t212 instanceof Array))&&((__t214=(__t212["#"]===undefined))&&((__t215=((__tp0=__t212.length),true))&&((__tp0===2)&&(((__tp1=__t212[0]),(__tp1==="symbol"))&&((s=__t212[1]),true))))))){var v=env.resolve(s);var __t218=[v,context];var __tp0;var __tp1;var _;var __tp0;var __tp1;var __tp2;var __tp3;var m;var __tp4;var __tp0;var __tp1;var __tp2;var __tp3;var m;var _;var other;var __t219=false;var __t220=false;var __t221=false;var __t222=false;var __t223=false;var __t224=false;var __t225=false;var __t226=false;var __t227=false;if(((__t219=(__t218 instanceof Array))&&((__t220=(__t218["#"]===undefined))&&((__t221=((__tp0=__t218.length),true))&&((__t222=(__tp0===2))&&(((__tp1=__t218[0]),(__tp1===(void 0)))&&((_=__t218[1]),true))))))){return ["symbol",s];}else{if((__t222&&((__t223=((__tp1=__t218[0]),(__tp1 instanceof Array)))&&((__t224=(__tp1["#"]===undefined))&&((__t225=((__tp2=__tp1.length),true))&&((__t226=(__tp2===2))&&((__t227=((__tp3=__tp1[0]),(__tp3==="macro")))&&((m=__tp1[1]),true,(__tp4=__t218[1]),(__tp4==="head"))))))))){return v;}else{if((__t227&&((m=__tp1[1]),true,(_=__t218[1]),true))){return expand.step([context,env],m([context,env],["void"]));}else{if(((other=__t218),true)){return v;}else{throw ["Could not find a match",__t218];}}}}}else{if((__t215&&((__tp0===1)&&((__tp1=__t212[0]),(__tp1==="void"))))){return ["void"];}else{if((__t215&&((__t216=(__tp0===2))&&((__t217=((__tp1=__t212[0]),(__tp1==="macro")))&&((m=__t212[1]),true,(context==="head")))))){return expr;}else{if((__t217&&((m=__t212[1]),true,true))){return expand.step([context,env],m([context,env],["void"]));}else{if((__t215&&((__tp0===3)&&(((__tp1=__t212[0]),(__tp1==="send"))&&((f=__t212[1]),true,(arg=__t212[2]),true))))){var __t228=expand.step(["head",env],f);var __tp0;var __tp1;var m;var other;if(((__t228 instanceof Array)&&((__t228["#"]===undefined)&&(((__tp0=__t228.length),true)&&((__tp0===2)&&(((__tp1=__t228[0]),(__tp1==="macro"))&&((m=__t228[1]),true))))))){return expand.step([context,env],m([context,env],arg));}else{if(((other=__t228),true)){return expr;}else{throw ["Could not find a match",__t228];}}}else{if((__t215&&((__tp0>=1)&&((type=__t212[0]),true,(args=__t212.slice(1)),true)))){return expr;}else{if(((other=__t212),true)){throw ErrorFactory(["syntax","illegal_node"]).create("An illegal node was found in expand.step",({"node":other}));}else{throw ["Could not find a match",__t212];}}}}}}}});var aslist=function(__t229){var __t230=__t229;var __tp0;var __tp1;var __tp0;var __tp1;var args;var other;if(((__t230 instanceof Array)&&((__t230["#"]===undefined)&&(((__tp0=__t230.length),true)&&((__tp0===1)&&((__tp1=__t230[0]),(__tp1==="void"))))))){return [["void"]];}else{if((__t230===(void 0))){return [undefined];}else{if(((__t230 instanceof Array)&&((__t230["#"]===undefined)&&(((__tp0=__t230.length),true)&&((__tp0>=1)&&(((__tp1=__t230[0]),(__tp1==="multi"))&&((args=__t230.slice(1)),true))))))){return args;}else{if(((other=__t230),true)){return [other];}else{throw ["Could not find a match",__t230];}}}}};var transform=function(expr,cb){var tr=function(x){return transform(x,cb);};var result=function(){var __t232;try{(__t232=cb.call(tr,expr));}catch(__t231){(__t232=function(){var __t233=expr;var __tp0;var __tp1;var __tp0;var __tp1;var s;var __tp0;var __tp1;var v;var __tp0;var name;var args;var __t234=false;var __t235=false;var __t236=false;var __t237=false;if(((__t234=(__t233 instanceof Array))&&((__t235=(__t233["#"]===undefined))&&((__t236=((__tp0=__t233.length),true))&&((__tp0===1)&&((__tp1=__t233[0]),(__tp1==="void"))))))){return ["void"];}else{if((__t236&&((__t237=(__tp0===2))&&(((__tp1=__t233[0]),(__tp1==="symbol"))&&((s=__t233[1]),true))))){return expr;}else{if((__t237&&(((__tp1=__t233[0]),(__tp1==="value"))&&((v=__t233[1]),true)))){return expr;}else{if((__t236&&((__tp0>=1)&&((name=__t233[0]),true,(args=__t233.slice(1)),true)))){return patch_array([name],args.map(tr));}else{throw ["Could not find a match",__t233];}}}}}());}return __t232;}();return __lt____lt____colon__(result,expr);};var nullenv=({"resolve":function(x){return undefined;}});var stdenv=Env(nullenv);stdenv.register("+",["symbol","___plus"]);stdenv.register("-",["symbol","___minus"]);stdenv.register("*",["symbol","___times"]);stdenv.register("/",["symbol","___div"]);stdenv.register("mod",["symbol","___mod"]);stdenv.register("^",["symbol","___binxor"]);stdenv.register("&",["symbol","___binand"]);stdenv.register("|",["symbol","___binor"]);stdenv.register("&&",["symbol","___and"]);stdenv.register("||",["symbol","___or"]);stdenv.register("and",["symbol","___and"]);stdenv.register("or",["symbol","___or"]);stdenv.register("not",["symbol","___not"]);stdenv.register("===",["symbol","___is"]);stdenv.register("!==",["symbol","___isnt"]);stdenv.register("!=",["symbol","___neq"]);stdenv.register("<",["symbol","___lt"]);stdenv.register(">",["symbol","___gt"]);stdenv.register("<=",["symbol","___lte"]);stdenv.register(">=",["symbol","___gte"]);stdenv.register("<<",["symbol","___shl"]);stdenv.register(">>",["symbol","___shr"]);stdenv.register(">>>",["symbol","___shr2"]);stdenv.register("in",["symbol","___in"]);stdenv.register("instanceof",["symbol","___instanceof"]);stdenv.register("--",["symbol","___minusminus"]);stdenv.register_macro("++",function(_,__t238){var __t239=__t238;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var x;var __tp0;var __tp1;var x;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var x;var y;var __tp0;var __tp1;var __t240=false;var __t241=false;var __t242=false;var __t243=false;var __t244=false;if(((__t240=(__t239 instanceof Array))&&((__t241=(__t239["#"]===undefined))&&((__t242=((__tp0=__t239.length),true))&&((__t243=(__tp0===3))&&((__t244=((__tp1=__t239[0]),(__tp1==="data")))&&(((__tp2=__t239[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((x=__t239[2]),true)))))))))))){return ["send",["symbol","___plusplus"],["data",["void"],x]];}else{if((__t244&&(((x=__t239[1]),true,(__tp2=__t239[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))){return ["send",["symbol","___plusplus"],["data",x,["void"]]];}else{if((__t244&&((x=__t239[1]),true,(y=__t239[2]),true))){return ["send",["send",x,["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",y]];}else{if((__t242&&((__tp0===1)&&((__tp1=__t239[0]),(__tp1==="void"))))){return ["send",["symbol","->"],["data",["data",["symbol","x"],["symbol","y"]],["send",["send",["symbol","x"],["send",["symbol","."],["data",["void"],["symbol","concat"]]]],["data",["symbol","y"]]]]];}else{throw ["Could not find a match",__t239];}}}}});stdenv.register_macro("..",function(_,__t245){var __t246=__t245;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var x;var __tp0;var __tp1;var x;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var x;var y;var __tp0;var __tp1;var __t247=false;var __t248=false;var __t249=false;var __t250=false;var __t251=false;if(((__t247=(__t246 instanceof Array))&&((__t248=(__t246["#"]===undefined))&&((__t249=((__tp0=__t246.length),true))&&((__t250=(__tp0===3))&&((__t251=((__tp1=__t246[0]),(__tp1==="data")))&&(((__tp2=__t246[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((x=__t246[2]),true)))))))))))){return ["send",["symbol","range"],["data",["value",1],x]];}else{if((__t251&&(((x=__t246[1]),true,(__tp2=__t246[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))){return ["send",["symbol","range"],["data",x]];}else{if((__t251&&((x=__t246[1]),true,(y=__t246[2]),true))){return ["send",["symbol","range"],["data",x,y]];}else{if((__t249&&((__tp0===1)&&((__tp1=__t246[0]),(__tp1==="void"))))){return ["symbol","range"];}else{throw ["Could not find a match",__t246];}}}}});var make_checker=function(value,op){return function(__t252,__t253){var __tp0;var context;var env;if(((__t252 instanceof Array)&&((__t252["#"]===undefined)&&(((__tp0=__t252.length),true)&&((__tp0===2)&&((context=__t252[0]),true,(env=__t252[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;if(((__t253 instanceof Array)&&((__t253["#"]===undefined)&&(((__tp0=__t253.length),true)&&((__tp0===2)&&(((__tp1=__t253[0]),(__tp1==="data"))&&((expr=__t253[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",op,["data",expr,value]];};};stdenv.register_macro("**",function(__t254,__t255){var __tp0;var context;var env;if(((__t254 instanceof Array)&&((__t254["#"]===undefined)&&(((__tp0=__t254.length),true)&&((__tp0===2)&&((context=__t254[0]),true,(env=__t254[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t255 instanceof Array)&&((__t255["#"]===undefined)&&(((__tp0=__t255.length),true)&&((__tp0===3)&&(((__tp1=__t255[0]),(__tp1==="data"))&&((a=__t255[1]),true,(b=__t255[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","pow"]]]],["data",a,b]];});stdenv.register_macro("//",function(__t256,__t257){var __tp0;var context;var env;if(((__t256 instanceof Array)&&((__t256["#"]===undefined)&&(((__tp0=__t256.length),true)&&((__tp0===2)&&((context=__t256[0]),true,(env=__t256[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t257 instanceof Array)&&((__t257["#"]===undefined)&&(((__tp0=__t257.length),true)&&((__tp0===3)&&(((__tp1=__t257[0]),(__tp1==="data"))&&((a=__t257[1]),true,(b=__t257[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["send",["symbol","Math"],["send",["symbol","."],["data",["void"],["symbol","floor"]]]],["data",["send",["symbol","/"],["data",a,b]]]];});stdenv.register_macro("<>",function(__t258,__t259){var __tp0;var context;var env;if(((__t258 instanceof Array)&&((__t258["#"]===undefined)&&(((__tp0=__t258.length),true)&&((__tp0===2)&&((context=__t258[0]),true,(env=__t258[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var x;if(((__t259 instanceof Array)&&((__t259["#"]===undefined)&&(((__tp0=__t259.length),true)&&((__tp0===3)&&(((__tp1=__t259[0]),(__tp1==="data"))&&(((__tp2=__t259[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((x=__t259[2]),true)))))))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","pr"],["data",x]];});var errf_macro=function(tags){return function(__t261,__t260){var __tp0;var context;var env;if(((__t261 instanceof Array)&&((__t261["#"]===undefined)&&(((__tp0=__t261.length),true)&&((__tp0===2)&&((context=__t261[0]),true,(env=__t261[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t262=__t260;var __tp0;var __tp1;var __tp0;var __tp1;var args;var other;var __t263=false;var __t264=false;var __t265=false;if(((__t263=(__t262 instanceof Array))&&((__t264=(__t262["#"]===undefined))&&((__t265=((__tp0=__t262.length),true))&&((__tp0===1)&&((__tp1=__t262[0]),(__tp1==="void"))))))){return ["send",["symbol","ErrorFactory"],["data",patch_array(["data"],tags)]];}else{if((__t265&&((__tp0>=1)&&(((__tp1=__t262[0]),(__tp1==="data"))&&((args=__t262.slice(1)),true))))){return ["send",["send",["send",["symbol","ErrorFactory"],["data",patch_array(["data"],tags)]],["send",["symbol","."],["data",["void"],["symbol","create"]]]],patch_array(["data"],args)];}else{if(((other=__t262),true)){return ["macro",errf_macro(tags.concat([other]))];}else{throw ["Could not find a match",__t262];}}}};};stdenv.register_macro("E",errf_macro([]));stdenv.register_macro("#",function(__t266,__t267){var __tp0;var context;var env;if(((__t266 instanceof Array)&&((__t266["#"]===undefined)&&(((__tp0=__t266.length),true)&&((__tp0===2)&&((context=__t266[0]),true,(env=__t266[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var tag;if(((__t267 instanceof Array)&&((__t267["#"]===undefined)&&(((__tp0=__t267.length),true)&&((__tp0===3)&&(((__tp1=__t267[0]),(__tp1==="data"))&&(((__tp2=__t267[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&(((__tp5=__t267[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((tag=__tp5[1]),true))))))))))))))))){(void 0);}else{throw "a condition failed";}(tag=["value",tag]);return ["macro",function(__t269,expr){var __tp0;var __t268;var env;if(((__t269 instanceof Array)&&((__t269["#"]===undefined)&&(((__tp0=__t269.length),true)&&((__tp0===2)&&((__t268=__t269[0]),true,(env=__t269[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t270=__t268;var _;if((__t270==="pattern")){var checker_mac=["macro",function(_,__t275){var __tp0;var __tp1;var expr;if(((__t275 instanceof Array)&&((__t275["#"]===undefined)&&(((__tp0=__t275.length),true)&&((__tp0===2)&&(((__tp1=__t275[0]),(__tp1==="data"))&&((expr=__t275[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",expr,["value","#"]],tag]];}];var __t271=expr;var __tp0;var __tp1;var subp;var __tp0;var __tp1;var other;var __t272=false;var __t273=false;var __t274=false;if(((__t272=(__t271 instanceof Array))&&((__t273=(__t271["#"]===undefined))&&((__t274=((__tp0=__t271.length),true))&&((__tp0>=1)&&(((__tp1=__t271[0]),(__tp1==="data"))&&((subp=__t271.slice(1)),true))))))){var deconstructor_mac=["macro",function(_,expr){return ["data",["value",true],expr[1]];}];return ["check",checker_mac,["project",deconstructor_mac,patch_array(["duck",0],subp)]];}else{if((__t274&&((__tp0===1)&&((__tp1=__t271[0]),(__tp1==="void"))))){return ["check",checker_mac,["ignore"]];}else{if(((other=__t271),true)){return ["check",checker_mac,expr];}else{throw ["Could not find a match",__t271];}}}}else{if(((_=__t270),true)){var __t276=expr;var __tp0;var __tp1;var __tp0;var __tp1;var args;var other;var __t277=false;var __t278=false;var __t279=false;if(((__t277=(__t276 instanceof Array))&&((__t278=(__t276["#"]===undefined))&&((__t279=((__tp0=__t276.length),true))&&((__tp0===1)&&((__tp1=__t276[0]),(__tp1==="void"))))))){return ["send",["symbol","StructFactory"],["data",tag]];}else{if((__t279&&((__tp0>=1)&&(((__tp1=__t276[0]),(__tp1==="data"))&&((args=__t276.slice(1)),true))))){return ["send",["symbol","Struct"],patch_array(["data",tag],args)];}else{if(((other=__t276),true)){return ["send",["send",["symbol","StructFactory"],["data",tag]],other];}else{throw ["Could not find a match",__t276];}}}}else{throw ["Could not find a match",__t270];}}}];});stdenv.register_macro("~",function(__t280,__t281){var __tp0;var context;var env;if(((__t280 instanceof Array)&&((__t280["#"]===undefined)&&(((__tp0=__t280.length),true)&&((__tp0===2)&&((context=__t280[0]),true,(env=__t280[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var tag;if(((__t281 instanceof Array)&&((__t281["#"]===undefined)&&(((__tp0=__t281.length),true)&&((__tp0===3)&&(((__tp1=__t281[0]),(__tp1==="data"))&&(((__tp2=__t281[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&(((__tp5=__t281[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((tag=__tp5[1]),true))))))))))))))))){(void 0);}else{throw "a condition failed";}(tag=["value",tag]);var f=function(__t283,expr){var __tp0;var __t282;var env;if(((__t283 instanceof Array)&&((__t283["#"]===undefined)&&(((__tp0=__t283.length),true)&&((__tp0===2)&&((__t282=__t283[0]),true,(env=__t283[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t284=__t282;var _;if((__t284==="pattern")){var checker_mac=function(){var f1=function(_,__t289){var __tp0;var __tp1;var expr;if(((__t289 instanceof Array)&&((__t289["#"]===undefined)&&(((__tp0=__t289.length),true)&&((__tp0===2)&&(((__tp1=__t289[0]),(__tp1==="data"))&&((expr=__t289[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","instanceof"],["data",expr,["symbol","Array"]]];};var f2=function(_,__t290){var __tp0;var __tp1;var expr;if(((__t290 instanceof Array)&&((__t290["#"]===undefined)&&(((__tp0=__t290.length),true)&&((__tp0===2)&&(((__tp1=__t290[0]),(__tp1==="data"))&&((expr=__t290[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",expr,["value",0]],tag]];};return ["multi",["macro",f1],["macro",f2]];}();var __t285=expr;var __tp0;var __tp1;var subp;var __tp0;var __tp1;var other;var __t286=false;var __t287=false;var __t288=false;if(((__t286=(__t285 instanceof Array))&&((__t287=(__t285["#"]===undefined))&&((__t288=((__tp0=__t285.length),true))&&((__tp0>=1)&&(((__tp1=__t285[0]),(__tp1==="data"))&&((subp=__t285.slice(1)),true))))))){return patch_array(["data",tag],subp);}else{if((__t288&&((__tp0===1)&&((__tp1=__t285[0]),(__tp1==="void"))))){return ["check",checker_mac,["ignore"]];}else{if(((other=__t285),true)){return ["check",checker_mac,expr];}else{throw ["Could not find a match",__t285];}}}}else{if(((_=__t284),true)){var __t291=expr;var __tp0;var __tp1;var __tp0;var __tp1;var args;var other;var __t292=false;var __t293=false;var __t294=false;if(((__t292=(__t291 instanceof Array))&&((__t293=(__t291["#"]===undefined))&&((__t294=((__tp0=__t291.length),true))&&((__tp0===1)&&((__tp1=__t291[0]),(__tp1==="void"))))))){return ["data",tag];}else{if((__t294&&((__tp0>=1)&&(((__tp1=__t291[0]),(__tp1==="data"))&&((args=__t291.slice(1)),true))))){return patch_array(["data",tag],args);}else{if(((other=__t291),true)){return ["send",["data",tag],other];}else{throw ["Could not find a match",__t291];}}}}else{throw ["Could not find a match",__t284];}}};return ["macro",f];});stdenv.register_macro("when",function(__t296,__t297){var __tp0;var context;var env;if(((__t296 instanceof Array)&&((__t296["#"]===undefined)&&(((__tp0=__t296.length),true)&&((__tp0===2)&&((context=__t296[0]),true,(env=__t296[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __t295;var condition;if(((__t297 instanceof Array)&&((__t297["#"]===undefined)&&(((__tp0=__t297.length),true)&&((__tp0===3)&&(((__tp1=__t297[0]),(__tp1==="data"))&&((__t295=__t297[1]),true,(condition=__t297[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t298=__t295;var __tp0;var __tp1;var other;if(((__t298 instanceof Array)&&((__t298["#"]===undefined)&&(((__tp0=__t298.length),true)&&((__tp0===1)&&((__tp1=__t298[0]),(__tp1==="void"))))))){return ["test",condition,["ignore"]];}else{if(((other=__t298),true)){return ["test",condition,other];}else{throw ["Could not find a match",__t298];}}});var andf=function(__t299,expr){var __tp0;var context;var env;if(((__t299 instanceof Array)&&((__t299["#"]===undefined)&&(((__tp0=__t299.length),true)&&((__tp0===2)&&((context=__t299[0]),true,(env=__t299[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t300=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var a;var b;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t301=false;var __t302=false;var __t303=false;var __t304=false;if(((__t301=(__t300 instanceof Array))&&((__t302=(__t300["#"]===undefined))&&((__t303=((__tp0=__t300.length),true))&&((__t304=(__tp0===2))&&(((__tp1=__t300[0]),(__tp1==="pattern"))&&(((__tp2=__t300[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((a=__tp2[1]),true,(b=__tp2[2]),true)))))))))))){return ["all",a,b];}else{if((__t304&&(((_=__t300[0]),true,(__tp1=__t300[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return ["symbol","___and"];}else{if(((other=__t300),true)){return ["send",["symbol","___and"],expr];}else{throw ["Could not find a match",__t300];}}}};stdenv.register_macro("&&",andf);stdenv.register_macro("and",andf);var orf=function(__t305,expr){var __tp0;var context;var env;if(((__t305 instanceof Array)&&((__t305["#"]===undefined)&&(((__tp0=__t305.length),true)&&((__tp0===2)&&((context=__t305[0]),true,(env=__t305[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t306=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var a;var b;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t307=false;var __t308=false;var __t309=false;var __t310=false;if(((__t307=(__t306 instanceof Array))&&((__t308=(__t306["#"]===undefined))&&((__t309=((__tp0=__t306.length),true))&&((__t310=(__tp0===2))&&(((__tp1=__t306[0]),(__tp1==="pattern"))&&(((__tp2=__t306[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((a=__tp2[1]),true,(b=__tp2[2]),true)))))))))))){return ["any",a,b];}else{if((__t310&&(((_=__t306[0]),true,(__tp1=__t306[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return ["symbol","___or"];}else{if(((other=__t306),true)){return ["send",["symbol","___or"],expr];}else{throw ["Could not find a match",__t306];}}}};stdenv.register_macro("||",orf);stdenv.register_macro("or",orf);var partial_pattern=function(operator){(operator=["symbol",operator]);return function(__t311,expr){var __tp0;var context;var env;if(((__t311 instanceof Array)&&((__t311["#"]===undefined)&&(((__tp0=__t311.length),true)&&((__tp0===2)&&((context=__t311[0]),true,(env=__t311[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t312=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var val;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t313=false;var __t314=false;var __t315=false;var __t316=false;if(((__t313=(__t312 instanceof Array))&&((__t314=(__t312["#"]===undefined))&&((__t315=((__tp0=__t312.length),true))&&((__t316=(__tp0===2))&&(((__tp1=__t312[0]),(__tp1==="pattern"))&&(((__tp2=__t312[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===1)&&(((__tp7=__tp5[0]),(__tp7==="void"))&&((val=__tp2[2]),true))))))))))))))))){return ["check",["macro",make_checker(val,operator)],["ignore"]];}else{if((__t316&&(((_=__t312[0]),true,(__tp1=__t312[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return operator;}else{if(((other=__t312),true)){return ["send",operator,expr];}else{throw ["Could not find a match",__t312];}}}};};stdenv.register_macro("==",partial_pattern("___eq"));stdenv.register_macro("!=",partial_pattern("___neq"));stdenv.register_macro("<=",partial_pattern("___lte"));stdenv.register_macro(">=",partial_pattern("___gte"));stdenv.register_macro("<",partial_pattern("___lt"));stdenv.register_macro(">",partial_pattern("___gt"));stdenv.register_macro("*",function(__t317,expr){var __tp0;var context;var env;if(((__t317 instanceof Array)&&((__t317["#"]===undefined)&&(((__tp0=__t317.length),true)&&((__tp0===2)&&((context=__t317[0]),true,(env=__t317[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t318=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var val;var __tp0;var _;var __tp1;var __tp2;var __tp3;var other;var __t319=false;var __t320=false;var __t321=false;var __t322=false;if(((__t319=(__t318 instanceof Array))&&((__t320=(__t318["#"]===undefined))&&((__t321=((__tp0=__t318.length),true))&&((__t322=(__tp0===2))&&(((__tp1=__t318[0]),(__tp1==="pattern"))&&(((__tp2=__t318[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))))))){return ["dynsplice",["ignore"]];}else{if((__t322&&(((__tp1=__t318[0]),((__tp1==="pattern")||(__tp1==="data")))&&(((__tp2=__t318[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===1)&&(((__tp7=__tp5[0]),(__tp7==="void"))&&((val=__tp2[2]),true)))))))))))))){return ["dynsplice",val];}else{if((__t322&&(((_=__t318[0]),true,(__tp1=__t318[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return ["symbol","___times"];}else{if(((other=__t318),true)){return ["send",["symbol","___times"],expr];}else{throw ["Could not find a match",__t318];}}}}});stdenv.register_macro(".",function(__t324,__t323){var __tp0;var context;var env;if(((__t324 instanceof Array)&&((__t324["#"]===undefined)&&(((__tp0=__t324.length),true)&&((__tp0===2)&&((context=__t324[0]),true,(env=__t324[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t325=__t323;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var s;var other;if(((__t325 instanceof Array)&&((__t325["#"]===undefined)&&(((__tp0=__t325.length),true)&&((__tp0===3)&&(((__tp1=__t325[0]),(__tp1==="data"))&&(((__tp2=__t325[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&(((__tp5=__t325[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((s=__tp5[1]),true))))))))))))))))){return ["value",s];}else{if(((other=__t325),true)){throw ErrorFactory(["syntax","dot"]).create("'.' macro was given an illegal argument",({"arg":other}));}else{throw ["Could not find a match",__t325];}}});stdenv.register_macro("where",function(__t327,__t326){var __tp0;var context;var env;if(((__t327 instanceof Array)&&((__t327["#"]===undefined)&&(((__tp0=__t327.length),true)&&((__tp0===2)&&((context=__t327[0]),true,(env=__t327[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t328=__t326;var __tp0;var __tp1;var a;var b;var other;if(((__t328 instanceof Array)&&((__t328["#"]===undefined)&&(((__tp0=__t328.length),true)&&((__tp0===3)&&(((__tp1=__t328[0]),(__tp1==="data"))&&((a=__t328[1]),true,(b=__t328[2]),true))))))){return ["send",["symbol","let"],["data",b,a]];}else{if(((other=__t328),true)){throw ErrorFactory(["syntax","where"]).create("'where' macro was given an illegal argument",({"arg":other}));}else{throw ["Could not find a match",__t328];}}});stdenv.register_macro("let",function(__t330,__t329){var __tp0;var context;var env;if(((__t330 instanceof Array)&&((__t330["#"]===undefined)&&(((__tp0=__t330.length),true)&&((__tp0===2)&&((context=__t330[0]),true,(env=__t330[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t331=__t329;var __tp0;var __tp1;var a;var b;var other;if(((__t331 instanceof Array)&&((__t331["#"]===undefined)&&(((__tp0=__t331.length),true)&&((__tp0===3)&&(((__tp1=__t331[0]),(__tp1==="data"))&&((a=__t331[1]),true,(b=__t331[2]),true))))))){var bindings=aslist(a);var body=aslist(b);return patch_array(["multi"],bindings,body);}else{if(((other=__t331),true)){throw ErrorFactory(["syntax","let"]).create("'let' macro was given an illegal argument",({"arg":other}));}else{throw ["Could not find a match",__t331];}}});stdenv.register_macro("->",function(__t332,__t333){var __tp0;var context;var env;if(((__t332 instanceof Array)&&((__t332["#"]===undefined)&&(((__tp0=__t332.length),true)&&((__tp0===2)&&((context=__t332[0]),true,(env=__t332[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var args;var stmts;if(((__t333 instanceof Array)&&((__t333["#"]===undefined)&&(((__tp0=__t333.length),true)&&((__tp0===3)&&(((__tp1=__t333[0]),(__tp1==="data"))&&((args=__t333[1]),true,(stmts=__t333[2]),true))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var placeholder;var __tp2;var __tp3;var __tp4;var newargs;if((((__tp0=find_arrow(args)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&(((placeholder=__tp0[0]),true,(__tp2=__tp0[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3>=1)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((newargs=__tp2.slice(1)),true))))))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var fw;var bw;var keys;var dflt;var rest;if((((__tp0=lhs_parse_specs(env,newargs)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===5)&&((fw=__tp0[0]),true,(bw=__tp0[1]),true,(keys=__tp0[2]),true,(dflt=__tp0[3]),true,(rest=__tp0[4]),true)))))){(void 0);}else{throw "a condition failed";}if(((rest||dflt.length)||keys.length)){var body=["send",["symbol","match"],["data",["send",["send",["send",["send",["symbol","Array"],["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],["send",["symbol","."],["data",["void"],["symbol","slice"]]]],["send",["symbol","."],["data",["void"],["symbol","call"]]]],["data",["symbol","arguments"],["value",0]]],["send",["symbol","->"],["data",args,stmts]]]];return ["lambda",[],body];}else{var body=["multi"];(newargs=function(){var __t334=[];var __t335=newargs;var __t336=__t335.length;for(var __t337=0;(__t337<__t336);(__t337++)){var __t338=__t335[__t337];var __tp0;var __tp1;var s;var other;var other;var __t339=false;if(((__t338 instanceof Array)&&((__t338["#"]===undefined)&&(((__tp0=__t338.length),true)&&((__tp0===2)&&(((__tp1=__t338[0]),(__tp1==="symbol"))&&((s=__t338[1]),true))))))){__t334.push(["symbol",s]);}else{if((__t339=((other=__t338),true))){__t334.push(function(){var t=gensym();body.push(["send",["symbol","="],["data",other,t]]);return t;}());}else{if(__t339){false;}else{throw ["Could not find a match",__t338];}}}}return __t334;}());body.push(function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,stmts]];}else{return stmts;}}());return ["lambda",newargs,body];}});var build_each=function(source,patterns,__t340,__t341,lvar){var __tp0;var prelude;if((((__tp0=___projector(aslist)(__t340)),__tp0[0])&&((prelude=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var __tp0;var tail;if((((__tp0=___projector(aslist)(__t341)),__tp0[0])&&((tail=__tp0[1]),true))){(void 0);}else{throw "a condition failed";}var temp=gensym();var len=gensym();(lvar=(lvar||gensym()));var stmts=patch_array(["multi"],prelude).concat([["send",["symbol","="],["data",temp,source]],["send",["symbol","="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]]]);var loop=function(){var a=["send",["symbol","="],["data",lvar,["value",0]]];var b=["send",["symbol","<"],["data",lvar,len]];var c=["send",["symbol","++"],["data",lvar,["void"]]];var body=["send",["symbol","|>"],["data",["send",["symbol","___js_fetch"],["data",temp,lvar]],patterns]];return ["js_for",a,b,c,body];}();stmts.push(loop);var stmts=stmts.concat(tail);return stmts;};stdenv.register_macro("each",function(__t343,__t344){var __tp0;var __t342;var env;if(((__t343 instanceof Array)&&((__t343["#"]===undefined)&&(((__tp0=__t343.length),true)&&((__tp0===2)&&((__t342=__t343[0]),true,(env=__t343[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var arr;var __tp2;var __tp3;var patterns;if(((__t344 instanceof Array)&&((__t344["#"]===undefined)&&(((__tp0=__t344.length),true)&&((__tp0===3)&&(((__tp1=__t344[0]),(__tp1==="data"))&&(((arr=__t344[1]),true,(__tp2=__t344[2]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((patterns=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}var __t345=__t342;var other;if((__t345==="multi")){patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,patch_array(["multi"],patterns),["multi"],["symbol","false"]);}else{if(((other=__t345),true)){var res=gensym();(patterns=function(){var __t346=[];var __t347=patterns;var __t348=__t347.length;for(var __t349=0;(__t349<__t348);(__t349++)){var __t350=__t347[__t349];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var patt;var expr;var other;var other;var __t351=false;if(((__t350 instanceof Array)&&((__t350["#"]===undefined)&&(((__tp0=__t350.length),true)&&((__tp0===3)&&(((__tp1=__t350[0]),(__tp1==="send"))&&(((__tp2=__t350[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=__t350[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((patt=__tp6[1]),true,(expr=__tp6[2]),true)))))))))))))))))){__t346.push(["send",["symbol","->"],["data",patt,["send",["send",res,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",expr]]]]);}else{if((__t351=((other=__t350),true))){__t346.push(INVALID_PATTERN);}else{if(__t351){false;}else{throw ["Could not find a match",__t350];}}}}return __t346;}());patterns.push(["send",["symbol","->"],["data",["symbol","other"],["symbol","false"]]]);return build_each(arr,patch_array(["multi"],patterns),["send",["symbol","="],["data",res,["data"]]],res);}else{throw ["Could not find a match",__t345];}}});stdenv.register_macro("=>",function(__t353,__t354){var __tp0;var __t352;var env;if(((__t353 instanceof Array)&&((__t353["#"]===undefined)&&(((__tp0=__t353.length),true)&&((__tp0===2)&&((__t352=__t353[0]),true,(env=__t353[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var binding;var value;if(((__t354 instanceof Array)&&((__t354["#"]===undefined)&&(((__tp0=__t354.length),true)&&((__tp0===3)&&(((__tp1=__t354[0]),(__tp1==="data"))&&((binding=__t354[1]),true,(value=__t354[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t355=__t352;var context;if(((__t355==="data")||(__t355==="pattern"))){var __t356=binding;var __tp0;var __tp1;var _;if(((__t356 instanceof Array)&&((__t356["#"]===undefined)&&(((__tp0=__t356.length),true)&&((__tp0===1)&&((__tp1=__t356[0]),(__tp1==="void"))))))){return ["assoc",value];}else{if(((_=__t356),true)){return ["assoc",binding,value];}else{throw ["Could not find a match",__t356];}}}else{if(((context=__t355),true)){throw (("Illegal context for '=>' ("+context)+")");}else{throw ["Could not find a match",__t355];}}});stdenv.register_macro("as",function(__t357,__t358){var __tp0;var context;var env;if(((__t357 instanceof Array)&&((__t357["#"]===undefined)&&(((__tp0=__t357.length),true)&&((__tp0===2)&&((context=__t357[0]),true,(env=__t357[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;var variable;if(((__t358 instanceof Array)&&((__t358["#"]===undefined)&&(((__tp0=__t358.length),true)&&((__tp0===3)&&(((__tp1=__t358[0]),(__tp1==="data"))&&((expr=__t358[1]),true,(variable=__t358[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t359=context;var _;if((__t359==="pattern")){return ["constant",expr,variable];}else{if(((_=__t359),true)){return ["send",["symbol","="],["data",variable,expr]];}else{throw ["Could not find a match",__t359];}}});stdenv.register_macro("=",function(__t360,expr){var __tp0;var context;var env;if(((__t360 instanceof Array)&&((__t360["#"]===undefined)&&(((__tp0=__t360.length),true)&&((__tp0===2)&&((context=__t360[0]),true,(env=__t360[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t361=[context,expr];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var lhs;var rhs;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var f;var args;var value;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var b;var value;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var patt;var value;var other;var __t362=false;var __t363=false;var __t364=false;var __t365=false;var __t366=false;var __t367=false;var __t368=false;var __t369=false;var __t370=false;var __t371=false;if(((__t362=(__t361 instanceof Array))&&((__t363=(__t361["#"]===undefined))&&((__t364=((__tp0=__t361.length),true))&&((__t365=(__tp0===2))&&(((__tp1=__t361[0]),((__tp1==="multi")||(__tp1==="expr")))&&(((__tp2=__t361[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((lhs=__tp2[1]),true,(rhs=__tp2[2]),true)))))))))))){var __tp0;var __tp1;var __tp2;var __tp3;var vars;var clauses;var ph;if((((__tp0=parse_lhs(env,lhs,rhs)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===3)&&(((__tp2=__tp0[0]),(__tp3=___projector(make_declarations)(__tp2)),__tp3[0])&&((vars=__tp3[1]),true,(clauses=__tp0[1]),true,(ph=__tp0[2]),true))))))){(void 0);}else{throw "a condition failed";}var r=patch_array(["splice"],vars);var mkif=function(x){return ["if",x,["value",undefined],["js_throw",["value","a condition failed"]]];};var __t372=clauses;var __tp0;var clause;var _;if(((__t372 instanceof Array)&&((__t372["#"]===undefined)&&(((__tp0=__t372.length),true)&&((__tp0===1)&&((clause=__t372[0]),true)))))){var __t373=send(clause,(clause.length-1));var __tp0;var __tp1;var __tp2;var other;if(((__t373 instanceof Array)&&((__t373["#"]===undefined)&&(((__tp0=__t373.length),true)&&((__tp0===2)&&(((__tp1=__t373[0]),(__tp1==="value"))&&((__tp2=__t373[1]),(__tp2===true)))))))){(r=function(){if(((vars.length===1)&&(clause.length===3))){return patch_array(["declare"],clause[1].slice(1));}else{return r.concat(clause.slice(1,(-1)));}}());}else{if(((other=__t373),true)){r.push(mkif(clause));}else{throw ["Could not find a match",__t373];}}}else{if(((_=__t372),true)){var ands=make_pattern_test(clauses);r.push(mkif(ands));}else{throw ["Could not find a match",__t372];}}return r;}else{if((__t365&&((__t366=((__tp1=__t361[0]),(__tp1==="data")))&&((__t367=((__tp2=__t361[1]),(__tp2 instanceof Array)))&&((__t368=(__tp2["#"]===undefined))&&((__t369=((__tp3=__tp2.length),true))&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void"))))))))){return ["assoc"];}else{if((__t369&&((__t370=(__tp3===3))&&((__t371=((__tp4=__tp2[0]),(__tp4==="data")))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===3)&&(((__tp7=__tp5[0]),(__tp7==="send"))&&((f=__tp5[1]),true,(args=__tp5[2]),true,(value=__tp2[2]),true)))))))))){(f=function(){var __t374=f;var __tp0;var __tp1;var _;var __tp0;var __tp1;var z;var __t375=false;var __t376=false;var __t377=false;var __t378=false;if(((__t375=(__t374 instanceof Array))&&((__t376=(__t374["#"]===undefined))&&((__t377=((__tp0=__t374.length),true))&&((__t378=(__tp0===2))&&(((__tp1=__t374[0]),(__tp1==="value"))&&((_=__t374[1]),true))))))){return f;}else{if((__t378&&(((__tp1=__t374[0]),(__tp1==="symbol"))&&((z=__t374[1]),true)))){return ["value",z];}else{throw ["Could not find a match",__t374];}}}());return ["assoc",f,["send",["symbol","->"],["data",args,value]]];}else{if((__t371&&((b=__tp2[1]),true,(value=__tp2[2]),true))){(b=function(){var __t379=b;var __tp0;var __tp1;var _;var __tp0;var __tp1;var z;var __t380=false;var __t381=false;var __t382=false;var __t383=false;if(((__t380=(__t379 instanceof Array))&&((__t381=(__t379["#"]===undefined))&&((__t382=((__tp0=__t379.length),true))&&((__t383=(__tp0===2))&&(((__tp1=__t379[0]),(__tp1==="value"))&&((_=__t379[1]),true))))))){return b;}else{if((__t383&&(((__tp1=__t379[0]),(__tp1==="symbol"))&&((z=__t379[1]),true)))){return ["value",z];}else{throw ["Could not find a match",__t379];}}}());return ["assoc",b,value];}else{if((__t365&&(((__tp1=__t361[0]),(__tp1==="pattern"))&&(((__tp2=__t361[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="data"))&&((patt=__tp2[1]),true,(value=__tp2[2]),true))))))))){return ["default",patt,value];}else{if(((other=__t361),true)){throw (("Illegal context for '=' ("+context)+")");}else{throw ["Could not find a match",__t361];}}}}}}});var make_assigner=function(op){return function(__t384,__t385){var __tp0;var context;var env;if(((__t384 instanceof Array)&&((__t384["#"]===undefined)&&(((__tp0=__t384.length),true)&&((__tp0===2)&&((context=__t384[0]),true,(env=__t384[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t385 instanceof Array)&&((__t385["#"]===undefined)&&(((__tp0=__t385.length),true)&&((__tp0===3)&&(((__tp1=__t385[0]),(__tp1==="data"))&&((a=__t385[1]),true,(b=__t385[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["assign",a,["send",["symbol",op],["data",a,b]]];};};stdenv.register_macro(":=",function(__t386,__t387){var __tp0;var context;var env;if(((__t386 instanceof Array)&&((__t386["#"]===undefined)&&(((__tp0=__t386.length),true)&&((__tp0===2)&&((context=__t386[0]),true,(env=__t386[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var a;var b;if(((__t387 instanceof Array)&&((__t387["#"]===undefined)&&(((__tp0=__t387.length),true)&&((__tp0===3)&&(((__tp1=__t387[0]),(__tp1==="data"))&&((a=__t387[1]),true,(b=__t387[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["assign",a,b];});stdenv.register_macro("+=",make_assigner("+"));stdenv.register_macro("-=",make_assigner("-"));stdenv.register_macro("*=",make_assigner("*"));stdenv.register_macro("/=",make_assigner("/"));stdenv.register_macro("<<=",make_assigner("<<"));stdenv.register_macro(">>=",make_assigner(">>"));stdenv.register_macro(">>>=",make_assigner(">>>"));stdenv.register_macro("++=",make_assigner("++"));stdenv.register_macro("?=",make_assigner("match"));stdenv.register_macro("if",function(__t389,__t388){var __tp0;var context;var env;if(((__t389 instanceof Array)&&((__t389["#"]===undefined)&&(((__tp0=__t389.length),true)&&((__tp0===2)&&((context=__t389[0]),true,(env=__t389[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t390=__t388;var __tp0;var __tp1;var test;var a;var b;var __tp0;var __tp1;var test;var __tp2;var __tp3;var __t391;var other;var __t392=false;var __t393=false;var __t394=false;if(((__t392=(__t390 instanceof Array))&&((__t393=(__t390["#"]===undefined))&&((__t394=((__tp0=__t390.length),true))&&((__tp0===4)&&(((__tp1=__t390[0]),(__tp1==="data"))&&((test=__t390[1]),true,(a=__t390[2]),true,(b=__t390[3]),true))))))){return ["if",test,a,b];}else{if((__t394&&((__tp0===3)&&(((__tp1=__t390[0]),(__tp1==="data"))&&(((test=__t390[1]),true,(__tp2=__t390[2]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((__t391=__tp3[1]),true)))))){var __t395=__t391;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var s1;var __tp13;var __tp14;var __tp15;var __tp16;var __tp17;var __tp18;var __tp19;var __tp20;var __tp21;var __tp22;var __tp23;var __tp24;var s2;var __tp0;var s1;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var s2;var other;var __t396=false;var __t397=false;var __t398=false;if(((__t396=(__t395 instanceof Array))&&((__t397=(__t395["#"]===undefined))&&((__t398=((__tp0=__t395.length),true))&&((__tp0===2)&&(((__tp1=__t395[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="then"))&&(((__tp8=__tp1[2]),(__tp8 instanceof Array))&&((__tp8["#"]===undefined)&&(((__tp9=__tp8.length),true)&&((__tp9===2)&&(((__tp10=__tp8[0]),(__tp10==="data"))&&(((__tp11=__tp8[1]),(__tp12=___projector(aslist)(__tp11)),__tp12[0])&&(((s1=__tp12[1]),true,(__tp13=__t395[1]),(__tp13 instanceof Array))&&((__tp13["#"]===undefined)&&(((__tp14=__tp13.length),true)&&((__tp14===3)&&(((__tp15=__tp13[0]),(__tp15==="send"))&&(((__tp16=__tp13[1]),(__tp16 instanceof Array))&&((__tp16["#"]===undefined)&&(((__tp17=__tp16.length),true)&&((__tp17===2)&&(((__tp18=__tp16[0]),(__tp18==="symbol"))&&(((__tp19=__tp16[1]),(__tp19==="else"))&&(((__tp20=__tp13[2]),(__tp20 instanceof Array))&&((__tp20["#"]===undefined)&&(((__tp21=__tp20.length),true)&&((__tp21===2)&&(((__tp22=__tp20[0]),(__tp22==="data"))&&(((__tp23=__tp20[1]),(__tp24=___projector(aslist)(__tp23)),__tp24[0])&&((s2=__tp24[1]),true)))))))))))))))))))))))))))))))))))))))){return ["if",test,patch_array(["multi"],s1),patch_array(["multi"],s2)];}else{if((__t398&&((__tp0>=1)&&(((s1=__t395.slice(0,-1)),true,(__tp1=send(__t395,(__tp0-1))),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="else"))&&(((__tp8=__tp1[2]),(__tp8 instanceof Array))&&((__tp8["#"]===undefined)&&(((__tp9=__tp8.length),true)&&((__tp9===2)&&(((__tp10=__tp8[0]),(__tp10==="data"))&&(((__tp11=__tp8[1]),(__tp12=___projector(aslist)(__tp11)),__tp12[0])&&((s2=__tp12[1]),true))))))))))))))))))))){return ["if",test,patch_array(["multi"],s1),patch_array(["multi"],s2)];}else{if(((other=__t395),true)){return ["if",test,patch_array(["multi"],other),["value",null]];}else{throw ["Could not find a match",__t395];}}}}else{if(((other=__t390),true)){pr(other);return send(raise,Error("error in if"));}else{throw ["Could not find a match",__t390];}}}});stdenv.register_macro("cond",function(__t399,__t400){var __tp0;var context;var env;if(((__t399 instanceof Array)&&((__t399["#"]===undefined)&&(((__tp0=__t399.length),true)&&((__tp0===2)&&((context=__t399[0]),true,(env=__t399[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var clauses;if(((__t400 instanceof Array)&&((__t400["#"]===undefined)&&(((__tp0=__t400.length),true)&&((__tp0===2)&&(((__tp1=__t400[0]),(__tp1==="data"))&&((clauses=__t400[1]),true))))))){(void 0);}else{throw "a condition failed";}var handle=function(xs){var __t401=xs;var __tp0;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var test;var body;var rest;var __t402=false;var __t403=false;var __t404=false;if(((__t402=(__t401 instanceof Array))&&((__t403=(__t401["#"]===undefined))&&((__t404=((__tp0=__t401.length),true))&&(__tp0===0))))){return ["value",false];}else{if((__t404&&((__tp0>=1)&&(((__tp1=__t401[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="=>"))&&(((__tp8=__tp1[2]),(__tp8 instanceof Array))&&((__tp8["#"]===undefined)&&(((__tp9=__tp8.length),true)&&((__tp9===3)&&(((__tp10=__tp8[0]),(__tp10==="data"))&&((test=__tp8[1]),true,(body=__tp8[2]),true,(rest=__t401.slice(1)),true)))))))))))))))))))){(test=function(){var __t405=test;var __tp0;var __tp1;var __tp2;var _;if(((__t405 instanceof Array)&&((__t405["#"]===undefined)&&(((__tp0=__t405.length),true)&&((__tp0===2)&&(((__tp1=__t405[0]),(__tp1==="symbol"))&&((__tp2=__t405[1]),(__tp2==="else")))))))){return ["value",true];}else{if(((_=__t405),true)){return test;}else{throw ["Could not find a match",__t405];}}}());return ["if",test,body,handle(rest)];}else{throw ["Could not find a match",__t401];}}};return handle(aslist(clauses));});stdenv.register_macro("while",function(__t406,expr){var __tp0;var context;var env;if(((__t406 instanceof Array)&&((__t406["#"]===undefined)&&(((__tp0=__t406.length),true)&&((__tp0===2)&&((context=__t406[0]),true,(env=__t406[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var test;var body;if(((expr instanceof Array)&&((expr["#"]===undefined)&&(((__tp0=expr.length),true)&&((__tp0===3)&&(((__tp1=expr[0]),(__tp1==="data"))&&((test=expr[1]),true,(body=expr[2]),true))))))){(void 0);}else{throw "a condition failed";}return ["js_while",test,body];});stdenv.register_macro("for",function(__t408,__t407){var __tp0;var context;var env;if(((__t408 instanceof Array)&&((__t408["#"]===undefined)&&(((__tp0=__t408.length),true)&&((__tp0===2)&&((context=__t408[0]),true,(env=__t408[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t409=__t407;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var a;var b;var c;var body;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var a;var b;var body;var __t410=false;var __t411=false;var __t412=false;var __t413=false;var __t414=false;var __t415=false;var __t416=false;var __t417=false;if(((__t410=(__t409 instanceof Array))&&((__t411=(__t409["#"]===undefined))&&((__t412=((__tp0=__t409.length),true))&&((__t413=(__tp0===3))&&((__t414=((__tp1=__t409[0]),(__tp1==="data")))&&((__t415=((__tp2=__t409[1]),(__tp2 instanceof Array)))&&((__t416=(__tp2["#"]===undefined))&&((__t417=((__tp3=__tp2.length),true))&&((__tp3===4)&&(((__tp4=__tp2[0]),(__tp4==="multi"))&&((a=__tp2[1]),true,(b=__tp2[2]),true,(c=__tp2[3]),true,(body=__t409[2]),true)))))))))))){return ["js_for",a,b,c,body];}else{if((__t417&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="send"))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&(((__tp8=__tp5[1]),(__tp8==="in"))&&(((__tp9=__tp2[2]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="data"))&&((a=__tp9[1]),true,(b=__tp9[2]),true,(body=__t409[2]),true)))))))))))))))){return ["js_for_in",a,b,body];}else{throw ["Could not find a match",__t409];}}});stdenv.register_macro("!!",function(__t419,__t420){var __tp0;var __t418;var env;if(((__t419 instanceof Array)&&((__t419["#"]===undefined)&&(((__tp0=__t419.length),true)&&((__tp0===2)&&((__t418=__t419[0]),true,(env=__t419[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;var matchers;if(((__t420 instanceof Array)&&((__t420["#"]===undefined)&&(((__tp0=__t420.length),true)&&((__tp0===3)&&(((__tp1=__t420[0]),(__tp1==="data"))&&((expr=__t420[1]),true,(matchers=__t420[2]),true))))))){(void 0);}else{throw "a condition failed";}var __t421=__t418;var other;if((__t421==="multi")){var excv=gensym();var m=function(){var __t422=aslist(matchers);var ms;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var _;var x;if((((ms=__t422),true,(__t422 instanceof Array))&&((__t422["#"]===undefined)&&(((__tp0=__t422.length),true)&&((__tp0>=1)&&(((__tp1=__t422[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="->"))&&((_=__tp1[2]),true,__t422.slice(1),true))))))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,patch_array(["multi"],ms)]];}else{if(((x=__t422),true)){return matchers;}else{throw ["Could not find a match",__t422];}}}();var f=["send",["symbol","->"],["data",["data",excv],m]];return ["multi",["js_try",expr,f,["void"]]];}else{if(((other=__t421),true)){var excv=gensym();var res=gensym();var m=function(){var __t423=aslist(matchers);var ms;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var _;var x;if((((ms=__t423),true,(__t423 instanceof Array))&&((__t423["#"]===undefined)&&(((__tp0=__t423.length),true)&&((__tp0>=1)&&(((__tp1=__t423[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((__tp4=__tp1[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&(((__tp7=__tp4[1]),(__tp7==="->"))&&((_=__tp1[2]),true,__t423.slice(1),true))))))))))))))))){ms.push(["send",["symbol","->"],["data",["symbol","___exc"],["send",["symbol","throw"],["symbol","___exc"]]]]);return ["send",["symbol","|>"],["data",excv,patch_array(["multi"],ms)]];}else{if(((x=__t423),true)){return matchers;}else{throw ["Could not find a match",__t423];}}}();var f=["send",["symbol","->"],["data",["data",excv],["send",["symbol",":="],["data",res,m]]]];return ["multi",["declare",res,["value",undefined]],["js_try",["assign",res,expr],f,["void"]],res];}else{throw ["Could not find a match",__t421];}}});stdenv.register_macro("new",function(_,expr){return ["js_new",expr];});stdenv.register_macro("return",function(_,expr){return ["js_return",expr];});stdenv.register_macro("delete",function(_,expr){return ["js_delete",expr];});stdenv.register_macro("throw",function(_,expr){return ["js_throw",expr];});stdenv.register_macro("break",function(_,expr){return ["js_break"];});stdenv.register_macro("continue",function(_,expr){return ["js_continue"];});var rx_wrap=function(x){return (("(?:"+x)+")");};var rx_quote=function(x){return x.replace(RegExp("([.?*+\\^$\\[\\]\\(\\)\\{\\}|\\\\])","g"),"\\$1");};var rx_quote2=function(x){return x.replace(RegExp("([\\[\\]\\(\\)\\{\\}\\^])","g"),"\\$1");};var rx_build2=function(__t424){var __t425=__t424;var __tp0;var __tp1;var __t426;var __tp0;var __tp1;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var s;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __t427;var __tp5;var __tp6;var __tp7;var a;var b;var __tp0;var __tp1;var args;var __tp0;var __tp1;var args;var otherA;var __t428=false;var __t429=false;var __t430=false;var __t431=false;var __t432=false;var __t433=false;var __t434=false;var __t435=false;var __t436=false;var __t437=false;if(((__t428=(__t425 instanceof Array))&&((__t429=(__t425["#"]===undefined))&&((__t430=((__tp0=__t425.length),true))&&((__t431=(__tp0===2))&&(((__tp1=__t425[0]),(__tp1==="symbol"))&&((__t426=__t425[1]),true))))))){var __t438=__t426;if((__t438==="any")){return ".";}else{if((__t438==="start")){return "^";}else{if((__t438==="end")){return "$";}else{if((__t438==="alpha")){return "\\a";}else{if((__t438==="digit")){return "\\d";}else{if((__t438==="word")){return "\\w";}else{if((__t438==="space")){return "\\s";}else{if((__t438==="boundary")){return "\\b";}else{if((__t438==="a")){return "\\a";}else{if((__t438==="d")){return "\\d";}else{if((__t438==="w")){return "\\w";}else{if((__t438==="s")){return "\\s";}else{if((__t438==="b")){return "\\b";}else{throw ["Could not find a match",__t438];}}}}}}}}}}}}}}else{if((__t431&&(((__tp1=__t425[0]),(__tp1==="value"))&&((x=__t425[1]),true)))){return rx_quote(x);}else{if((__t430&&((__t431=(__tp0===3))&&((__t432=((__tp1=__t425[0]),(__tp1==="send")))&&((__t433=((__tp2=__t425[1]),(__tp2 instanceof Array)))&&((__t434=(__tp2["#"]===undefined))&&((__t435=((__tp3=__tp2.length),true))&&((__t436=(__tp3===2))&&((__t437=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="raw"))&&(((__tp6=__t425[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===2)&&(((__tp8=__tp6[0]),(__tp8==="value"))&&((s=__tp6[1]),true)))))))))))))))){return s;}else{if((__t437&&(((__t427=__tp2[1]),true,(__tp5=__t425[2]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===3)&&(((__tp7=__tp5[0]),(__tp7==="data"))&&((a=__tp5[1]),true,(b=__tp5[2]),true)))))))){var __t439=__t427;if((__t439==="||")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((__t439==="or")){return rx_wrap(((rx_build2(a)+"|")+rx_build2(b)));}else{if((__t439==="*")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}return rx_wrap((rx_build2(b)+"*"));}else{if((__t439==="+")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}return rx_wrap((rx_build2(b)+"+"));}else{if((__t439==="?")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}return rx_wrap((rx_build2(b)+"?"));}else{if((__t439==="in")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var v;if(((b instanceof Array)&&((b["#"]===undefined)&&(((__tp0=b.length),true)&&((__tp0===2)&&(((__tp1=b[0]),(__tp1==="value"))&&((v=b[1]),true))))))){(void 0);}else{throw "a condition failed";}var x=rx_quote2(v);return (("["+x)+"]");}else{if((__t439==="not")){var __tp0;var __tp1;if(((a instanceof Array)&&((a["#"]===undefined)&&(((__tp0=a.length),true)&&((__tp0===1)&&((__tp1=a[0]),(__tp1==="void"))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __tp13;var __tp14;var v;if(((b instanceof Array)&&((b["#"]===undefined)&&(((__tp0=b.length),true)&&((__tp0===3)&&(((__tp1=b[0]),(__tp1==="send"))&&(((__tp2=b[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="in"))&&(((__tp6=b[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&(((__tp12=__tp6[2]),(__tp12 instanceof Array))&&((__tp12["#"]===undefined)&&(((__tp13=__tp12.length),true)&&((__tp13===2)&&(((__tp14=__tp12[0]),(__tp14==="value"))&&((v=__tp12[1]),true)))))))))))))))))))))))))))){(void 0);}else{throw "a condition failed";}var x=rx_quote2(v);return (("[^"+x)+"]");}else{throw ["Could not find a match",__t439];}}}}}}}}else{if((__t430&&((__t431=(__tp0>=1))&&(((__tp1=__t425[0]),(__tp1==="data"))&&((args=__t425.slice(1)),true))))){return (("("+args.map(rx_build2).join(""))+")");}else{if((__t431&&(((__tp1=__t425[0]),(__tp1==="multi"))&&((args=__t425.slice(1)),true)))){return (("(?:"+args.map(rx_build2).join(""))+")");}else{if(((otherA=__t425),true)){throw "OopsF";}else{throw ["Could not find a match",__t425];}}}}}}}};var mac=function(__t440,expr,flags){var __tp0;var context;var env;if(((__t440 instanceof Array)&&((__t440["#"]===undefined)&&(((__tp0=__t440.length),true)&&((__tp0===2)&&((context=__t440[0]),true,(env=__t440[1]),true)))))){(void 0);}else{throw "a condition failed";}(flags=(flags||""));var __t441=expr;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __tp13;var __tp14;var flag;var __tp0;var __tp1;var __tp2;var v;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var arg;var __t442=false;var __t443=false;var __t444=false;if(((__t442=(__t441 instanceof Array))&&((__t443=(__t441["#"]===undefined))&&((__t444=((__tp0=__t441.length),true))&&((__tp0===3)&&(((__tp1=__t441[0]),(__tp1==="send"))&&(((__tp2=__t441[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="."))&&(((__tp6=__t441[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&(((__tp12=__tp6[2]),(__tp12 instanceof Array))&&((__tp12["#"]===undefined)&&(((__tp13=__tp12.length),true)&&((__tp13===2)&&(((__tp14=__tp12[0]),(__tp14==="symbol"))&&((flag=__tp12[1]),true)))))))))))))))))))))))))))){var m=function(ctx,x){return mac(ctx,x,(flags+flag));};return ["macro",m];}else{if((__t444&&((__tp0===2)&&(((__tp1=__t441[0]),(__tp1==="value"))&&(((__tp2=__t441[1]),(typeof(__tp2)==="string"))&&((v=__tp2),true)))))){return ["send",["symbol","RegExp"],["data",["value",v],["value",flags]]];}else{if((__t444&&((__tp0===3)&&(((__tp1=__t441[0]),(__tp1==="send"))&&(((__tp2=__t441[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="'"))&&(((__tp6=__t441[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((arg=__tp6[2]),true))))))))))))))))))))){return ["send",["symbol","RegExp"],["data",["value",rx_build2(arg)],["value",flags]]];}else{throw ["Could not find a match",__t441];}}}};stdenv.register_macro("R",mac);stdenv.register_macro("?",function(__t446,__t445){var __tp0;var context;var env;if(((__t446 instanceof Array)&&((__t446["#"]===undefined)&&(((__tp0=__t446.length),true)&&((__tp0===2)&&((context=__t446[0]),true,(env=__t446[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t447=__t445;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var expr;var __tp0;var __tp1;var expr;var __tp2;var __tp3;var __tp4;var __t448=false;var __t449=false;var __t450=false;var __t451=false;var __t452=false;if(((__t448=(__t447 instanceof Array))&&((__t449=(__t447["#"]===undefined))&&((__t450=((__tp0=__t447.length),true))&&((__t451=(__tp0===3))&&((__t452=((__tp1=__t447[0]),(__tp1==="data")))&&(((__tp2=__t447[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((expr=__t447[2]),true)))))))))))){return ["send",["symbol","cond"],["data",expr]];}else{if((__t452&&(((expr=__t447[1]),true,(__tp2=__t447[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))){var orig_expr=expr;var checker=function(){var __t453=expr;var __tp0;var __tp1;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var other;var __t454=false;var __t455=false;var __t456=false;var __t457=false;var __t458=false;if(((__t454=(__t453 instanceof Array))&&((__t455=(__t453["#"]===undefined))&&((__t456=((__tp0=__t453.length),true))&&((__tp0===1)&&((__tp1=__t453[0]),(__tp1==="void"))))))){throw "can't use ? on its own";}else{if((__t456&&((__t457=(__tp0===2))&&((__t458=((__tp1=__t453[0]),(__tp1==="symbol")))&&((__tp2=__t453[1]),(__tp2==="String")))))){return ["macro",function(_,__t459){var __tp0;var __tp1;var expr;if(((__t459 instanceof Array)&&((__t459["#"]===undefined)&&(((__tp0=__t459.length),true)&&((__tp0===2)&&(((__tp1=__t459[0]),(__tp1==="data"))&&((expr=__t459[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","string"]]];}];}else{if((__t458&&((__tp2=__t453[1]),(__tp2==="Number")))){return ["macro",function(_,__t460){var __tp0;var __tp1;var expr;if(((__t460 instanceof Array)&&((__t460["#"]===undefined)&&(((__tp0=__t460.length),true)&&((__tp0===2)&&(((__tp1=__t460[0]),(__tp1==="data"))&&((expr=__t460[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","=="],["data",["send",["symbol","typeof"],["data",expr]],["value","number"]]];}];}else{if((__t458&&((__tp2=__t453[1]),(__tp2==="true")))){return ["macro",function(_,__t461){var __tp0;var __tp1;var expr;if(((__t461 instanceof Array)&&((__t461["#"]===undefined)&&(((__tp0=__t461.length),true)&&((__tp0===2)&&(((__tp1=__t461[0]),(__tp1==="data"))&&((expr=__t461[1]),true))))))){(void 0);}else{throw "a condition failed";}return expr;}];}else{if((__t458&&((__tp2=__t453[1]),(__tp2==="false")))){return ["macro",function(_,__t462){var __tp0;var __tp1;var expr;if(((__t462 instanceof Array)&&((__t462["#"]===undefined)&&(((__tp0=__t462.length),true)&&((__tp0===2)&&(((__tp1=__t462[0]),(__tp1==="data"))&&((expr=__t462[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["send",["symbol","not"],["data",["void"],expr]];}];}else{if((__t458&&((__tp2=__t453[1]),(__tp2==="null")))){return ["macro",make_checker(["value",null],["symbol","___is"])];}else{if((__t458&&((__tp2=__t453[1]),(__tp2==="undefined")))){return ["macro",make_checker(["value",undefined],["symbol","___is"])];}else{if(((other=__t453),true)){return ["send",["symbol","___checker"],["data",expr]];}else{throw ["Could not find a match",__t453];}}}}}}}}}();var mac=function(__t464,expr){var __tp0;var __t463;var env;if(((__t464 instanceof Array)&&((__t464["#"]===undefined)&&(((__tp0=__t464.length),true)&&((__tp0===2)&&((__t463=__t464[0]),true,(env=__t464[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t465=__t463;var other;if((__t465==="pattern")){var __t466=expr;var __tp0;var __tp1;var subp;var __tp0;var __tp1;var other;var __t467=false;var __t468=false;var __t469=false;if(((__t467=(__t466 instanceof Array))&&((__t468=(__t466["#"]===undefined))&&((__t469=((__tp0=__t466.length),true))&&((__tp0>=1)&&(((__tp1=__t466[0]),(__tp1==="data"))&&((subp=__t466.slice(1)),true))))))){var projector=["send",["symbol","___deconstructor"],["data",orig_expr]];return ["check",checker,["project",projector,patch_array(["duck",0],subp)]];}else{if((__t469&&((__tp0===1)&&((__tp1=__t466[0]),(__tp1==="void"))))){return ["check",checker,["ignore"]];}else{if(((other=__t466),true)){return ["check",checker,expr];}else{throw ["Could not find a match",__t466];}}}}else{if(((other=__t465),true)){return ["send",checker,["data",expr]];}else{throw ["Could not find a match",__t465];}}};return ["macro",mac];}else{throw ["Could not find a match",__t447];}}});stdenv.register_macro("!",function(__t470,__t471){var __tp0;var context;var env;if(((__t470 instanceof Array)&&((__t470["#"]===undefined)&&(((__tp0=__t470.length),true)&&((__tp0===2)&&((context=__t470[0]),true,(env=__t470[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;var __tp2;var __tp3;var __tp4;if(((__t471 instanceof Array)&&((__t471["#"]===undefined)&&(((__tp0=__t471.length),true)&&((__tp0===3)&&(((__tp1=__t471[0]),(__tp1==="data"))&&(((expr=__t471[1]),true,(__tp2=__t471[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&((__tp4=__tp2[0]),(__tp4==="void")))))))))))){(void 0);}else{throw "a condition failed";}var projector=function(){var __t472=expr;var __tp0;var __tp1;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var other;var __t473=false;var __t474=false;var __t475=false;var __t476=false;var __t477=false;if(((__t473=(__t472 instanceof Array))&&((__t474=(__t472["#"]===undefined))&&((__t475=((__tp0=__t472.length),true))&&((__tp0===1)&&((__tp1=__t472[0]),(__tp1==="void"))))))){throw "can't use ! on its own";}else{if((__t475&&((__t476=(__tp0===2))&&((__t477=((__tp1=__t472[0]),(__tp1==="symbol")))&&((__tp2=__t472[1]),(__tp2==="String")))))){return ["macro",function(_,__t478){var __tp0;var __tp1;var expr;if(((__t478 instanceof Array)&&((__t478["#"]===undefined)&&(((__tp0=__t478.length),true)&&((__tp0===2)&&(((__tp1=__t478[0]),(__tp1==="data"))&&((expr=__t478[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["data",["symbol","true"],["send",["symbol","String"],["data",expr]]];}];}else{if((__t477&&((__tp2=__t472[1]),(__tp2==="Number")))){return ["macro",function(_,__t479){var __tp0;var __tp1;var expr;if(((__t479 instanceof Array)&&((__t479["#"]===undefined)&&(((__tp0=__t479.length),true)&&((__tp0===2)&&(((__tp1=__t479[0]),(__tp1==="data"))&&((expr=__t479[1]),true))))))){(void 0);}else{throw "a condition failed";}return ["data",["symbol","true"],["send",["symbol","parseFloat"],["data",expr]]];}];}else{if(((other=__t472),true)){return ["send",["symbol","___projector"],["data",expr]];}else{throw ["Could not find a match",__t472];}}}}}();var mac=function(__t481,expr){var __tp0;var __t480;var env;if(((__t481 instanceof Array)&&((__t481["#"]===undefined)&&(((__tp0=__t481.length),true)&&((__tp0===2)&&((__t480=__t481[0]),true,(env=__t481[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t482=__t480;var other;if((__t482==="pattern")){var __t483=expr;var __tp0;var __tp1;var other;if(((__t483 instanceof Array)&&((__t483["#"]===undefined)&&(((__tp0=__t483.length),true)&&((__tp0===1)&&((__tp1=__t483[0]),(__tp1==="void"))))))){return ["project",projector,["ignore"]];}else{if(((other=__t483),true)){return ["project",projector,expr];}else{throw ["Could not find a match",__t483];}}}else{if(((other=__t482),true)){return ["send",["send",projector,["data",expr]],["value",1]];}else{throw ["Could not find a match",__t482];}}};return ["macro",mac];});var gensym_factory=function(prefix){(prefix=("__t"+prefix));var id=0;return function(){var name=(prefix+String(id));(id=(id+1));return ["symbol",name];};};var gensym=gensym_factory("");var is_symbol=function(__t484,env){var __t485=__t484;var __tp0;var __tp1;var s;var _;if(((__t485 instanceof Array)&&((__t485["#"]===undefined)&&(((__tp0=__t485.length),true)&&((__tp0===2)&&(((__tp1=__t485[0]),(__tp1==="symbol"))&&((s=__t485[1]),true))))))){var __t486=env.resolve(s);var __tp0;var __tp1;var m;var _;if(((__t486 instanceof Array)&&((__t486["#"]===undefined)&&(((__tp0=__t486.length),true)&&((__tp0===2)&&(((__tp1=__t486[0]),(__tp1==="macro"))&&((m=__t486[1]),true))))))){return false;}else{if(((_=__t486),true)){return true;}else{throw ["Could not find a match",__t486];}}}else{if(((_=__t485),true)){return false;}else{throw ["Could not find a match",__t485];}}};var lhs_parse_specs=function(env,specs){var fw=[];var bw=[];var keys=[];var defaults=[];var rest=undefined;(specs=specs.slice(0));while(specs.length){var x=specs.shift();var v=expand.step(["pattern",env],x);var __t487=v;var __tp0;var __tp1;var variable;var __tp0;var __tp1;var key;var __tp0;var __tp1;var key;var value;var __tp0;var __tp1;var variable;var value;var __t488;var otherwise;var __t489=false;var __t490=false;var __t491=false;var __t492=false;if(((__t489=(__t487 instanceof Array))&&((__t490=(__t487["#"]===undefined))&&((__t491=((__tp0=__t487.length),true))&&((__t492=(__tp0===2))&&(((__tp1=__t487[0]),(__tp1==="dynsplice"))&&((variable=__t487[1]),true))))))){(rest=variable);}else{if((__t492&&(((__tp1=__t487[0]),(__tp1==="assoc"))&&((key=__t487[1]),true)))){keys.push([key,key]);}else{if((__t491&&((__t492=(__tp0===3))&&(((__tp1=__t487[0]),(__tp1==="assoc"))&&((key=__t487[1]),true,(value=__t487[2]),true))))){keys.push([key,value]);}else{if((__t492&&(((__tp1=__t487[0]),(__tp1==="default"))&&((variable=__t487[1]),true,(value=__t487[2]),true,(__t488=__t487),true)))){var __t493=__t488;var otherwise;if(rest){throw Error("no defaults after rest arg");}else{if(((otherwise=__t493),true)){defaults.push([variable,value]);}else{throw ["Could not find a match",__t493];}}}else{if((rest===undefined)){fw.push(v);}else{if(((otherwise=__t487),true)){bw.push(v);}else{throw ["Could not find a match",__t487];}}}}}}}return [fw,bw,keys,defaults,rest];};var parse_lhs=function(env,lhs,rhs,gen){(gen=(gen||gensym_factory("p")));var vars=[];var clauses=[];var current=["multi"];var placeholder=null;var mktemp=function(){var t=gen();vars.push(t);return t;};var newclause=function(){if((current.length>1)){clauses.push(current);}else{null;}return (current=["multi"]);};var maybe_temp=function(x){if(is_symbol(x,env)){return x;}else{var temp=mktemp();current.push(["assign",temp,x]);return temp;}};var helper=function(lhs,curr){return helper_noexpand(expand.step(["pattern",env],lhs),curr);};var helper_noexpand=function(lhs,curr){var helper_keys=function(temp,keys){var __t502=[];var __t503=keys;var __t504=__t503.length;for(var __t505=0;(__t505<__t504);(__t505++)){var __t506=__t503[__t505];var __tp0;var __tp1;var __t509;var __t510;var k;var __t507;var __t508;var k;var v;var other;if(((__t506 instanceof Array)&&((__t506["#"]===undefined)&&(((__tp0=__t506.length),true)&&((__tp0===2)&&(((__tp1=__t506[0]),(((__tp1 instanceof Array)&&((__tp1["#"]===undefined)&&(((__t507=__tp1.length),true)&&((__t507===2)&&(((__t508=__tp1[0]),(__t508==="symbol"))&&((k=__tp1[1]),true))))))||((__tp1 instanceof Array)&&((__tp1["#"]===undefined)&&(((__t509=__tp1.length),true)&&((__t509===2)&&(((__t510=__tp1[0]),(__t510==="value"))&&((k=__tp1[1]),true))))))))&&((v=__t506[1]),true))))))){__t502.push(helper(v,["send",temp,["value",k]]));}else{if(((other=__t506),true)){false;}else{throw ["Could not find a match",__t506];}}}return __t502;};var helper_array=function(temp,specs,start){var __tp0;var fw;var bw;var keys;var dflt;var rest;if(((specs instanceof Array)&&((specs["#"]===undefined)&&(((__tp0=specs.length),true)&&((__tp0===5)&&((fw=specs[0]),true,(bw=specs[1]),true,(keys=specs[2]),true,(dflt=specs[3]),true,(rest=specs[4]),true)))))){(void 0);}else{throw "a condition failed";}var nfw=fw.length;var nbw=bw.length;var ndflt=dflt.length;var extract_length=true;var check_length=true;if(extract_length){var len=mktemp();current.push(["send",["symbol",":="],["data",len,["send",temp,["send",["symbol","."],["data",["void"],["symbol","length"]]]]]],["symbol","true"]);newclause();if(check_length){var lo=((nfw+nbw)+start);var hi=(lo+ndflt);if((rest===undefined)){if((lo===hi)){current.push(["send",["symbol","=="],["data",len,["value",lo]]]);}else{current.push(["send",["symbol","and"],["data",["send",["symbol",">="],["data",len,["value",lo]]],["send",["symbol","<="],["data",len,["value",hi]]]]]);}}else{current.push(["send",["symbol",">="],["data",len,["value",lo]]]);}newclause();}else{null;}}else{null;}var __t511=enumerate(fw);var __t512=__t511.length;for(var __t513=0;(__t513<__t512);(__t513++)){var __t521=__t511[__t513];var __tp0;var j;var m;var other;if(((__t521 instanceof Array)&&((__t521["#"]===undefined)&&(((__tp0=__t521.length),true)&&((__tp0===2)&&((j=__t521[0]),true,(m=__t521[1]),true)))))){helper(m,["send",temp,["value",(j+start)]]);}else{if(((other=__t521),true)){false;}else{throw ["Could not find a match",__t521];}}}false;var __t514=enumerate(dflt);var __t515=__t514.length;for(var __t516=0;(__t516<__t515);(__t516++)){var __t522=__t514[__t516];var __tp0;var j;var __tp1;var __tp2;var patt;var value;var other;if(((__t522 instanceof Array)&&((__t522["#"]===undefined)&&(((__tp0=__t522.length),true)&&((__tp0===2)&&(((j=__t522[0]),true,(__tp1=__t522[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===2)&&((patt=__tp1[0]),true,(value=__tp1[1]),true)))))))))){var idx=((j+nfw)+start);helper(patt,["send",["symbol","if"],["data",["send",["symbol",">="],["data",["value",idx],len]],value,["send",temp,["value",idx]]]]);}else{if(((other=__t522),true)){false;}else{throw ["Could not find a match",__t522];}}}false;if((rest!==undefined)){var pos=((nfw+ndflt)+start);var slice=function(){if((nbw>0)){return ["data",["value",pos],["value",(-nbw)]];}else{return ["data",["value",pos]];}}();helper(rest,["send",["send",temp,["send",["symbol","."],["data",["void"],["symbol","slice"]]]],slice]);}else{null;}var __t517=[];var __t518=enumerate(bw);var __t519=__t518.length;for(var __t520=0;(__t520<__t519);(__t520++)){var __t523=__t518[__t520];var __tp0;var j;var m;var other;if(((__t523 instanceof Array)&&((__t523["#"]===undefined)&&(((__tp0=__t523.length),true)&&((__tp0===2)&&((j=__t523[0]),true,(m=__t523[1]),true)))))){__t517.push(helper(m,["send",temp,["send",["symbol","-"],["data",len,["value",(nbw-j)]]]]));}else{if(((other=__t523),true)){false;}else{throw ["Could not find a match",__t523];}}}return __t517;};var __t494=lhs;var __tp0;var __tp1;var __t495;var __t496;var __tp0;var __tp1;var s;var __tp0;var __tp1;var v;var __tp0;var __tp1;var condition;var pattern;var __tp0;var __tp1;var __tp0;var __tp1;var c;var pattern;var __tp0;var __tp1;var xs;var __tp0;var __tp1;var xs;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var checkers;var expr;var __tp0;var __tp1;var checker;var expr;var __tp0;var __tp1;var projector;var expr;var __tp0;var __tp1;var fname;var spec;var __tp0;var __tp1;var i;var args;var __tp0;var __tp1;var args;var other;var __t497=false;var __t498=false;var __t499=false;var __t500=false;var __t501=false;if(((__t494 instanceof Array)&&((__t494["#"]===undefined)&&(((__tp0=__t494.length),true)&&((__tp0===1)&&((__tp1=__t494[0]),(__tp1==="void"))))))){var x=["check",["macro",make_checker(["value",null],["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if(((__t494==="_")||((__t494 instanceof Array)&&((__t494["#"]===undefined)&&(((__t495=__t494.length),true)&&((__t495===1)&&((__t496=__t494[0]),(__t496==="ignore")))))))){if((!is_symbol(curr,env))){current.push(curr);return current.push(["symbol","true"]);}else{return null;}}else{if(((__t497=(__t494 instanceof Array))&&((__t498=(__t494["#"]===undefined))&&((__t499=((__tp0=__t494.length),true))&&((__t500=(__tp0===2))&&(((__tp1=__t494[0]),(__tp1==="symbol"))&&((s=__t494[1]),true))))))){vars.push(["symbol",s]);current.push(["assign",["symbol",s],curr]);return current.push(["value",true]);}else{if((__t500&&(((__tp1=__t494[0]),(__tp1==="value"))&&((v=__t494[1]),true)))){var x=["check",["macro",make_checker(lhs,["symbol","___eq"])],["ignore"]];return helper_noexpand(x,curr);}else{if((__t499&&((__tp0===3)&&(((__tp1=__t494[0]),(__tp1==="test"))&&((condition=__t494[1]),true,(pattern=__t494[2]),true))))){helper(pattern,curr);current.push(condition);return newclause();}else{if((__t499&&((__tp0===1)&&((__tp1=__t494[0]),(__tp1==="placeholder"))))){(placeholder=gensym());vars.push(placeholder);current.push(["assign",placeholder,curr]);return current.push(["value",true]);}else{if((__t499&&((__tp0===3)&&(((__tp1=__t494[0]),(__tp1==="constant"))&&((c=__t494[1]),true,(pattern=__t494[2]),true))))){return helper(pattern,c);}else{if((__t499&&((__t500=(__tp0>=1))&&(((__tp1=__t494[0]),(__tp1==="all"))&&((xs=__t494.slice(1)),true))))){var temp=maybe_temp(curr);var __t524=xs;var __t525=__t524.length;for(var __t526=0;(__t526<__t525);(__t526++)){var __t527=__t524[__t526];var x;var other;if(((x=__t527),true)){helper(x,temp);}else{if(((other=__t527),true)){false;}else{throw ["Could not find a match",__t527];}}}false;return false;}else{if((__t500&&(((__tp1=__t494[0]),(__tp1==="any"))&&((xs=__t494.slice(1)),true)))){var normalize=function(vars){return function(){var __t531=[];var __t532=vars;var __t533=__t532.length;for(var __t534=0;(__t534<__t533);(__t534++)){var __t535=__t532[__t534];var __tp0;var __tp1;var v;var other;if(((__t535 instanceof Array)&&((__t535["#"]===undefined)&&(((__tp0=__t535.length),true)&&((__tp0===2)&&(((__tp1=__t535[0]),(__tp1==="symbol"))&&((v=__t535[1]),true,(v.slice(0,3)!=="__t")))))))){__t531.push(v);}else{if(((other=__t535),true)){false;}else{throw ["Could not find a match",__t535];}}}return __t531;}().sort().join(",");};var temp=maybe_temp(curr);var myvars=undefined;var clauses=[];var __t528=xs;var __t529=__t528.length;for(var __t530=0;(__t530<__t529);(__t530++)){var __t536=__t528[__t530];var x;var other;if(((x=__t536),true)){var p=parse_lhs(env,x,temp,gensym);var __t537=null;var _;if((myvars===undefined)){(myvars=p[0]);}else{if((normalize(p[0])!==normalize(myvars))){throw [Error("Must have the same set of variables in both branches!",(("["+String(myvars))+"]"),(("["+String(p[0]))+"]"))];}else{if(((_=__t537),true)){(vars=vars.concat(p[0]));}else{throw ["Could not find a match",__t537];}}}clauses.push(make_pattern_test(p[1]));}else{if(((other=__t536),true)){false;}else{throw ["Could not find a match",__t536];}}}false;current.push(make_or_pattern(clauses));(vars=vars.concat(myvars));return newclause();}else{if((__t499&&((__t500=(__tp0===3))&&((__t501=((__tp1=__t494[0]),(__tp1==="check")))&&(((__tp2=__t494[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3>=1)&&(((__tp4=__tp2[0]),(__tp4==="multi"))&&((checkers=__tp2.slice(1)),true,(expr=__t494[2]),true)))))))))){var temp=maybe_temp(curr);var __t538=checkers;var __t539=__t538.length;for(var __t540=0;(__t540<__t539);(__t540++)){var __t541=__t538[__t540];var checker;var other;if(((checker=__t541),true)){current.push(["send",checker,["data",temp]]);newclause();}else{if(((other=__t541),true)){false;}else{throw ["Could not find a match",__t541];}}}false;return helper(expr,temp);}else{if((__t501&&((checker=__t494[1]),true,(expr=__t494[2]),true))){var temp=maybe_temp(curr);current.push(["send",checker,["data",temp]]);newclause();return helper(expr,temp);}else{if((__t500&&(((__tp1=__t494[0]),(__tp1==="project"))&&((projector=__t494[1]),true,(expr=__t494[2]),true)))){var temp=maybe_temp(curr);var temp2=mktemp();current.push(["send",["symbol",":="],["data",temp2,["send",projector,["data",temp]]]],["send",temp2,["value",0]]);newclause();return helper(expr,["send",temp2,["value",1]]);}else{if((__t500&&(((__tp1=__t494[0]),(__tp1==="send"))&&((fname=__t494[1]),true,(spec=__t494[2]),true)))){return helper(fname,["send",["symbol","->"],["data",spec,curr]]);}else{if((__t499&&((__tp0>=2)&&(((__tp1=__t494[0]),(__tp1==="duck"))&&((i=__t494[1]),true,(args=__t494.slice(2)),true))))){var temp=maybe_temp(curr);current.push(["value",true]);var __tp0;var specs;var __tp1;var fw;var bw;var keys;var dflt;var rest;if((((__tp0=lhs_parse_specs(env,args)),(specs=__tp0),true,(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===5)&&((fw=__tp0[0]),true,(bw=__tp0[1]),true,(keys=__tp0[2]),true,(dflt=__tp0[3]),true,(rest=__tp0[4]),true)))))){(void 0);}else{throw "a condition failed";}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){return helper_array(temp,specs,i);}else{return null;}}else{if((__t499&&((__tp0>=1)&&(((__tp1=__t494[0]),(__tp1==="data"))&&((args=__t494.slice(1)),true))))){var temp=maybe_temp(curr);var __tp0;var specs;var __tp1;var fw;var bw;var keys;var dflt;var rest;if((((__tp0=lhs_parse_specs(env,args)),(specs=__tp0),true,(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===5)&&((fw=__tp0[0]),true,(bw=__tp0[1]),true,(keys=__tp0[2]),true,(dflt=__tp0[3]),true,(rest=__tp0[4]),true)))))){(void 0);}else{throw "a condition failed";}if(keys.length){helper_keys(temp,keys);}else{null;}if((((((keys.length===0)||fw.length)||bw.length)||dflt.length)||rest)){current.push(["send",["symbol","instanceof"],["data",temp,["symbol","Array"]]]);newclause();current.push(["send",["symbol","=="],["data",["send",temp,["value","#"]],["symbol","undefined"]]]);newclause();return helper_array(temp,specs,0);}else{return null;}}else{if(((other=__t494),true)){pr(other);pr(Error().stack);throw ["OopsG",other];}else{throw ["Could not find a match",__t494];}}}}}}}}}}}}}}}}};helper(lhs,rhs);if((current.length>1)){clauses.push(current);}else{null;}return [vars,clauses,placeholder];};var make_declarations=function(vars,val){var __t542=[];var __t543=vars;var __t544=__t543.length;for(var __t545=0;(__t545<__t544);(__t545++)){var __t546=__t543[__t545];var name;var other;if(((name=__t546),true)){__t542.push(["declare",name,["value",val]]);}else{if(((other=__t546),true)){false;}else{throw ["Could not find a match",__t546];}}}return __t542;};var make_pattern_test=function(clauses){var ands=clauses.pop();while((clauses.length>0)){(ands=["send",["symbol","and"],["data",clauses.pop(),ands]]);}return (ands||["value",true]);};var make_or_pattern=function(clauses){var ors=clauses.pop();while((clauses.length>0)){(ors=["send",["symbol","or"],["data",clauses.pop(),ors]]);}return ors;};var find_arrow=function(__t548){var expr;var __t547;(expr=__t548);true;(__t547=__t548);var __t549=__t547;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var __tp0;var __tp1;var __tp2;var x;var __t552;var __t553;var __t550;var __t551;var x;var x;var __tp0;var __tp1;var v;var __tp0;var kind;var args;var __t554=false;var __t555=false;var __t556=false;var __t557=false;var __t558=false;if(((__t554=(__t549 instanceof Array))&&((__t555=(__t549["#"]===undefined))&&((__t556=((__tp0=__t549.length),true))&&((__t557=(__tp0===2))&&((__t558=((__tp1=__t549[0]),(__tp1==="symbol")))&&((__tp2=__t549[1]),(__tp2==="match")))))))){var placeholder=gensym();return [placeholder,placeholder];}else{if((__t558&&((__tp2=__t549[1]),(__tp2==="|>")))){var placeholder=gensym();return [placeholder,placeholder];}else{if((__t558&&((__tp2=__t549[1]),(__tp2==="|>*")))){var placeholder=gensym();return [placeholder,["send",["symbol","*"],["data",["void"],placeholder]]];}else{if((((__t549 instanceof Array)&&((__t549["#"]===undefined)&&(((__t550=__t549.length),true)&&((__t550===2)&&(((__t551=__t549[0]),(__t551==="symbol"))&&((x=__t549[1]),true))))))||(((x=__t549),true,(__t549 instanceof Array))&&((__t549["#"]===undefined)&&(((__t552=__t549.length),true)&&((__t552===1)&&((__t553=__t549[0]),(__t553==="void")))))))){return [false,expr];}else{if((((x=__t549),true,(__t549 instanceof Array))&&((__t549["#"]===undefined)&&(((__tp0=__t549.length),true)&&((__tp0===2)&&(((__tp1=__t549[0]),(__tp1==="value"))&&((v=__t549[1]),true))))))){return [false,x];}else{if(((__t549 instanceof Array)&&((__t549["#"]===undefined)&&(((__tp0=__t549.length),true)&&((__tp0>=1)&&((kind=__t549[0]),true,(args=__t549.slice(1)),true)))))){var placeholder=false;var new_args=function(){var __t559=[];var __t560=args;var __t561=__t560.length;for(var __t562=0;(__t562<__t561);(__t562++)){var __t563=__t560[__t562];var arg;var other;if(((arg=__t563),true)){__t559.push(function(){var __tp0;var __tp1;var ph;var new_arg;if((((__tp0=find_arrow(arg)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((ph=__tp0[0]),true,(new_arg=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}if(ph){(placeholder=ph);}else{null;}return new_arg;}());}else{if(((other=__t563),true)){false;}else{throw ["Could not find a match",__t563];}}}return __t559;}();return [placeholder,patch_array([kind],new_args)];}else{throw ["Could not find a match",__t549];}}}}}}};var same=function(){var __t565=Array.prototype.slice.call(arguments,0);var __tp0;var __t566;if(((__t565 instanceof Array)&&((__t565["#"]===undefined)&&(((__tp0=__t565.length),true)&&((__tp0>=0)&&((__t566=__t565.slice(0)),true)))))){var __t567=__t566;var __tp0;var __tp1;var __tp2;var __tp3;var x;var __tp4;var __tp5;var __tp6;var y;var __tp0;var __tp1;var __tp2;var __tp3;var x;var __tp4;var __tp5;var __tp6;var y;var __tp0;var __tp1;var __tp2;var __tp3;var x;var __tp4;var __tp5;var __tp6;var y;var __tp0;var __tp1;var __tp2;var __tp3;var f;var x;var __tp4;var __tp5;var __tp6;var g;var y;var __tp0;var __tp1;var __tp2;var kind1;var xs;var __tp3;var __tp4;var kind2;var ys;var other;var __t568=false;var __t569=false;var __t570=false;var __t571=false;var __t572=false;var __t573=false;var __t574=false;var __t575=false;if(((__t568=(__t567 instanceof Array))&&((__t569=(__t567["#"]===undefined))&&((__t570=((__tp0=__t567.length),true))&&((__t571=(__tp0===2))&&((__t572=((__tp1=__t567[0]),(__tp1 instanceof Array)))&&((__t573=(__tp1["#"]===undefined))&&((__t574=((__tp2=__tp1.length),true))&&((__t575=(__tp2===2))&&(((__tp3=__tp1[0]),(__tp3==="symbol"))&&(((x=__tp1[1]),true,(__tp4=__t567[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="symbol"))&&((y=__tp4[1]),true)))))))))))))))){return (x===y);}else{if((__t575&&(((__tp3=__tp1[0]),(__tp3==="value"))&&(((x=__tp1[1]),true,(__tp4=__t567[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="value"))&&((y=__tp4[1]),true))))))))){return (x===y);}else{if((__t575&&(((__tp3=__tp1[0]),(__tp3==="macro"))&&(((x=__tp1[1]),true,(__tp4=__t567[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===2)&&(((__tp6=__tp4[0]),(__tp6==="macro"))&&((y=__tp4[1]),true))))))))){return (x===y);}else{if((__t574&&((__tp2===3)&&(((__tp3=__tp1[0]),(__tp3==="send"))&&(((f=__tp1[1]),true,(x=__tp1[2]),true,(__tp4=__t567[1]),(__tp4 instanceof Array))&&((__tp4["#"]===undefined)&&(((__tp5=__tp4.length),true)&&((__tp5===3)&&(((__tp6=__tp4[0]),(__tp6==="send"))&&((g=__tp4[1]),true,(y=__tp4[2]),true)))))))))){return (same(f,g)&&same(x,y));}else{if((__t574&&((__tp2>=1)&&(((kind1=__tp1[0]),true,(xs=__tp1.slice(1)),true,(__tp3=__t567[1]),(__tp3 instanceof Array))&&((__tp3["#"]===undefined)&&(((__tp4=__tp3.length),true)&&((__tp4>=1)&&((kind2=__tp3[0]),true,(ys=__tp3.slice(1)),true)))))))){var allequal=xs.every(function(x,i){return same(x,send(ys,i));});return (((kind1===kind2)&&(xs.length===ys.length))&&allequal);}else{if(((other=__t567),true)){return false;}else{throw ["Could not find a match",__t567];}}}}}}}else{throw ["Could not find a match",__t565];}};stdenv.register_macro("|>",function(__t577,__t576){var __tp0;var context;var env;if(((__t577 instanceof Array)&&((__t577["#"]===undefined)&&(((__tp0=__t577.length),true)&&((__tp0===2)&&((context=__t577[0]),true,(env=__t577[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t578=__t576;var __tp0;var __tp1;var __tp0;var __tp1;var to_match;var cl;var __t579=false;var __t580=false;var __t581=false;if(((__t579=(__t578 instanceof Array))&&((__t580=(__t578["#"]===undefined))&&((__t581=((__tp0=__t578.length),true))&&((__tp0===1)&&((__tp1=__t578[0]),(__tp1==="void"))))))){return ["placeholder"];}else{if((__t581&&((__tp0===3)&&(((__tp1=__t578[0]),(__tp1==="data"))&&((to_match=__t578[1]),true,(cl=__t578[2]),true))))){var temp=gensym();var clauses=function(){var __t582=cl;var __tp0;var __tp1;var cls;var other;if(((__t582 instanceof Array)&&((__t582["#"]===undefined)&&(((__tp0=__t582.length),true)&&((__tp0>=1)&&(((__tp1=__t582[0]),(__tp1==="multi"))&&((cls=__t582.slice(1)),true))))))){return cls;}else{if(((other=__t582),true)){return [other];}else{throw ["Could not find a match",__t582];}}}();var cached_conditions=[];var stmts=["multi",["declare",temp,to_match]];(clauses=function(){var __t583=[];var __t584=clauses;var __t585=__t584.length;for(var __t586=0;(__t586<__t585);(__t586++)){var __t587=__t584[__t586];var clause;var other;if(((clause=__t587),true)){__t583.push(function(){var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var lhs;var body;if(((clause instanceof Array)&&((clause["#"]===undefined)&&(((__tp0=clause.length),true)&&((__tp0===3)&&(((__tp1=clause[0]),(__tp1==="send"))&&(((__tp2=clause[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=clause[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((lhs=__tp6[1]),true,(body=__tp6[2]),true)))))))))))))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var decls;var conditions;var placeholder;if((((__tp0=parse_lhs(env,lhs,temp)),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===3)&&((decls=__tp0[0]),true,(conditions=__tp0[1]),true,(placeholder=__tp0[2]),true)))))){(void 0);}else{throw "a condition failed";}(stmts=stmts.concat(make_declarations(decls)));var b=function(){if(placeholder){return ["send",["symbol","|>"],["data",placeholder,body]];}else{return body;}}();var f=function(x){return ["done",expand(["expr",env],x)];};return [conditions.map(f),b];}());}else{if(((other=__t587),true)){false;}else{throw ["Could not find a match",__t587];}}}return __t583;}());var shares=function(){var f=function(__t588,i){var __tp0;var conditions;var body;if(((__t588 instanceof Array)&&((__t588["#"]===undefined)&&(((__tp0=__t588.length),true)&&((__tp0===2)&&((conditions=__t588[0]),true,(body=__t588[1]),true)))))){(void 0);}else{throw "a condition failed";}var res=0;var prev_conditions=send(clauses,i)[0];var nc=conditions.length;for(var j=0;((j<nc)&&same(send(conditions,j),send(prev_conditions,j)));(j++)){(res++);}return res;};return clauses.slice(1).map(f);}();var max=send(Math.max,shares);shares.push(0);var vars=[];(vars=vars.concat(function(){var __t589=[];var __t590=range(1,max);var __t591=__t590.length;for(var __t592=0;(__t592<__t591);(__t592++)){var __t593=__t590[__t592];var _;var other;if(((_=__t593),true)){__t589.push(gensym());}else{if(((other=__t593),true)){false;}else{throw ["Could not find a match",__t593];}}}return __t589;}()));(stmts=stmts.concat(make_declarations(vars,false)));var shared_last=0;var new_clauses=clauses.map(function(__t594,i){var __tp0;var conditions;var body;if(((__t594 instanceof Array)&&((__t594["#"]===undefined)&&(((__tp0=__t594.length),true)&&((__tp0===2)&&((conditions=__t594[0]),true,(body=__t594[1]),true)))))){(void 0);}else{throw "a condition failed";}var shared=function(){if(shared_last){return [send(vars,(shared_last-1))];}else{return [];}}();var n_to_share=Math.max(shared_last,send(shares,i));var to_share=conditions.slice(shared_last,n_to_share).map(function(x,j){return ["assign",send(vars,(shared_last+j)),x];});(shared_last=send(shares,i));var rest=conditions.slice(n_to_share);return [shared.concat(to_share).concat(rest),body];});(clauses=new_clauses);var r=["js_throw",["data",["value","Could not find a match"],temp]];while((clauses.length>0)){var __tp0;var __tp1;var conditions;var body;if((((__tp0=clauses.pop()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((conditions=__tp0[0]),true,(body=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var test=make_pattern_test(conditions);(r=["if",test,body,r]);}stmts.push(r);return stmts;}else{throw ["Could not find a match",__t578];}}});var qqstruct=function(name,args){return patch_array(["data",["value",name]],args);};var qq=function(__t596){var expr;var __t595;(expr=__t596);true;(__t595=__t596);var __t597=__t595;var __tp0;var __tp1;var s;var __tp0;var __tp1;var __tp0;var __tp1;var v;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var insert;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var insert;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var insert;var __tp0;var name;var args;var __t598=false;var __t599=false;var __t600=false;var __t601=false;var __t602=false;var __t603=false;var __t604=false;var __t605=false;var __t606=false;var __t607=false;if(((__t598=(__t597 instanceof Array))&&((__t599=(__t597["#"]===undefined))&&((__t600=((__tp0=__t597.length),true))&&((__tp0===2)&&(((__tp1=__t597[0]),(__tp1==="symbol"))&&((s=__t597[1]),true))))))){return qqstruct("symbol",[["value",s]]);}else{if((__t600&&((__tp0===1)&&((__tp1=__t597[0]),(__tp1==="void"))))){return qqstruct("void",[]);}else{if((__t600&&((__tp0===2)&&(((__tp1=__t597[0]),(__tp1==="value"))&&((v=__t597[1]),true))))){return qqstruct("value",[expr]);}else{if((__t600&&((__t601=(__tp0===3))&&((__t602=((__tp1=__t597[0]),(__tp1==="send")))&&((__t603=((__tp2=__t597[1]),(__tp2 instanceof Array)))&&((__t604=(__tp2["#"]===undefined))&&((__t605=((__tp3=__tp2.length),true))&&((__t606=(__tp3===2))&&((__t607=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="^"))&&(((__tp6=__t597[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((insert=__tp6[2]),true))))))))))))))))))))){return insert;}else{if((__t607&&(((__tp5=__tp2[1]),(__tp5==="^="))&&(((__tp6=__t597[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((insert=__tp6[2]),true)))))))))))))){return qqstruct("value",[insert]);}else{if((__t607&&(((__tp5=__tp2[1]),(__tp5==="^*"))&&(((__tp6=__t597[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((insert=__tp6[2]),true)))))))))))))){return ["send",["symbol","*"],["data",["void"],insert]];}else{if((__t600&&((__tp0>=1)&&((name=__t597[0]),true,(args=__t597.slice(1)),true)))){return qqstruct(name,function(){var __t608=[];var __t609=args;var __t610=__t609.length;for(var __t611=0;(__t611<__t610);(__t611++)){var __t612=__t609[__t611];var arg;var other;if(((arg=__t612),true)){__t608.push(qq(arg));}else{if(((other=__t612),true)){false;}else{throw ["Could not find a match",__t612];}}}return __t608;}());}else{throw ["Could not find a match",__t597];}}}}}}}};stdenv.register_macro("'",function(__t613,__t614){var __tp0;var context;var env;if(((__t613 instanceof Array)&&((__t613["#"]===undefined)&&(((__tp0=__t613.length),true)&&((__tp0===2)&&((context=__t613[0]),true,(env=__t613[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var expr;if(((__t614 instanceof Array)&&((__t614["#"]===undefined)&&(((__tp0=__t614.length),true)&&((__tp0===3)&&(((__tp1=__t614[0]),(__tp1==="data"))&&(((__tp2=__t614[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((expr=__t614[2]),true)))))))))))){(void 0);}else{throw "a condition failed";}return qq(expr);});stdenv.register_macro("provide",function(__t615,__t616){var __tp0;var context;var env;if(((__t615 instanceof Array)&&((__t615["#"]===undefined)&&(((__tp0=__t615.length),true)&&((__tp0===2)&&((context=__t615[0]),true,(env=__t615[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var expr;if(((__t616 instanceof Array)&&((__t616["#"]===undefined)&&(((__tp0=__t616.length),true)&&((__tp0===2)&&(((__tp1=__t616[0]),(__tp1==="data"))&&(((__tp2=__t616[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((expr=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}return ["sink",["multi"].concat(function(){var __t617=[];var __t618=expr;var __t619=__t618.length;for(var __t620=0;(__t620<__t619);(__t620++)){var __t621=__t618[__t620];var s;var __tp0;var __tp1;var name;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var s;var __tp9;var __t624;var __t625;var name;var __t622;var __t623;var name;var other;var other;var __t626=false;if((((s=__t621),true,(__t621 instanceof Array))&&((__t621["#"]===undefined)&&(((__tp0=__t621.length),true)&&((__tp0===2)&&(((__tp1=__t621[0]),(__tp1==="symbol"))&&((name=__t621[1]),true))))))){__t617.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if(((__t621 instanceof Array)&&((__t621["#"]===undefined)&&(((__tp0=__t621.length),true)&&((__tp0===3)&&(((__tp1=__t621[0]),(__tp1==="send"))&&(((__tp2=__t621[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t621[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((s=__tp6[1]),true,(__tp9=__tp6[2]),(((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t622=__tp9.length),true)&&((__t622===2)&&(((__t623=__tp9[0]),(__t623==="symbol"))&&((name=__tp9[1]),true))))))||((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t624=__tp9.length),true)&&((__t624===2)&&(((__t625=__tp9[0]),(__t625==="value"))&&((name=__tp9[1]),true))))))))))))))))))))))))){__t617.push(["send",["symbol",":="],["data",["send",["symbol","exports"],["value",name]],s]]);}else{if((__t626=((other=__t621),true))){__t617.push(function(){throw ErrorFactory(["syntax","provide"]).create("Each clause of provide must be 'sym' or 'sym as name'");}());}else{if(__t626){false;}else{throw ["Could not find a match",__t621];}}}}}return __t617;}())];});stdenv.register_macro("require",function(__t627,__t628){var __tp0;var context;var env;if(((__t627 instanceof Array)&&((__t627["#"]===undefined)&&(((__tp0=__t627.length),true)&&((__tp0===2)&&((context=__t627[0]),true,(env=__t627[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var expr;if(((__t628 instanceof Array)&&((__t628["#"]===undefined)&&(((__tp0=__t628.length),true)&&((__tp0===2)&&(((__tp1=__t628[0]),(__tp1==="data"))&&((expr=__t628[1]),true))))))){(void 0);}else{throw "a condition failed";}var stmts=[];var topfetch=function(pkg,v){stmts.push(["send",["symbol","="],["data",v,["send",["send",["symbol","___node"],["send",["symbol","."],["data",["void"],["symbol","require"]]]],["data",["value",pkg]]]]]);return v;};var produce=function(__t629,fetch){var __t630=__t629;var __tp0;var __tp1;var s;var __tp0;var __tp1;var __tp2;var s;var __t633;var __t634;var subp;var __t631;var __t632;var subp;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __t637;var __t638;var pkg;var __t635;var __t636;var pkg;var s;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var pkg;var subp;var __t639=false;var __t640=false;var __t641=false;var __t642=false;var __t643=false;var __t644=false;var __t645=false;var __t646=false;var __t647=false;var __t648=false;if(((__t639=(__t630 instanceof Array))&&((__t640=(__t630["#"]===undefined))&&((__t641=((__tp0=__t630.length),true))&&((__t642=(__tp0===2))&&(((__tp1=__t630[0]),(__tp1==="symbol"))&&((s=__t630[1]),true))))))){return fetch(s,["symbol",s]);}else{if((__t642&&(((__tp1=__t630[0]),(__tp1==="value"))&&(((__tp2=__t630[1]),(typeof(__tp2)==="string"))&&((s=__tp2),true))))){return fetch(s,gensym());}else{if((((__t630 instanceof Array)&&((__t630["#"]===undefined)&&(((__t631=__t630.length),true)&&((__t631>=1)&&(((__t632=__t630[0]),(__t632==="multi"))&&((subp=__t630.slice(1)),true))))))||((__t630 instanceof Array)&&((__t630["#"]===undefined)&&(((__t633=__t630.length),true)&&((__t633>=1)&&(((__t634=__t630[0]),(__t634==="data"))&&((subp=__t630.slice(1)),true)))))))){var __t649=[];var __t650=subp;var __t651=__t650.length;for(var __t652=0;(__t652<__t651);(__t652++)){var __t653=__t650[__t652];var p;var other;if(((p=__t653),true)){__t649.push(produce(p,fetch));}else{if(((other=__t653),true)){false;}else{throw ["Could not find a match",__t653];}}}return __t649;}else{if(((__t639=(__t630 instanceof Array))&&((__t640=(__t630["#"]===undefined))&&((__t641=((__tp0=__t630.length),true))&&((__t642=(__tp0===3))&&((__t643=((__tp1=__t630[0]),(__tp1==="send")))&&((__t644=((__tp2=__t630[1]),(__tp2 instanceof Array)))&&((__t645=(__tp2["#"]===undefined))&&((__t646=((__tp3=__tp2.length),true))&&((__t647=(__tp3===2))&&((__t648=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t630[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t635=__tp9.length),true)&&((__t635===2)&&(((__t636=__tp9[0]),(__t636==="value"))&&((pkg=__tp9[1]),true))))))||((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t637=__tp9.length),true)&&((__t637===2)&&(((__t638=__tp9[0]),(__t638==="symbol"))&&((pkg=__tp9[1]),true))))))))&&((s=__tp6[2]),true))))))))))))))))))){return fetch(pkg,s);}else{if((__t648&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=__t630[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((pkg=__tp6[1]),true,(subp=__tp6[2]),true))))))))){var pkgv=produce(pkg,fetch);return produce(subp,function(pkg,v){return stmts.push(["send",["symbol","="],["data",v,["send",pkgv,["value",pkg]]]]);});}else{throw ["Could not find a match",__t630];}}}}}};produce(expr,topfetch);return patch_array(["multi"],stmts);});stdenv.register_macro("%",function(__t654,__t655){var __tp0;var context;var env;if(((__t654 instanceof Array)&&((__t654["#"]===undefined)&&(((__tp0=__t654.length),true)&&((__tp0===2)&&((context=__t654[0]),true,(env=__t654[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var descr;var contents;if(((__t655 instanceof Array)&&((__t655["#"]===undefined)&&(((__tp0=__t655.length),true)&&((__tp0===3)&&(((__tp1=__t655[0]),(__tp1==="data"))&&((descr=__t655[1]),true,(contents=__t655[2]),true))))))){(void 0);}else{throw "a condition failed";}var tags=["data"];var parse=function(__t656){var __t657=__t656;var __tp0;var __tp1;var __tp0;var __tp1;var s;var __tp0;var __tp1;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __t660;var __t661;var x;var __t658;var __t659;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __t664;var __t665;var x;var __t662;var __t663;var x;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __t668;var __t669;var prop;var __t666;var __t667;var prop;var value;var __tp0;var __tp1;var expr;var rest;var __t672;var __t673;var args;var __t670;var __t671;var args;var __t674=false;var __t675=false;var __t676=false;var __t677=false;var __t678=false;var __t679=false;var __t680=false;var __t681=false;var __t682=false;var __t683=false;if(((__t674=(__t657 instanceof Array))&&((__t675=(__t657["#"]===undefined))&&((__t676=((__tp0=__t657.length),true))&&((__tp0===1)&&((__tp1=__t657[0]),(__tp1==="void"))))))){return null;}else{if((__t676&&((__t677=(__tp0===2))&&(((__tp1=__t657[0]),(__tp1==="symbol"))&&((s=__t657[1]),true))))){return tags.push(["value",("+"+s)]);}else{if((__t677&&(((__tp1=__t657[0]),(__tp1==="value"))&&((x=__t657[1]),true)))){return tags.push(["value",("+"+x)]);}else{if((__t676&&((__t677=(__tp0===3))&&((__t678=((__tp1=__t657[0]),(__tp1==="send")))&&((__t679=((__tp2=__t657[1]),(__tp2 instanceof Array)))&&((__t680=(__tp2["#"]===undefined))&&((__t681=((__tp3=__tp2.length),true))&&((__t682=(__tp3===2))&&((__t683=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="."))&&(((__tp6=__t657[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((__tp12=__tp6[2]),(((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t658=__tp12.length),true)&&((__t658===2)&&(((__t659=__tp12[0]),(__t659==="symbol"))&&((x=__tp12[1]),true))))))||((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t660=__tp12.length),true)&&((__t660===2)&&(((__t661=__tp12[0]),(__t661==="value"))&&((x=__tp12[1]),true)))))))))))))))))))))))))))){return tags.push(["value",x]);}else{if((__t683&&(((__tp5=__tp2[1]),(__tp5==="#"))&&(((__tp6=__t657[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===1)&&(((__tp11=__tp9[0]),(__tp11==="void"))&&((__tp12=__tp6[2]),(((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t662=__tp12.length),true)&&((__t662===2)&&(((__t663=__tp12[0]),(__t663==="symbol"))&&((x=__tp12[1]),true))))))||((__tp12 instanceof Array)&&((__tp12["#"]===undefined)&&(((__t664=__tp12.length),true)&&((__t664===2)&&(((__t665=__tp12[0]),(__t665==="value"))&&((x=__tp12[1]),true))))))))))))))))))))){return tags.push(["value",("#"+x)]);}else{if((__t683&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t657[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t666=__tp9.length),true)&&((__t666===2)&&(((__t667=__tp9[0]),(__t667==="symbol"))&&((prop=__tp9[1]),true))))))||((__tp9 instanceof Array)&&((__tp9["#"]===undefined)&&(((__t668=__tp9.length),true)&&((__t668===2)&&(((__t669=__tp9[0]),(__t669==="value"))&&((prop=__tp9[1]),true))))))))&&((value=__tp6[2]),true)))))))))){return tags.push(["send",["send",["symbol","#"],["data",["void"],["symbol","assoc"]]],["data",["value",prop],value]]);}else{if((__t678&&((expr=__t657[1]),true,(rest=__t657[2]),true))){parse(expr);return parse(rest);}else{if((((__t657 instanceof Array)&&((__t657["#"]===undefined)&&(((__t670=__t657.length),true)&&((__t670>=1)&&(((__t671=__t657[0]),(__t671==="multi"))&&((args=__t657.slice(1)),true))))))||((__t657 instanceof Array)&&((__t657["#"]===undefined)&&(((__t672=__t657.length),true)&&((__t672>=1)&&(((__t673=__t657[0]),(__t673==="data"))&&((args=__t657.slice(1)),true)))))))){return args.forEach(parse);}else{throw ["Could not find a match",__t657];}}}}}}}}};parse(descr);(contents=function(){var __t684=contents;var __tp0;var __tp1;var __tp0;var __tp1;var args;var x;var __t685=false;var __t686=false;var __t687=false;if(((__t685=(__t684 instanceof Array))&&((__t686=(__t684["#"]===undefined))&&((__t687=((__tp0=__t684.length),true))&&((__tp0===1)&&((__tp1=__t684[0]),(__tp1==="void"))))))){return ["data"];}else{if((__t687&&((__tp0>=1)&&(((__tp1=__t684[0]),(__tp1==="multi"))&&((args=__t684.slice(1)),true))))){return patch_array(["data"],args);}else{if(((x=__t684),true)){return x;}else{throw ["Could not find a match",__t684];}}}}());return ["send",["symbol","Node"],["data",tags,contents]];});var var_operator=function(temp){return function(_,expr){var f=function(__t688){var __t689=__t688;var __tp0;var __tp1;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __t690;var other;var __t691=false;var __t692=false;var __t693=false;if(((__t691=(__t689 instanceof Array))&&((__t692=(__t689["#"]===undefined))&&((__t693=((__tp0=__t689.length),true))&&((__tp0===1)&&((__tp1=__t689[0]),(__tp1==="void"))))))){return temp;}else{if((__t693&&((__tp0===3)&&(((__tp1=__t689[0]),(__tp1==="data"))&&(((__tp2=__t689[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===1)&&(((__tp4=__tp2[0]),(__tp4==="void"))&&((__t690=__t689[2]),true)))))))))){var __t694=__t690;var __tp0;var __tp1;var s;var __tp0;var __tp1;var obj;var msg;var other;var __t695=false;var __t696=false;var __t697=false;if(((__t695=(__t694 instanceof Array))&&((__t696=(__t694["#"]===undefined))&&((__t697=((__tp0=__t694.length),true))&&((__tp0===2)&&(((__tp1=__t694[0]),(__tp1==="symbol"))&&((s=__t694[1]),true))))))){return ["send",temp,["value",s]];}else{if((__t697&&((__tp0===3)&&(((__tp1=__t694[0]),(__tp1==="send"))&&((obj=__t694[1]),true,(msg=__t694[2]),true))))){var x=f(["data",["void"],obj]);return ["send",x,msg];}else{if(((other=__t694),true)){return ["send",temp,other];}else{throw ["Could not find a match",__t694];}}}}else{if(((other=__t689),true)){return ["send",temp,other];}else{throw ["Could not find a match",__t689];}}}};return f(expr);};};stdenv.register_macro("chain",function(__t698,__t699){var __tp0;var context;var env;if(((__t698 instanceof Array)&&((__t698["#"]===undefined)&&(((__tp0=__t698.length),true)&&((__tp0===2)&&((context=__t698[0]),true,(env=__t698[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var defn;var body;if(((__t699 instanceof Array)&&((__t699["#"]===undefined)&&(((__tp0=__t699.length),true)&&((__tp0===3)&&(((__tp1=__t699[0]),(__tp1==="data"))&&((defn=__t699[1]),true,(body=__t699[2]),true))))))){(void 0);}else{throw "a condition failed";}var newenv=env.fork();var temp=gensym();var __tp0;var __tp1;var variable;var expr;if((((__tp0=function(){var __t700=defn;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var x;var y;var other;if(((__t700 instanceof Array)&&((__t700["#"]===undefined)&&(((__tp0=__t700.length),true)&&((__tp0===3)&&(((__tp1=__t700[0]),(__tp1==="send"))&&(((__tp2=__t700[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t700[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((x=__tp6[1]),true,(y=__tp6[2]),true)))))))))))))))))){return [y,x];}else{if(((other=__t700),true)){return [["symbol","@"],other];}else{throw ["Could not find a match",__t700];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((variable=__tp0[0]),true,(expr=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var var_str;if(((variable instanceof Array)&&((variable["#"]===undefined)&&(((__tp0=variable.length),true)&&((__tp0===2)&&(((__tp1=variable[0]),(__tp1==="symbol"))&&((var_str=variable[1]),true))))))){(void 0);}else{throw "a condition failed";}newenv.register_macro(var_str,var_operator(temp));var stmts=["multi"].concat(function(){var __t701=[];var __t702=aslist(body);var __t703=__t702.length;for(var __t704=0;(__t704<__t703);(__t704++)){var __t705=__t702[__t704];var x;var other;if(((x=__t705),true)){__t701.push(["send",["symbol",":="],["data",temp,x]]);}else{if(((other=__t705),true)){false;}else{throw ["Could not find a match",__t705];}}}return __t701;}());var v=["multi",["send",["symbol","="],["data",temp,expr]],stmts,temp];return ["done",expand([context,newenv],v)];});stdenv.register_macro("using",function(__t706,__t707){var __tp0;var context;var env;if(((__t706 instanceof Array)&&((__t706["#"]===undefined)&&(((__tp0=__t706.length),true)&&((__tp0===2)&&((context=__t706[0]),true,(env=__t706[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var defn;var body;if(((__t707 instanceof Array)&&((__t707["#"]===undefined)&&(((__tp0=__t707.length),true)&&((__tp0===3)&&(((__tp1=__t707[0]),(__tp1==="data"))&&((defn=__t707[1]),true,(body=__t707[2]),true))))))){(void 0);}else{throw "a condition failed";}var newenv=env.fork();var temp=gensym();var __tp0;var __tp1;var variable;var expr;if((((__tp0=function(){var __t708=defn;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var x;var y;var other;if(((__t708 instanceof Array)&&((__t708["#"]===undefined)&&(((__tp0=__t708.length),true)&&((__tp0===3)&&(((__tp1=__t708[0]),(__tp1==="send"))&&(((__tp2=__t708[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="as"))&&(((__tp6=__t708[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((x=__tp6[1]),true,(y=__tp6[2]),true)))))))))))))))))){return [y,x];}else{if(((other=__t708),true)){return [["symbol","@"],other];}else{throw ["Could not find a match",__t708];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((variable=__tp0[0]),true,(expr=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var var_str;if(((variable instanceof Array)&&((variable["#"]===undefined)&&(((__tp0=variable.length),true)&&((__tp0===2)&&(((__tp1=variable[0]),(__tp1==="symbol"))&&((var_str=variable[1]),true))))))){(void 0);}else{throw "a condition failed";}newenv.register_macro(var_str,var_operator(temp));var v=["multi",["send",["symbol","="],["data",temp,expr]],body];return ["done",expand([context,newenv],v)];});var partition=function(xs,predicate){var t=[];var f=[];var __t709=xs;var __t710=__t709.length;for(var __t711=0;(__t711<__t710);(__t711++)){var __t712=__t709[__t711];var x;var x;var other;if(((x=__t712),true,predicate(x))){t.push(x);}else{if(((x=__t712),true)){f.push(x);}else{if(((other=__t712),true)){false;}else{throw ["Could not find a match",__t712];}}}}false;return [t,f];};stdenv.register_macro("class",function(__t713,arg){var __tp0;var context;var env;if(((__t713 instanceof Array)&&((__t713["#"]===undefined)&&(((__tp0=__t713.length),true)&&((__tp0===2)&&((context=__t713[0]),true,(env=__t713[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var clsvar;var __tp2;var __tp3;var body;if((((__tp0=function(){var __t717=arg;var __tp0;var __tp1;var body;var __tp0;var __tp1;var name;var body;var __t718=false;var __t719=false;var __t720=false;if(((__t718=(__t717 instanceof Array))&&((__t719=(__t717["#"]===undefined))&&((__t720=((__tp0=__t717.length),true))&&((__tp0===2)&&(((__tp1=__t717[0]),(__tp1==="data"))&&((body=__t717[1]),true))))))){return [gensym(),body];}else{if((__t720&&((__tp0===3)&&(((__tp1=__t717[0]),(__tp1==="data"))&&((name=__t717[1]),true,(body=__t717[2]),true))))){return [name,body];}else{throw ["Could not find a match",__t717];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&(((clsvar=__tp0[0]),true,(__tp2=__tp0[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((body=__tp3[1]),true))))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var ctors;var clauses;if((((__tp0=partition(body,function(__t721){var __t722=__t721;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var __tp12;var __tp13;var __tp14;var __tp15;var _;var _;var otherwise;if(((__t722 instanceof Array)&&((__t722["#"]===undefined)&&(((__tp0=__t722.length),true)&&((__tp0===3)&&(((__tp1=__t722[0]),(__tp1==="send"))&&(((__tp2=__t722[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t722[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="send"))&&(((__tp12=__tp9[1]),(__tp12 instanceof Array))&&((__tp12["#"]===undefined)&&(((__tp13=__tp12.length),true)&&((__tp13===2)&&(((__tp14=__tp12[0]),(__tp14==="symbol"))&&(((__tp15=__tp12[1]),(__tp15==="constructor"))&&((_=__tp9[2]),true,(_=__tp6[2]),true))))))))))))))))))))))))))))){return true;}else{if(((otherwise=__t722),true)){return false;}else{throw ["Could not find a match",__t722];}}})),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((ctors=__tp0[0]),true,(clauses=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var ctor_args;var ctor_body;if((((__tp0=function(){var __t723=ctors;var __tp0;var __tp0;var __t724;var __t725=false;var __t726=false;var __t727=false;if(((__t725=(__t723 instanceof Array))&&((__t726=(__t723["#"]===undefined))&&((__t727=((__tp0=__t723.length),true))&&(__tp0===0))))){return [["data"],[]];}else{if((__t727&&((__tp0===1)&&((__t724=__t723[0]),true)))){var __t728=__t724;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var _;var args;var __tp12;var __tp13;var body;if(((__t728 instanceof Array)&&((__t728["#"]===undefined)&&(((__tp0=__t728.length),true)&&((__tp0===3)&&(((__tp1=__t728[0]),(__tp1==="send"))&&(((__tp2=__t728[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t728[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="send"))&&(((_=__tp9[1]),true,(args=__tp9[2]),true,(__tp12=__tp6[2]),(__tp13=___projector(aslist)(__tp12)),__tp13[0])&&((body=__tp13[1]),true)))))))))))))))))))))))){return [args,body];}else{throw ["Could not find a match",__t728];}}else{throw ["Could not find a match",__t723];}}}()),(__tp0 instanceof Array))&&((__tp0["#"]===undefined)&&(((__tp1=__tp0.length),true)&&((__tp1===2)&&((ctor_args=__tp0[0]),true,(ctor_body=__tp0[1]),true)))))){(void 0);}else{throw "a condition failed";}var selfvar=gensym();(ctor_body=function(){var prep=["send",["symbol","="],["data",selfvar,["send",["symbol","if"],["data",["send",["symbol","not"],["data",["void"],["send",["send",["symbol","?"],["data",clsvar,["void"]]],["symbol","this"]]]],["send",["send",["symbol","Object"],["send",["symbol","."],["data",["void"],["symbol","create"]]]],["data",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]]]],["symbol","this"]]]]];var ret=selfvar;return patch_array(["multi",prep],ctor_body,[ret]);}());var newenv=env.fork();newenv.register_macro("@",var_operator(selfvar));var defns=[];var static_defns=[];var __t714=clauses;var __t715=__t714.length;for(var __t716=0;(__t716<__t715);(__t716++)){var __t729=__t714[__t716];var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var body;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var __tp10;var __tp11;var name;var args;var __tp12;var __tp13;var body;var other;var __t730=false;var __t731=false;var __t732=false;var __t733=false;var __t734=false;var __t735=false;var __t736=false;var __t737=false;var __t738=false;var __t739=false;if(((__t730=(__t729 instanceof Array))&&((__t731=(__t729["#"]===undefined))&&((__t732=((__tp0=__t729.length),true))&&((__t733=(__tp0===3))&&((__t734=((__tp1=__t729[0]),(__tp1==="send")))&&((__t735=((__tp2=__t729[1]),(__tp2 instanceof Array)))&&((__t736=(__tp2["#"]===undefined))&&((__t737=((__tp3=__tp2.length),true))&&((__t738=(__tp3===2))&&((__t739=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="static"))&&(((__tp6=__t729[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===2)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp10=___projector(aslist)(__tp9)),__tp10[0])&&((body=__tp10[1]),true))))))))))))))))))){(static_defns=static_defns.concat(body));}else{if((__t739&&(((__tp5=__tp2[1]),(__tp5==="="))&&(((__tp6=__t729[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((__tp9=__tp6[1]),(__tp9 instanceof Array))&&((__tp9["#"]===undefined)&&(((__tp10=__tp9.length),true)&&((__tp10===3)&&(((__tp11=__tp9[0]),(__tp11==="send"))&&(((name=__tp9[1]),true,(args=__tp9[2]),true,(__tp12=__tp6[2]),(__tp13=___projector(aslist)(__tp12)),__tp13[0])&&((body=__tp13[1]),true))))))))))))))){(name=function(){var __t740=name;var __tp0;var __tp1;var _;var __tp0;var __tp1;var n;var __t741=false;var __t742=false;var __t743=false;var __t744=false;if(((__t741=(__t740 instanceof Array))&&((__t742=(__t740["#"]===undefined))&&((__t743=((__tp0=__t740.length),true))&&((__t744=(__tp0===2))&&(((__tp1=__t740[0]),(__tp1==="value"))&&((_=__t740[1]),true))))))){return name;}else{if((__t744&&(((__tp1=__t740[0]),(__tp1==="symbol"))&&((n=__t740[1]),true)))){return ["value",n];}else{throw ["Could not find a match",__t740];}}}());defns.push(["send",["symbol",":="],["data",["send",["send",clsvar,["send",["symbol","."],["data",["void"],["symbol","prototype"]]]],name],["send",["symbol","->"],["data",args,patch_array(["multi",["send",["symbol","="],["data",selfvar,["symbol","this"]]]],body)]]]]);}else{if(((other=__t729),true)){false;}else{throw ["Could not find a match",__t729];}}}}false;return ["done",expand([context,newenv],patch_array(["multi",["send",["symbol","="],["data",clsvar,["send",["symbol","->"],["data",ctor_args,ctor_body]]]],["send",["symbol","augment"],["data",clsvar,patch_array(["data"],static_defns)]]],defns,[clsvar]))];});stdenv.register_macro("do",function(__t745,__t746){var __tp0;var context;var env;if(((__t745 instanceof Array)&&((__t745["#"]===undefined)&&(((__tp0=__t745.length),true)&&((__tp0===2)&&((context=__t745[0]),true,(env=__t745[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var body;if(((__t746 instanceof Array)&&((__t746["#"]===undefined)&&(((__tp0=__t746.length),true)&&((__tp0===2)&&(((__tp1=__t746[0]),(__tp1==="data"))&&(((__tp2=__t746[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((body=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}return patch_array(["multi"],body);});stdenv.register_macro("then",function(__t747,__t748){var __tp0;var context;var env;if(((__t747 instanceof Array)&&((__t747["#"]===undefined)&&(((__tp0=__t747.length),true)&&((__tp0===2)&&((context=__t747[0]),true,(env=__t747[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var body;if(((__t748 instanceof Array)&&((__t748["#"]===undefined)&&(((__tp0=__t748.length),true)&&((__tp0===2)&&(((__tp1=__t748[0]),(__tp1==="data"))&&(((__tp2=__t748[1]),(__tp3=___projector(aslist)(__tp2)),__tp3[0])&&((body=__tp3[1]),true)))))))){(void 0);}else{throw "a condition failed";}return patch_array(["multi"],body);});var group=function(xs,classifier){var groups=[];var curr=[];var newgroup=function(){if((curr.length>0)){groups.push(curr);}else{null;}return (curr=[]);};var __t749=xs;var __t750=__t749.length;for(var __t751=0;(__t751<__t750);(__t751++)){var __t752=__t749[__t751];var x;var other;if(((x=__t752),true)){if(classifier(x)){newgroup();}else{null;}curr.push(x);}else{if(((other=__t752),true)){false;}else{throw ["Could not find a match",__t752];}}}false;newgroup();return groups;};var blocktest_wrap=function(label,expr,accumulator){var value=gensym();return ["multi",["send",["symbol","="],["data",value,["send",["symbol","!!"],["data",["multi",["send",["symbol","|>"],["data",expr,["multi",["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","true"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","success"]]],["data",["symbol","x"]]]]],["send",["symbol","->"],["data",["send",["send",["symbol","?"],["data",["symbol","false"],["void"]]],["symbol","x"]],["send",["send",["symbol","#"],["data",["void"],["symbol","failure"]]],["data",["symbol","x"]]]]]]]]],["send",["symbol","->"],["data",["symbol","__err"],["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",["symbol","__err"]]]]]]]]],["send",["send",accumulator,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","test_result"]]],["data",label,value]]]]];};var blocktest_mac=function(label,tests,acc){var ok=gensym();var stmts=[];stmts.push(["send",["symbol","="],["data",ok,["symbol","true"]]]);var __t753=tests;var __t754=__t753.length;for(var __t755=0;(__t755<__t754);(__t755++)){var __t756=__t753[__t755];var stmt;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var _;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var new_label;var __tp9;var __tp10;var new_tests;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var sources;var __tp9;var __tp10;var clauses;var expr;var other;var __t757=false;var __t758=false;var __t759=false;var __t760=false;var __t761=false;var __t762=false;var __t763=false;var __t764=false;var __t765=false;var __t766=false;if((((stmt=__t756),true,(__t756 instanceof Array))&&((__t756["#"]===undefined)&&(((__tp0=__t756.length),true)&&((__tp0===3)&&(((__tp1=__t756[0]),(__tp1==="send"))&&(((__tp2=__t756[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="do"))&&((_=__t756[2]),true))))))))))))){stmts.push(["send",["symbol","!!"],["data",stmt,["send",["symbol","->"],["data",["symbol","__err"],["multi",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["symbol","__err"]]]]],["send",["symbol",":="],["data",ok,["symbol","false"]]]]]]]]);}else{if(((__t757=(__t756 instanceof Array))&&((__t758=(__t756["#"]===undefined))&&((__t759=((__tp0=__t756.length),true))&&((__t760=(__tp0===3))&&((__t761=((__tp1=__t756[0]),(__tp1==="send")))&&((__t762=((__tp2=__t756[1]),(__tp2 instanceof Array)))&&((__t763=(__tp2["#"]===undefined))&&((__t764=((__tp3=__tp2.length),true))&&((__t765=(__tp3===2))&&((__t766=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="=>"))&&(((__tp6=__t756[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((new_label=__tp6[1]),true,(__tp9=__tp6[2]),(__tp10=___projector(aslist)(__tp9)),__tp10[0])&&((new_tests=__tp10[1]),true))))))))))))))))))){var labv=gensym();stmts.push(["multi",["send",["symbol","="],["data",labv,["send",["symbol","++"],["data",label,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],new_label]]]]],patch_array(["multi"],blocktest_mac(labv,new_tests,acc))]);}else{if((__t766&&(((__tp5=__tp2[1]),(__tp5==="each"))&&(((__tp6=__t756[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&(((sources=__tp6[1]),true,(__tp9=__tp6[2]),(__tp10=___projector(aslist)(__tp9)),__tp10[0])&&((clauses=__tp10[1]),true)))))))))){var loopvar=gensym();(clauses=function(){var __t767=[];var __t768=clauses;var __t769=__t768.length;for(var __t770=0;(__t770<__t769);(__t770++)){var __t771=__t768[__t770];var clause;var other;if(((clause=__t771),true)){__t767.push(function(){var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var lhs;var rhs;if(((clause instanceof Array)&&((clause["#"]===undefined)&&(((__tp0=clause.length),true)&&((__tp0===3)&&(((__tp1=clause[0]),(__tp1==="send"))&&(((__tp2=clause[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="symbol"))&&(((__tp5=__tp2[1]),(__tp5==="->"))&&(((__tp6=clause[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="data"))&&((lhs=__tp6[1]),true,(rhs=__tp6[2]),true)))))))))))))))))){(void 0);}else{throw "a condition failed";}var x=blocktest_mac(["send",["symbol","++"],["data",label,["data",loopvar]]],___projector(aslist)(rhs)[1],acc);return ["send",["symbol","->"],["data",lhs,patch_array(["multi"],x)]];}());}else{if(((other=__t771),true)){false;}else{throw ["Could not find a match",__t771];}}}return __t767;}());clauses.push(["send",["symbol","->"],["data",["symbol","__no"],["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","error"]]],["data",label,["value","No handler for test case"],["symbol","__no"]]]]]]]);stmts.push(build_each(sources,patch_array(["multi"],clauses),["multi"],["multi"],loopvar));}else{if(((expr=__t756),true)){stmts.push(["send",["symbol","if"],["data",ok,["multi",["send",["symbol","then"],["data",blocktest_wrap(label,expr,acc)]],["send",["symbol","else"],["data",["send",["send",acc,["send",["symbol","."],["data",["void"],["symbol","push"]]]],["data",["send",["send",["symbol","#"],["data",["void"],["symbol","aborted"]]],["data",label,["send",["symbol","'"],["data",["void"],expr]]]]]]]]]]]);}else{if(((other=__t756),true)){false;}else{throw ["Could not find a match",__t756];}}}}}}false;stmts.push(acc);return stmts;};stdenv.register_macro("blocktest",function(__t772,__t773){var __tp0;var context;var env;if(((__t772 instanceof Array)&&((__t772["#"]===undefined)&&(((__tp0=__t772.length),true)&&((__tp0===2)&&((context=__t772[0]),true,(env=__t772[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var args;if(((__t773 instanceof Array)&&((__t773["#"]===undefined)&&(((__tp0=__t773.length),true)&&((__tp0>=1)&&(((__tp1=__t773[0]),(__tp1==="data"))&&((args=__t773.slice(1)),true))))))){(void 0);}else{throw "a condition failed";}var acc=gensym();var labv=gensym();var stmts=["multi",["send",["symbol","="],["data",acc,["data"]]]];var rval=function(){var __t774=args;var __tp0;var __tp1;var __tp2;var tests;var __tp0;var labels;var __tp1;var __tp2;var tests;var __t775=false;var __t776=false;var __t777=false;if(((__t775=(__t774 instanceof Array))&&((__t776=(__t774["#"]===undefined))&&((__t777=((__tp0=__t774.length),true))&&((__tp0===1)&&(((__tp1=__t774[0]),(__tp2=___projector(aslist)(__tp1)),__tp2[0])&&((tests=__tp2[1]),true))))))){stmts.push(["send",["symbol","="],["data",labv,["data"]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{if((__t777&&((__tp0===2)&&(((labels=__t774[0]),true,(__tp1=__t774[1]),(__tp2=___projector(aslist)(__tp1)),__tp2[0])&&((tests=__tp2[1]),true))))){stmts.push(["send",["symbol","="],["data",labv,["send",["send",["symbol","!"],["data",["symbol","Array"],["void"]]],labels]]]);return (stmts=stmts.concat(blocktest_mac(labv,tests,acc)));}else{throw ["Could not find a match",__t774];}}}();return rval;});stdenv.register_macro("macro",function(__t778,expr){var __tp0;var context;var env;if(((__t778 instanceof Array)&&((__t778["#"]===undefined)&&(((__tp0=__t778.length),true)&&((__tp0===2)&&((context=__t778[0]),true,(env=__t778[1]),true)))))){(void 0);}else{throw "a condition failed";}var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var name;var __tp6;var __tp7;var sname;var args;var body;if(((expr instanceof Array)&&((expr["#"]===undefined)&&(((__tp0=expr.length),true)&&((__tp0===3)&&(((__tp1=expr[0]),(__tp1==="data"))&&(((__tp2=expr[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="send"))&&(((__tp5=__tp2[1]),(name=__tp5),true,(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===2)&&(((__tp7=__tp5[0]),(__tp7==="symbol"))&&((sname=__tp5[1]),true,(args=__tp2[2]),true,(body=expr[2]),true))))))))))))))))){(void 0);}else{throw "a condition failed";}var fn=["send",["symbol","->"],["data",args,body]];var code=generate_from_ast(fn);var efn=eval((("("+code.slice(0,(-1)))+")"));env.register_macro(sname,efn);return ["value",undefined];});stdenv.register_macro("match",function(__t780,__t779){var __tp0;var context;var env;if(((__t780 instanceof Array)&&((__t780["#"]===undefined)&&(((__tp0=__t780.length),true)&&((__tp0===2)&&((context=__t780[0]),true,(env=__t780[1]),true)))))){(void 0);}else{throw "a condition failed";}var __t781=__t779;var __tp0;var __tp1;var __tp0;var __tp1;var obj;var clauses;var __tp0;var __tp1;var clauses;var __t782=false;var __t783=false;var __t784=false;if(((__t782=(__t781 instanceof Array))&&((__t783=(__t781["#"]===undefined))&&((__t784=((__tp0=__t781.length),true))&&((__tp0===1)&&((__tp1=__t781[0]),(__tp1==="void"))))))){return ["placeholder"];}else{if((__t784&&((__tp0===3)&&(((__tp1=__t781[0]),(__tp1==="data"))&&((obj=__t781[1]),true,(clauses=__t781[2]),true))))){return ["send",["symbol","|>"],["data",obj,clauses]];}else{if((__t784&&((__tp0===2)&&(((__tp1=__t781[0]),(__tp1==="data"))&&((clauses=__t781[1]),true))))){return ["send",["symbol","|>"],["data",["value",null],clauses]];}else{throw ["Could not find a match",__t781];}}}});var js_op_table=({"___plus":"+","___minus":"-","___times":"*","___div":"/","___mod":"%","___binxor":"^","___binand":"&","___binor":"|","___binnot":"~","___and":"&&","___or":"||","___not":"!","___is":"===","___isnt":"!==","___eq":"===","___neq":"!==","___lt":"<","___gt":">","___lte":"<=","___gte":">=","___shl":"<<","___shr":">>","___shr2":">>>","___in":" in ","___instanceof":" instanceof ","___plusplus":"++","___minusminus":"--"});var translate=function(__t786,mode){var expr;var __t785;(expr=__t786);true;(__t785=__t786);var __t787=__t785;var __tp0;var __tp1;var s;var __tp0;var __tp1;var __tp0;var __tp1;var v;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var f;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var f;var msg;var __tp0;var __tp1;var f;var __tp2;var msg;var __tp3;var __tp4;var s;var __tp0;var __tp1;var f;var __tp2;var __tp3;var __tp4;var args;var __tp0;var __tp1;var f;var msg;var __tp0;var __tp1;var args;var __tp0;var __tp1;var args;var __tp0;var __tp1;var bindings;var body;var __tp0;var __tp1;var test;var pos;var neg;var __tp0;var __tp1;var binding;var __tp2;var __tp3;var __tp4;var __tp5;var __tp0;var __tp1;var binding;var value;var __tp0;var __tp1;var __tp2;var __tp3;var __tp4;var obj;var msg;var rhs;var __tp0;var __tp1;var lhs;var rhs;var __tp0;var __tp1;var args;var __tp0;var __tp1;var args;var __tp0;var __tp1;var value;var __tp0;var __tp1;var __tp0;var __tp1;var __tp0;var __tp1;var value;var __tp0;var __tp1;var value;var __tp0;var __tp1;var value;var __tp0;var __tp1;var test;var body;var __tp0;var __tp1;var x;var y;var z;var body;var __tp0;var __tp1;var x;var y;var body;var __tp0;var __tp1;var attempt;var __tp2;var __tp3;var __tp4;var __tp5;var __tp6;var __tp7;var __tp8;var __tp9;var v;var body;var __tp10;var __tp11;var __tp12;var other;var __t788=false;var __t789=false;var __t790=false;var __t791=false;var __t792=false;var __t793=false;var __t794=false;var __t795=false;var __t796=false;var __t797=false;if(((__t788=(__t787 instanceof Array))&&((__t789=(__t787["#"]===undefined))&&((__t790=((__tp0=__t787.length),true))&&((__tp0===2)&&(((__tp1=__t787[0]),(__tp1==="symbol"))&&((s=__t787[1]),true))))))){return translate.expr(translate.mangle(s),mode);}else{if((__t790&&((__tp0===1)&&((__tp1=__t787[0]),(__tp1==="void"))))){return translate.expr("null",mode);}else{if((__t790&&((__tp0===2)&&(((__tp1=__t787[0]),(__tp1==="value"))&&((v=__t787[1]),true))))){var r=function(){var __t798=v;var other;if((typeof(__t798)==="string")){var repl=({"\"":"\\\"","\n":"\\n","\\":"\\\\"});(v=v.replace(RegExp("((?:(?:\"|\\\\)|\n))","g"),function(m){return send(repl,m);}));return (("\""+v)+"\"");}else{if((__t798===(void 0))){return "(void 0)";}else{if(((((typeof(__t798)==="number")||(__t798===true))||(__t798===false))||(__t798===null))){return String(v);}else{if(((other=__t798),true)){pr(v);throw Error("Unknown value");return (("?!?["+v)+"]?!?");}else{throw ["Could not find a match",__t798];}}}}}();return translate.expr(r,mode);}else{if((__t790&&((__t791=(__tp0===3))&&((__t792=((__tp1=__t787[0]),(__tp1==="send")))&&((__t793=((__tp2=__t787[1]),(__tp2 instanceof Array)))&&((__t794=(__tp2["#"]===undefined))&&((__t795=((__tp3=__tp2.length),true))&&((__t796=(__tp3===2))&&((__t797=((__tp4=__tp2[0]),(__tp4==="symbol")))&&(((__tp5=__tp2[1]),(__tp5==="___node"))&&(((__tp6=__t787[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===2)&&(((__tp8=__tp6[0]),(__tp8==="value"))&&((f=__tp6[1]),true)))))))))))))))){return f;}else{if((__t797&&(((__tp5=__tp2[1]),(__tp5==="___js_fetch"))&&(((__tp6=__t787[2]),(__tp6 instanceof Array))&&((__tp6["#"]===undefined)&&(((__tp7=__tp6.length),true)&&((__tp7===3)&&(((__tp8=__tp6[0]),(__tp8==="array"))&&((f=__tp6[1]),true,(msg=__tp6[2]),true))))))))){var trf=translate(f,"expr");var trmsg=translate(msg,"expr");return translate.expr((((trf+"[")+trmsg)+"]"),mode);}else{if((__t792&&(((f=__t787[1]),true,(__tp2=__t787[2]),(msg=__tp2),true,(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="value"))&&((s=__tp2[1]),true)))))))){if(((typeof(s)==="string")&&s.match(RegExp("(?:^(?:[a-zA-Z_$]+)$)","")))){var trf=translate(f,"expr");var trmsg=translate(["symbol",s],"expr");return translate.expr(((trf+".")+trmsg),mode);}else{if(true){var trf=translate(f,"expr");var trmsg=translate(msg,"expr");return translate.expr((((trf+"[")+trmsg)+"]"),mode);}else{return false;}}}else{if((__t792&&(((f=__t787[1]),true,(__tp2=__t787[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3>=1)&&(((__tp4=__tp2[0]),(__tp4==="array"))&&((args=__tp2.slice(1)),true)))))))){var op=function(){var __t799=f;var __tp0;var __tp1;var x;var _;if(((__t799 instanceof Array)&&((__t799["#"]===undefined)&&(((__tp0=__t799.length),true)&&((__tp0===2)&&(((__tp1=__t799[0]),(__tp1==="symbol"))&&((x=__t799[1]),true))))))){return send(js_op_table,x);}else{if(((_=__t799),true)){return null;}else{throw ["Could not find a match",__t799];}}}();if(op){return translate.expr(translate.op(op,args[0],args[1]),mode);}else{var trf=translate(f,"expr");var trargs=function(){var __t800=[];var __t801=args;var __t802=__t801.length;for(var __t803=0;(__t803<__t802);(__t803++)){var __t804=__t801[__t803];var x;var other;if(((x=__t804),true)){__t800.push(translate(x,"expr"));}else{if(((other=__t804),true)){false;}else{throw ["Could not find a match",__t804];}}}return __t800;}();return translate.expr((((trf+"(")+trargs.join(","))+")"),mode);}}else{if((__t792&&((f=__t787[1]),true,(msg=__t787[2]),true))){var trf=translate(f,"expr");var trmsg=translate(msg,"expr");return translate.expr((((("send("+trf)+",")+trmsg)+")"),mode);}else{if((__t790&&((__t791=(__tp0>=1))&&(((__tp1=__t787[0]),(__tp1==="array"))&&((args=__t787.slice(1)),true))))){var r=function(){var f=function(x){return translate(x,"expr");};return (("["+args.map(f).join(","))+"]");}();return translate.expr(r,mode);}else{if((__t791&&(((__tp1=__t787[0]),(__tp1==="object"))&&((args=__t787.slice(1)),true)))){var r=function(){var f=function(__t805){var __tp0;var __tp1;var x;var y;if(((__t805 instanceof Array)&&((__t805["#"]===undefined)&&(((__tp0=__t805.length),true)&&((__tp0===3)&&(((__tp1=__t805[0]),(__tp1==="array"))&&((x=__t805[1]),true,(y=__t805[2]),true))))))){(void 0);}else{throw "a condition failed";}var a=translate(x,"expr");var b=translate(y,"expr");return ((a+":")+b);};return (("({"+args.map(f).join(","))+"})");}();return translate.expr(r,mode);}else{if((__t790&&((__tp0===3)&&(((__tp1=__t787[0]),(__tp1==="lambda"))&&((bindings=__t787[1]),true,(body=__t787[2]),true))))){var a=function(){var __t814=[];var __t815=bindings;var __t816=__t815.length;for(var __t817=0;(__t817<__t816);(__t817++)){var __t818=__t815[__t817];var x;var other;if(((x=__t818),true)){__t814.push(translate(x,"expr"));}else{if(((other=__t818),true)){false;}else{throw ["Could not find a match",__t818];}}}return __t814;}().join(",");var b=translate.body(body,"return");return translate.expr((((("function("+a)+"){")+b)+"}"),mode);}else{if((__t790&&((__tp0===4)&&(((__tp1=__t787[0]),(__tp1==="if"))&&((test=__t787[1]),true,(pos=__t787[2]),true,(neg=__t787[3]),true))))){var __t819=mode;var other;if((__t819==="expr")){return translate.body(expr,"expr");}else{if(((other=__t819),true)){var a=translate(test,"expr");var b=translate(pos,mode);var c=translate(neg,mode);return (((((("if("+a)+"){")+b)+"}else{")+c)+"}");}else{throw ["Could not find a match",__t819];}}}else{if((__t790&&((__t791=(__tp0===3))&&((__t792=((__tp1=__t787[0]),(__tp1==="declare")))&&(((binding=__t787[1]),true,(__tp2=__t787[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===2)&&(((__tp4=__tp2[0]),(__tp4==="value"))&&((__tp5=__tp2[1]),(__tp5===(void 0)))))))))))){var __t820=mode;var other;if(((__t820==="expr")||(__t820==="return"))){throw "Invalid in expr ctx";}else{if(((other=__t820),true)){var a=translate(binding,"expr");return (("var "+a)+";");}else{throw ["Could not find a match",__t820];}}}else{if((__t792&&((binding=__t787[1]),true,(value=__t787[2]),true))){var __t821=mode;var other;if(((__t821==="expr")||(__t821==="return"))){throw "Invalid in expr ctx";}else{if(((other=__t821),true)){var a=translate(binding,"expr");var b=translate(value,"expr");return (((("var "+a)+"=")+b)+";");}else{throw ["Could not find a match",__t821];}}}else{if((__t791&&((__t792=((__tp1=__t787[0]),(__tp1==="assign")))&&(((__tp2=__t787[1]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="send"))&&((obj=__tp2[1]),true,(msg=__tp2[2]),true,(rhs=__t787[2]),true))))))))){var a=translate(obj,"expr");var b=translate(msg,"expr");var c=translate(rhs,"expr");return translate.expr((((((("("+a)+"[")+b)+"]=")+c)+")"),mode);}else{if((__t792&&((lhs=__t787[1]),true,(rhs=__t787[2]),true))){var a=translate(lhs,"expr");var b=translate(rhs,"expr");return translate.expr((((("("+a)+"=")+b)+")"),mode);}else{if((__t790&&((__t791=(__tp0>=1))&&(((__tp1=__t787[0]),(__tp1==="multi"))&&((args=__t787.slice(1)),true))))){var isdecl=function(__t823){var __t824=__t823;var __tp0;var __tp1;var variable;var value;var other;if(((__t824 instanceof Array)&&((__t824["#"]===undefined)&&(((__tp0=__t824.length),true)&&((__tp0===3)&&(((__tp1=__t824[0]),(__tp1==="declare"))&&((variable=__t824[1]),true,(value=__t824[2]),true))))))){return true;}else{if(((other=__t824),true)){return false;}else{throw ["Could not find a match",__t824];}}};var __t822=null;var _;if((args.length===1)){return translate(args[0],mode);}else{if(((mode==="expr")&&(!args.some(isdecl)))){var xs=function(){var __t825=[];var __t826=args;var __t827=__t826.length;for(var __t828=0;(__t828<__t827);(__t828++)){var __t829=__t826[__t828];var x;var other;if(((x=__t829),true)){__t825.push(translate(x,"expr"));}else{if(((other=__t829),true)){false;}else{throw ["Could not find a match",__t829];}}}return __t825;}();return (("("+xs.join(","))+")");}else{if(((_=__t822),true)){return translate.body(expr,mode);}else{throw ["Could not find a match",__t822];}}}}else{if((__t791&&(((__tp1=__t787[0]),(__tp1==="splice"))&&((args=__t787.slice(1)),true)))){return translate(patch_array(["multi"],args),mode);}else{if((__t790&&((__tp0===2)&&(((__tp1=__t787[0]),(__tp1==="js_new"))&&((value=__t787[1]),true))))){return translate.expr((("(new "+translate(value,"expr"))+")"),mode);}else{if((__t790&&((__t791=(__tp0===1))&&((__tp1=__t787[0]),(__tp1==="js_break"))))){if((mode==="expr")){throw "Invalid break in ctx";}else{return "break;";}}else{if((__t791&&((__tp1=__t787[0]),(__tp1==="js_continue")))){if((mode==="expr")){throw "Invalid continue in ctx";}else{return "continue;";}}else{if((__t790&&((__t791=(__tp0===2))&&(((__tp1=__t787[0]),(__tp1==="js_return"))&&((value=__t787[1]),true))))){if((mode==="expr")){throw "Invalid return in ctx";}else{return (("return "+translate(value,"expr"))+";");}}else{if((__t791&&(((__tp1=__t787[0]),(__tp1==="js_delete"))&&((value=__t787[1]),true)))){if((mode==="expr")){throw "Invalid delete in ctx";}else{return (("delete "+translate(value,"expr"))+";");}}else{if((__t791&&(((__tp1=__t787[0]),(__tp1==="js_throw"))&&((value=__t787[1]),true)))){if((mode==="expr")){return (("function(){throw "+translate(value,"expr"))+";}()");}else{return (("throw "+translate(value,"expr"))+";");}}else{if((__t790&&((__tp0===3)&&(((__tp1=__t787[0]),(__tp1==="js_while"))&&((test=__t787[1]),true,(body=__t787[2]),true))))){var __t830=mode;var other;if((__t830==="expr")){return translate.body(expr,"expr");}else{if(((other=__t830),true)){var a=translate(test,"expr");var b=translate(body,"stmt");return (((("while("+a)+"){")+b)+"}");}else{throw ["Could not find a match",__t830];}}}else{if((__t790&&((__tp0===5)&&(((__tp1=__t787[0]),(__tp1==="js_for"))&&((x=__t787[1]),true,(y=__t787[2]),true,(z=__t787[3]),true,(body=__t787[4]),true))))){var __t831=mode;var other;if((__t831==="expr")){return translate.body(expr,"expr");}else{if(((other=__t831),true)){var a=translate(x,"stmt");var b=translate(y,"stmt");var c=translate(z,"expr");var d=translate(body,"stmt");return (((((("for("+a)+b)+c)+"){")+d)+"}");}else{throw ["Could not find a match",__t831];}}}else{if((__t790&&((__t791=(__tp0===4))&&(((__tp1=__t787[0]),(__tp1==="js_for_in"))&&((x=__t787[1]),true,(y=__t787[2]),true,(body=__t787[3]),true))))){var __t832=mode;var other;if((__t832==="expr")){return translate.body(expr,"expr");}else{if(((other=__t832),true)){var a=translate(x,"expr");var b=translate(y,"expr");var c=translate(body,"stmt");return (((((("for("+a)+" in ")+b)+"){")+c)+"}");}else{throw ["Could not find a match",__t832];}}}else{if((__t791&&(((__tp1=__t787[0]),(__tp1==="js_try"))&&(((attempt=__t787[1]),true,(__tp2=__t787[2]),(__tp2 instanceof Array))&&((__tp2["#"]===undefined)&&(((__tp3=__tp2.length),true)&&((__tp3===3)&&(((__tp4=__tp2[0]),(__tp4==="lambda"))&&(((__tp5=__tp2[1]),(__tp5 instanceof Array))&&((__tp5["#"]===undefined)&&(((__tp6=__tp5.length),true)&&((__tp6===1)&&(((__tp7=__tp5[0]),(__tp7 instanceof Array))&&((__tp7["#"]===undefined)&&(((__tp8=__tp7.length),true)&&((__tp8===2)&&(((__tp9=__tp7[0]),(__tp9==="symbol"))&&(((v=__tp7[1]),true,(body=__tp2[2]),true,(__tp10=__t787[3]),(__tp10 instanceof Array))&&((__tp10["#"]===undefined)&&(((__tp11=__tp10.length),true)&&((__tp11===1)&&((__tp12=__tp10[0]),(__tp12==="void"))))))))))))))))))))))){var __t833=mode;var other;if((__t833==="expr")){return translate.body(expr,"expr");}else{if(((other=__t833),true)){var a=translate(attempt,"stmt");var b=translate(body,"stmt");return (((((("try{"+a)+"}catch(")+v)+"){")+b)+"}");}else{throw ["Could not find a match",__t833];}}}else{if(((other=__t787),true)){throw other;}else{throw ["Could not find a match",__t787];}}}}}}}}}}}}}}}}}}}}}}}}}}}}}};(translate["mangle"]=function(name){var tr=({"+":"__plus__","-":"__minus__","*":"__asterisk__","/":"__slash__","%":"__percent__","^":"__caret__","#":"__hash__","&":"__amp__","|":"__pipe__","@":"__at__","!":"__bang__","?":"__qmark__","=":"__equal__","<":"__lt__",">":"__gt__","~":"__tilde__",".":"__dot__",":":"__colon__"});var r=[];for(var i=0;(i<name.length);(++i)){var c=send(name,i);r.push((send(tr,c)||c));}return r.join("");});(translate["body"]=function(b,mode){(orig=b);(b=aslist(b));var trst=function(stmt){return translate(stmt,"stmt");};var __t834=mode;var other;if((__t834==="expr")){var x=["send",["lambda",[],orig],["array"]];return translate(x,mode);}else{if((__t834==="return")){var stmts=b.slice(0,(-1));var ret=send(b,(b.length-1));return (stmts.map(trst).join("")+translate(ret,"return"));}else{if((__t834==="stmt")){return b.map(trst).join("");}else{if(((other=__t834),true)){throw "OopsH";}else{throw ["Could not find a match",__t834];}}}}});(translate["expr"]=function(x,__t835){var __t836=__t835;var other;if((__t836==="expr")){return x;}else{if((__t836==="stmt")){return (x+";");}else{if((__t836==="return")){return (("return "+x)+";");}else{if(((other=__t836),true)){throw "OopsI";}else{throw ["Could not find a match",__t836];}}}}});(translate["op"]=function(op,a,b){var e=function(){var __t837=[a,b];var __tp0;var __tp1;var __tp2;var __tp3;var _;var __tp0;var _;var __tp1;var __tp2;var __tp3;var _;var __t838=false;var __t839=false;var __t840=false;var __t841=false;if(((__t838=(__t837 instanceof Array))&&((__t839=(__t837["#"]===undefined))&&((__t840=((__tp0=__t837.length),true))&&((__t841=(__tp0===2))&&(((__tp1=__t837[0]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&(((__tp3=__tp1[0]),(__tp3==="void"))&&((_=__t837[1]),true))))))))))){return (op+translate(b,"expr"));}else{if((__t841&&(((_=__t837[0]),true,(__tp1=__t837[1]),(__tp1 instanceof Array))&&((__tp1["#"]===undefined)&&(((__tp2=__tp1.length),true)&&((__tp2===1)&&((__tp3=__tp1[0]),(__tp3==="void")))))))){return (translate(a,"expr")+op);}else{if(((_=__t837),true)){return ((translate(a,"expr")+op)+translate(b,"expr"));}else{throw ["Could not find a match",__t837];}}}}();return (("("+e)+")");});var generate_from_ast=function(ast){var ex=expand(["top",stdenv.fork()],["multi",ast]);return translate(ex,"stmt");};var generate=function(data,prelude){var p=parse(Source(data,null));var ex=expand(["top",stdenv.fork()],["multi",p]);return ((prelude||"")+translate(ex,"stmt"));};(exports["Source"]=Source);(exports["Location"]=Location);(exports["highlight_locations"]=highlight_locations);(exports["tokenize"]=tokenize);(exports["parse"]=parse);(exports["generate"]=generate);
