var τ18=function(type){var τ19=type["::check"];var f;if((τ19===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ19),true)){return function(value){return f.call(type,value);};}else{throw ["Could not find a match",τ19];}}};
var τ20=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};
var τ21=function(τ22){var τ23=τ22;var x;var x;var other;if((((typeof(τ23)==="string")&&((x=τ23),true))||((typeof(τ23)==="number")&&((x=τ23),true)))){return ["value",x];}else{if(((other=τ23),true)){return other["::serialize_ast"]();}else{throw ["Could not find a match",τ23];}}};
var send=function(obj,τ11){var msg;var τ10;(msg=τ11);true;(τ10=τ11);var τ12=τ10;var other;if(((typeof(τ12)==="string")||(typeof(τ12)==="number"))){return obj[msg];}else{if(((other=τ12),true)){return obj["::send"](msg);}else{throw ["Could not find a match",τ12];}}};(Array[":::project"]=function(τ14){var value;var τ13;(value=τ14);true;(τ13=τ14);var τ15=τ13;var _;if(τ18(Array)(τ15)){return [true,value];}else{if(((_=τ15),true)){return [true,[value]];}else{throw ["Could not find a match",τ15];}}});(Array.prototype["::check"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){return false;}else{null;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){var rval=this.slice(0);rval.push(value);return [true,rval];}else{null;}}return [true,value];}else{var rval=this.slice(0);rval.push(value);return [true,rval];}});(Array.prototype[":::deconstruct"]=function(value){return [true,value.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return τ20(["array"],this.map(τ21));});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var τ16=value.match(this);var m;var m;if(((τ16===null)&&((m=τ16),true))){return [false,null];}else{if(((m=τ16),true)){return [true,m];}else{throw ["Could not find a match",τ16];}}});(RegExp.prototype[":::deconstruct"]=function(value){var τ17=value.match(this);var m;var m;if(((τ17===null)&&((m=τ17),true))){return [false,null];}else{if(((m=τ17),true)){return [true,m];}else{throw ["Could not find a match",τ17];}}});(Function.prototype["::send"]=function(args){return this.apply(this,args);});
var τ31=function(dest,values){for(k in values){if(values.hasOwnProperty(k)){(dest[k]=send(values,k));}else{null;}}return dest;};var τ24=require("./location");var Source=τ24.Source;var Location=τ24.Location;var highlight_locations=τ24.highlight_locations;var τ25=require("./lex");var tokenize=τ25.tokenize;var τ26=require("./parse");var parse=τ26.parse;var τ27=require("./expand");var expand=τ27.expand;var τ28=require("./stdenv");var stdenv=τ28.stdenv;var stdprelude=τ28.stdprelude;var τ29=require("./translate-js");var translate=τ29.translate;var Translator=τ29.Translator;var generate_from_ast=function(ast){var ex=expand(["top",stdenv.fork()],["multi",ast]);return translate(ex,"stmt");};var generate=function(source,prelude){var t=tokenize(source);var p=parse(t);var ex=expand(["top",stdenv.fork()],["multi",p]);return ((prelude||"")+translate(ex,"stmt"));};var Generator=function(){var τ30=function(){if((!τ18(Generator)(this))){return Object.create(Generator.prototype);}else{return this;}}();(τ30["tr"]=Translator(stdprelude));return τ30;};τ31(Generator);(Generator.prototype["generate"]=function(source){var τ30=this;var t=tokenize(source);var p=parse(t);var ex=expand(["top",stdenv.fork()],["multi",p]);var rval=τ30.tr.translate(ex,"stmt");return (τ30.tr.dump_store()+rval);});Generator;(exports["Source"]=Source);(exports["Location"]=Location);(exports["highlight_locations"]=highlight_locations);(exports["tokenize"]=tokenize);(exports["parse"]=parse);(exports["generate_from_ast"]=generate_from_ast);(exports["generate"]=generate);(exports["Generator"]=Generator);
