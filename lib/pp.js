var $13828=function(type$13830){var f$13833;(f$13833=type$13830["::check"]);;if((f$13833===(void 0))){return function(value$13838){return (value$13838 instanceof type$13830);};}else{return function(value$13841){return f$13833.call(type$13830,value$13841);};}};
var $13843=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $13844=function(dest$13846,values$13847){var k$13852;(k$13852=null);$13850:for(k$13852 in values$13847){if(values$13847.hasOwnProperty(k$13852)){(dest$13846[k$13852]=values$13847[k$13852]);}}return dest$13846;};
var $13856=function($13857$13859){var ph$13863;(ph$13863=$13857$13859);;var $13861$13868;($13861$13868=ph$13863);;var bridge$13862$13873;var x$13877;(bridge$13862$13873=$13861$13868);if((((typeof(bridge$13862$13873)==="string")&&((x$13877=bridge$13862$13873),true))||((typeof(bridge$13862$13873)==="number")&&((x$13877=bridge$13862$13873),true)))){return ["value",x$13877];}else{var other$13884;(other$13884=$13861$13868);return other$13884["::serialize_ast"]();}};
var send$13668;(send$13668=function(obj$13673,$13671$13674){var ph$13678;var msg$13679;var t0$13681;(t0$13681=$13671$13674);(msg$13679=t0$13681);(ph$13678=t0$13681);;var $13676$13685;($13676$13685=ph$13678);;var bridge$13677$13690;(bridge$13677$13690=$13676$13685);if(((typeof(bridge$13677$13690)==="string")||(typeof(bridge$13677$13690)==="number"))){return obj$13673[msg$13679];}else{var other$13698;(other$13698=$13676$13685);return obj$13673["::send"](msg$13679);}});;(Array[":::project"]=function($13701$13703){var ph$13706;var value$13707;var t0$13709;(t0$13709=$13701$13703);(value$13707=t0$13709);(ph$13706=t0$13709);;var $13705$13713;($13705$13713=ph$13706);;if($13828(Array)($13705$13713)){return [true,value$13707];}else{$13705$13713;return [true,[value$13707]];}});(Array.prototype["::check"]=function(value$13727){if((value$13727 instanceof Array)){var i$13732;(i$13732=0);;$13730:for(;(i$13732<this.length);(i$13732++)){if(($13843(this,i$13732)!==$13843(value$13727,i$13732))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $13844(this.slice(0),this);});(Array.prototype[":::project"]=function(value$13743){if((value$13743 instanceof Array)){var i$13748;(i$13748=0);;$13746:for(;(i$13748<this.length);(i$13748++)){if(($13843(this,i$13748)!==$13843(value$13743,i$13748))){return [true,[value$13743]];}}return [true,value$13743.slice(this.length)];}else{return [true,[value$13743]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($13856));});(RegExp.prototype["::check"]=function($13758$13760){var ph$13763;(ph$13763=$13758$13760);;var $13762$13768;($13762$13768=ph$13763);;var value$13776;if((typeof($13762$13768)==="string")){(value$13776=$13762$13768);if(value$13776.match(this)){return true;}else{return false;}}else{var other$13781;(other$13781=$13762$13768);return false;}});(RegExp.prototype[":::project"]=function($13783$13785){var ph$13788;(ph$13788=$13783$13785);;var $13787$13793;($13787$13793=ph$13788);;var value$13801;if((typeof($13787$13793)==="string")){(value$13801=$13787$13793);var $13804$13806;($13804$13806=value$13801.match(this));;var m$13814;if(($13804$13806===null)){(m$13814=$13804$13806);return [false,null];}else{var m$13819;(m$13819=$13804$13806);return [true,m$13819];}}else{var other$13823;(other$13823=$13787$13793);return [false,null];}});(Function.prototype["::send"]=function(args$13826){return this.apply(this,args$13826);});
var $14608=function(type$14610){return function(value$14613){var f$14616;(f$14616=type$14610[":::project"]);;if((f$14616===(void 0))){(f$14616=type$14610["::project"]);if((f$14616===(void 0))){return [true,type$14610(value$14613)];}else{var rval$14622;(rval$14622=false);;try{(rval$14622=[true,f$14616(value$14613)]);}catch(excv$14628){var e$14634;(e$14634=excv$14628);(rval$14622=[false,null]);}return rval$14622;}}else{return f$14616.call(type$14610,value$14613);}};};
var $14818=function(arr$14820){var results$14824;var l$14825;(results$14824=[]);;(l$14825=arr$14820.length);;var i$14833;(i$14833=0);;$14823:for(;(i$14833<l$14825);(i$14833++)){results$14824.push([i$14833,$13843(arr$14820,i$14833)]);}return results$14824;};
var $14649=function(){var $14650$14652;($14650$14652=function(tags$14656){var it$0$14659;(it$0$14659=function(){if((!$13828($14650$14652)(this))){return Object.create($14650$14652.prototype);}else{return this;}}());;(it$0$14659["tags"]=tags$14656);return it$0$14659;});;($14650$14652.prototype["create"]=function(){var $14668$14670;($14668$14670=arguments);;var t0$14675;var message$14679;var args$14680;(t0$14675=$14668$14670.length);if((t0$14675>=0)){(message$14679=function(){if((0>=t0$14675)){return "";}else{return $14668$14670[0];}}());(args$14680=Array.prototype.slice.call($14668$14670,1));var it$0$14684;(it$0$14684=this);;var self$14689;(self$14689=this);;var e$14694;(e$14694=Error(message$14679));;(e$14694["::tags"]=it$0$14684.tags);(e$14694["args"]=args$14680);var temp$14702;(temp$14702=$14818(args$14680));;var $length$14707;($length$14707=temp$14702.length);;var $index$14712;($index$14712=0);;$14695:for(;($index$14712<$length$14707);($index$14712++)){var m$14720;(m$14720=temp$14702[$index$14712]);;var t0$14725;var t1$14726;var i$14730;var arg$14731;(t0$14725=m$14720);if(((t0$14725 instanceof Array)&&((t1$14726=t0$14725.length),(t1$14726===2)))){(i$14730=t0$14725[0]);(arg$14731=t0$14725[1]);(e$14694[i$14730]=arg$14731);}else{$14636(m$14720);;}}(e$14694["length"]=args$14680.length);(e$14694["name"]=["E"].concat(it$0$14684.tags).join("."));return e$14694;}else{$14636($14668$14670);}});($14650$14652.prototype["::check"]=function(e$14742){var it$0$14745;(it$0$14745=this);;var self$14750;(self$14750=this);;var tags$14755;if(((!e$14742)||(!$13828(Error)(e$14742)))){return false;}(tags$14755=(e$14742["::tags"]||[]));;var temp$14764;(temp$14764=it$0$14745.tags);;var $length$14769;($length$14769=temp$14764.length);;var $index$14774;($index$14774=0);;$14756:for(;($index$14774<$length$14769);($index$14774++)){var m$14782;(m$14782=temp$14764[$index$14774]);;var tag$14790;(tag$14790=m$14782);if((tags$14755.indexOf(tag$14790)===-1)){return false;}else{false;;}}return true;});($14650$14652.prototype["::deconstruct"]=function(e$14798){var it$0$14801;(it$0$14801=this);;var self$14806;(self$14806=this);;return e$14798.args;});$13844($14650$14652,$13844(function(){var accum$14811;(accum$14811=({}));(accum$14811["::name"]="$14650");return accum$14811;}(),function(){var accum$14815;(accum$14815=({}));(accum$14815["::egclass"]=true);return accum$14815;}()));return $14650$14652;}();
var $14636=function(value$14638,url$14639,start$14640,end$14641){var err$14644;(err$14644=$14649(["match"]).create("Could not find a match for value",({"value":value$14638})));;if(url$14639){(err$14644["location"]=["location",url$14639,start$14640,end$14641]);}throw err$14644;};
var $14481=function(){var $14482$14484;($14482$14484=function($14487$14490,$14488$14491){var classes$14493;var children$14494;var t0$14496;(t0$14496=$14608(Array)($14487$14490));if(t0$14496[0]){(classes$14493=t0$14496[1]);;}else{$14636($14487$14490);}var t0$14501;(t0$14501=$14608(Array)($14488$14491));if(t0$14501[0]){(children$14494=t0$14501[1]);;}else{$14636($14488$14491);}var it$0$14506;(it$0$14506=function(){if((!$13828($14482$14484)(this))){return Object.create($14482$14484.prototype);}else{return this;}}());;(it$0$14506["classes"]=classes$14493.sort());(it$0$14506["children"]=children$14494);return it$0$14506;});;$13844(function(){var accum$14514;(accum$14514=({}));(accum$14514["::check"]=function(x$14518){return ((x$14518&&x$14518.classes)&&x$14518.children);});return accum$14514;}(),$13844(function(){var accum$14521;(accum$14521=({}));(accum$14521["::deconstruct"]=function(x$14525){return [x$14525.classes,x$14525.children];});return accum$14521;}(),$13844(function(){var accum$14528;(accum$14528=({}));(accum$14528["::name"]="$14482");return accum$14528;}(),function(){var accum$14532;(accum$14532=({}));(accum$14532["::egclass"]=true);return accum$14532;}())));($14482$14484.prototype["::check"]=function(n$14538){var it$0$14541;(it$0$14541=this);;var self$14546;(self$14546=this);;var temp$14555;(temp$14555=it$0$14541.classes);;var $length$14560;($length$14560=temp$14555.length);;var $index$14565;($index$14565=0);;$14551:for(;($index$14565<$length$14560);($index$14565++)){var m$14573;(m$14573=temp$14555[$index$14565]);;var c$14581;(c$14581=m$14573);if((n$14538.classes.indexOf(c$14581)===-1)){return false;}else{false;;}}return true;});$13844($14482$14484,$13844(function(){var accum$14587;(accum$14587=({}));(accum$14587["::check"]=function(x$14591){return ((x$14591&&x$14591.classes)&&x$14591.children);});return accum$14587;}(),$13844(function(){var accum$14594;(accum$14594=({}));(accum$14594["::deconstruct"]=function(x$14598){return [x$14598.classes,x$14598.children];});return accum$14594;}(),$13844(function(){var accum$14601;(accum$14601=({}));(accum$14601["::name"]="$14482");return accum$14601;}(),function(){var accum$14605;(accum$14605=({}));(accum$14605["::egclass"]=true);return accum$14605;}()))));return $14482$14484;}();
var $14840=function(obj$14842){var results$14846;(results$14846=[]);;var k$14851;(k$14851=null);$14845:for(k$14851 in obj$14842){if(Object.prototype.hasOwnProperty.call(obj$14842,k$14851)){results$14846.push([k$14851,$13843(obj$14842,k$14851)]);}}return results$14846;};
var $14855=function($14856$14858,key$14859){var ph$14863;(ph$14863=$14856$14858);;var $14861$14868;($14861$14868=ph$14863);;var bridge$14862$14873;(bridge$14862$14873=$14861$14868);if(((bridge$14862$14873===null)||(bridge$14862$14873===(void 0)))){return false;}else{var x$14881;if((typeof($14861$14868)==="string")){(x$14881=$14861$14868);return (key$14859 in String.prototype);}else{var x$14886;if((typeof($14861$14868)==="number")){(x$14886=$14861$14868);return (key$14859 in Number.prototype);}else{var x$14891;(x$14891=$14861$14868);return (key$14859 in x$14891);}}}};var pr_terminus$13888;var pr$13889;var __lt____gt__$13890;var repr$13891;var escape_html$13892;var quotify$13893;var HTML$13894;(pr_terminus$13888=function(node$13898){var r$13901;var pre$13902;var post$13903;(r$13901=HTML$13894(node$13898,"span"));;(pre$13902=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));;(post$13903=("</div>"+String.fromCharCode(7)));;return console.log(((pre$13902+r$13901)+post$13903));});;(pr$13889=function($13916$13918,r$13919){var x$13940;var n$13935;var $13921$13927;var ph$13922;(ph$13922=$13916$13918);;($13921$13927=ph$13922);;if($13828($14481)($13921$13927)){(n$13935=$13921$13927);return pr_terminus$13888(n$13935);}else{(x$13940=$13921$13927);return pr_terminus$13888((r$13919||repr$13891)(x$13940));}});;(__lt____gt__$13890=function($13945$13947,x$13948){if(($13945$13947===null)){;}else{$14636($13945$13947);}return pr$13889(x$13948);});;(repr$13891=function(){var $index$14033;var $length$14028;var temp$14023;var acc$14018;var $index$14077;var $length$14072;var temp$14067;var acc$14062;var other$14104;var entries$14012;var $13960$13985;var t0$13983;var x$13973;var recur$13974;var $13959$13975;var t0$13967;var t1$13968;var t2$13969;var $13958$13962;($13958$13962=arguments);;(t0$13967=$13958$13962.length);if((((t0$13967>=1)&&(t0$13967<=2))&&((t1$13968=$13958$13962[0]),((x$13973=t1$13968),(($13959$13975=t1$13968),((t2$13969=function(){if((1>=t0$13967)){return repr$13891;}else{return $13958$13962[1];}}()),$13828(Function)(t2$13969))))))){(recur$13974=t2$13969);if(($13959$13975===true)){return $14481(["special","true"],"true");}else{if(($13959$13975===false)){return $14481(["special","false"],"false");}else{if(($13959$13975===null)){return $14481(["special","nil"],"null");}else{if(($13959$13975===(void 0))){return $14481(["special","nil"],"undefined");}else{if((typeof($13959$13975)==="number")){return $14481(["num"],String(x$13973));}else{if((typeof($13959$13975)==="string")){return $14481(["str"],x$13973);}else{(t0$13983=$13959$13975);if($13828(Array)(t0$13983)){(entries$14012=t0$13983);return $14481(["sequence"],(((acc$14018=[])),(((temp$14023=entries$14012)),((($length$14028=temp$14023.length)),((($index$14033=0)),function(){$14015:for(;($index$14033<$length$14028);($index$14033++)){var x$14049;var m$14041;(m$14041=temp$14023[$index$14033]);;(x$14049=m$14041);acc$14018.push(recur$13974(x$14049,repr$13891));}}()))),acc$14018));}else{$13959$13975;if(x$13973["::repr"]){return x$13973["::repr"](recur$13974);}else{if((Object.getPrototypeOf(x$13973)===Object.prototype)){return $14481(["+table","object"],(((acc$14062=[])),(((temp$14067=$14840(x$13973))),((($length$14072=temp$14067.length)),((($index$14077=0)),function(){$14059:for(;($index$14077<$length$14072);($index$14077++)){var k$14095;var v$14096;var t0$14090;var t1$14091;var m$14085;(m$14085=temp$14067[$index$14077]);;(t0$14090=m$14085);if(((t0$14090 instanceof Array)&&((t1$14091=t0$14090.length),(t1$14091===2)))){(k$14095=t0$14090[0]);(v$14096=t0$14090[1]);acc$14062.push($14481(["+tr"],[$14481(["+th"],recur$13974(k$14095,repr$13891)),$14481(["+td"],recur$13974(v$14096,repr$13891))]));}else{$14636(m$14085,"/home/olivier/git/earl-grey/src/pp.eg",959,1289);;}}}()))),acc$14062));}else{(other$14104=$13959$13975);return $14481(["unknown"],other$14104.toString());}}}}}}}}}}else{$14636($13958$13962);}});;(escape_html$13892=function($14111$14113){var t0$14117;var repl$14122;var s$14115;(t0$14117=[true,String($14111$14113)]);if(t0$14117[0]){(s$14115=t0$14117[1]);;}else{$14636($14111$14113);}(repl$14122=({"&":"&amp;","<":"&lt;",">":"&gt;"}));;return s$14115.replace(RegExp("[&<>]","g"),function(x$14127){return $13843(repl$14122,x$14127);});});;(quotify$13893=function($14132$14134){var t0$14138;var s$14136;(t0$14138=[true,String($14132$14134)]);if(t0$14138[0]){(s$14136=t0$14138[1]);;}else{$14636($14132$14134);}return s$14136.replace(RegExp("[\"\\\\]","g"),function(x$14143){return ("\\"+x$14143);});});;(HTML$13894=function($14148$14150,default_tag$14151){var $index$14194;var $length$14189;var temp$14184;var acc$14179;var $index$14259;var $length$14254;var temp$14249;var $index$14336;var $length$14331;var temp$14326;var acc$14321;var $index$14391;var $length$14386;var temp$14381;var acc$14376;var $index$14437;var $length$14432;var temp$14427;var acc$14422;var other$14417;var $14361$14363;var x$14471;var other$14468;var $14220$14456;var tag$14221;var _classes$14222;var id$14223;var kv$14224;var sub$14225;var accum$14226;var other$14477;var classes$14214;var children$14215;var children$14172;var s$14167;var $14153$14159;var ph$14154;(ph$14154=$14148$14150);;($14153$14159=ph$14154);;if((typeof($14153$14159)==="string")){(s$14167=$14153$14159);return escape_html$13892(s$14167);}else{if($13828(Array)($14153$14159)){(children$14172=$14153$14159);return (((acc$14179=[])),(((temp$14184=children$14172)),((($length$14189=temp$14184.length)),((($index$14194=0)),function(){$14176:for(;($index$14194<$length$14189);($index$14194++)){var child$14210;var m$14202;(m$14202=temp$14184[$index$14194]);;(child$14210=m$14202);acc$14179.push(HTML$13894(child$14210,default_tag$14151));}}()))),acc$14179).join("");}else{if(($13828($14481)($14153$14159)&&($14855($14153$14159,"classes")&&((classes$14214=$14153$14159.classes),$14855($14153$14159,"children"))))){(children$14215=$14153$14159.children);(tag$14221=(default_tag$14151||"span"));;(_classes$14222=[]);;(id$14223=null);;(kv$14224=[]);;(sub$14225=[]);;(temp$14249=classes$14214);;($length$14254=temp$14249.length);;($index$14259=0);;$14227:for(;($index$14259<$length$14254);($index$14259++)){var s$14307;var m$14300;var m$14293;var k$14288;var k$14281;var v$14282;var $14229$14276;var $14230$14277;var $14231$14278;var t0$14272;var t1$14273;var t2$14274;var m$14267;(m$14267=temp$14249[$index$14259]);;(t0$14272=m$14267);if((($14230$14277=(t0$14272 instanceof Array))&&((t1$14273=t0$14272.length),((t1$14273===3)&&(t0$14272[0]==="assoc"))))){(k$14281=t0$14272[1]);(v$14282=t0$14272[2]);kv$14224.push([k$14281,v$14282]);}else{if(($14230$14277&&((t1$14273===2)&&(t0$14272[0]==="assoc")))){(k$14288=t0$14272[1]);kv$14224.push([k$14288,(void 0)]);}else{(t0$14272=$14608(RegExp("(?:^\\+((?:.*)))",""))(m$14267));if((t0$14272[0]&&((t1$14273=t0$14272[1]),((t2$14274=t1$14273.length),(t2$14274===2))))){t1$14273[0];(m$14293=t1$14273[1]);(tag$14221=m$14293);}else{(t0$14272=$14608(RegExp("(?:^#((?:.*)))",""))(m$14267));if((t0$14272[0]&&((t1$14273=t0$14272[1]),((t2$14274=t1$14273.length),(t2$14274===2))))){t1$14273[0];(m$14300=t1$14273[1]);(id$14223=m$14300);}else{(t0$14272=m$14267);if((typeof(t0$14272)==="string")){(s$14307=t0$14272);_classes$14222.push(s$14307);}else{$14636(m$14267,"/home/olivier/git/earl-grey/src/pp.eg",1860,2181);;}}}}}}(accum$14226=function(){if((tag$14221==="raw")){return [];}else{return ["<",tag$14221];}}());;if(id$14223){(accum$14226=accum$14226.concat(" id=\"",id$14223,"\""));}if(_classes$14222.length){(accum$14226=accum$14226.concat(" class=\"",quotify$13893(_classes$14222.join(" ")),"\""));}if(kv$14224){(acc$14321=[]);;(temp$14326=kv$14224);;($length$14331=temp$14326.length);;($index$14336=0);;$14318:for(;($index$14336<$length$14331);($index$14336++)){var k$14354;var v$14355;var t0$14349;var t1$14350;var m$14344;(m$14344=temp$14326[$index$14336]);;(t0$14349=m$14344);if(((t0$14349 instanceof Array)&&((t1$14350=t0$14349.length),(t1$14350===2)))){(k$14354=t0$14349[0]);(v$14355=t0$14349[1]);acc$14321.push((accum$14226=accum$14226.concat(function(){if((v$14355!==null)){return [" ",k$14354,"=\"",quotify$13893(v$14355),"\""];}else{return [" ",k$14354];}}())));}else{$14636(m$14344,"/home/olivier/git/earl-grey/src/pp.eg",2435,2632);;}}acc$14321;}(children$14215=((($14361$14363=tag$14221)),function(){if(($14361$14363==="raw")){(acc$14376=[]);;(temp$14381=children$14215);;($length$14386=temp$14381.length);;($index$14391=0);;$14373:for(;($index$14391<$length$14386);($index$14391++)){var c$14413;var s$14408;var t0$14404;var m$14399;(m$14399=temp$14381[$index$14391]);;(t0$14404=m$14399);if((typeof(t0$14404)==="string")){(s$14408=t0$14404);acc$14376.push(s$14408);}else{(c$14413=m$14399);acc$14376.push(HTML$13894(c$14413,default_tag$14151));}}return acc$14376;}else{(other$14417=$14361$14363);(acc$14422=[]);;(temp$14427=children$14215);;($length$14432=temp$14427.length);;($index$14437=0);;$14419:for(;($index$14437<$length$14432);($index$14437++)){var c$14453;var m$14445;(m$14445=temp$14427[$index$14437]);;(c$14453=m$14445);acc$14422.push(HTML$13894(c$14453,default_tag$14151));}return acc$14422;}}()));($14220$14456=tag$14221);;if(($14220$14456==="raw")){return accum$14226.concat(children$14215).join("");}else{(other$14468=$14220$14456);(x$14471=[">"].concat(children$14215).concat(["</",tag$14221,">"]));;return accum$14226.concat(x$14471).join("");}}else{(other$14477=$14153$14159);return HTML$13894([true,String(other$14477)][1],default_tag$14151);}}}});;(exports["pr_terminus"]=pr_terminus$13888);(exports["pr"]=pr$13889);(exports["<>"]=__lt____gt__$13890);(exports["repr"]=repr$13891);
