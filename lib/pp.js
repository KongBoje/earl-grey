var τ67=function(type$11759){var f$11762;(f$11762=type$11759["::check"]);;if((f$11762===(void 0))){return function(value$11767){return (value$11767 instanceof type$11759);};}else{return function(value$11770){return f$11762.call(type$11759,value$11770);};}};
var τ68=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var τ69=function(temp$11772$11774){var ph$11778;(ph$11778=temp$11772$11774);;var m$11776$11783;(m$11776$11783=ph$11778);;var bridge$11777$11788;var x$11792;(bridge$11777$11788=m$11776$11783);if((((typeof(bridge$11777$11788)==="string")&&((x$11792=bridge$11777$11788),true))||((typeof(bridge$11777$11788)==="number")&&((x$11792=bridge$11777$11788),true)))){return ["value",x$11792];}else{var other$11799;(other$11799=m$11776$11783);return other$11799["::serialize_ast"]();}};
var send$11621;(send$11621=function(obj$11626,temp$11624$11627){var ph$11631;var msg$11632;var t0$11634;(t0$11634=temp$11624$11627);(msg$11632=t0$11634);(ph$11631=t0$11634);;var m$11629$11638;(m$11629$11638=ph$11631);;var bridge$11630$11643;(bridge$11630$11643=m$11629$11638);if(((typeof(bridge$11630$11643)==="string")||(typeof(bridge$11630$11643)==="number"))){return obj$11626[msg$11632];}else{var other$11651;(other$11651=m$11629$11638);return obj$11626["::send"](msg$11632);}});;(Array[":::project"]=function(temp$11654$11656){var ph$11659;var value$11660;var t0$11662;(t0$11662=temp$11654$11656);(value$11660=t0$11662);(ph$11659=t0$11662);;var m$11658$11666;(m$11658$11666=ph$11659);;if(τ67(Array)(m$11658$11666)){return [true,value$11660];}else{m$11658$11666;return [true,[value$11660]];}});(Array.prototype["::check"]=function(value$11680){if((value$11680 instanceof Array)){var i$11685;(i$11685=0);;$11683:for(;(i$11685<this.length);(i$11685++)){if((τ68(this,i$11685)!==τ68(value$11680,i$11685))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$11694){if((value$11694 instanceof Array)){var i$11699;(i$11699=0);;$11697:for(;(i$11699<this.length);(i$11699++)){if((τ68(this,i$11699)!==τ68(value$11694,i$11699))){return [true,[value$11694]];}}return [true,value$11694.slice(this.length)];}else{return [true,[value$11694]];}});(Array.prototype[":::deconstruct"]=function(value$11708){return [true,value$11708.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map(τ69));});(RegExp.prototype["::check"]=function(value$11713){return value$11713.match(this);});(RegExp.prototype[":::project"]=function(value$11716){var m$11718$11720;(m$11718$11720=value$11716.match(this));;var m$11728;if((m$11718$11720===null)){(m$11728=m$11718$11720);return [false,null];}else{var m$11733;(m$11733=m$11718$11720);return [true,m$11733];}});(RegExp.prototype[":::deconstruct"]=function(value$11736){var m$11738$11740;(m$11738$11740=value$11736.match(this));;var m$11748;if((m$11738$11740===null)){(m$11748=m$11738$11740);return [false,null];}else{var m$11753;(m$11753=m$11738$11740);return [true,m$11753];}});(Function.prototype["::send"]=function(args$11756){return this.apply(this,args$11756);});
var τ70=function(type$12498){return function(value$12501){var f$12504;(f$12504=type$12498[":::project"]);;if((f$12504===(void 0))){var f$12509;(f$12509=type$12498["::project"]);;if((f$12509===(void 0))){return [true,type$12498(value$12501)];}else{var rval$12514;(rval$12514=false);;try{(rval$12514=[true,f$12509(value$12501)]);}catch(excv$12520){var e$12526;(e$12526=excv$12520);(rval$12514=[false,null]);}return rval$12514;}}else{return f$12504.call(type$12498,value$12501);}};};
var τ71=function(dest$12529,values$12530){var k$12535;(k$12535=null);$12533:for(k$12535 in values$12530){if(values$12530.hasOwnProperty(k$12535)){(dest$12529[k$12535]=values$12530[k$12535]);}}return dest$12529;};
var τ72=function(){var $12539$12541;($12539$12541=function(temp$12544$12547,temp$12545$12548){var classes$12550;var children$12551;var t0$12553;(t0$12553=τ70(Array)(temp$12544$12547));if(t0$12553[0]){(classes$12550=t0$12553[1]);;}else{throw Error("Mismatch");}var t0$12558;(t0$12558=τ70(Array)(temp$12545$12548));if(t0$12558[0]){(children$12551=t0$12558[1]);;}else{throw Error("Mismatch");}var it$0$12563;(it$0$12563=function(){if((!τ67($12539$12541)(this))){return Object.create($12539$12541.prototype);}else{return this;}}());;(it$0$12563["classes"]=classes$12550.sort());(it$0$12563["children"]=children$12551);return it$0$12563;});;τ71(function(){var accum$12571;(accum$12571=({}));(accum$12571["::check"]=function(x$12575){return ((x$12575&&x$12575.classes)&&x$12575.children);});return accum$12571;}(),function(){var accum$12578;(accum$12578=({}));(accum$12578["::deconstruct"]=function(x$12582){return [x$12582.classes,x$12582.children];});return accum$12578;}());($12539$12541.prototype["::check"]=function(n$12587){var it$0$12590;(it$0$12590=this);;var temp$12598;(temp$12598=it$0$12590.classes);;var len$12603;(len$12603=temp$12598.length);;var i$12608;(i$12608=0);;$12595:for(;(i$12608<len$12603);(i$12608++)){var m$12616;(m$12616=temp$12598[i$12608]);;var c$12624;(c$12624=m$12616);if((n$12587.classes.indexOf(c$12624)===(-1))){return false;}else{false;;}}return true;});τ71($12539$12541,τ71(function(){var accum$12630;(accum$12630=({}));(accum$12630["::check"]=function(x$12634){return ((x$12634&&x$12634.classes)&&x$12634.children);});return accum$12630;}(),function(){var accum$12637;(accum$12637=({}));(accum$12637["::deconstruct"]=function(x$12641){return [x$12641.classes,x$12641.children];});return accum$12637;}()));return $12539$12541;}();
var τ73=function(temp$12643$12645,key$12646){var ph$12650;(ph$12650=temp$12643$12645);;var m$12648$12655;(m$12648$12655=ph$12650);;var bridge$12649$12660;(bridge$12649$12660=m$12648$12655);if(((bridge$12649$12660===null)||(bridge$12649$12660===(void 0)))){return false;}else{var x$12668;if((typeof(m$12648$12655)==="string")){(x$12668=m$12648$12655);return (key$12646 in String.prototype);}else{var x$12673;if((typeof(m$12648$12655)==="number")){(x$12673=m$12648$12655);return (key$12646 in Number.prototype);}else{var x$12678;(x$12678=m$12648$12655);return (key$12646 in x$12678);}}}};var accum$11849;var accum$11856;var accum$11908;var accum$11915;var $11803$11804;var items$11805;var Node$11806;var pr_terminus$11807;var pr$11808;var __lt____gt__$11809;var repr$11810;var escape_html$11811;var quotify$11812;var HTML$11813;($11803$11804=require("./util"));;(items$11805=$11803$11804.items);;(Node$11806=function(temp$11822$11825,temp$11823$11826){var t0$11831;var t0$11836;var it$0$11841;var classes$11828;var children$11829;(t0$11831=τ70(Array)(temp$11822$11825));if(t0$11831[0]){(classes$11828=t0$11831[1]);;}else{throw Error("Mismatch");}(t0$11836=τ70(Array)(temp$11823$11826));if(t0$11836[0]){(children$11829=t0$11836[1]);;}else{throw Error("Mismatch");}(it$0$11841=function(){if((!τ67(Node$11806)(this))){return Object.create(Node$11806.prototype);}else{return this;}}());;(it$0$11841["classes"]=classes$11828.sort());(it$0$11841["children"]=children$11829);return it$0$11841;});;τ71(((accum$11849=({})),((accum$11849["::check"]=function(x$11853){return ((x$11853&&x$11853.classes)&&x$11853.children);}),accum$11849)),((accum$11856=({})),((accum$11856["::deconstruct"]=function(x$11860){return [x$11860.classes,x$11860.children];}),accum$11856)));(Node$11806.prototype["::check"]=function(n$11865){var i$11886;var len$11881;var temp$11876;var it$0$11868;(it$0$11868=this);;(temp$11876=it$0$11868.classes);;(len$11881=temp$11876.length);;(i$11886=0);;$11873:for(;(i$11886<len$11881);(i$11886++)){var c$11902;var m$11894;(m$11894=temp$11876[i$11886]);;(c$11902=m$11894);if((n$11865.classes.indexOf(c$11902)===(-1))){return false;}else{false;;}}return true;});τ71(Node$11806,τ71(((accum$11908=({})),((accum$11908["::check"]=function(x$11912){return ((x$11912&&x$11912.classes)&&x$11912.children);}),accum$11908)),((accum$11915=({})),((accum$11915["::deconstruct"]=function(x$11919){return [x$11919.classes,x$11919.children];}),accum$11915))));Node$11806;(pr_terminus$11807=function(node$11924){var r$11927;var pre$11928;var post$11929;(r$11927=HTML$11813(node$11924,"span"));;(pre$11928=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));;(post$11929=("</div>"+String.fromCharCode(7)));;return console.log(((pre$11928+r$11927)+post$11929));});;(pr$11808=function(temp$11942$11944,r$11945){var x$11966;var n$11961;var m$11947$11953;var ph$11948;(ph$11948=temp$11942$11944);;(m$11947$11953=ph$11948);;if(τ67(Node$11806)(m$11947$11953)){(n$11961=m$11947$11953);return pr_terminus$11807(n$11961);}else{(x$11966=m$11947$11953);return pr_terminus$11807((r$11945||repr$11810)(x$11966));}});;(__lt____gt__$11809=function(temp$11971$11973,x$11974){if((temp$11971$11973===null)){;}else{throw Error("Mismatch");}return pr$11808(x$11974);});;(repr$11810=function(){var i$12058;var len$12053;var temp$12048;var acc$12043;var i$12101;var len$12096;var temp$12091;var acc$12086;var other$12128;var entries$12038;var $11986$12011;var t0$12009;var x$11999;var recur$12000;var ph$11985$12001;var t0$11993;var t1$11994;var t2$11995;var m$11984$11988;(m$11984$11988=arguments);;(t0$11993=m$11984$11988.length);if((((t0$11993>=1)&&(t0$11993<=2))&&((t1$11994=m$11984$11988[0]),((x$11999=t1$11994),((ph$11985$12001=t1$11994),((t2$11995=function(){if((1>=t0$11993)){return repr$11810;}else{return m$11984$11988[1];}}()),τ67(Function)(t2$11995))))))){(recur$12000=t2$11995);if((ph$11985$12001===true)){return τ72(["special","true"],"true");}else{if((ph$11985$12001===false)){return τ72(["special","false"],"false");}else{if((ph$11985$12001===null)){return τ72(["special","nil"],"null");}else{if((ph$11985$12001===(void 0))){return τ72(["special","nil"],"undefined");}else{if((typeof(ph$11985$12001)==="number")){return τ72(["num"],String(x$11999));}else{if((typeof(ph$11985$12001)==="string")){return τ72(["str"],x$11999);}else{(t0$12009=ph$11985$12001);if(τ67(Array)(t0$12009)){(entries$12038=t0$12009);return τ72(["sequence"],(((acc$12043=[])),(((temp$12048=entries$12038)),(((len$12053=temp$12048.length)),(((i$12058=0)),function(){$12041:for(;(i$12058<len$12053);(i$12058++)){var x$12074;var m$12066;(m$12066=temp$12048[i$12058]);;(x$12074=m$12066);acc$12043.push(recur$12000(x$12074,repr$11810));}}()))),acc$12043));}else{ph$11985$12001;if(x$11999["::repr"]){return x$11999["::repr"](recur$12000);}else{if((Object.getPrototypeOf(x$11999)===Object.prototype)){return τ72(["table"],(((acc$12086=[])),(((temp$12091=items$11805(x$11999))),(((len$12096=temp$12091.length)),(((i$12101=0)),function(){$12084:for(;(i$12101<len$12096);(i$12101++)){var k$12119;var v$12120;var t0$12114;var t1$12115;var m$12109;(m$12109=temp$12091[i$12101]);;(t0$12114=m$12109);if(((t0$12114 instanceof Array)&&((t1$12115=t0$12114.length),(t1$12115===2)))){(k$12119=t0$12114[0]);(v$12120=t0$12114[1]);acc$12086.push(τ72(["pairing"],[recur$12000(k$12119,repr$11810),recur$12000(v$12120,repr$11810)]));}else{false;;}}}()))),acc$12086));}else{(other$12128=ph$11985$12001);return τ72(["unknown"],other$12128.toString());}}}}}}}}}}else{throw Error("mismatch!!");}});;(escape_html$11811=function(temp$12135$12137){var t0$12141;var repl$12146;var s$12139;(t0$12141=[true,String(temp$12135$12137)]);if(t0$12141[0]){(s$12139=t0$12141[1]);;}else{throw Error("Mismatch");}(repl$12146=({"&":"&amp;","<":"&lt;",">":"&gt;"}));;return s$12139.replace(RegExp("[&<>]","g"),function(x$12151){return τ68(repl$12146,x$12151);});});;(quotify$11812=function(temp$12156$12158){var t0$12162;var s$12160;(t0$12162=[true,String(temp$12156$12158)]);if(t0$12162[0]){(s$12160=t0$12162[1]);;}else{throw Error("Mismatch");}return s$12160.replace(RegExp("[\"\\\\]","g"),function(x$12167){return ("\\"+x$12167);});});;(HTML$11813=function(temp$12172$12174,default_tag$12175){var i$12217;var len$12212;var temp$12207;var acc$12202;var i$12281;var len$12276;var temp$12271;var i$12354;var len$12349;var temp$12344;var acc$12339;var i$12408;var len$12403;var temp$12398;var acc$12393;var i$12453;var len$12448;var temp$12443;var acc$12438;var other$12434;var m$12379$12381;var x$12487;var other$12484;var m$12243$12472;var tag$12244;var _classes$12245;var id$12246;var kv$12247;var sub$12248;var accum$12249;var other$12493;var classes$12237;var children$12238;var children$12196;var s$12191;var m$12177$12183;var ph$12178;(ph$12178=temp$12172$12174);;(m$12177$12183=ph$12178);;if((typeof(m$12177$12183)==="string")){(s$12191=m$12177$12183);return escape_html$11811(s$12191);}else{if(τ67(Array)(m$12177$12183)){(children$12196=m$12177$12183);return (((acc$12202=[])),(((temp$12207=children$12196)),(((len$12212=temp$12207.length)),(((i$12217=0)),function(){$12200:for(;(i$12217<len$12212);(i$12217++)){var child$12233;var m$12225;(m$12225=temp$12207[i$12217]);;(child$12233=m$12225);acc$12202.push(HTML$11813(child$12233,default_tag$12175));}}()))),acc$12202).join("");}else{if((τ67(Node$11806)(m$12177$12183)&&(τ73(m$12177$12183,"classes")&&((classes$12237=m$12177$12183.classes),τ73(m$12177$12183,"children"))))){(children$12238=m$12177$12183.children);(tag$12244=(default_tag$12175||"span"));;(_classes$12245=[]);;(id$12246=null);;(kv$12247=[]);;(sub$12248=[]);;(temp$12271=classes$12237);;(len$12276=temp$12271.length);;(i$12281=0);;$12265:for(;(i$12281<len$12276);(i$12281++)){var s$12326;var m$12320;var m$12314;var k$12309;var k$12302;var v$12303;var $12266$12297;var $12267$12298;var $12268$12299;var t0$12294;var t1$12295;var m$12289;(m$12289=temp$12271[i$12281]);;(t0$12294=m$12289);if((($12267$12298=(t0$12294 instanceof Array))&&((t1$12295=t0$12294.length),((t1$12295===3)&&(t0$12294[0]==="assoc"))))){(k$12302=t0$12294[1]);(v$12303=t0$12294[2]);kv$12247.push([k$12302,v$12303]);}else{if(($12267$12298&&((t1$12295===2)&&(t0$12294[0]==="assoc")))){(k$12309=t0$12294[1]);kv$12247.push([k$12309,(void 0)]);}else{(t0$12294=m$12289);if((τ67(RegExp("(?:^\\+((?:.*)))",""))(t0$12294)&&((t1$12295=t0$12294.length),(t1$12295===2)))){t0$12294[0];(m$12314=t0$12294[1]);(tag$12244=m$12314);}else{(t0$12294=m$12289);if((τ67(RegExp("(?:^#((?:.*)))",""))(t0$12294)&&((t1$12295=t0$12294.length),(t1$12295===2)))){t0$12294[0];(m$12320=t0$12294[1]);(id$12246=m$12320);}else{(t0$12294=m$12289);if((typeof(t0$12294)==="string")){(s$12326=t0$12294);_classes$12245.push(s$12326);}else{false;;}}}}}}(accum$12249=function(){if((tag$12244==="raw")){return [];}else{return ["<",tag$12244];}}());;if(id$12246){(accum$12249=accum$12249.concat(" id=\"",id$12246,"\""));}if(_classes$12245.length){(accum$12249=accum$12249.concat(" class=\"",quotify$11812(_classes$12245.join(" ")),"\""));}if(kv$12247){(acc$12339=[]);;(temp$12344=kv$12247);;(len$12349=temp$12344.length);;(i$12354=0);;$12337:for(;(i$12354<len$12349);(i$12354++)){var k$12372;var v$12373;var t0$12367;var t1$12368;var m$12362;(m$12362=temp$12344[i$12354]);;(t0$12367=m$12362);if(((t0$12367 instanceof Array)&&((t1$12368=t0$12367.length),(t1$12368===2)))){(k$12372=t0$12367[0]);(v$12373=t0$12367[1]);acc$12339.push((accum$12249=accum$12249.concat(function(){if((v$12373!==null)){return [" ",k$12372,"=\"",quotify$11812(v$12373),"\""];}else{return [" ",k$12372];}}())));}else{false;;}}acc$12339;}(children$12238=(((m$12379$12381=tag$12244)),function(){if((m$12379$12381==="raw")){(acc$12393=[]);;(temp$12398=children$12238);;(len$12403=temp$12398.length);;(i$12408=0);;$12391:for(;(i$12408<len$12403);(i$12408++)){var c$12430;var s$12425;var t0$12421;var m$12416;(m$12416=temp$12398[i$12408]);;(t0$12421=m$12416);if((typeof(t0$12421)==="string")){(s$12425=t0$12421);acc$12393.push(s$12425);}else{(c$12430=m$12416);acc$12393.push(HTML$11813(c$12430,default_tag$12175));}}return acc$12393;}else{(other$12434=m$12379$12381);(acc$12438=[]);;(temp$12443=children$12238);;(len$12448=temp$12443.length);;(i$12453=0);;$12436:for(;(i$12453<len$12448);(i$12453++)){var c$12469;var m$12461;(m$12461=temp$12443[i$12453]);;(c$12469=m$12461);acc$12438.push(HTML$11813(c$12469,default_tag$12175));}return acc$12438;}}()));(m$12243$12472=tag$12244);;if((m$12243$12472==="raw")){return accum$12249.concat(children$12238).join("");}else{(other$12484=m$12243$12472);(x$12487=[">"].concat(children$12238).concat(["</",tag$12244,">"]));;return accum$12249.concat(x$12487).join("");}}else{(other$12493=m$12177$12183);return HTML$11813([true,String(other$12493)][1],default_tag$12175);}}}});;(exports["pr_terminus"]=pr_terminus$11807);(exports["pr"]=pr$11808);(exports["<>"]=__lt____gt__$11809);(exports["repr"]=repr$11810);(exports["Node"]=Node$11806);
