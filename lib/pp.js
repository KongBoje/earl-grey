var $13716=function(type$13718){var f$13721;(f$13721=type$13718["::check"]);;if((f$13721===(void 0))){return function(value$13726){return (value$13726 instanceof type$13718);};}else{return function(value$13729){return f$13721.call(type$13718,value$13729);};}};
var $13731=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $13732=function($13733$13735){var ph$13739;(ph$13739=$13733$13735);;var $13737$13744;($13737$13744=ph$13739);;var bridge$13738$13749;var x$13753;(bridge$13738$13749=$13737$13744);if((((typeof(bridge$13738$13749)==="string")&&((x$13753=bridge$13738$13749),true))||((typeof(bridge$13738$13749)==="number")&&((x$13753=bridge$13738$13749),true)))){return ["value",x$13753];}else{var other$13760;(other$13760=$13737$13744);return other$13760["::serialize_ast"]();}};
var send$13556;(send$13556=function(obj$13561,$13559$13562){var ph$13566;var msg$13567;var t0$13569;(t0$13569=$13559$13562);(msg$13567=t0$13569);(ph$13566=t0$13569);;var $13564$13573;($13564$13573=ph$13566);;var bridge$13565$13578;(bridge$13565$13578=$13564$13573);if(((typeof(bridge$13565$13578)==="string")||(typeof(bridge$13565$13578)==="number"))){return obj$13561[msg$13567];}else{var other$13586;(other$13586=$13564$13573);return obj$13561["::send"](msg$13567);}});;(Array[":::project"]=function($13589$13591){var ph$13594;var value$13595;var t0$13597;(t0$13597=$13589$13591);(value$13595=t0$13597);(ph$13594=t0$13597);;var $13593$13601;($13593$13601=ph$13594);;if($13716(Array)($13593$13601)){return [true,value$13595];}else{$13593$13601;return [true,[value$13595]];}});(Array.prototype["::check"]=function(value$13615){if((value$13615 instanceof Array)){var i$13620;(i$13620=0);;$13618:for(;(i$13620<this.length);(i$13620++)){if(($13731(this,i$13620)!==$13731(value$13615,i$13620))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return this.slice(0);});(Array.prototype[":::project"]=function(value$13631){if((value$13631 instanceof Array)){var i$13636;(i$13636=0);;$13634:for(;(i$13636<this.length);(i$13636++)){if(($13731(this,i$13636)!==$13731(value$13631,i$13636))){return [true,[value$13631]];}}return [true,value$13631.slice(this.length)];}else{return [true,[value$13631]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($13732));});(RegExp.prototype["::check"]=function($13646$13648){var ph$13651;(ph$13651=$13646$13648);;var $13650$13656;($13650$13656=ph$13651);;var value$13664;if((typeof($13650$13656)==="string")){(value$13664=$13650$13656);if(value$13664.match(this)){return true;}else{return false;}}else{var other$13669;(other$13669=$13650$13656);return false;}});(RegExp.prototype[":::project"]=function($13671$13673){var ph$13676;(ph$13676=$13671$13673);;var $13675$13681;($13675$13681=ph$13676);;var value$13689;if((typeof($13675$13681)==="string")){(value$13689=$13675$13681);var $13692$13694;($13692$13694=value$13689.match(this));;var m$13702;if(($13692$13694===null)){(m$13702=$13692$13694);return [false,null];}else{var m$13707;(m$13707=$13692$13694);return [true,m$13707];}}else{var other$13711;(other$13711=$13675$13681);return [false,null];}});(Function.prototype["::send"]=function(args$13714){return this.apply(this,args$13714);});
var $14492=function(type$14494){return function(value$14497){var f$14500;(f$14500=type$14494[":::project"]);;if((f$14500===(void 0))){var f$14505;(f$14505=type$14494["::project"]);;if((f$14505===(void 0))){return [true,type$14494(value$14497)];}else{var rval$14510;(rval$14510=false);;try{(rval$14510=[true,f$14505(value$14497)]);}catch(excv$14516){var e$14522;(e$14522=excv$14516);(rval$14510=[false,null]);}return rval$14510;}}else{return f$14500.call(type$14494,value$14497);}};};
var $14706=function(arr$14708){var results$14712;var l$14713;(results$14712=[]);;(l$14713=arr$14708.length);;var i$14721;(i$14721=0);;$14711:for(;(i$14721<l$14713);(i$14721++)){results$14712.push([i$14721,$13731(arr$14708,i$14721)]);}return results$14712;};
var $14728=function(dest$14730,values$14731){var k$14736;(k$14736=null);$14734:for(k$14736 in values$14731){if(values$14731.hasOwnProperty(k$14736)){(dest$14730[k$14736]=values$14731[k$14736]);}}return dest$14730;};
var $14537=function(){var $14538$14540;($14538$14540=function(tags$14544){var it$0$14547;(it$0$14547=function(){if((!$13716($14538$14540)(this))){return Object.create($14538$14540.prototype);}else{return this;}}());;(it$0$14547["tags"]=tags$14544);return it$0$14547;});;($14538$14540.prototype["create"]=function(){var $14556$14558;($14556$14558=arguments);;var t0$14563;var message$14567;var args$14568;(t0$14563=$14556$14558.length);if((t0$14563>=0)){(message$14567=function(){if((0>=t0$14563)){return "";}else{return $14556$14558[0];}}());(args$14568=Array.prototype.slice.call($14556$14558,1));var it$0$14572;(it$0$14572=this);;var self$14577;(self$14577=this);;var e$14582;(e$14582=Error(message$14567));;(e$14582["::tags"]=it$0$14572.tags);(e$14582["args"]=args$14568);var temp$14590;(temp$14590=$14706(args$14568));;var $length$14595;($length$14595=temp$14590.length);;var $index$14600;($index$14600=0);;$14583:for(;($index$14600<$length$14595);($index$14600++)){var m$14608;(m$14608=temp$14590[$index$14600]);;var t0$14613;var t1$14614;var i$14618;var arg$14619;(t0$14613=m$14608);if(((t0$14613 instanceof Array)&&((t1$14614=t0$14613.length),(t1$14614===2)))){(i$14618=t0$14613[0]);(arg$14619=t0$14613[1]);(e$14582[i$14618]=arg$14619);}else{$14524(m$14608);;}}(e$14582["length"]=args$14568.length);(e$14582["name"]=["E"].concat(it$0$14572.tags).join("."));return e$14582;}else{$14524($14556$14558);}});($14538$14540.prototype["::check"]=function(e$14630){var it$0$14633;(it$0$14633=this);;var self$14638;(self$14638=this);;var tags$14643;if(((!e$14630)||(!$13716(Error)(e$14630)))){return false;}(tags$14643=(e$14630["::tags"]||[]));;var temp$14652;(temp$14652=it$0$14633.tags);;var $length$14657;($length$14657=temp$14652.length);;var $index$14662;($index$14662=0);;$14644:for(;($index$14662<$length$14657);($index$14662++)){var m$14670;(m$14670=temp$14652[$index$14662]);;var tag$14678;(tag$14678=m$14670);if((tags$14643.indexOf(tag$14678)===-1)){return false;}else{false;;}}return true;});($14538$14540.prototype["::deconstruct"]=function(e$14686){var it$0$14689;(it$0$14689=this);;var self$14694;(self$14694=this);;return e$14686.args;});$14728($14538$14540,$14728(function(){var accum$14699;(accum$14699=({}));(accum$14699["::name"]="$14538");return accum$14699;}(),function(){var accum$14703;(accum$14703=({}));(accum$14703["::egclass"]=true);return accum$14703;}()));return $14538$14540;}();
var $14524=function(value$14526,url$14527,start$14528,end$14529){var err$14532;(err$14532=$14537(["match"]).create("Could not find a match for value",({"value":value$14526})));;if(url$14527){(err$14532["location"]=["location",url$14527,start$14528,end$14529]);}throw err$14532;};
var $14365=function(){var $14366$14368;($14366$14368=function($14371$14374,$14372$14375){var classes$14377;var children$14378;var t0$14380;(t0$14380=$14492(Array)($14371$14374));if(t0$14380[0]){(classes$14377=t0$14380[1]);;}else{$14524($14371$14374);}var t0$14385;(t0$14385=$14492(Array)($14372$14375));if(t0$14385[0]){(children$14378=t0$14385[1]);;}else{$14524($14372$14375);}var it$0$14390;(it$0$14390=function(){if((!$13716($14366$14368)(this))){return Object.create($14366$14368.prototype);}else{return this;}}());;(it$0$14390["classes"]=classes$14377.sort());(it$0$14390["children"]=children$14378);return it$0$14390;});;$14728(function(){var accum$14398;(accum$14398=({}));(accum$14398["::check"]=function(x$14402){return ((x$14402&&x$14402.classes)&&x$14402.children);});return accum$14398;}(),$14728(function(){var accum$14405;(accum$14405=({}));(accum$14405["::deconstruct"]=function(x$14409){return [x$14409.classes,x$14409.children];});return accum$14405;}(),$14728(function(){var accum$14412;(accum$14412=({}));(accum$14412["::name"]="$14366");return accum$14412;}(),function(){var accum$14416;(accum$14416=({}));(accum$14416["::egclass"]=true);return accum$14416;}())));($14366$14368.prototype["::check"]=function(n$14422){var it$0$14425;(it$0$14425=this);;var self$14430;(self$14430=this);;var temp$14439;(temp$14439=it$0$14425.classes);;var $length$14444;($length$14444=temp$14439.length);;var $index$14449;($index$14449=0);;$14435:for(;($index$14449<$length$14444);($index$14449++)){var m$14457;(m$14457=temp$14439[$index$14449]);;var c$14465;(c$14465=m$14457);if((n$14422.classes.indexOf(c$14465)===-1)){return false;}else{false;;}}return true;});$14728($14366$14368,$14728(function(){var accum$14471;(accum$14471=({}));(accum$14471["::check"]=function(x$14475){return ((x$14475&&x$14475.classes)&&x$14475.children);});return accum$14471;}(),$14728(function(){var accum$14478;(accum$14478=({}));(accum$14478["::deconstruct"]=function(x$14482){return [x$14482.classes,x$14482.children];});return accum$14478;}(),$14728(function(){var accum$14485;(accum$14485=({}));(accum$14485["::name"]="$14366");return accum$14485;}(),function(){var accum$14489;(accum$14489=({}));(accum$14489["::egclass"]=true);return accum$14489;}()))));return $14366$14368;}();
var $14740=function($14741$14743,key$14744){var ph$14748;(ph$14748=$14741$14743);;var $14746$14753;($14746$14753=ph$14748);;var bridge$14747$14758;(bridge$14747$14758=$14746$14753);if(((bridge$14747$14758===null)||(bridge$14747$14758===(void 0)))){return false;}else{var x$14766;if((typeof($14746$14753)==="string")){(x$14766=$14746$14753);return (key$14744 in String.prototype);}else{var x$14771;if((typeof($14746$14753)==="number")){(x$14771=$14746$14753);return (key$14744 in Number.prototype);}else{var x$14776;(x$14776=$14746$14753);return (key$14744 in x$14776);}}}};var $13763$13764;var items$13765;var pr_terminus$13766;var pr$13767;var __lt____gt__$13768;var repr$13769;var escape_html$13770;var quotify$13771;var HTML$13772;($13763$13764=require("./util"));;(items$13765=$13763$13764.items);;(pr_terminus$13766=function(node$13782){var r$13785;var pre$13786;var post$13787;(r$13785=HTML$13772(node$13782,"span"));;(pre$13786=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));;(post$13787=("</div>"+String.fromCharCode(7)));;return console.log(((pre$13786+r$13785)+post$13787));});;(pr$13767=function($13800$13802,r$13803){var x$13824;var n$13819;var $13805$13811;var ph$13806;(ph$13806=$13800$13802);;($13805$13811=ph$13806);;if($13716($14365)($13805$13811)){(n$13819=$13805$13811);return pr_terminus$13766(n$13819);}else{(x$13824=$13805$13811);return pr_terminus$13766((r$13803||repr$13769)(x$13824));}});;(__lt____gt__$13768=function($13829$13831,x$13832){if(($13829$13831===null)){;}else{$14524($13829$13831);}return pr$13767(x$13832);});;(repr$13769=function(){var $index$13917;var $length$13912;var temp$13907;var acc$13902;var $index$13961;var $length$13956;var temp$13951;var acc$13946;var other$13988;var entries$13896;var $13844$13869;var t0$13867;var x$13857;var recur$13858;var $13843$13859;var t0$13851;var t1$13852;var t2$13853;var $13842$13846;($13842$13846=arguments);;(t0$13851=$13842$13846.length);if((((t0$13851>=1)&&(t0$13851<=2))&&((t1$13852=$13842$13846[0]),((x$13857=t1$13852),(($13843$13859=t1$13852),((t2$13853=function(){if((1>=t0$13851)){return repr$13769;}else{return $13842$13846[1];}}()),$13716(Function)(t2$13853))))))){(recur$13858=t2$13853);if(($13843$13859===true)){return $14365(["special","true"],"true");}else{if(($13843$13859===false)){return $14365(["special","false"],"false");}else{if(($13843$13859===null)){return $14365(["special","nil"],"null");}else{if(($13843$13859===(void 0))){return $14365(["special","nil"],"undefined");}else{if((typeof($13843$13859)==="number")){return $14365(["num"],String(x$13857));}else{if((typeof($13843$13859)==="string")){return $14365(["str"],x$13857);}else{(t0$13867=$13843$13859);if($13716(Array)(t0$13867)){(entries$13896=t0$13867);return $14365(["sequence"],(((acc$13902=[])),(((temp$13907=entries$13896)),((($length$13912=temp$13907.length)),((($index$13917=0)),function(){$13899:for(;($index$13917<$length$13912);($index$13917++)){var x$13933;var m$13925;(m$13925=temp$13907[$index$13917]);;(x$13933=m$13925);acc$13902.push(recur$13858(x$13933,repr$13769));}}()))),acc$13902));}else{$13843$13859;if(x$13857["::repr"]){return x$13857["::repr"](recur$13858);}else{if((Object.getPrototypeOf(x$13857)===Object.prototype)){return $14365(["+table","object"],(((acc$13946=[])),(((temp$13951=items$13765(x$13857))),((($length$13956=temp$13951.length)),((($index$13961=0)),function(){$13943:for(;($index$13961<$length$13956);($index$13961++)){var k$13979;var v$13980;var t0$13974;var t1$13975;var m$13969;(m$13969=temp$13951[$index$13961]);;(t0$13974=m$13969);if(((t0$13974 instanceof Array)&&((t1$13975=t0$13974.length),(t1$13975===2)))){(k$13979=t0$13974[0]);(v$13980=t0$13974[1]);acc$13946.push($14365(["+tr"],[$14365(["+th"],recur$13858(k$13979,repr$13769)),$14365(["+td"],recur$13858(v$13980,repr$13769))]));}else{$14524(m$13969,"/home/olivier/git/earl-grey/src/pp.eg",950,1280);;}}}()))),acc$13946));}else{(other$13988=$13843$13859);return $14365(["unknown"],other$13988.toString());}}}}}}}}}}else{$14524($13842$13846);}});;(escape_html$13770=function($13995$13997){var t0$14001;var repl$14006;var s$13999;(t0$14001=[true,String($13995$13997)]);if(t0$14001[0]){(s$13999=t0$14001[1]);;}else{$14524($13995$13997);}(repl$14006=({"&":"&amp;","<":"&lt;",">":"&gt;"}));;return s$13999.replace(RegExp("[&<>]","g"),function(x$14011){return $13731(repl$14006,x$14011);});});;(quotify$13771=function($14016$14018){var t0$14022;var s$14020;(t0$14022=[true,String($14016$14018)]);if(t0$14022[0]){(s$14020=t0$14022[1]);;}else{$14524($14016$14018);}return s$14020.replace(RegExp("[\"\\\\]","g"),function(x$14027){return ("\\"+x$14027);});});;(HTML$13772=function($14032$14034,default_tag$14035){var $index$14078;var $length$14073;var temp$14068;var acc$14063;var $index$14143;var $length$14138;var temp$14133;var $index$14220;var $length$14215;var temp$14210;var acc$14205;var $index$14275;var $length$14270;var temp$14265;var acc$14260;var $index$14321;var $length$14316;var temp$14311;var acc$14306;var other$14301;var $14245$14247;var x$14355;var other$14352;var $14104$14340;var tag$14105;var _classes$14106;var id$14107;var kv$14108;var sub$14109;var accum$14110;var other$14361;var classes$14098;var children$14099;var children$14056;var s$14051;var $14037$14043;var ph$14038;(ph$14038=$14032$14034);;($14037$14043=ph$14038);;if((typeof($14037$14043)==="string")){(s$14051=$14037$14043);return escape_html$13770(s$14051);}else{if($13716(Array)($14037$14043)){(children$14056=$14037$14043);return (((acc$14063=[])),(((temp$14068=children$14056)),((($length$14073=temp$14068.length)),((($index$14078=0)),function(){$14060:for(;($index$14078<$length$14073);($index$14078++)){var child$14094;var m$14086;(m$14086=temp$14068[$index$14078]);;(child$14094=m$14086);acc$14063.push(HTML$13772(child$14094,default_tag$14035));}}()))),acc$14063).join("");}else{if(($13716($14365)($14037$14043)&&($14740($14037$14043,"classes")&&((classes$14098=$14037$14043.classes),$14740($14037$14043,"children"))))){(children$14099=$14037$14043.children);(tag$14105=(default_tag$14035||"span"));;(_classes$14106=[]);;(id$14107=null);;(kv$14108=[]);;(sub$14109=[]);;(temp$14133=classes$14098);;($length$14138=temp$14133.length);;($index$14143=0);;$14111:for(;($index$14143<$length$14138);($index$14143++)){var s$14191;var m$14184;var m$14177;var k$14172;var k$14165;var v$14166;var $14113$14160;var $14114$14161;var $14115$14162;var t0$14156;var t1$14157;var t2$14158;var m$14151;(m$14151=temp$14133[$index$14143]);;(t0$14156=m$14151);if((($14114$14161=(t0$14156 instanceof Array))&&((t1$14157=t0$14156.length),((t1$14157===3)&&(t0$14156[0]==="assoc"))))){(k$14165=t0$14156[1]);(v$14166=t0$14156[2]);kv$14108.push([k$14165,v$14166]);}else{if(($14114$14161&&((t1$14157===2)&&(t0$14156[0]==="assoc")))){(k$14172=t0$14156[1]);kv$14108.push([k$14172,(void 0)]);}else{(t0$14156=$14492(RegExp("(?:^\\+((?:.*)))",""))(m$14151));if((t0$14156[0]&&((t1$14157=t0$14156[1]),((t2$14158=t1$14157.length),(t2$14158===2))))){t1$14157[0];(m$14177=t1$14157[1]);(tag$14105=m$14177);}else{(t0$14156=$14492(RegExp("(?:^#((?:.*)))",""))(m$14151));if((t0$14156[0]&&((t1$14157=t0$14156[1]),((t2$14158=t1$14157.length),(t2$14158===2))))){t1$14157[0];(m$14184=t1$14157[1]);(id$14107=m$14184);}else{(t0$14156=m$14151);if((typeof(t0$14156)==="string")){(s$14191=t0$14156);_classes$14106.push(s$14191);}else{$14524(m$14151,"/home/olivier/git/earl-grey/src/pp.eg",1851,2172);;}}}}}}(accum$14110=function(){if((tag$14105==="raw")){return [];}else{return ["<",tag$14105];}}());;if(id$14107){(accum$14110=accum$14110.concat(" id=\"",id$14107,"\""));}if(_classes$14106.length){(accum$14110=accum$14110.concat(" class=\"",quotify$13771(_classes$14106.join(" ")),"\""));}if(kv$14108){(acc$14205=[]);;(temp$14210=kv$14108);;($length$14215=temp$14210.length);;($index$14220=0);;$14202:for(;($index$14220<$length$14215);($index$14220++)){var k$14238;var v$14239;var t0$14233;var t1$14234;var m$14228;(m$14228=temp$14210[$index$14220]);;(t0$14233=m$14228);if(((t0$14233 instanceof Array)&&((t1$14234=t0$14233.length),(t1$14234===2)))){(k$14238=t0$14233[0]);(v$14239=t0$14233[1]);acc$14205.push((accum$14110=accum$14110.concat(function(){if((v$14239!==null)){return [" ",k$14238,"=\"",quotify$13771(v$14239),"\""];}else{return [" ",k$14238];}}())));}else{$14524(m$14228,"/home/olivier/git/earl-grey/src/pp.eg",2426,2623);;}}acc$14205;}(children$14099=((($14245$14247=tag$14105)),function(){if(($14245$14247==="raw")){(acc$14260=[]);;(temp$14265=children$14099);;($length$14270=temp$14265.length);;($index$14275=0);;$14257:for(;($index$14275<$length$14270);($index$14275++)){var c$14297;var s$14292;var t0$14288;var m$14283;(m$14283=temp$14265[$index$14275]);;(t0$14288=m$14283);if((typeof(t0$14288)==="string")){(s$14292=t0$14288);acc$14260.push(s$14292);}else{(c$14297=m$14283);acc$14260.push(HTML$13772(c$14297,default_tag$14035));}}return acc$14260;}else{(other$14301=$14245$14247);(acc$14306=[]);;(temp$14311=children$14099);;($length$14316=temp$14311.length);;($index$14321=0);;$14303:for(;($index$14321<$length$14316);($index$14321++)){var c$14337;var m$14329;(m$14329=temp$14311[$index$14321]);;(c$14337=m$14329);acc$14306.push(HTML$13772(c$14337,default_tag$14035));}return acc$14306;}}()));($14104$14340=tag$14105);;if(($14104$14340==="raw")){return accum$14110.concat(children$14099).join("");}else{(other$14352=$14104$14340);(x$14355=[">"].concat(children$14099).concat(["</",tag$14105,">"]));;return accum$14110.concat(x$14355).join("");}}else{(other$14361=$14037$14043);return HTML$13772([true,String(other$14361)][1],default_tag$14035);}}}});;(exports["pr_terminus"]=pr_terminus$13766);(exports["pr"]=pr$13767);(exports["<>"]=__lt____gt__$13768);(exports["repr"]=repr$13769);
