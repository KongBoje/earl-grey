var $10946=function(type$10948){var f$10951;(f$10951=type$10948["::check"]);;if((f$10951===(void 0))){return function(value$10956){return (value$10956 instanceof type$10948);};}else{return function(value$10959){return f$10951.call(type$10948,value$10959);};}};
var $10961=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $10962=function($10963$10965){var ph$10969;(ph$10969=$10963$10965);;var $10967$10974;($10967$10974=ph$10969);;var bridge$10968$10979;var x$10983;(bridge$10968$10979=$10967$10974);if((((typeof(bridge$10968$10979)==="string")&&((x$10983=bridge$10968$10979),true))||((typeof(bridge$10968$10979)==="number")&&((x$10983=bridge$10968$10979),true)))){return ["value",x$10983];}else{var other$10990;(other$10990=$10967$10974);return other$10990["::serialize_ast"]();}};
var send$10809;(send$10809=function(obj$10814,$10812$10815){var ph$10819;var msg$10820;var t0$10822;(t0$10822=$10812$10815);(msg$10820=t0$10822);(ph$10819=t0$10822);;var $10817$10826;($10817$10826=ph$10819);;var bridge$10818$10831;(bridge$10818$10831=$10817$10826);if(((typeof(bridge$10818$10831)==="string")||(typeof(bridge$10818$10831)==="number"))){return obj$10814[msg$10820];}else{var other$10839;(other$10839=$10817$10826);return obj$10814["::send"](msg$10820);}});;(Array[":::project"]=function($10842$10844){var ph$10847;var value$10848;var t0$10850;(t0$10850=$10842$10844);(value$10848=t0$10850);(ph$10847=t0$10850);;var $10846$10854;($10846$10854=ph$10847);;if($10946(Array)($10846$10854)){return [true,value$10848];}else{$10846$10854;return [true,[value$10848]];}});(Array.prototype["::check"]=function(value$10868){if((value$10868 instanceof Array)){var i$10873;(i$10873=0);;$10871:for(;(i$10873<this.length);(i$10873++)){if(($10961(this,i$10873)!==$10961(value$10868,i$10873))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$10882){if((value$10882 instanceof Array)){var i$10887;(i$10887=0);;$10885:for(;(i$10887<this.length);(i$10887++)){if(($10961(this,i$10887)!==$10961(value$10882,i$10887))){return [true,[value$10882]];}}return [true,value$10882.slice(this.length)];}else{return [true,[value$10882]];}});(Array.prototype[":::deconstruct"]=function(value$10896){return [true,value$10896.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($10962));});(RegExp.prototype["::check"]=function(value$10901){return value$10901.match(this);});(RegExp.prototype[":::project"]=function(value$10904){var $10906$10908;($10906$10908=value$10904.match(this));;var m$10916;if(($10906$10908===null)){(m$10916=$10906$10908);return [false,null];}else{var m$10921;(m$10921=$10906$10908);return [true,m$10921];}});(RegExp.prototype[":::deconstruct"]=function(value$10924){var $10926$10928;($10926$10928=value$10924.match(this));;var m$10936;if(($10926$10928===null)){(m$10936=$10926$10928);return [false,null];}else{var m$10941;(m$10941=$10926$10928);return [true,m$10941];}});(Function.prototype["::send"]=function(args$10944){return this.apply(this,args$10944);});
var $11690=function(type$11692){return function(value$11695){var f$11698;(f$11698=type$11692[":::project"]);;if((f$11698===(void 0))){var f$11703;(f$11703=type$11692["::project"]);;if((f$11703===(void 0))){return [true,type$11692(value$11695)];}else{var rval$11708;(rval$11708=false);;try{(rval$11708=[true,f$11703(value$11695)]);}catch(excv$11714){var e$11720;(e$11720=excv$11714);(rval$11708=[false,null]);}return rval$11708;}}else{return f$11698.call(type$11692,value$11695);}};};
var $11841=function(dest$11843,values$11844){var k$11849;(k$11849=null);$11847:for(k$11849 in values$11844){if(values$11844.hasOwnProperty(k$11849)){(dest$11843[k$11849]=values$11844[k$11849]);}}return dest$11843;};
var $11735=function(){var $11736$11738;($11736$11738=function(tags$11742){var it$0$11745;(it$0$11745=function(){if((!$10946($11736$11738)(this))){return Object.create($11736$11738.prototype);}else{return this;}}());;(it$0$11745["tags"]=tags$11742);return it$0$11745;});;($11736$11738.prototype["create"]=function(){var $11754$11756;($11754$11756=arguments);;var t0$11761;var message$11765;var args$11766;(t0$11761=$11754$11756.length);if((t0$11761>=0)){(message$11765=function(){if((0>=t0$11761)){return "";}else{return $11754$11756[0];}}());(args$11766=Array.prototype.slice.call($11754$11756,1));var it$0$11770;(it$0$11770=this);;var e$11775;(e$11775=Error(message$11765));;(e$11775["::tags"]=it$0$11770.tags);(e$11775["args"]=args$11766);(e$11775["name"]=["E"].concat(it$0$11770.tags).join("."));return e$11775;}else{$11722($11754$11756);}});($11736$11738.prototype["::check"]=function(e$11784){var it$0$11787;(it$0$11787=this);;var tags$11792;if(((!e$11784)||(!$10946(Error)(e$11784)))){return false;}(tags$11792=(e$11784["::tags"]||[]));;var temp$11800;(temp$11800=it$0$11787.tags);;var len$11805;(len$11805=temp$11800.length);;var i$11810;(i$11810=0);;$11793:for(;(i$11810<len$11805);(i$11810++)){var m$11818;(m$11818=temp$11800[i$11810]);;var tag$11826;(tag$11826=m$11818);if((tags$11792.indexOf(tag$11826)===(-1))){return false;}else{false;;}}return true;});($11736$11738.prototype["::deconstruct"]=function(e$11834){var it$0$11837;(it$0$11837=this);;return e$11834.args;});$11841($11736$11738,({}));return $11736$11738;}();
var $11722=function(value$11724,url$11725,start$11726,end$11727){var err$11730;(err$11730=$11735(["match"]).create("Could not find a match for value",({"value":value$11724})));;if(url$11725){(err$11730["location"]=["location",url$11725,start$11726,end$11727]);}throw err$11730;};
var $11853=function(){var $11854$11856;($11854$11856=function($11859$11862,$11860$11863){var classes$11865;var children$11866;var t0$11868;(t0$11868=$11690(Array)($11859$11862));if(t0$11868[0]){(classes$11865=t0$11868[1]);;}else{$11722($11859$11862);}var t0$11873;(t0$11873=$11690(Array)($11860$11863));if(t0$11873[0]){(children$11866=t0$11873[1]);;}else{$11722($11860$11863);}var it$0$11878;(it$0$11878=function(){if((!$10946($11854$11856)(this))){return Object.create($11854$11856.prototype);}else{return this;}}());;(it$0$11878["classes"]=classes$11865.sort());(it$0$11878["children"]=children$11866);return it$0$11878;});;$11841(function(){var accum$11886;(accum$11886=({}));(accum$11886["::check"]=function(x$11890){return ((x$11890&&x$11890.classes)&&x$11890.children);});return accum$11886;}(),function(){var accum$11893;(accum$11893=({}));(accum$11893["::deconstruct"]=function(x$11897){return [x$11897.classes,x$11897.children];});return accum$11893;}());($11854$11856.prototype["::check"]=function(n$11902){var it$0$11905;(it$0$11905=this);;var temp$11913;(temp$11913=it$0$11905.classes);;var len$11918;(len$11918=temp$11913.length);;var i$11923;(i$11923=0);;$11910:for(;(i$11923<len$11918);(i$11923++)){var m$11931;(m$11931=temp$11913[i$11923]);;var c$11939;(c$11939=m$11931);if((n$11902.classes.indexOf(c$11939)===(-1))){return false;}else{false;;}}return true;});$11841($11854$11856,$11841(function(){var accum$11945;(accum$11945=({}));(accum$11945["::check"]=function(x$11949){return ((x$11949&&x$11949.classes)&&x$11949.children);});return accum$11945;}(),function(){var accum$11952;(accum$11952=({}));(accum$11952["::deconstruct"]=function(x$11956){return [x$11956.classes,x$11956.children];});return accum$11952;}()));return $11854$11856;}();
var $11958=function($11959$11961,key$11962){var ph$11966;(ph$11966=$11959$11961);;var $11964$11971;($11964$11971=ph$11966);;var bridge$11965$11976;(bridge$11965$11976=$11964$11971);if(((bridge$11965$11976===null)||(bridge$11965$11976===(void 0)))){return false;}else{var x$11984;if((typeof($11964$11971)==="string")){(x$11984=$11964$11971);return (key$11962 in String.prototype);}else{var x$11989;if((typeof($11964$11971)==="number")){(x$11989=$11964$11971);return (key$11962 in Number.prototype);}else{var x$11994;(x$11994=$11964$11971);return (key$11962 in x$11994);}}}};var accum$11039;var accum$11046;var accum$11098;var accum$11105;var $10993$10994;var items$10995;var Node$10996;var pr_terminus$10997;var pr$10998;var __lt____gt__$10999;var repr$11000;var escape_html$11001;var quotify$11002;var HTML$11003;($10993$10994=require("./util"));;(items$10995=$10993$10994.items);;(Node$10996=function($11012$11015,$11013$11016){var t0$11021;var t0$11026;var it$0$11031;var classes$11018;var children$11019;(t0$11021=$11690(Array)($11012$11015));if(t0$11021[0]){(classes$11018=t0$11021[1]);;}else{$11722($11012$11015);}(t0$11026=$11690(Array)($11013$11016));if(t0$11026[0]){(children$11019=t0$11026[1]);;}else{$11722($11013$11016);}(it$0$11031=function(){if((!$10946(Node$10996)(this))){return Object.create(Node$10996.prototype);}else{return this;}}());;(it$0$11031["classes"]=classes$11018.sort());(it$0$11031["children"]=children$11019);return it$0$11031;});;$11841(((accum$11039=({})),((accum$11039["::check"]=function(x$11043){return ((x$11043&&x$11043.classes)&&x$11043.children);}),accum$11039)),((accum$11046=({})),((accum$11046["::deconstruct"]=function(x$11050){return [x$11050.classes,x$11050.children];}),accum$11046)));(Node$10996.prototype["::check"]=function(n$11055){var i$11076;var len$11071;var temp$11066;var it$0$11058;(it$0$11058=this);;(temp$11066=it$0$11058.classes);;(len$11071=temp$11066.length);;(i$11076=0);;$11063:for(;(i$11076<len$11071);(i$11076++)){var c$11092;var m$11084;(m$11084=temp$11066[i$11076]);;(c$11092=m$11084);if((n$11055.classes.indexOf(c$11092)===(-1))){return false;}else{false;;}}return true;});$11841(Node$10996,$11841(((accum$11098=({})),((accum$11098["::check"]=function(x$11102){return ((x$11102&&x$11102.classes)&&x$11102.children);}),accum$11098)),((accum$11105=({})),((accum$11105["::deconstruct"]=function(x$11109){return [x$11109.classes,x$11109.children];}),accum$11105))));Node$10996;(pr_terminus$10997=function(node$11114){var r$11117;var pre$11118;var post$11119;(r$11117=HTML$11003(node$11114,"span"));;(pre$11118=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));;(post$11119=("</div>"+String.fromCharCode(7)));;return console.log(((pre$11118+r$11117)+post$11119));});;(pr$10998=function($11132$11134,r$11135){var x$11156;var n$11151;var $11137$11143;var ph$11138;(ph$11138=$11132$11134);;($11137$11143=ph$11138);;if($10946(Node$10996)($11137$11143)){(n$11151=$11137$11143);return pr_terminus$10997(n$11151);}else{(x$11156=$11137$11143);return pr_terminus$10997((r$11135||repr$11000)(x$11156));}});;(__lt____gt__$10999=function($11161$11163,x$11164){if(($11161$11163===null)){;}else{$11722($11161$11163);}return pr$10998(x$11164);});;(repr$11000=function(){var i$11248;var len$11243;var temp$11238;var acc$11233;var i$11291;var len$11286;var temp$11281;var acc$11276;var other$11318;var entries$11228;var $11176$11201;var t0$11199;var x$11189;var recur$11190;var $11175$11191;var t0$11183;var t1$11184;var t2$11185;var $11174$11178;($11174$11178=arguments);;(t0$11183=$11174$11178.length);if((((t0$11183>=1)&&(t0$11183<=2))&&((t1$11184=$11174$11178[0]),((x$11189=t1$11184),(($11175$11191=t1$11184),((t2$11185=function(){if((1>=t0$11183)){return repr$11000;}else{return $11174$11178[1];}}()),$10946(Function)(t2$11185))))))){(recur$11190=t2$11185);if(($11175$11191===true)){return $11853(["special","true"],"true");}else{if(($11175$11191===false)){return $11853(["special","false"],"false");}else{if(($11175$11191===null)){return $11853(["special","nil"],"null");}else{if(($11175$11191===(void 0))){return $11853(["special","nil"],"undefined");}else{if((typeof($11175$11191)==="number")){return $11853(["num"],String(x$11189));}else{if((typeof($11175$11191)==="string")){return $11853(["str"],x$11189);}else{(t0$11199=$11175$11191);if($10946(Array)(t0$11199)){(entries$11228=t0$11199);return $11853(["sequence"],(((acc$11233=[])),(((temp$11238=entries$11228)),(((len$11243=temp$11238.length)),(((i$11248=0)),function(){$11231:for(;(i$11248<len$11243);(i$11248++)){var x$11264;var m$11256;(m$11256=temp$11238[i$11248]);;(x$11264=m$11256);acc$11233.push(recur$11190(x$11264,repr$11000));}}()))),acc$11233));}else{$11175$11191;if(x$11189["::repr"]){return x$11189["::repr"](recur$11190);}else{if((Object.getPrototypeOf(x$11189)===Object.prototype)){return $11853(["table"],(((acc$11276=[])),(((temp$11281=items$10995(x$11189))),(((len$11286=temp$11281.length)),(((i$11291=0)),function(){$11274:for(;(i$11291<len$11286);(i$11291++)){var k$11309;var v$11310;var t0$11304;var t1$11305;var m$11299;(m$11299=temp$11281[i$11291]);;(t0$11304=m$11299);if(((t0$11304 instanceof Array)&&((t1$11305=t0$11304.length),(t1$11305===2)))){(k$11309=t0$11304[0]);(v$11310=t0$11304[1]);acc$11276.push($11853(["pairing"],[recur$11190(k$11309,repr$11000),recur$11190(v$11310,repr$11000)]));}else{false;;}}}()))),acc$11276));}else{(other$11318=$11175$11191);return $11853(["unknown"],other$11318.toString());}}}}}}}}}}else{$11722($11174$11178);}});;(escape_html$11001=function($11325$11327){var t0$11331;var repl$11336;var s$11329;(t0$11331=[true,String($11325$11327)]);if(t0$11331[0]){(s$11329=t0$11331[1]);;}else{$11722($11325$11327);}(repl$11336=({"&":"&amp;","<":"&lt;",">":"&gt;"}));;return s$11329.replace(RegExp("[&<>]","g"),function(x$11341){return $10961(repl$11336,x$11341);});});;(quotify$11002=function($11346$11348){var t0$11352;var s$11350;(t0$11352=[true,String($11346$11348)]);if(t0$11352[0]){(s$11350=t0$11352[1]);;}else{$11722($11346$11348);}return s$11350.replace(RegExp("[\"\\\\]","g"),function(x$11357){return ("\\"+x$11357);});});;(HTML$11003=function($11362$11364,default_tag$11365){var i$11407;var len$11402;var temp$11397;var acc$11392;var i$11471;var len$11466;var temp$11461;var i$11547;var len$11542;var temp$11537;var acc$11532;var i$11601;var len$11596;var temp$11591;var acc$11586;var i$11646;var len$11641;var temp$11636;var acc$11631;var other$11627;var $11572$11574;var x$11680;var other$11677;var $11433$11665;var tag$11434;var _classes$11435;var id$11436;var kv$11437;var sub$11438;var accum$11439;var other$11686;var classes$11427;var children$11428;var children$11386;var s$11381;var $11367$11373;var ph$11368;(ph$11368=$11362$11364);;($11367$11373=ph$11368);;if((typeof($11367$11373)==="string")){(s$11381=$11367$11373);return escape_html$11001(s$11381);}else{if($10946(Array)($11367$11373)){(children$11386=$11367$11373);return (((acc$11392=[])),(((temp$11397=children$11386)),(((len$11402=temp$11397.length)),(((i$11407=0)),function(){$11390:for(;(i$11407<len$11402);(i$11407++)){var child$11423;var m$11415;(m$11415=temp$11397[i$11407]);;(child$11423=m$11415);acc$11392.push(HTML$11003(child$11423,default_tag$11365));}}()))),acc$11392).join("");}else{if(($10946(Node$10996)($11367$11373)&&($11958($11367$11373,"classes")&&((classes$11427=$11367$11373.classes),$11958($11367$11373,"children"))))){(children$11428=$11367$11373.children);(tag$11434=(default_tag$11365||"span"));;(_classes$11435=[]);;(id$11436=null);;(kv$11437=[]);;(sub$11438=[]);;(temp$11461=classes$11427);;(len$11466=temp$11461.length);;(i$11471=0);;$11440:for(;(i$11471<len$11466);(i$11471++)){var s$11519;var m$11512;var m$11505;var k$11500;var k$11493;var v$11494;var $11441$11488;var $11442$11489;var $11443$11490;var t0$11484;var t1$11485;var t2$11486;var m$11479;(m$11479=temp$11461[i$11471]);;(t0$11484=m$11479);if((($11442$11489=(t0$11484 instanceof Array))&&((t1$11485=t0$11484.length),((t1$11485===3)&&(t0$11484[0]==="assoc"))))){(k$11493=t0$11484[1]);(v$11494=t0$11484[2]);kv$11437.push([k$11493,v$11494]);}else{if(($11442$11489&&((t1$11485===2)&&(t0$11484[0]==="assoc")))){(k$11500=t0$11484[1]);kv$11437.push([k$11500,(void 0)]);}else{(t0$11484=$11690(RegExp("(?:^\\+((?:.*)))",""))(m$11479));if((t0$11484[0]&&((t1$11485=t0$11484[1]),((t2$11486=t1$11485.length),(t2$11486===2))))){t1$11485[0];(m$11505=t1$11485[1]);(tag$11434=m$11505);}else{(t0$11484=$11690(RegExp("(?:^#((?:.*)))",""))(m$11479));if((t0$11484[0]&&((t1$11485=t0$11484[1]),((t2$11486=t1$11485.length),(t2$11486===2))))){t1$11485[0];(m$11512=t1$11485[1]);(id$11436=m$11512);}else{(t0$11484=m$11479);if((typeof(t0$11484)==="string")){(s$11519=t0$11484);_classes$11435.push(s$11519);}else{false;;}}}}}}(accum$11439=function(){if((tag$11434==="raw")){return [];}else{return ["<",tag$11434];}}());;if(id$11436){(accum$11439=accum$11439.concat(" id=\"",id$11436,"\""));}if(_classes$11435.length){(accum$11439=accum$11439.concat(" class=\"",quotify$11002(_classes$11435.join(" ")),"\""));}if(kv$11437){(acc$11532=[]);;(temp$11537=kv$11437);;(len$11542=temp$11537.length);;(i$11547=0);;$11530:for(;(i$11547<len$11542);(i$11547++)){var k$11565;var v$11566;var t0$11560;var t1$11561;var m$11555;(m$11555=temp$11537[i$11547]);;(t0$11560=m$11555);if(((t0$11560 instanceof Array)&&((t1$11561=t0$11560.length),(t1$11561===2)))){(k$11565=t0$11560[0]);(v$11566=t0$11560[1]);acc$11532.push((accum$11439=accum$11439.concat(function(){if((v$11566!==null)){return [" ",k$11565,"=\"",quotify$11002(v$11566),"\""];}else{return [" ",k$11565];}}())));}else{false;;}}acc$11532;}(children$11428=((($11572$11574=tag$11434)),function(){if(($11572$11574==="raw")){(acc$11586=[]);;(temp$11591=children$11428);;(len$11596=temp$11591.length);;(i$11601=0);;$11584:for(;(i$11601<len$11596);(i$11601++)){var c$11623;var s$11618;var t0$11614;var m$11609;(m$11609=temp$11591[i$11601]);;(t0$11614=m$11609);if((typeof(t0$11614)==="string")){(s$11618=t0$11614);acc$11586.push(s$11618);}else{(c$11623=m$11609);acc$11586.push(HTML$11003(c$11623,default_tag$11365));}}return acc$11586;}else{(other$11627=$11572$11574);(acc$11631=[]);;(temp$11636=children$11428);;(len$11641=temp$11636.length);;(i$11646=0);;$11629:for(;(i$11646<len$11641);(i$11646++)){var c$11662;var m$11654;(m$11654=temp$11636[i$11646]);;(c$11662=m$11654);acc$11631.push(HTML$11003(c$11662,default_tag$11365));}return acc$11631;}}()));($11433$11665=tag$11434);;if(($11433$11665==="raw")){return accum$11439.concat(children$11428).join("");}else{(other$11677=$11433$11665);(x$11680=[">"].concat(children$11428).concat(["</",tag$11434,">"]));;return accum$11439.concat(x$11680).join("");}}else{(other$11686=$11367$11373);return HTML$11003([true,String(other$11686)][1],default_tag$11365);}}}});;(exports["pr_terminus"]=pr_terminus$10997);(exports["pr"]=pr$10998);(exports["<>"]=__lt____gt__$10999);(exports["repr"]=repr$11000);(exports["Node"]=Node$10996);
