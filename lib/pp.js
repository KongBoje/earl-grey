var $20608=function(type$20611){var f$20615;(f$20615=type$20611["::check"]);if((f$20615===(void 0))){return function(value$20621){return (value$20621 instanceof type$20611);};}else{return function(value$20625){return f$20615.call(type$20611,value$20625);};}};
var $20627=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $20628=function(dest$20631,values$20632){var k$20637;(k$20637=null);$20635:for(k$20637 in values$20632){if(values$20632.hasOwnProperty(k$20637)){(dest$20631[k$20637]=values$20632[k$20637]);}}return dest$20631;};
var $20645=function($20647$20650){var ph$20656;(ph$20656=$20647$20650);var $20652$20662;($20652$20662=ph$20656);var bridge$20654$20667;var x$20671;(bridge$20654$20667=$20652$20662);if((((typeof(bridge$20654$20667)==="string")&&((x$20671=bridge$20654$20667),true))||((typeof(bridge$20654$20667)==="number")&&((x$20671=bridge$20654$20667),true)))){return ["value",x$20671];}else{var other$20682;(other$20682=$20652$20662);return other$20682["::serialize_ast"]();}};
var send$20382;(send$20382=function(obj$20389,$20386$20390){var ph$20396;var msg$20397;var t0$20399;(t0$20399=$20386$20390);(msg$20397=t0$20399);(ph$20396=t0$20399);var $20392$20408;($20392$20408=ph$20396);var bridge$20394$20413;(bridge$20394$20413=$20392$20408);if(((typeof(bridge$20394$20413)==="string")||(typeof(bridge$20394$20413)==="number"))){return obj$20389[msg$20397];}else{var other$20425;(other$20425=$20392$20408);return obj$20389["::send"](msg$20397);}});(Array[":::project"]=function($20431$20434){var ph$20439;var value$20440;var t0$20442;(t0$20442=$20431$20434);(value$20440=t0$20442);(ph$20439=t0$20442);var $20436$20451;($20436$20451=ph$20439);if($20608(Array)($20436$20451)){return [true,value$20440];}else{$20436$20451;return [true,[value$20440]];}});(Array.prototype["::check"]=function(value$20469){if((value$20469 instanceof Array)){var i$20475;(i$20475=0);$20472:for(;(i$20475<this.length);(i$20475++)){if(($20627(this,i$20475)!==$20627(value$20469,i$20475))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $20628(this.slice(0),this);});(Array.prototype[":::project"]=function(value$20494){if((value$20494 instanceof Array)){var i$20500;(i$20500=0);$20497:for(;(i$20500<this.length);(i$20500++)){if(($20627(this,i$20500)!==$20627(value$20494,i$20500))){return [true,[value$20494]];}}return [true,value$20494.slice(this.length)];}else{return [true,[value$20494]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($20645));});(RegExp.prototype["::check"]=function($20518$20521){var ph$20526;(ph$20526=$20518$20521);var $20523$20532;($20523$20532=ph$20526);var value$20540;if((typeof($20523$20532)==="string")){(value$20540=$20523$20532);if(value$20540.match(this)){return true;}else{return false;}}else{var other$20545;(other$20545=$20523$20532);return false;}});(RegExp.prototype[":::project"]=function($20551$20554){var ph$20559;(ph$20559=$20551$20554);var $20556$20565;($20556$20565=ph$20559);var value$20573;if((typeof($20556$20565)==="string")){(value$20573=$20556$20565);var $20576$20581;($20576$20581=value$20573.match(this));var m$20589;if(($20576$20581===null)){(m$20589=$20576$20581);return [false,null];}else{var m$20594;(m$20594=$20576$20581);return [true,m$20594];}}else{var other$20598;(other$20598=$20556$20565);return [false,null];}});(Function.prototype["::send"]=function(args$20605){return this.apply(this,args$20605);});
var $21795=function(type$21798){return function(value$21802){var f$21806;(f$21806=type$21798[":::project"]);if((f$21806===(void 0))){(f$21806=type$21798["::project"]);if((f$21806===(void 0))){return [true,type$21798(value$21802)];}else{var rval$21819;(rval$21819=false);try{(rval$21819=[true,f$21806(value$21802)]);}catch(excv$21830){var e$21836;(e$21836=excv$21830);(rval$21819=[false,null]);}return rval$21819;}}else{return f$21806.call(type$21798,value$21802);}};};
var $22094=function(arr$22097){var results$22103;var l$22104;(results$22103=[]);(l$22104=arr$22097.length);var i$22113;(i$22113=0);$22102:for(;(i$22113<l$22104);(i$22113++)){results$22103.push([i$22113,$20627(arr$22097,i$22113)]);}return results$22103;};
var $21861=function(){var $21862$21868;($21862$21868=function(tags$21873){var it$0$21876;(it$0$21876=function(){if((!$20608($21862$21868)(this))){return Object.create($21862$21868.prototype);}else{return this;}}());(it$0$21876["tags"]=tags$21873);return it$0$21876;});($21862$21868.prototype["create"]=function(){var it$0$21896;var self$21897;(it$0$21896=this);(self$21897=this);var $21894$21906;($21894$21906=arguments);var t0$21911;var message$21915;var args$21916;(t0$21911=$21894$21906.length);if((t0$21911>=0)){(message$21915=function(){if((0>=t0$21911)){return "";}else{return $21894$21906[0];}}());(args$21916=Array.prototype.slice.call($21894$21906,1));var e$21929;(e$21929=Error(message$21915));(e$21929["::tags"]=it$0$21896.tags);(e$21929["args"]=args$21916);var temp$21945;(temp$21945=$22094(args$21916));var $length$21951;($length$21951=temp$21945.length);var $index$21957;($index$21957=0);$21930:for(;($index$21957<$length$21951);($index$21957++)){var m$21966;(m$21966=temp$21945[$index$21957]);var t0$21971;var t1$21972;var i$21976;var arg$21977;(t0$21971=m$21966);if(((t0$21971 instanceof Array)&&(((t1$21972=t0$21971.length)),(t1$21972===2)))){(i$21976=t0$21971[0]);(arg$21977=t0$21971[1]);(e$21929[i$21976]=arg$21977);}else{$21842(m$21966);}}(e$21929["length"]=args$21916.length);(e$21929["name"]=["E"].concat(it$0$21896.tags).join("."));return e$21929;}else{$21842($21894$21906);}});($21862$21868.prototype["::check"]=function(e$22007){var it$0$22011;var self$22012;(it$0$22011=this);(self$22012=this);var tags$22022;if(((!e$22007)||(!$20608(Error)(e$22007)))){return false;}(tags$22022=(e$22007["::tags"]||[]));var temp$22033;(temp$22033=it$0$22011.tags);var $length$22039;($length$22039=temp$22033.length);var $index$22045;($index$22045=0);$22023:for(;($index$22045<$length$22039);($index$22045++)){var m$22054;(m$22054=temp$22033[$index$22045]);var tag$22062;(tag$22062=m$22054);if((tags$22022.indexOf(tag$22062)===-1)){return false;}else{false;}}return true;});($21862$21868.prototype["::deconstruct"]=function(e$22071){var it$0$22075;var self$22076;(it$0$22075=this);(self$22076=this);return e$22071.args;});$20628($21862$21868,$20628(function(){var accum$22087;(accum$22087=({}));(accum$22087["::name"]="$21862");return accum$22087;}(),function(){var accum$22091;(accum$22091=({}));(accum$22091["::egclass"]=true);return accum$22091;}()));return $21862$21868;}();
var $21842=function(value$21845,url$21846,start$21847,end$21848){var err$21852;(err$21852=$21861(["match"]).create("Could not find a match for value",({"value":value$21845})));if(url$21846){(err$21852["location"]=["location",url$21846,start$21847,end$21848]);}throw err$21852;};
var $22120=function($22122$22125,key$22126){var ph$22134;(ph$22134=$22122$22125);var $22128$22140;($22128$22140=ph$22134);var bridge$22130$22145;(bridge$22130$22145=$22128$22140);if(((bridge$22130$22145===null)||(bridge$22130$22145===(void 0)))){return false;}else{var x$22157;if((typeof($22128$22140)==="string")){(x$22157=$22128$22140);return (key$22126 in String.prototype);}else{var x$22162;if((typeof($22128$22140)==="number")){(x$22162=$22128$22140);return (key$22126 in Number.prototype);}else{var x$22167;(x$22167=$22128$22140);return (key$22126 in x$22167);}}}};
var $21506=function(){var $21507$21512;($21507$21512=function($21516$21523,$21518$21524,$21520$21525){var it$0$21528;(it$0$21528=function(){if((!$20608($21507$21512)(this))){return Object.create($21507$21512.prototype);}else{return this;}}());var t0$21535;(t0$21535=$21795(Array)($21516$21523));if(t0$21535[0]){(it$0$21528["tags"]=t0$21535[1]);}else{$21842($21516$21523);}(it$0$21528["props"]=$21518$21524);var t0$21547;(t0$21547=$21795(Array)($21520$21525));if(t0$21547[0]){(it$0$21528["children"]=t0$21547[1]);}else{$21842($21520$21525);}undefined;return it$0$21528;});$20628(function(){var accum$21561;(accum$21561=({}));(accum$21561["::check"]=function(x$21566){return (((x$21566&&x$21566.tags)&&x$21566.props)&&x$21566.children);});return accum$21561;}(),$20628(function(){var accum$21569;(accum$21569=({}));(accum$21569[":::project"]=function($21573$21576){var ph$21581;(ph$21581=$21573$21576);var $21578$21587;($21578$21587=ph$21581);var tags$21595;var props$21596;var children$21597;if(($22120($21578$21587,"tags")&&((tags$21595=$21578$21587.tags),($22120($21578$21587,"props")&&((props$21596=$21578$21587.props),$22120($21578$21587,"children")))))){(children$21597=$21578$21587.children);return [true,[tags$21595,props$21596,children$21597]];}else{$21578$21587;return [false,null];}});return accum$21569;}(),$20628(function(){var accum$21606;(accum$21606=({}));(accum$21606["::name"]="$21507");return accum$21606;}(),function(){var accum$21610;(accum$21610=({}));(accum$21610["::egclass"]=true);return accum$21610;}())));($21507$21512.prototype["::check"]=function($21616$21619){var it$0$21623;var self$21624;(it$0$21623=this);(self$21624=this);var ph$21635;(ph$21635=$21616$21619);var $21632$21641;($21632$21641=ph$21635);var n$21649;if($20608($21506)($21632$21641)){(n$21649=$21632$21641);var temp$21659;(temp$21659=it$0$21623.tags);var $length$21665;($length$21665=temp$21659.length);var $index$21671;($index$21671=0);$21653:for(;($index$21671<$length$21665);($index$21671++)){var m$21680;(m$21680=temp$21659[$index$21671]);var c$21688;(c$21688=m$21680);if((n$21649.tags.indexOf(c$21688)===-1)){return false;}else{false;}}return true;}else{$21632$21641;return false;}});($21507$21512.prototype[":::project"]=function($21699$21702){var it$0$21706;var self$21707;(it$0$21706=this);(self$21707=this);var ph$21718;(ph$21718=$21699$21702);var $21715$21724;($21715$21724=ph$21718);var n$21732;if($20608(it$0$21706)($21715$21724)){(n$21732=$21715$21724);return [true,[n$21732.tags,n$21732.props,n$21732.children]];}else{$21715$21724;return [false,null];}});$20628($21507$21512,$20628(function(){var accum$21743;(accum$21743=({}));(accum$21743["::check"]=function(x$21748){return (((x$21748&&x$21748.tags)&&x$21748.props)&&x$21748.children);});return accum$21743;}(),$20628(function(){var accum$21751;(accum$21751=({}));(accum$21751[":::project"]=function($21755$21758){var ph$21763;(ph$21763=$21755$21758);var $21760$21769;($21760$21769=ph$21763);var tags$21777;var props$21778;var children$21779;if(($22120($21760$21769,"tags")&&((tags$21777=$21760$21769.tags),($22120($21760$21769,"props")&&((props$21778=$21760$21769.props),$22120($21760$21769,"children")))))){(children$21779=$21760$21769.children);return [true,[tags$21777,props$21778,children$21779]];}else{$21760$21769;return [false,null];}});return accum$21751;}(),$20628(function(){var accum$21788;(accum$21788=({}));(accum$21788["::name"]="$21507");return accum$21788;}(),function(){var accum$21792;(accum$21792=({}));(accum$21792["::egclass"]=true);return accum$21792;}()))));return $21507$21512;}();
var $22169=function(obj$22172){var results$22177;(results$22177=[]);var k$22182;(k$22182=null);$22176:for(k$22182 in obj$22172){if(Object.prototype.hasOwnProperty.call(obj$22172,k$22182)){results$22177.push([k$22182,$20627(obj$22172,k$22182)]);}}return results$22177;};var pr_terminus$20693;var pr$20694;var __lt____gt__$20695;var repr$20696;var escape_html$20697;var quotify$20698;var HTML$20699;(pr_terminus$20693=function(node$20704){var r$20710;var pre$20711;var post$20712;(r$20710=HTML$20699(node$20704,"span"));(pre$20711=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));(post$20712=("</div>"+String.fromCharCode(7)));return console.log(((pre$20711+r$20710)+post$20712));});(pr$20694=function($20726$20729,r$20730){var x$20754;var n$20749;var $20732$20741;var ph$20735;(ph$20735=$20726$20729);($20732$20741=ph$20735);if($20608($21506)($20732$20741)){(n$20749=$20732$20741);return pr_terminus$20693(n$20749);}else{(x$20754=$20732$20741);return pr_terminus$20693((r$20730||repr$20696)(x$20754));}});(__lt____gt__$20695=function($20760$20763,x$20764){if(($20760$20763===null)){}else{$21842($20760$20763);}return pr$20694(x$20764);});(repr$20696=function(){var $index$20883;var $length$20877;var temp$20871;var acc$20865;var $index$20934;var $length$20928;var temp$20922;var acc$20916;var other$20971;var entries$20853;var $20788$20826;var t0$20824;var x$20802;var recur$20803;var $20777$20804;var t0$20796;var t1$20797;var t2$20798;var $20775$20791;($20775$20791=arguments);(t0$20796=$20775$20791.length);if((((t0$20796>=1)&&(t0$20796<=2))&&(((t1$20797=$20775$20791[0])),((x$20802=t1$20797),(($20777$20804=t1$20797),(((t2$20798=function(){if((1>=t0$20796)){return repr$20696;}else{return $20775$20791[1];}}())),$20608(Function)(t2$20798))))))){(recur$20803=t2$20798);if(($20777$20804===true)){return $21506([".special",".true"],({}),"true");}else{if(($20777$20804===false)){return $21506([".special",".false"],({}),"false");}else{if(($20777$20804===null)){return $21506([".special",".nil"],({}),"null");}else{if(($20777$20804===(void 0))){return $21506([".special",".nil"],({}),"undefined");}else{if((typeof($20777$20804)==="number")){return $21506([".num"],({}),String(x$20802));}else{if((typeof($20777$20804)==="string")){return $21506([".str"],({}),x$20802);}else{(t0$20824=$20777$20804);if($20608(Array)(t0$20824)){(entries$20853=t0$20824);return $21506([".sequence"],({}),(((acc$20865=[])),(((temp$20871=entries$20853)),((($length$20877=temp$20871.length)),((($index$20883=0)),function(){$20860:for(;($index$20883<$length$20877);($index$20883++)){var x$20900;var m$20892;(m$20892=temp$20871[$index$20883]);(x$20900=m$20892);acc$20865.push(recur$20803(x$20900,repr$20696));}}()))),acc$20865));}else{$20777$20804;if(x$20802["::repr"]){return x$20802["::repr"](recur$20803);}else{if((Object.getPrototypeOf(x$20802)===Object.prototype)){return $21506(["table",".object"],({}),(((acc$20916=[])),(((temp$20922=$22169(x$20802))),((($length$20928=temp$20922.length)),((($index$20934=0)),function(){$20911:for(;($index$20934<$length$20928);($index$20934++)){var k$20953;var v$20954;var t0$20948;var t1$20949;var m$20943;(m$20943=temp$20922[$index$20934]);(t0$20948=m$20943);if(((t0$20948 instanceof Array)&&(((t1$20949=t0$20948.length)),(t1$20949===2)))){(k$20953=t0$20948[0]);(v$20954=t0$20948[1]);acc$20916.push($21506(["tr"],({}),[$21506(["th"],({}),recur$20803(k$20953,repr$20696)),$21506(["td"],({}),recur$20803(v$20954,repr$20696))]));}else{$21842(m$20943,"/home/olivier/git/earl-grey/src/pp.eg",914,1244);}}}()))),acc$20916));}else{(other$20971=$20777$20804);return $21506([".unknown"],({}),other$20971.toString());}}}}}}}}}}else{$21842($20775$20791);}});(escape_html$20697=function($20979$20982){var t0$20986;var repl$20996;var s$20984;(t0$20986=[true,String($20979$20982)]);if(t0$20986[0]){(s$20984=t0$20986[1]);}else{$21842($20979$20982);}(repl$20996=({"&":"&amp;","<":"&lt;",">":"&gt;"}));return s$20984.replace(RegExp("[&<>]","g"),function(x$21002){return $20627(repl$20996,x$21002);});});(quotify$20698=function($21008$21011){var t0$21015;var s$21013;(t0$21015=[true,String($21008$21011)]);if(t0$21015[0]){(s$21013=t0$21015[1]);}else{$21842($21008$21011);}return s$21013.replace(RegExp("[\"\\\\]","g"),function(x$21025){return ("\\"+x$21025);});});(HTML$20699=function($21031$21034,default_tag$21035){var $index$21088;var $length$21082;var temp$21076;var acc$21070;var $index$21172;var $length$21166;var temp$21160;var $index$21232;var $length$21226;var temp$21220;var $index$21303;var $length$21297;var temp$21291;var acc$21285;var $index$21383;var $length$21377;var temp$21371;var acc$21365;var $index$21441;var $length$21435;var temp$21429;var acc$21423;var other$21416;var $21344$21349;var x$21480;var other$21476;var $21125$21464;var tag$21128;var classes$21129;var id$21130;var kv$21131;var sub$21132;var accum$21133;var children2$21134;var other$21486;var tags$21110;var props$21111;var children$21112;var children$21061;var s$21056;var $21037$21048;var ph$21042;(ph$21042=$21031$21034);($21037$21048=ph$21042);if((typeof($21037$21048)==="string")){(s$21056=$21037$21048);return escape_html$20697(s$21056);}else{if($20608(Array)($21037$21048)){(children$21061=$21037$21048);return (((acc$21070=[])),(((temp$21076=children$21061)),((($length$21082=temp$21076.length)),((($index$21088=0)),function(){$21065:for(;($index$21088<$length$21082);($index$21088++)){var child$21105;var m$21097;(m$21097=temp$21076[$index$21088]);(child$21105=m$21097);acc$21070.push(HTML$20699(child$21105,default_tag$21035));}}()))),acc$21070).join("");}else{if(($20608($21506)($21037$21048)&&($22120($21037$21048,"tags")&&((tags$21110=$21037$21048.tags),($22120($21037$21048,"props")&&((props$21111=$21037$21048.props),$22120($21037$21048,"children"))))))){(children$21112=$21037$21048.children);(tag$21128=(default_tag$21035||"span"));(classes$21129=[]);(id$21130=null);(kv$21131=[]);(sub$21132=[]);(temp$21160=tags$21110);($length$21166=temp$21160.length);($index$21172=0);$21135:for(;($index$21172<$length$21166);($index$21172++)){var other$21211;var cls$21192;var t0$21186;var t1$21187;var t2$21188;var m$21181;(m$21181=temp$21160[$index$21172]);(t0$21186=$21795(RegExp("^\\.(.*)",""))(m$21181));if((t0$21186[0]&&(((t1$21187=t0$21186[1])),(((t2$21188=t1$21187.length)),(t2$21188===2))))){t1$21187[0];(cls$21192=t1$21187[1]);classes$21129.push(cls$21192);}else{(other$21211=m$21181);(tag$21128=other$21211);}}(temp$21220=$22169(props$21111));($length$21226=temp$21220.length);($index$21232=0);$21139:for(;($index$21232<$length$21226);($index$21232++)){var k$21251;var v$21252;var t0$21246;var t1$21247;var m$21241;(m$21241=temp$21220[$index$21232]);(t0$21246=m$21241);if(((t0$21246 instanceof Array)&&(((t1$21247=t0$21246.length)),(t1$21247===2)))){(k$21251=t0$21246[0]);(v$21252=t0$21246[1]);kv$21131.push([k$21251,v$21252]);}else{$21842(m$21241,"/home/olivier/git/earl-grey/src/pp.eg",1956,2020);}}(accum$21133=function(){if((tag$21128==="raw")){return [];}else{return ["<",tag$21128];}}());if(id$21130){(accum$21133=accum$21133.concat(" id=\"",id$21130,"\""));}if(classes$21129.length){(accum$21133=accum$21133.concat(" class=\"",quotify$20698(classes$21129.join(" ")),"\""));}if(kv$21131){(acc$21285=[]);(temp$21291=kv$21131);($length$21297=temp$21291.length);($index$21303=0);$21280:for(;($index$21303<$length$21297);($index$21303++)){var k$21322;var v$21323;var t0$21317;var t1$21318;var m$21312;(m$21312=temp$21291[$index$21303]);(t0$21317=m$21312);if(((t0$21317 instanceof Array)&&(((t1$21318=t0$21317.length)),(t1$21318===2)))){(k$21322=t0$21317[0]);(v$21323=t0$21317[1]);acc$21285.push(((accum$21133=accum$21133.concat(function(){if((v$21323!==null)){return [" ",k$21322,"=\"",quotify$20698(v$21323),"\""];}else{return [" ",k$21322];}}()))));}else{$21842(m$21312,"/home/olivier/git/earl-grey/src/pp.eg",2282,2482);}}acc$21285;}(children2$21134=((($21344$21349=tag$21128)),function(){if(($21344$21349==="raw")){(acc$21365=[]);(temp$21371=children$21112);($length$21377=temp$21371.length);($index$21383=0);$21359:for(;($index$21383<$length$21377);($index$21383++)){var c$21411;var s$21401;var t0$21397;var m$21392;(m$21392=temp$21371[$index$21383]);(t0$21397=m$21392);if((typeof(t0$21397)==="string")){(s$21401=t0$21397);acc$21365.push(s$21401);}else{(c$21411=m$21392);acc$21365.push(HTML$20699(c$21411,default_tag$21035));}}return acc$21365;}else{(other$21416=$21344$21349);(acc$21423=[]);(temp$21429=children$21112);($length$21435=temp$21429.length);($index$21441=0);$21418:for(;($index$21441<$length$21435);($index$21441++)){var c$21458;var m$21450;(m$21450=temp$21429[$index$21441]);(c$21458=m$21450);acc$21423.push(HTML$20699(c$21458,default_tag$21035));}return acc$21423;}}()));($21125$21464=tag$21128);if(($21125$21464==="raw")){return accum$21133.concat(children2$21134).join("");}else{(other$21476=$21125$21464);(x$21480=[">"].concat(children2$21134).concat(["</",tag$21128,">"]));return accum$21133.concat(x$21480).join("");}}else{(other$21486=$21037$21048);return HTML$20699([true,String(other$21486)][1],default_tag$21035);}}}});(exports["pr_terminus"]=pr_terminus$20693);(exports["pr"]=pr$20694);(exports["<>"]=__lt____gt__$20695);(exports["repr"]=repr$20696);
