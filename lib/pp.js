var $16811=function(type$16813){var f$16816;(f$16816=type$16813["::check"]);if((f$16816===(void 0))){return function(value$16821){return (value$16821 instanceof type$16813);};}else{return function(value$16824){return f$16816.call(type$16813,value$16824);};}};
var $16826=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $16827=function(dest$16829,values$16830){var k$16835;(k$16835=null);$16833:for(k$16835 in values$16830){if(values$16830.hasOwnProperty(k$16835)){(dest$16829[k$16835]=values$16830[k$16835]);}}return dest$16829;};
var $16842=function($16843$16845){var ph$16849;(ph$16849=$16843$16845);var $16847$16854;($16847$16854=ph$16849);var bridge$16848$16859;var x$16863;(bridge$16848$16859=$16847$16854);if((((typeof(bridge$16848$16859)==="string")&&((x$16863=bridge$16848$16859),true))||((typeof(bridge$16848$16859)==="number")&&((x$16863=bridge$16848$16859),true)))){return ["value",x$16863];}else{var other$16873;(other$16873=$16847$16854);return other$16873["::serialize_ast"]();}};
var send$16618;(send$16618=function(obj$16623,$16621$16624){var ph$16628;var msg$16629;var t0$16631;(t0$16631=$16621$16624);(msg$16629=t0$16631);(ph$16628=t0$16631);var $16626$16638;($16626$16638=ph$16628);var bridge$16627$16643;(bridge$16627$16643=$16626$16638);if(((typeof(bridge$16627$16643)==="string")||(typeof(bridge$16627$16643)==="number"))){return obj$16623[msg$16629];}else{var other$16654;(other$16654=$16626$16638);return obj$16623["::send"](msg$16629);}});(Array[":::project"]=function($16659$16661){var ph$16664;var value$16665;var t0$16667;(t0$16667=$16659$16661);(value$16665=t0$16667);(ph$16664=t0$16667);var $16663$16674;($16663$16674=ph$16664);if($16811(Array)($16663$16674)){return [true,value$16665];}else{$16663$16674;return [true,[value$16665]];}});(Array.prototype["::check"]=function(value$16691){if((value$16691 instanceof Array)){var i$16696;(i$16696=0);$16694:for(;(i$16696<this.length);(i$16696++)){if(($16826(this,i$16696)!==$16826(value$16691,i$16696))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $16827(this.slice(0),this);});(Array.prototype[":::project"]=function(value$16713){if((value$16713 instanceof Array)){var i$16718;(i$16718=0);$16716:for(;(i$16718<this.length);(i$16718++)){if(($16826(this,i$16718)!==$16826(value$16713,i$16718))){return [true,[value$16713]];}}return [true,value$16713.slice(this.length)];}else{return [true,[value$16713]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($16842));});(RegExp.prototype["::check"]=function($16734$16736){var ph$16739;(ph$16739=$16734$16736);var $16738$16744;($16738$16744=ph$16739);var value$16752;if((typeof($16738$16744)==="string")){(value$16752=$16738$16744);if(value$16752.match(this)){return true;}else{return false;}}else{var other$16757;(other$16757=$16738$16744);return false;}});(RegExp.prototype[":::project"]=function($16762$16764){var ph$16767;(ph$16767=$16762$16764);var $16766$16772;($16766$16772=ph$16767);var value$16780;if((typeof($16766$16772)==="string")){(value$16780=$16766$16772);var $16783$16785;($16783$16785=value$16780.match(this));var m$16793;if(($16783$16785===null)){(m$16793=$16783$16785);return [false,null];}else{var m$16798;(m$16798=$16783$16785);return [true,m$16798];}}else{var other$16802;(other$16802=$16766$16772);return [false,null];}});(Function.prototype["::send"]=function(args$16808){return this.apply(this,args$16808);});
var $17707=function(type$17709){return function(value$17712){var f$17715;(f$17715=type$17709[":::project"]);if((f$17715===(void 0))){(f$17715=type$17709["::project"]);if((f$17715===(void 0))){return [true,type$17709(value$17712)];}else{var rval$17724;(rval$17724=false);try{(rval$17724=[true,f$17715(value$17712)]);}catch(excv$17733){var e$17739;(e$17739=excv$17733);(rval$17724=[false,null]);}return rval$17724;}}else{return f$17715.call(type$17709,value$17712);}};};
var $17956=function(arr$17958){var results$17962;var l$17963;(results$17962=[]);(l$17963=arr$17958.length);var i$17971;(i$17971=0);$17961:for(;(i$17971<l$17963);(i$17971++)){results$17962.push([i$17971,$16826(arr$17958,i$17971)]);}return results$17962;};
var $17760=function(){var $17761$17763;($17761$17763=function(tags$17767){var it$0$17770;(it$0$17770=function(){if((!$16811($17761$17763)(this))){return Object.create($17761$17763.prototype);}else{return this;}}());(it$0$17770["tags"]=tags$17767);return it$0$17770;});($17761$17763.prototype["create"]=function(){var $17782$17784;($17782$17784=arguments);var t0$17789;var message$17793;var args$17794;(t0$17789=$17782$17784.length);if((t0$17789>=0)){(message$17793=function(){if((0>=t0$17789)){return "";}else{return $17782$17784[0];}}());(args$17794=Array.prototype.slice.call($17782$17784,1));var it$0$17801;(it$0$17801=this);var self$17806;(self$17806=this);var e$17811;(e$17811=Error(message$17793));(e$17811["::tags"]=it$0$17801.tags);(e$17811["args"]=args$17794);var temp$17825;(temp$17825=$17956(args$17794));var $length$17830;($length$17830=temp$17825.length);var $index$17835;($index$17835=0);$17812:for(;($index$17835<$length$17830);($index$17835++)){var m$17843;(m$17843=temp$17825[$index$17835]);var t0$17848;var t1$17849;var i$17853;var arg$17854;(t0$17848=m$17843);if(((t0$17848 instanceof Array)&&(((t1$17849=t0$17848.length)),(t1$17849===2)))){(i$17853=t0$17848[0]);(arg$17854=t0$17848[1]);(e$17811[i$17853]=arg$17854);}else{$17744(m$17843);}}(e$17811["length"]=args$17794.length);(e$17811["name"]=["E"].concat(it$0$17801.tags).join("."));return e$17811;}else{$17744($17782$17784);}});($17761$17763.prototype["::check"]=function(e$17880){var it$0$17883;(it$0$17883=this);var self$17888;(self$17888=this);var tags$17893;if(((!e$17880)||(!$16811(Error)(e$17880)))){return false;}(tags$17893=(e$17880["::tags"]||[]));var temp$17902;(temp$17902=it$0$17883.tags);var $length$17907;($length$17907=temp$17902.length);var $index$17912;($index$17912=0);$17894:for(;($index$17912<$length$17907);($index$17912++)){var m$17920;(m$17920=temp$17902[$index$17912]);var tag$17928;(tag$17928=m$17920);if((tags$17893.indexOf(tag$17928)===-1)){return false;}else{false;}}return true;});($17761$17763.prototype["::deconstruct"]=function(e$17936){var it$0$17939;(it$0$17939=this);var self$17944;(self$17944=this);return e$17936.args;});$16827($17761$17763,$16827(function(){var accum$17949;(accum$17949=({}));(accum$17949["::name"]="$17761");return accum$17949;}(),function(){var accum$17953;(accum$17953=({}));(accum$17953["::egclass"]=true);return accum$17953;}()));return $17761$17763;}();
var $17744=function(value$17746,url$17747,start$17748,end$17749){var err$17752;(err$17752=$17760(["match"]).create("Could not find a match for value",({"value":value$17746})));if(url$17747){(err$17752["location"]=["location",url$17747,start$17748,end$17749]);}throw err$17752;};
var $17568=function(){var $17569$17571;($17569$17571=function($17574$17577,$17575$17578){var classes$17580;var children$17581;var t0$17583;(t0$17583=$17707(Array)($17574$17577));if(t0$17583[0]){(classes$17580=t0$17583[1]);}else{$17744($17574$17577);}var t0$17591;(t0$17591=$17707(Array)($17575$17578));if(t0$17591[0]){(children$17581=t0$17591[1]);}else{$17744($17575$17578);}var it$0$17599;(it$0$17599=function(){if((!$16811($17569$17571)(this))){return Object.create($17569$17571.prototype);}else{return this;}}());(it$0$17599["classes"]=classes$17580.sort());(it$0$17599["children"]=children$17581);return it$0$17599;});$16827(function(){var accum$17613;(accum$17613=({}));(accum$17613["::check"]=function(x$17617){return ((x$17617&&x$17617.classes)&&x$17617.children);});return accum$17613;}(),$16827(function(){var accum$17620;(accum$17620=({}));(accum$17620["::deconstruct"]=function(x$17624){return [x$17624.classes,x$17624.children];});return accum$17620;}(),$16827(function(){var accum$17627;(accum$17627=({}));(accum$17627["::name"]="$17569");return accum$17627;}(),function(){var accum$17631;(accum$17631=({}));(accum$17631["::egclass"]=true);return accum$17631;}())));($17569$17571.prototype["::check"]=function(n$17637){var it$0$17640;(it$0$17640=this);var self$17645;(self$17645=this);var temp$17654;(temp$17654=it$0$17640.classes);var $length$17659;($length$17659=temp$17654.length);var $index$17664;($index$17664=0);$17650:for(;($index$17664<$length$17659);($index$17664++)){var m$17672;(m$17672=temp$17654[$index$17664]);var c$17680;(c$17680=m$17672);if((n$17637.classes.indexOf(c$17680)===-1)){return false;}else{false;}}return true;});$16827($17569$17571,$16827(function(){var accum$17686;(accum$17686=({}));(accum$17686["::check"]=function(x$17690){return ((x$17690&&x$17690.classes)&&x$17690.children);});return accum$17686;}(),$16827(function(){var accum$17693;(accum$17693=({}));(accum$17693["::deconstruct"]=function(x$17697){return [x$17697.classes,x$17697.children];});return accum$17693;}(),$16827(function(){var accum$17700;(accum$17700=({}));(accum$17700["::name"]="$17569");return accum$17700;}(),function(){var accum$17704;(accum$17704=({}));(accum$17704["::egclass"]=true);return accum$17704;}()))));return $17569$17571;}();
var $17978=function(obj$17980){var results$17984;(results$17984=[]);var k$17989;(k$17989=null);$17983:for(k$17989 in obj$17980){if(Object.prototype.hasOwnProperty.call(obj$17980,k$17989)){results$17984.push([k$17989,$16826(obj$17980,k$17989)]);}}return results$17984;};
var $17993=function($17994$17996,key$17997){var ph$18001;(ph$18001=$17994$17996);var $17999$18006;($17999$18006=ph$18001);var bridge$18000$18011;(bridge$18000$18011=$17999$18006);if(((bridge$18000$18011===null)||(bridge$18000$18011===(void 0)))){return false;}else{var x$18022;if((typeof($17999$18006)==="string")){(x$18022=$17999$18006);return (key$17997 in String.prototype);}else{var x$18027;if((typeof($17999$18006)==="number")){(x$18027=$17999$18006);return (key$17997 in Number.prototype);}else{var x$18032;(x$18032=$17999$18006);return (key$17997 in x$18032);}}}};var pr_terminus$16877;var pr$16878;var __lt____gt__$16879;var repr$16880;var escape_html$16881;var quotify$16882;var HTML$16883;(pr_terminus$16877=function(node$16887){var r$16890;var pre$16891;var post$16892;(r$16890=HTML$16883(node$16887,"span"));(pre$16891=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));(post$16892=("</div>"+String.fromCharCode(7)));return console.log(((pre$16891+r$16890)+post$16892));});(pr$16878=function($16905$16907,r$16908){var x$16929;var n$16924;var $16910$16916;var ph$16911;(ph$16911=$16905$16907);($16910$16916=ph$16911);if($16811($17568)($16910$16916)){(n$16924=$16910$16916);return pr_terminus$16877(n$16924);}else{(x$16929=$16910$16916);return pr_terminus$16877((r$16908||repr$16880)(x$16929));}});(__lt____gt__$16879=function($16934$16936,x$16937){if(($16934$16936===null)){}else{$17744($16934$16936);}return pr$16878(x$16937);});(repr$16880=function(){var $index$17034;var $length$17029;var temp$17024;var acc$17019;var $index$17079;var $length$17074;var temp$17069;var acc$17064;var other$17113;var entries$17010;var $16949$16983;var t0$16981;var x$16962;var recur$16963;var $16948$16964;var t0$16956;var t1$16957;var t2$16958;var $16947$16951;($16947$16951=arguments);(t0$16956=$16947$16951.length);if((((t0$16956>=1)&&(t0$16956<=2))&&(((t1$16957=$16947$16951[0])),((x$16962=t1$16957),(($16948$16964=t1$16957),(((t2$16958=function(){if((1>=t0$16956)){return repr$16880;}else{return $16947$16951[1];}}())),$16811(Function)(t2$16958))))))){(recur$16963=t2$16958);if(($16948$16964===true)){return $17568(["special","true"],"true");}else{if(($16948$16964===false)){return $17568(["special","false"],"false");}else{if(($16948$16964===null)){return $17568(["special","nil"],"null");}else{if(($16948$16964===(void 0))){return $17568(["special","nil"],"undefined");}else{if((typeof($16948$16964)==="number")){return $17568(["num"],String(x$16962));}else{if((typeof($16948$16964)==="string")){return $17568(["str"],x$16962);}else{(t0$16981=$16948$16964);if($16811(Array)(t0$16981)){(entries$17010=t0$16981);return $17568(["sequence"],(((acc$17019=[])),(((temp$17024=entries$17010)),((($length$17029=temp$17024.length)),((($index$17034=0)),function(){$17016:for(;($index$17034<$length$17029);($index$17034++)){var x$17050;var m$17042;(m$17042=temp$17024[$index$17034]);(x$17050=m$17042);acc$17019.push(recur$16963(x$17050,repr$16880));}}()))),acc$17019));}else{$16948$16964;if(x$16962["::repr"]){return x$16962["::repr"](recur$16963);}else{if((Object.getPrototypeOf(x$16962)===Object.prototype)){return $17568(["+table","object"],(((acc$17064=[])),(((temp$17069=$17978(x$16962))),((($length$17074=temp$17069.length)),((($index$17079=0)),function(){$17061:for(;($index$17079<$length$17074);($index$17079++)){var k$17097;var v$17098;var t0$17092;var t1$17093;var m$17087;(m$17087=temp$17069[$index$17079]);(t0$17092=m$17087);if(((t0$17092 instanceof Array)&&(((t1$17093=t0$17092.length)),(t1$17093===2)))){(k$17097=t0$17092[0]);(v$17098=t0$17092[1]);acc$17064.push($17568(["+tr"],[$17568(["+th"],recur$16963(k$17097,repr$16880)),$17568(["+td"],recur$16963(v$17098,repr$16880))]));}else{$17744(m$17087,"/home/olivier/git/earl-grey/src/pp.eg",914,1244);}}}()))),acc$17064));}else{(other$17113=$16948$16964);return $17568(["unknown"],other$17113.toString());}}}}}}}}}}else{$17744($16947$16951);}});(escape_html$16881=function($17120$17122){var t0$17126;var repl$17134;var s$17124;(t0$17126=[true,String($17120$17122)]);if(t0$17126[0]){(s$17124=t0$17126[1]);}else{$17744($17120$17122);}(repl$17134=({"&":"&amp;","<":"&lt;",">":"&gt;"}));return s$17124.replace(RegExp("[&<>]","g"),function(x$17139){return $16826(repl$17134,x$17139);});});(quotify$16882=function($17144$17146){var t0$17150;var s$17148;(t0$17150=[true,String($17144$17146)]);if(t0$17150[0]){(s$17148=t0$17150[1]);}else{$17744($17144$17146);}return s$17148.replace(RegExp("[\"\\\\]","g"),function(x$17158){return ("\\"+x$17158);});});(HTML$16883=function($17163$17165,default_tag$17166){var $index$17209;var $length$17204;var temp$17199;var acc$17194;var $index$17276;var $length$17271;var temp$17266;var $index$17392;var $length$17387;var temp$17382;var acc$17377;var $index$17459;var $length$17454;var temp$17449;var acc$17444;var $index$17510;var $length$17505;var temp$17500;var acc$17495;var other$17490;var $17429$17431;var x$17546;var other$17543;var $17236$17531;var tag$17237;var _classes$17238;var id$17239;var kv$17240;var sub$17241;var accum$17242;var children2$17243;var other$17552;var classes$17230;var children$17231;var children$17187;var s$17182;var $17168$17174;var ph$17169;(ph$17169=$17163$17165);($17168$17174=ph$17169);if((typeof($17168$17174)==="string")){(s$17182=$17168$17174);return escape_html$16881(s$17182);}else{if($16811(Array)($17168$17174)){(children$17187=$17168$17174);return (((acc$17194=[])),(((temp$17199=children$17187)),((($length$17204=temp$17199.length)),((($index$17209=0)),function(){$17191:for(;($index$17209<$length$17204);($index$17209++)){var child$17225;var m$17217;(m$17217=temp$17199[$index$17209]);(child$17225=m$17217);acc$17194.push(HTML$16883(child$17225,default_tag$17166));}}()))),acc$17194).join("");}else{if(($16811($17568)($17168$17174)&&($17993($17168$17174,"classes")&&((classes$17230=$17168$17174.classes),$17993($17168$17174,"children"))))){(children$17231=$17168$17174.children);(tag$17237=(default_tag$17166||"span"));(_classes$17238=[]);(id$17239=null);(kv$17240=[]);(sub$17241=[]);(temp$17266=classes$17230);($length$17271=temp$17266.length);($index$17276=0);$17244:for(;($index$17276<$length$17271);($index$17276++)){var s$17354;var m$17335;var m$17316;var k$17311;var k$17298;var v$17299;var $17246$17293;var $17247$17294;var $17248$17295;var t0$17289;var t1$17290;var t2$17291;var m$17284;(m$17284=temp$17266[$index$17276]);(t0$17289=m$17284);if((($17247$17294=(t0$17289 instanceof Array))&&(((t1$17290=t0$17289.length)),((t1$17290===3)&&(t0$17289[0]==="assoc"))))){(k$17298=t0$17289[1]);(v$17299=t0$17289[2]);kv$17240.push([k$17298,v$17299]);}else{if(($17247$17294&&((t1$17290===2)&&(t0$17289[0]==="assoc")))){(k$17311=t0$17289[1]);kv$17240.push([k$17311,(void 0)]);}else{(t0$17289=$17707(RegExp("(?:^\\+((?:.*)))",""))(m$17284));if((t0$17289[0]&&(((t1$17290=t0$17289[1])),(((t2$17291=t1$17290.length)),(t2$17291===2))))){t1$17290[0];(m$17316=t1$17290[1]);(tag$17237=m$17316);}else{(t0$17289=$17707(RegExp("(?:^#((?:.*)))",""))(m$17284));if((t0$17289[0]&&(((t1$17290=t0$17289[1])),(((t2$17291=t1$17290.length)),(t2$17291===2))))){t1$17290[0];(m$17335=t1$17290[1]);(id$17239=m$17335);}else{(t0$17289=m$17284);if((typeof(t0$17289)==="string")){(s$17354=t0$17289);_classes$17238.push(s$17354);}else{$17744(m$17284,"/home/olivier/git/earl-grey/src/pp.eg",1823,2150);}}}}}}(accum$17242=function(){if((tag$17237==="raw")){return [];}else{return ["<",tag$17237];}}());if(id$17239){(accum$17242=accum$17242.concat(" id=\"",id$17239,"\""));}if(_classes$17238.length){(accum$17242=accum$17242.concat(" class=\"",quotify$16882(_classes$17238.join(" ")),"\""));}if(kv$17240){(acc$17377=[]);(temp$17382=kv$17240);($length$17387=temp$17382.length);($index$17392=0);$17374:for(;($index$17392<$length$17387);($index$17392++)){var k$17410;var v$17411;var t0$17405;var t1$17406;var m$17400;(m$17400=temp$17382[$index$17392]);(t0$17405=m$17400);if(((t0$17405 instanceof Array)&&(((t1$17406=t0$17405.length)),(t1$17406===2)))){(k$17410=t0$17405[0]);(v$17411=t0$17405[1]);acc$17377.push(((accum$17242=accum$17242.concat(function(){if((v$17411!==null)){return [" ",k$17410,"=\"",quotify$16882(v$17411),"\""];}else{return [" ",k$17410];}}()))));}else{$17744(m$17400,"/home/olivier/git/earl-grey/src/pp.eg",2414,2614);}}acc$17377;}(children2$17243=((($17429$17431=tag$17237)),function(){if(($17429$17431==="raw")){(acc$17444=[]);(temp$17449=children$17231);($length$17454=temp$17449.length);($index$17459=0);$17441:for(;($index$17459<$length$17454);($index$17459++)){var c$17485;var s$17476;var t0$17472;var m$17467;(m$17467=temp$17449[$index$17459]);(t0$17472=m$17467);if((typeof(t0$17472)==="string")){(s$17476=t0$17472);acc$17444.push(s$17476);}else{(c$17485=m$17467);acc$17444.push(HTML$16883(c$17485,default_tag$17166));}}return acc$17444;}else{(other$17490=$17429$17431);(acc$17495=[]);(temp$17500=children$17231);($length$17505=temp$17500.length);($index$17510=0);$17492:for(;($index$17510<$length$17505);($index$17510++)){var c$17526;var m$17518;(m$17518=temp$17500[$index$17510]);(c$17526=m$17518);acc$17495.push(HTML$16883(c$17526,default_tag$17166));}return acc$17495;}}()));($17236$17531=tag$17237);if(($17236$17531==="raw")){return accum$17242.concat(children2$17243).join("");}else{(other$17543=$17236$17531);(x$17546=[">"].concat(children2$17243).concat(["</",tag$17237,">"]));return accum$17242.concat(x$17546).join("");}}else{(other$17552=$17168$17174);return HTML$16883([true,String(other$17552)][1],default_tag$17166);}}}});(exports["pr_terminus"]=pr_terminus$16877);(exports["pr"]=pr$16878);(exports["<>"]=__lt____gt__$16879);(exports["repr"]=repr$16880);
