var $10092=function(type$10094){var f$10097;(f$10097=type$10094["::check"]);;if((f$10097===(void 0))){return function(value$10102){return (value$10102 instanceof type$10094);};}else{return function(value$10105){return f$10097.call(type$10094,value$10105);};}};
var $10107=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $10108=function(temp$10109$10111){var ph$10115;(ph$10115=temp$10109$10111);;var m$10113$10120;(m$10113$10120=ph$10115);;var bridge$10114$10125;var x$10129;(bridge$10114$10125=m$10113$10120);if((((typeof(bridge$10114$10125)==="string")&&((x$10129=bridge$10114$10125),true))||((typeof(bridge$10114$10125)==="number")&&((x$10129=bridge$10114$10125),true)))){return ["value",x$10129];}else{var other$10136;(other$10136=m$10113$10120);return other$10136["::serialize_ast"]();}};
var send$9955;(send$9955=function(obj$9960,temp$9958$9961){var ph$9965;var msg$9966;var t0$9968;(t0$9968=temp$9958$9961);(msg$9966=t0$9968);(ph$9965=t0$9968);;var m$9963$9972;(m$9963$9972=ph$9965);;var bridge$9964$9977;(bridge$9964$9977=m$9963$9972);if(((typeof(bridge$9964$9977)==="string")||(typeof(bridge$9964$9977)==="number"))){return obj$9960[msg$9966];}else{var other$9985;(other$9985=m$9963$9972);return obj$9960["::send"](msg$9966);}});;(Array[":::project"]=function(temp$9988$9990){var ph$9993;var value$9994;var t0$9996;(t0$9996=temp$9988$9990);(value$9994=t0$9996);(ph$9993=t0$9996);;var m$9992$10000;(m$9992$10000=ph$9993);;if($10092(Array)(m$9992$10000)){return [true,value$9994];}else{m$9992$10000;return [true,[value$9994]];}});(Array.prototype["::check"]=function(value$10014){if((value$10014 instanceof Array)){var i$10019;(i$10019=0);;$10017:for(;(i$10019<this.length);(i$10019++)){if(($10107(this,i$10019)!==$10107(value$10014,i$10019))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$10028){if((value$10028 instanceof Array)){var i$10033;(i$10033=0);;$10031:for(;(i$10033<this.length);(i$10033++)){if(($10107(this,i$10033)!==$10107(value$10028,i$10033))){return [true,[value$10028]];}}return [true,value$10028.slice(this.length)];}else{return [true,[value$10028]];}});(Array.prototype[":::deconstruct"]=function(value$10042){return [true,value$10042.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($10108));});(RegExp.prototype["::check"]=function(value$10047){return value$10047.match(this);});(RegExp.prototype[":::project"]=function(value$10050){var m$10052$10054;(m$10052$10054=value$10050.match(this));;var m$10062;if((m$10052$10054===null)){(m$10062=m$10052$10054);return [false,null];}else{var m$10067;(m$10067=m$10052$10054);return [true,m$10067];}});(RegExp.prototype[":::deconstruct"]=function(value$10070){var m$10072$10074;(m$10072$10074=value$10070.match(this));;var m$10082;if((m$10072$10074===null)){(m$10082=m$10072$10074);return [false,null];}else{var m$10087;(m$10087=m$10072$10074);return [true,m$10087];}});(Function.prototype["::send"]=function(args$10090){return this.apply(this,args$10090);});
var $10834=function(type$10836){return function(value$10839){var f$10842;(f$10842=type$10836[":::project"]);;if((f$10842===(void 0))){var f$10847;(f$10847=type$10836["::project"]);;if((f$10847===(void 0))){return [true,type$10836(value$10839)];}else{var rval$10852;(rval$10852=false);;try{(rval$10852=[true,f$10847(value$10839)]);}catch(excv$10858){var e$10864;(e$10864=excv$10858);(rval$10852=[false,null]);}return rval$10852;}}else{return f$10842.call(type$10836,value$10839);}};};
var $10866=function(dest$10868,values$10869){var k$10874;(k$10874=null);$10872:for(k$10874 in values$10869){if(values$10869.hasOwnProperty(k$10874)){(dest$10868[k$10874]=values$10869[k$10874]);}}return dest$10868;};
var $10878=function(){var $10879$10881;($10879$10881=function(temp$10884$10887,temp$10885$10888){var classes$10890;var children$10891;var t0$10893;(t0$10893=$10834(Array)(temp$10884$10887));if(t0$10893[0]){(classes$10890=t0$10893[1]);;}else{throw Error("Mismatch");}var t0$10898;(t0$10898=$10834(Array)(temp$10885$10888));if(t0$10898[0]){(children$10891=t0$10898[1]);;}else{throw Error("Mismatch");}var it$0$10903;(it$0$10903=function(){if((!$10092($10879$10881)(this))){return Object.create($10879$10881.prototype);}else{return this;}}());;(it$0$10903["classes"]=classes$10890.sort());(it$0$10903["children"]=children$10891);return it$0$10903;});;$10866(function(){var accum$10911;(accum$10911=({}));(accum$10911["::check"]=function(x$10915){return ((x$10915&&x$10915.classes)&&x$10915.children);});return accum$10911;}(),function(){var accum$10918;(accum$10918=({}));(accum$10918["::deconstruct"]=function(x$10922){return [x$10922.classes,x$10922.children];});return accum$10918;}());($10879$10881.prototype["::check"]=function(n$10927){var it$0$10930;(it$0$10930=this);;var temp$10938;(temp$10938=it$0$10930.classes);;var len$10943;(len$10943=temp$10938.length);;var i$10948;(i$10948=0);;$10935:for(;(i$10948<len$10943);(i$10948++)){var m$10956;(m$10956=temp$10938[i$10948]);;var c$10964;(c$10964=m$10956);if((n$10927.classes.indexOf(c$10964)===(-1))){return false;}else{false;;}}return true;});$10866($10879$10881,$10866(function(){var accum$10970;(accum$10970=({}));(accum$10970["::check"]=function(x$10974){return ((x$10974&&x$10974.classes)&&x$10974.children);});return accum$10970;}(),function(){var accum$10977;(accum$10977=({}));(accum$10977["::deconstruct"]=function(x$10981){return [x$10981.classes,x$10981.children];});return accum$10977;}()));return $10879$10881;}();
var $10983=function(temp$10984$10986,key$10987){var ph$10991;(ph$10991=temp$10984$10986);;var m$10989$10996;(m$10989$10996=ph$10991);;var bridge$10990$11001;(bridge$10990$11001=m$10989$10996);if(((bridge$10990$11001===null)||(bridge$10990$11001===(void 0)))){return false;}else{var x$11009;if((typeof(m$10989$10996)==="string")){(x$11009=m$10989$10996);return (key$10987 in String.prototype);}else{var x$11014;if((typeof(m$10989$10996)==="number")){(x$11014=m$10989$10996);return (key$10987 in Number.prototype);}else{var x$11019;(x$11019=m$10989$10996);return (key$10987 in x$11019);}}}};var accum$10186;var accum$10193;var accum$10245;var accum$10252;var $10140$10141;var items$10142;var Node$10143;var pr_terminus$10144;var pr$10145;var __lt____gt__$10146;var repr$10147;var escape_html$10148;var quotify$10149;var HTML$10150;($10140$10141=require("./util"));;(items$10142=$10140$10141.items);;(Node$10143=function(temp$10159$10162,temp$10160$10163){var t0$10168;var t0$10173;var it$0$10178;var classes$10165;var children$10166;(t0$10168=$10834(Array)(temp$10159$10162));if(t0$10168[0]){(classes$10165=t0$10168[1]);;}else{throw Error("Mismatch");}(t0$10173=$10834(Array)(temp$10160$10163));if(t0$10173[0]){(children$10166=t0$10173[1]);;}else{throw Error("Mismatch");}(it$0$10178=function(){if((!$10092(Node$10143)(this))){return Object.create(Node$10143.prototype);}else{return this;}}());;(it$0$10178["classes"]=classes$10165.sort());(it$0$10178["children"]=children$10166);return it$0$10178;});;$10866(((accum$10186=({})),((accum$10186["::check"]=function(x$10190){return ((x$10190&&x$10190.classes)&&x$10190.children);}),accum$10186)),((accum$10193=({})),((accum$10193["::deconstruct"]=function(x$10197){return [x$10197.classes,x$10197.children];}),accum$10193)));(Node$10143.prototype["::check"]=function(n$10202){var i$10223;var len$10218;var temp$10213;var it$0$10205;(it$0$10205=this);;(temp$10213=it$0$10205.classes);;(len$10218=temp$10213.length);;(i$10223=0);;$10210:for(;(i$10223<len$10218);(i$10223++)){var c$10239;var m$10231;(m$10231=temp$10213[i$10223]);;(c$10239=m$10231);if((n$10202.classes.indexOf(c$10239)===(-1))){return false;}else{false;;}}return true;});$10866(Node$10143,$10866(((accum$10245=({})),((accum$10245["::check"]=function(x$10249){return ((x$10249&&x$10249.classes)&&x$10249.children);}),accum$10245)),((accum$10252=({})),((accum$10252["::deconstruct"]=function(x$10256){return [x$10256.classes,x$10256.children];}),accum$10252))));Node$10143;(pr_terminus$10144=function(node$10261){var r$10264;var pre$10265;var post$10266;(r$10264=HTML$10150(node$10261,"span"));;(pre$10265=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));;(post$10266=("</div>"+String.fromCharCode(7)));;return console.log(((pre$10265+r$10264)+post$10266));});;(pr$10145=function(temp$10279$10281,r$10282){var x$10303;var n$10298;var m$10284$10290;var ph$10285;(ph$10285=temp$10279$10281);;(m$10284$10290=ph$10285);;if($10092(Node$10143)(m$10284$10290)){(n$10298=m$10284$10290);return pr_terminus$10144(n$10298);}else{(x$10303=m$10284$10290);return pr_terminus$10144((r$10282||repr$10147)(x$10303));}});;(__lt____gt__$10146=function(temp$10308$10310,x$10311){if((temp$10308$10310===null)){;}else{throw Error("Mismatch");}return pr$10145(x$10311);});;(repr$10147=function(){var i$10395;var len$10390;var temp$10385;var acc$10380;var i$10438;var len$10433;var temp$10428;var acc$10423;var other$10465;var entries$10375;var $10323$10348;var t0$10346;var x$10336;var recur$10337;var ph$10322$10338;var t0$10330;var t1$10331;var t2$10332;var m$10321$10325;(m$10321$10325=arguments);;(t0$10330=m$10321$10325.length);if((((t0$10330>=1)&&(t0$10330<=2))&&((t1$10331=m$10321$10325[0]),((x$10336=t1$10331),((ph$10322$10338=t1$10331),((t2$10332=function(){if((1>=t0$10330)){return repr$10147;}else{return m$10321$10325[1];}}()),$10092(Function)(t2$10332))))))){(recur$10337=t2$10332);if((ph$10322$10338===true)){return $10878(["special","true"],"true");}else{if((ph$10322$10338===false)){return $10878(["special","false"],"false");}else{if((ph$10322$10338===null)){return $10878(["special","nil"],"null");}else{if((ph$10322$10338===(void 0))){return $10878(["special","nil"],"undefined");}else{if((typeof(ph$10322$10338)==="number")){return $10878(["num"],String(x$10336));}else{if((typeof(ph$10322$10338)==="string")){return $10878(["str"],x$10336);}else{(t0$10346=ph$10322$10338);if($10092(Array)(t0$10346)){(entries$10375=t0$10346);return $10878(["sequence"],(((acc$10380=[])),(((temp$10385=entries$10375)),(((len$10390=temp$10385.length)),(((i$10395=0)),function(){$10378:for(;(i$10395<len$10390);(i$10395++)){var x$10411;var m$10403;(m$10403=temp$10385[i$10395]);;(x$10411=m$10403);acc$10380.push(recur$10337(x$10411,repr$10147));}}()))),acc$10380));}else{ph$10322$10338;if(x$10336["::repr"]){return x$10336["::repr"](recur$10337);}else{if((Object.getPrototypeOf(x$10336)===Object.prototype)){return $10878(["table"],(((acc$10423=[])),(((temp$10428=items$10142(x$10336))),(((len$10433=temp$10428.length)),(((i$10438=0)),function(){$10421:for(;(i$10438<len$10433);(i$10438++)){var k$10456;var v$10457;var t0$10451;var t1$10452;var m$10446;(m$10446=temp$10428[i$10438]);;(t0$10451=m$10446);if(((t0$10451 instanceof Array)&&((t1$10452=t0$10451.length),(t1$10452===2)))){(k$10456=t0$10451[0]);(v$10457=t0$10451[1]);acc$10423.push($10878(["pairing"],[recur$10337(k$10456,repr$10147),recur$10337(v$10457,repr$10147)]));}else{false;;}}}()))),acc$10423));}else{(other$10465=ph$10322$10338);return $10878(["unknown"],other$10465.toString());}}}}}}}}}}else{throw Error("mismatch!!");}});;(escape_html$10148=function(temp$10472$10474){var t0$10478;var repl$10483;var s$10476;(t0$10478=[true,String(temp$10472$10474)]);if(t0$10478[0]){(s$10476=t0$10478[1]);;}else{throw Error("Mismatch");}(repl$10483=({"&":"&amp;","<":"&lt;",">":"&gt;"}));;return s$10476.replace(RegExp("[&<>]","g"),function(x$10488){return $10107(repl$10483,x$10488);});});;(quotify$10149=function(temp$10493$10495){var t0$10499;var s$10497;(t0$10499=[true,String(temp$10493$10495)]);if(t0$10499[0]){(s$10497=t0$10499[1]);;}else{throw Error("Mismatch");}return s$10497.replace(RegExp("[\"\\\\]","g"),function(x$10504){return ("\\"+x$10504);});});;(HTML$10150=function(temp$10509$10511,default_tag$10512){var i$10554;var len$10549;var temp$10544;var acc$10539;var i$10618;var len$10613;var temp$10608;var i$10691;var len$10686;var temp$10681;var acc$10676;var i$10745;var len$10740;var temp$10735;var acc$10730;var i$10790;var len$10785;var temp$10780;var acc$10775;var other$10771;var m$10716$10718;var x$10824;var other$10821;var m$10580$10809;var tag$10581;var _classes$10582;var id$10583;var kv$10584;var sub$10585;var accum$10586;var other$10830;var classes$10574;var children$10575;var children$10533;var s$10528;var m$10514$10520;var ph$10515;(ph$10515=temp$10509$10511);;(m$10514$10520=ph$10515);;if((typeof(m$10514$10520)==="string")){(s$10528=m$10514$10520);return escape_html$10148(s$10528);}else{if($10092(Array)(m$10514$10520)){(children$10533=m$10514$10520);return (((acc$10539=[])),(((temp$10544=children$10533)),(((len$10549=temp$10544.length)),(((i$10554=0)),function(){$10537:for(;(i$10554<len$10549);(i$10554++)){var child$10570;var m$10562;(m$10562=temp$10544[i$10554]);;(child$10570=m$10562);acc$10539.push(HTML$10150(child$10570,default_tag$10512));}}()))),acc$10539).join("");}else{if(($10092(Node$10143)(m$10514$10520)&&($10983(m$10514$10520,"classes")&&((classes$10574=m$10514$10520.classes),$10983(m$10514$10520,"children"))))){(children$10575=m$10514$10520.children);(tag$10581=(default_tag$10512||"span"));;(_classes$10582=[]);;(id$10583=null);;(kv$10584=[]);;(sub$10585=[]);;(temp$10608=classes$10574);;(len$10613=temp$10608.length);;(i$10618=0);;$10602:for(;(i$10618<len$10613);(i$10618++)){var s$10663;var m$10657;var m$10651;var k$10646;var k$10639;var v$10640;var $10603$10634;var $10604$10635;var $10605$10636;var t0$10631;var t1$10632;var m$10626;(m$10626=temp$10608[i$10618]);;(t0$10631=m$10626);if((($10604$10635=(t0$10631 instanceof Array))&&((t1$10632=t0$10631.length),((t1$10632===3)&&(t0$10631[0]==="assoc"))))){(k$10639=t0$10631[1]);(v$10640=t0$10631[2]);kv$10584.push([k$10639,v$10640]);}else{if(($10604$10635&&((t1$10632===2)&&(t0$10631[0]==="assoc")))){(k$10646=t0$10631[1]);kv$10584.push([k$10646,(void 0)]);}else{(t0$10631=m$10626);if(($10092(RegExp("(?:^\\+((?:.*)))",""))(t0$10631)&&((t1$10632=t0$10631.length),(t1$10632===2)))){t0$10631[0];(m$10651=t0$10631[1]);(tag$10581=m$10651);}else{(t0$10631=m$10626);if(($10092(RegExp("(?:^#((?:.*)))",""))(t0$10631)&&((t1$10632=t0$10631.length),(t1$10632===2)))){t0$10631[0];(m$10657=t0$10631[1]);(id$10583=m$10657);}else{(t0$10631=m$10626);if((typeof(t0$10631)==="string")){(s$10663=t0$10631);_classes$10582.push(s$10663);}else{false;;}}}}}}(accum$10586=function(){if((tag$10581==="raw")){return [];}else{return ["<",tag$10581];}}());;if(id$10583){(accum$10586=accum$10586.concat(" id=\"",id$10583,"\""));}if(_classes$10582.length){(accum$10586=accum$10586.concat(" class=\"",quotify$10149(_classes$10582.join(" ")),"\""));}if(kv$10584){(acc$10676=[]);;(temp$10681=kv$10584);;(len$10686=temp$10681.length);;(i$10691=0);;$10674:for(;(i$10691<len$10686);(i$10691++)){var k$10709;var v$10710;var t0$10704;var t1$10705;var m$10699;(m$10699=temp$10681[i$10691]);;(t0$10704=m$10699);if(((t0$10704 instanceof Array)&&((t1$10705=t0$10704.length),(t1$10705===2)))){(k$10709=t0$10704[0]);(v$10710=t0$10704[1]);acc$10676.push((accum$10586=accum$10586.concat(function(){if((v$10710!==null)){return [" ",k$10709,"=\"",quotify$10149(v$10710),"\""];}else{return [" ",k$10709];}}())));}else{false;;}}acc$10676;}(children$10575=(((m$10716$10718=tag$10581)),function(){if((m$10716$10718==="raw")){(acc$10730=[]);;(temp$10735=children$10575);;(len$10740=temp$10735.length);;(i$10745=0);;$10728:for(;(i$10745<len$10740);(i$10745++)){var c$10767;var s$10762;var t0$10758;var m$10753;(m$10753=temp$10735[i$10745]);;(t0$10758=m$10753);if((typeof(t0$10758)==="string")){(s$10762=t0$10758);acc$10730.push(s$10762);}else{(c$10767=m$10753);acc$10730.push(HTML$10150(c$10767,default_tag$10512));}}return acc$10730;}else{(other$10771=m$10716$10718);(acc$10775=[]);;(temp$10780=children$10575);;(len$10785=temp$10780.length);;(i$10790=0);;$10773:for(;(i$10790<len$10785);(i$10790++)){var c$10806;var m$10798;(m$10798=temp$10780[i$10790]);;(c$10806=m$10798);acc$10775.push(HTML$10150(c$10806,default_tag$10512));}return acc$10775;}}()));(m$10580$10809=tag$10581);;if((m$10580$10809==="raw")){return accum$10586.concat(children$10575).join("");}else{(other$10821=m$10580$10809);(x$10824=[">"].concat(children$10575).concat(["</",tag$10581,">"]));;return accum$10586.concat(x$10824).join("");}}else{(other$10830=m$10514$10520);return HTML$10150([true,String(other$10830)][1],default_tag$10512);}}}});;(exports["pr_terminus"]=pr_terminus$10144);(exports["pr"]=pr$10145);(exports["<>"]=__lt____gt__$10146);(exports["repr"]=repr$10147);(exports["Node"]=Node$10143);
