var $16633=function(type$16635){var f$16638;(f$16638=type$16635["::check"]);if((f$16638===(void 0))){return function(value$16643){return (value$16643 instanceof type$16635);};}else{return function(value$16646){return f$16638.call(type$16635,value$16646);};}};
var $16648=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $16649=function(dest$16651,values$16652){var k$16657;(k$16657=null);$16655:for(k$16657 in values$16652){if(values$16652.hasOwnProperty(k$16657)){(dest$16651[k$16657]=values$16652[k$16657]);}}return dest$16651;};
var $16664=function($16665$16667){var ph$16671;(ph$16671=$16665$16667);var $16669$16676;($16669$16676=ph$16671);var bridge$16670$16681;var x$16685;(bridge$16670$16681=$16669$16676);if((((typeof(bridge$16670$16681)==="string")&&((x$16685=bridge$16670$16681),true))||((typeof(bridge$16670$16681)==="number")&&((x$16685=bridge$16670$16681),true)))){return ["value",x$16685];}else{var other$16695;(other$16695=$16669$16676);return other$16695["::serialize_ast"]();}};
var send$16440;(send$16440=function(obj$16445,$16443$16446){var ph$16450;var msg$16451;var t0$16453;(t0$16453=$16443$16446);(msg$16451=t0$16453);(ph$16450=t0$16453);var $16448$16460;($16448$16460=ph$16450);var bridge$16449$16465;(bridge$16449$16465=$16448$16460);if(((typeof(bridge$16449$16465)==="string")||(typeof(bridge$16449$16465)==="number"))){return obj$16445[msg$16451];}else{var other$16476;(other$16476=$16448$16460);return obj$16445["::send"](msg$16451);}});(Array[":::project"]=function($16481$16483){var ph$16486;var value$16487;var t0$16489;(t0$16489=$16481$16483);(value$16487=t0$16489);(ph$16486=t0$16489);var $16485$16496;($16485$16496=ph$16486);if($16633(Array)($16485$16496)){return [true,value$16487];}else{$16485$16496;return [true,[value$16487]];}});(Array.prototype["::check"]=function(value$16513){if((value$16513 instanceof Array)){var i$16518;(i$16518=0);$16516:for(;(i$16518<this.length);(i$16518++)){if(($16648(this,i$16518)!==$16648(value$16513,i$16518))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $16649(this.slice(0),this);});(Array.prototype[":::project"]=function(value$16535){if((value$16535 instanceof Array)){var i$16540;(i$16540=0);$16538:for(;(i$16540<this.length);(i$16540++)){if(($16648(this,i$16540)!==$16648(value$16535,i$16540))){return [true,[value$16535]];}}return [true,value$16535.slice(this.length)];}else{return [true,[value$16535]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($16664));});(RegExp.prototype["::check"]=function($16556$16558){var ph$16561;(ph$16561=$16556$16558);var $16560$16566;($16560$16566=ph$16561);var value$16574;if((typeof($16560$16566)==="string")){(value$16574=$16560$16566);if(value$16574.match(this)){return true;}else{return false;}}else{var other$16579;(other$16579=$16560$16566);return false;}});(RegExp.prototype[":::project"]=function($16584$16586){var ph$16589;(ph$16589=$16584$16586);var $16588$16594;($16588$16594=ph$16589);var value$16602;if((typeof($16588$16594)==="string")){(value$16602=$16588$16594);var $16605$16607;($16605$16607=value$16602.match(this));var m$16615;if(($16605$16607===null)){(m$16615=$16605$16607);return [false,null];}else{var m$16620;(m$16620=$16605$16607);return [true,m$16620];}}else{var other$16624;(other$16624=$16588$16594);return [false,null];}});(Function.prototype["::send"]=function(args$16630){return this.apply(this,args$16630);});
var $17529=function(type$17531){return function(value$17534){var f$17537;(f$17537=type$17531[":::project"]);if((f$17537===(void 0))){(f$17537=type$17531["::project"]);if((f$17537===(void 0))){return [true,type$17531(value$17534)];}else{var rval$17546;(rval$17546=false);try{(rval$17546=[true,f$17537(value$17534)]);}catch(excv$17555){var e$17561;(e$17561=excv$17555);(rval$17546=[false,null]);}return rval$17546;}}else{return f$17537.call(type$17531,value$17534);}};};
var $17778=function(arr$17780){var results$17784;var l$17785;(results$17784=[]);(l$17785=arr$17780.length);var i$17793;(i$17793=0);$17783:for(;(i$17793<l$17785);(i$17793++)){results$17784.push([i$17793,$16648(arr$17780,i$17793)]);}return results$17784;};
var $17582=function(){var $17583$17585;($17583$17585=function(tags$17589){var it$0$17592;(it$0$17592=function(){if((!$16633($17583$17585)(this))){return Object.create($17583$17585.prototype);}else{return this;}}());(it$0$17592["tags"]=tags$17589);return it$0$17592;});($17583$17585.prototype["create"]=function(){var $17604$17606;($17604$17606=arguments);var t0$17611;var message$17615;var args$17616;(t0$17611=$17604$17606.length);if((t0$17611>=0)){(message$17615=function(){if((0>=t0$17611)){return "";}else{return $17604$17606[0];}}());(args$17616=Array.prototype.slice.call($17604$17606,1));var it$0$17623;(it$0$17623=this);var self$17628;(self$17628=this);var e$17633;(e$17633=Error(message$17615));(e$17633["::tags"]=it$0$17623.tags);(e$17633["args"]=args$17616);var temp$17647;(temp$17647=$17778(args$17616));var $length$17652;($length$17652=temp$17647.length);var $index$17657;($index$17657=0);$17634:for(;($index$17657<$length$17652);($index$17657++)){var m$17665;(m$17665=temp$17647[$index$17657]);var t0$17670;var t1$17671;var i$17675;var arg$17676;(t0$17670=m$17665);if(((t0$17670 instanceof Array)&&(((t1$17671=t0$17670.length)),(t1$17671===2)))){(i$17675=t0$17670[0]);(arg$17676=t0$17670[1]);(e$17633[i$17675]=arg$17676);}else{$17566(m$17665);}}(e$17633["length"]=args$17616.length);(e$17633["name"]=["E"].concat(it$0$17623.tags).join("."));return e$17633;}else{$17566($17604$17606);}});($17583$17585.prototype["::check"]=function(e$17702){var it$0$17705;(it$0$17705=this);var self$17710;(self$17710=this);var tags$17715;if(((!e$17702)||(!$16633(Error)(e$17702)))){return false;}(tags$17715=(e$17702["::tags"]||[]));var temp$17724;(temp$17724=it$0$17705.tags);var $length$17729;($length$17729=temp$17724.length);var $index$17734;($index$17734=0);$17716:for(;($index$17734<$length$17729);($index$17734++)){var m$17742;(m$17742=temp$17724[$index$17734]);var tag$17750;(tag$17750=m$17742);if((tags$17715.indexOf(tag$17750)===-1)){return false;}else{false;}}return true;});($17583$17585.prototype["::deconstruct"]=function(e$17758){var it$0$17761;(it$0$17761=this);var self$17766;(self$17766=this);return e$17758.args;});$16649($17583$17585,$16649(function(){var accum$17771;(accum$17771=({}));(accum$17771["::name"]="$17583");return accum$17771;}(),function(){var accum$17775;(accum$17775=({}));(accum$17775["::egclass"]=true);return accum$17775;}()));return $17583$17585;}();
var $17566=function(value$17568,url$17569,start$17570,end$17571){var err$17574;(err$17574=$17582(["match"]).create("Could not find a match for value",({"value":value$17568})));if(url$17569){(err$17574["location"]=["location",url$17569,start$17570,end$17571]);}throw err$17574;};
var $17390=function(){var $17391$17393;($17391$17393=function($17396$17399,$17397$17400){var classes$17402;var children$17403;var t0$17405;(t0$17405=$17529(Array)($17396$17399));if(t0$17405[0]){(classes$17402=t0$17405[1]);}else{$17566($17396$17399);}var t0$17413;(t0$17413=$17529(Array)($17397$17400));if(t0$17413[0]){(children$17403=t0$17413[1]);}else{$17566($17397$17400);}var it$0$17421;(it$0$17421=function(){if((!$16633($17391$17393)(this))){return Object.create($17391$17393.prototype);}else{return this;}}());(it$0$17421["classes"]=classes$17402.sort());(it$0$17421["children"]=children$17403);return it$0$17421;});$16649(function(){var accum$17435;(accum$17435=({}));(accum$17435["::check"]=function(x$17439){return ((x$17439&&x$17439.classes)&&x$17439.children);});return accum$17435;}(),$16649(function(){var accum$17442;(accum$17442=({}));(accum$17442["::deconstruct"]=function(x$17446){return [x$17446.classes,x$17446.children];});return accum$17442;}(),$16649(function(){var accum$17449;(accum$17449=({}));(accum$17449["::name"]="$17391");return accum$17449;}(),function(){var accum$17453;(accum$17453=({}));(accum$17453["::egclass"]=true);return accum$17453;}())));($17391$17393.prototype["::check"]=function(n$17459){var it$0$17462;(it$0$17462=this);var self$17467;(self$17467=this);var temp$17476;(temp$17476=it$0$17462.classes);var $length$17481;($length$17481=temp$17476.length);var $index$17486;($index$17486=0);$17472:for(;($index$17486<$length$17481);($index$17486++)){var m$17494;(m$17494=temp$17476[$index$17486]);var c$17502;(c$17502=m$17494);if((n$17459.classes.indexOf(c$17502)===-1)){return false;}else{false;}}return true;});$16649($17391$17393,$16649(function(){var accum$17508;(accum$17508=({}));(accum$17508["::check"]=function(x$17512){return ((x$17512&&x$17512.classes)&&x$17512.children);});return accum$17508;}(),$16649(function(){var accum$17515;(accum$17515=({}));(accum$17515["::deconstruct"]=function(x$17519){return [x$17519.classes,x$17519.children];});return accum$17515;}(),$16649(function(){var accum$17522;(accum$17522=({}));(accum$17522["::name"]="$17391");return accum$17522;}(),function(){var accum$17526;(accum$17526=({}));(accum$17526["::egclass"]=true);return accum$17526;}()))));return $17391$17393;}();
var $17800=function(obj$17802){var results$17806;(results$17806=[]);var k$17811;(k$17811=null);$17805:for(k$17811 in obj$17802){if(Object.prototype.hasOwnProperty.call(obj$17802,k$17811)){results$17806.push([k$17811,$16648(obj$17802,k$17811)]);}}return results$17806;};
var $17815=function($17816$17818,key$17819){var ph$17823;(ph$17823=$17816$17818);var $17821$17828;($17821$17828=ph$17823);var bridge$17822$17833;(bridge$17822$17833=$17821$17828);if(((bridge$17822$17833===null)||(bridge$17822$17833===(void 0)))){return false;}else{var x$17844;if((typeof($17821$17828)==="string")){(x$17844=$17821$17828);return (key$17819 in String.prototype);}else{var x$17849;if((typeof($17821$17828)==="number")){(x$17849=$17821$17828);return (key$17819 in Number.prototype);}else{var x$17854;(x$17854=$17821$17828);return (key$17819 in x$17854);}}}};var pr_terminus$16699;var pr$16700;var __lt____gt__$16701;var repr$16702;var escape_html$16703;var quotify$16704;var HTML$16705;(pr_terminus$16699=function(node$16709){var r$16712;var pre$16713;var post$16714;(r$16712=HTML$16705(node$16709,"span"));(pre$16713=(String.fromCharCode(27)+"[?0;7y+h <div class=\"ug\">"));(post$16714=("</div>"+String.fromCharCode(7)));return console.log(((pre$16713+r$16712)+post$16714));});(pr$16700=function($16727$16729,r$16730){var x$16751;var n$16746;var $16732$16738;var ph$16733;(ph$16733=$16727$16729);($16732$16738=ph$16733);if($16633($17390)($16732$16738)){(n$16746=$16732$16738);return pr_terminus$16699(n$16746);}else{(x$16751=$16732$16738);return pr_terminus$16699((r$16730||repr$16702)(x$16751));}});(__lt____gt__$16701=function($16756$16758,x$16759){if(($16756$16758===null)){}else{$17566($16756$16758);}return pr$16700(x$16759);});(repr$16702=function(){var $index$16856;var $length$16851;var temp$16846;var acc$16841;var $index$16901;var $length$16896;var temp$16891;var acc$16886;var other$16935;var entries$16832;var $16771$16805;var t0$16803;var x$16784;var recur$16785;var $16770$16786;var t0$16778;var t1$16779;var t2$16780;var $16769$16773;($16769$16773=arguments);(t0$16778=$16769$16773.length);if((((t0$16778>=1)&&(t0$16778<=2))&&(((t1$16779=$16769$16773[0])),((x$16784=t1$16779),(($16770$16786=t1$16779),(((t2$16780=function(){if((1>=t0$16778)){return repr$16702;}else{return $16769$16773[1];}}())),$16633(Function)(t2$16780))))))){(recur$16785=t2$16780);if(($16770$16786===true)){return $17390(["special","true"],"true");}else{if(($16770$16786===false)){return $17390(["special","false"],"false");}else{if(($16770$16786===null)){return $17390(["special","nil"],"null");}else{if(($16770$16786===(void 0))){return $17390(["special","nil"],"undefined");}else{if((typeof($16770$16786)==="number")){return $17390(["num"],String(x$16784));}else{if((typeof($16770$16786)==="string")){return $17390(["str"],x$16784);}else{(t0$16803=$16770$16786);if($16633(Array)(t0$16803)){(entries$16832=t0$16803);return $17390(["sequence"],(((acc$16841=[])),(((temp$16846=entries$16832)),((($length$16851=temp$16846.length)),((($index$16856=0)),function(){$16838:for(;($index$16856<$length$16851);($index$16856++)){var x$16872;var m$16864;(m$16864=temp$16846[$index$16856]);(x$16872=m$16864);acc$16841.push(recur$16785(x$16872,repr$16702));}}()))),acc$16841));}else{$16770$16786;if(x$16784["::repr"]){return x$16784["::repr"](recur$16785);}else{if((Object.getPrototypeOf(x$16784)===Object.prototype)){return $17390(["+table","object"],(((acc$16886=[])),(((temp$16891=$17800(x$16784))),((($length$16896=temp$16891.length)),((($index$16901=0)),function(){$16883:for(;($index$16901<$length$16896);($index$16901++)){var k$16919;var v$16920;var t0$16914;var t1$16915;var m$16909;(m$16909=temp$16891[$index$16901]);(t0$16914=m$16909);if(((t0$16914 instanceof Array)&&(((t1$16915=t0$16914.length)),(t1$16915===2)))){(k$16919=t0$16914[0]);(v$16920=t0$16914[1]);acc$16886.push($17390(["+tr"],[$17390(["+th"],recur$16785(k$16919,repr$16702)),$17390(["+td"],recur$16785(v$16920,repr$16702))]));}else{$17566(m$16909,"/home/olivier/git/earl-grey/src/pp.eg",914,1244);}}}()))),acc$16886));}else{(other$16935=$16770$16786);return $17390(["unknown"],other$16935.toString());}}}}}}}}}}else{$17566($16769$16773);}});(escape_html$16703=function($16942$16944){var t0$16948;var repl$16956;var s$16946;(t0$16948=[true,String($16942$16944)]);if(t0$16948[0]){(s$16946=t0$16948[1]);}else{$17566($16942$16944);}(repl$16956=({"&":"&amp;","<":"&lt;",">":"&gt;"}));return s$16946.replace(RegExp("[&<>]","g"),function(x$16961){return $16648(repl$16956,x$16961);});});(quotify$16704=function($16966$16968){var t0$16972;var s$16970;(t0$16972=[true,String($16966$16968)]);if(t0$16972[0]){(s$16970=t0$16972[1]);}else{$17566($16966$16968);}return s$16970.replace(RegExp("[\"\\\\]","g"),function(x$16980){return ("\\"+x$16980);});});(HTML$16705=function($16985$16987,default_tag$16988){var $index$17031;var $length$17026;var temp$17021;var acc$17016;var $index$17098;var $length$17093;var temp$17088;var $index$17214;var $length$17209;var temp$17204;var acc$17199;var $index$17281;var $length$17276;var temp$17271;var acc$17266;var $index$17332;var $length$17327;var temp$17322;var acc$17317;var other$17312;var $17251$17253;var x$17368;var other$17365;var $17058$17353;var tag$17059;var _classes$17060;var id$17061;var kv$17062;var sub$17063;var accum$17064;var children2$17065;var other$17374;var classes$17052;var children$17053;var children$17009;var s$17004;var $16990$16996;var ph$16991;(ph$16991=$16985$16987);($16990$16996=ph$16991);if((typeof($16990$16996)==="string")){(s$17004=$16990$16996);return escape_html$16703(s$17004);}else{if($16633(Array)($16990$16996)){(children$17009=$16990$16996);return (((acc$17016=[])),(((temp$17021=children$17009)),((($length$17026=temp$17021.length)),((($index$17031=0)),function(){$17013:for(;($index$17031<$length$17026);($index$17031++)){var child$17047;var m$17039;(m$17039=temp$17021[$index$17031]);(child$17047=m$17039);acc$17016.push(HTML$16705(child$17047,default_tag$16988));}}()))),acc$17016).join("");}else{if(($16633($17390)($16990$16996)&&($17815($16990$16996,"classes")&&((classes$17052=$16990$16996.classes),$17815($16990$16996,"children"))))){(children$17053=$16990$16996.children);(tag$17059=(default_tag$16988||"span"));(_classes$17060=[]);(id$17061=null);(kv$17062=[]);(sub$17063=[]);(temp$17088=classes$17052);($length$17093=temp$17088.length);($index$17098=0);$17066:for(;($index$17098<$length$17093);($index$17098++)){var s$17176;var m$17157;var m$17138;var k$17133;var k$17120;var v$17121;var $17068$17115;var $17069$17116;var $17070$17117;var t0$17111;var t1$17112;var t2$17113;var m$17106;(m$17106=temp$17088[$index$17098]);(t0$17111=m$17106);if((($17069$17116=(t0$17111 instanceof Array))&&(((t1$17112=t0$17111.length)),((t1$17112===3)&&(t0$17111[0]==="assoc"))))){(k$17120=t0$17111[1]);(v$17121=t0$17111[2]);kv$17062.push([k$17120,v$17121]);}else{if(($17069$17116&&((t1$17112===2)&&(t0$17111[0]==="assoc")))){(k$17133=t0$17111[1]);kv$17062.push([k$17133,(void 0)]);}else{(t0$17111=$17529(RegExp("(?:^\\+((?:.*)))",""))(m$17106));if((t0$17111[0]&&(((t1$17112=t0$17111[1])),(((t2$17113=t1$17112.length)),(t2$17113===2))))){t1$17112[0];(m$17138=t1$17112[1]);(tag$17059=m$17138);}else{(t0$17111=$17529(RegExp("(?:^#((?:.*)))",""))(m$17106));if((t0$17111[0]&&(((t1$17112=t0$17111[1])),(((t2$17113=t1$17112.length)),(t2$17113===2))))){t1$17112[0];(m$17157=t1$17112[1]);(id$17061=m$17157);}else{(t0$17111=m$17106);if((typeof(t0$17111)==="string")){(s$17176=t0$17111);_classes$17060.push(s$17176);}else{$17566(m$17106,"/home/olivier/git/earl-grey/src/pp.eg",1823,2150);}}}}}}(accum$17064=function(){if((tag$17059==="raw")){return [];}else{return ["<",tag$17059];}}());if(id$17061){(accum$17064=accum$17064.concat(" id=\"",id$17061,"\""));}if(_classes$17060.length){(accum$17064=accum$17064.concat(" class=\"",quotify$16704(_classes$17060.join(" ")),"\""));}if(kv$17062){(acc$17199=[]);(temp$17204=kv$17062);($length$17209=temp$17204.length);($index$17214=0);$17196:for(;($index$17214<$length$17209);($index$17214++)){var k$17232;var v$17233;var t0$17227;var t1$17228;var m$17222;(m$17222=temp$17204[$index$17214]);(t0$17227=m$17222);if(((t0$17227 instanceof Array)&&(((t1$17228=t0$17227.length)),(t1$17228===2)))){(k$17232=t0$17227[0]);(v$17233=t0$17227[1]);acc$17199.push(((accum$17064=accum$17064.concat(function(){if((v$17233!==null)){return [" ",k$17232,"=\"",quotify$16704(v$17233),"\""];}else{return [" ",k$17232];}}()))));}else{$17566(m$17222,"/home/olivier/git/earl-grey/src/pp.eg",2414,2614);}}acc$17199;}(children2$17065=((($17251$17253=tag$17059)),function(){if(($17251$17253==="raw")){(acc$17266=[]);(temp$17271=children$17053);($length$17276=temp$17271.length);($index$17281=0);$17263:for(;($index$17281<$length$17276);($index$17281++)){var c$17307;var s$17298;var t0$17294;var m$17289;(m$17289=temp$17271[$index$17281]);(t0$17294=m$17289);if((typeof(t0$17294)==="string")){(s$17298=t0$17294);acc$17266.push(s$17298);}else{(c$17307=m$17289);acc$17266.push(HTML$16705(c$17307,default_tag$16988));}}return acc$17266;}else{(other$17312=$17251$17253);(acc$17317=[]);(temp$17322=children$17053);($length$17327=temp$17322.length);($index$17332=0);$17314:for(;($index$17332<$length$17327);($index$17332++)){var c$17348;var m$17340;(m$17340=temp$17322[$index$17332]);(c$17348=m$17340);acc$17317.push(HTML$16705(c$17348,default_tag$16988));}return acc$17317;}}()));($17058$17353=tag$17059);if(($17058$17353==="raw")){return accum$17064.concat(children2$17065).join("");}else{(other$17365=$17058$17353);(x$17368=[">"].concat(children2$17065).concat(["</",tag$17059,">"]));return accum$17064.concat(x$17368).join("");}}else{(other$17374=$16990$16996);return HTML$16705([true,String(other$17374)][1],default_tag$16988);}}}});(exports["pr_terminus"]=pr_terminus$16699);(exports["pr"]=pr$16700);(exports["<>"]=__lt____gt__$16701);(exports["repr"]=repr$16702);
