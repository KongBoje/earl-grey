var $40212=function(type$40215){var f$40219;(f$40219=type$40215["::check"]);if((f$40219===(void 0))){return function(value$40225){return (value$40225 instanceof type$40215);};}else{return function(value$40229){return f$40219.call(type$40215,value$40229);};}};
var $40231=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $40232=function(dest$40235,values$40236){var k$40241;(k$40241=null);$40239:for(k$40241 in values$40236){if(values$40236.hasOwnProperty(k$40241)){(dest$40235[k$40241]=values$40236[k$40241]);}}return dest$40235;};
var $40249=function($40251$40254){var ph$40260;(ph$40260=$40251$40254);var $40256$40266;($40256$40266=ph$40260);var bridge$40258$40271;var x$40275;(bridge$40258$40271=$40256$40266);if((((typeof(bridge$40258$40271)==="string")&&((x$40275=bridge$40258$40271),true))||((typeof(bridge$40258$40271)==="number")&&((x$40275=bridge$40258$40271),true)))){return ["value",x$40275];}else{var other$40286;(other$40286=$40256$40266);return other$40286["::serialize_ast"]();}};
var send$39986;(send$39986=function(obj$39993,$39990$39994){var ph$40000;var msg$40001;var t0$40003;(t0$40003=$39990$39994);(msg$40001=t0$40003);(ph$40000=t0$40003);var $39996$40012;($39996$40012=ph$40000);var bridge$39998$40017;(bridge$39998$40017=$39996$40012);if(((typeof(bridge$39998$40017)==="string")||(typeof(bridge$39998$40017)==="number"))){return obj$39993[msg$40001];}else{var other$40029;(other$40029=$39996$40012);return obj$39993["::send"](msg$40001);}});(Array[":::project"]=function($40035$40038){var ph$40043;var value$40044;var t0$40046;(t0$40046=$40035$40038);(value$40044=t0$40046);(ph$40043=t0$40046);var $40040$40055;($40040$40055=ph$40043);if($40212(Array)($40040$40055)){return [true,value$40044];}else{$40040$40055;return [true,[value$40044]];}});(Array.prototype["::check"]=function(value$40073){if((value$40073 instanceof Array)){var i$40079;(i$40079=0);$40076:for(;(i$40079<this.length);(i$40079++)){if(($40231(this,i$40079)!==$40231(value$40073,i$40079))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $40232(this.slice(0),this);});(Array.prototype[":::project"]=function(value$40098){if((value$40098 instanceof Array)){var i$40104;(i$40104=0);$40101:for(;(i$40104<this.length);(i$40104++)){if(($40231(this,i$40104)!==$40231(value$40098,i$40104))){return [true,[value$40098]];}}return [true,value$40098.slice(this.length)];}else{return [true,[value$40098]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($40249));});(RegExp.prototype["::check"]=function($40122$40125){var ph$40130;(ph$40130=$40122$40125);var $40127$40136;($40127$40136=ph$40130);var value$40144;if((typeof($40127$40136)==="string")){(value$40144=$40127$40136);if(value$40144.match(this)){return true;}else{return false;}}else{var other$40149;(other$40149=$40127$40136);return false;}});(RegExp.prototype[":::project"]=function($40155$40158){var ph$40163;(ph$40163=$40155$40158);var $40160$40169;($40160$40169=ph$40163);var value$40177;if((typeof($40160$40169)==="string")){(value$40177=$40160$40169);var $40180$40185;($40180$40185=value$40177.match(this));var m$40193;if(($40180$40185===null)){(m$40193=$40180$40185);return [false,null];}else{var m$40198;(m$40198=$40180$40185);return [true,m$40198];}}else{var other$40202;(other$40202=$40160$40169);return [false,null];}});(Function.prototype["::send"]=function(args$40209){return this.apply(this,args$40209);});
var $41254=function(arr$41257){var results$41263;var l$41264;(results$41263=[]);(l$41264=arr$41257.length);var i$41273;(i$41273=0);$41262:for(;(i$41273<l$41264);(i$41273++)){results$41263.push([i$41273,$40231(arr$41257,i$41273)]);}return results$41263;};
var $41021=function(){var $41022$41028;($41022$41028=function(tags$41033){var it$0$41036;(it$0$41036=function(){if((!$40212($41022$41028)(this))){return Object.create($41022$41028.prototype);}else{return this;}}());(it$0$41036["tags"]=tags$41033);return it$0$41036;});($41022$41028.prototype["create"]=function(){var it$0$41056;var self$41057;(it$0$41056=this);(self$41057=this);var $41054$41066;($41054$41066=arguments);var t0$41071;var message$41075;var args$41076;(t0$41071=$41054$41066.length);if((t0$41071>=0)){(message$41075=function(){if((0>=t0$41071)){return "";}else{return $41054$41066[0];}}());(args$41076=Array.prototype.slice.call($41054$41066,1));var e$41089;(e$41089=Error(message$41075));(e$41089["::tags"]=it$0$41056.tags);(e$41089["args"]=args$41076);var temp$41105;(temp$41105=$41254(args$41076));var $length$41111;($length$41111=temp$41105.length);var $index$41117;($index$41117=0);$41090:for(;($index$41117<$length$41111);($index$41117++)){var m$41126;(m$41126=temp$41105[$index$41117]);var t0$41131;var t1$41132;var i$41136;var arg$41137;(t0$41131=m$41126);if(((t0$41131 instanceof Array)&&(((t1$41132=t0$41131.length)),(t1$41132===2)))){(i$41136=t0$41131[0]);(arg$41137=t0$41131[1]);(e$41089[i$41136]=arg$41137);}else{$41002(m$41126);}}(e$41089["length"]=args$41076.length);(e$41089["name"]=["E"].concat(it$0$41056.tags).join("."));return e$41089;}else{$41002($41054$41066);}});($41022$41028.prototype["::check"]=function(e$41167){var it$0$41171;var self$41172;(it$0$41171=this);(self$41172=this);var tags$41182;if(((!e$41167)||(!$40212(Error)(e$41167)))){return false;}(tags$41182=(e$41167["::tags"]||[]));var temp$41193;(temp$41193=it$0$41171.tags);var $length$41199;($length$41199=temp$41193.length);var $index$41205;($index$41205=0);$41183:for(;($index$41205<$length$41199);($index$41205++)){var m$41214;(m$41214=temp$41193[$index$41205]);var tag$41222;(tag$41222=m$41214);if((tags$41182.indexOf(tag$41222)===-1)){return false;}else{false;}}return true;});($41022$41028.prototype["::deconstruct"]=function(e$41231){var it$0$41235;var self$41236;(it$0$41235=this);(self$41236=this);return e$41231.args;});$40232($41022$41028,$40232(function(){var accum$41247;(accum$41247=({}));(accum$41247["::name"]="$41022");return accum$41247;}(),function(){var accum$41251;(accum$41251=({}));(accum$41251["::egclass"]=true);return accum$41251;}()));return $41022$41028;}();
var $41002=function(value$41005,url$41006,start$41007,end$41008){var err$41012;(err$41012=$41021(["match"]).create("Could not find a match for value",({"value":value$41005})));if(url$41006){(err$41012["location"]=["location",url$41006,start$41007,end$41008]);}throw err$41012;};var GenSym$40301;var gensym$40302;var identity$40303;var binsearch$40304;var classify$40305;var classify_contiguous$40306;var neighbours$40307;var partition$40308;var product$40309;var construct$40310;var mkset$40311;(GenSym$40301=function(prefix$40316){var id$40321;(id$40321=0);return function(){var r$40348;var pfx$40339;var t0$40335;var $40326$40330;($40326$40330=arguments);(t0$40335=$40326$40330.length);if(((t0$40335>=0)&&(t0$40335<=1))){(pfx$40339=function(){if((0>=t0$40335)){return "";}else{return $40326$40330[0];}}());(r$40348=((pfx$40339+prefix$40316)+[true,String(id$40321)][1]));(id$40321++);return r$40348;}else{$41002($40326$40330);}};});(gensym$40302=GenSym$40301("$"));(identity$40303=function(x$40362){return x$40362;});(binsearch$40304=function(xs$40369,x$40370){var lo$40375;var hi$40376;(lo$40375=0);(hi$40376=(xs$40369.length-1));$40383:while((lo$40375<=hi$40376)){var $40389$40403;var mid$40393;var v$40394;(mid$40393=(lo$40375+((hi$40376-lo$40375)>>1)));(v$40394=$40231(xs$40369,mid$40393));($40389$40403=$40231(xs$40369,mid$40393));if(($40389$40403<x$40370)){(lo$40375=(mid$40393+1));}else{if(($40389$40403>x$40370)){(hi$40376=(mid$40393-1));}else{$40389$40403;return (mid$40393+1);}}}return lo$40375;});(classify$40305=function(){var $index$40478;var $length$40472;var temp$40466;var results$40456;var classes$40446;var xs$40447;var t0$40442;var $40433$40437;($40433$40437=arguments);(t0$40442=$40433$40437.length);if((t0$40442>=1)){(classes$40446=Array.prototype.slice.call($40433$40437,0,-1));(xs$40447=$40433$40437[(t0$40442-1)]);(results$40456=({"rest":[]}));(temp$40466=classes$40446);($length$40472=temp$40466.length);($index$40478=0);$40457:for(;($index$40478<$length$40472);($index$40478++)){var cls$40495;var m$40487;(m$40487=temp$40466[$index$40478]);(cls$40495=m$40487);(results$40456[cls$40495]=[]);}$40501:while(xs$40447.length){var x$40537;var other$40557;var cls$40544;var x$40545;var newxs$40520;var t0$40516;var $40504$40511;($40504$40511=xs$40447.shift());if((($40504$40511 instanceof Array)&&(((t0$40516=$40504$40511.length)),((t0$40516>=1)&&($40504$40511[0]==="splice"))))){(newxs$40520=Array.prototype.slice.call($40504$40511,1));(xs$40447=newxs$40520.concat(xs$40447));}else{if((((x$40537=$40504$40511)),((x$40537 instanceof Array)&&(x$40537[0]==="ignore")))){null;}else{if((($40504$40511 instanceof Array)&&(((t0$40516=$40504$40511.length)),((t0$40516===2)&&((cls$40544=$40504$40511[0]),((x$40545=$40504$40511[1]),$40231(results$40456,cls$40544))))))){$40231(results$40456,cls$40544).push(x$40545);}else{(other$40557=$40504$40511);results$40456.rest.push(other$40557);}}}}return results$40456;}else{$41002($40433$40437);}});(classify_contiguous$40306=function(xs$40566,classifier$40567){var $index$40603;var $length$40597;var temp$40591;var groups$40573;var currcls$40574;var curr$40575;(groups$40573=[]);(currcls$40574=null);(curr$40575=null);(temp$40591=xs$40566);($length$40597=temp$40591.length);($index$40603=0);$40576:for(;($index$40603<$length$40597);($index$40603++)){var cls$40624;var x$40620;var m$40612;(m$40612=temp$40591[$index$40603]);(x$40620=m$40612);(cls$40624=classifier$40567(x$40620));if((cls$40624===currcls$40574)){curr$40575.push(x$40620);}else{if(curr$40575){groups$40573.push(curr$40575);}(curr$40575=[cls$40624,x$40620]);(currcls$40574=cls$40624);}}if(curr$40575){groups$40573.push(curr$40575);}return groups$40573;});(neighbours$40307=function($40643$40646){var x$40685;var y$40686;var rest$40687;var x$40680;var $40652$40667;var $40653$40668;var t0$40665;var $40648$40660;var ph$40654;(ph$40654=$40643$40646);($40648$40660=ph$40654);if((($40652$40667=($40648$40660 instanceof Array))&&(((t0$40665=$40648$40660.length)),(t0$40665===0)))){return [];}else{if(($40652$40667&&(t0$40665===1))){(x$40680=$40648$40660[0]);return [];}else{if(($40652$40667&&(t0$40665>=2))){(x$40685=$40648$40660[0]);(y$40686=$40648$40660[1]);(rest$40687=Array.prototype.slice.call($40648$40660,2));return [[x$40685,y$40686]].concat(neighbours$40307([y$40686].concat(rest$40687)));}else{$41002($40648$40660);}}}});(partition$40308=function(xs$40697,predicate$40698){var $index$40730;var $length$40724;var temp$40718;var t$40703;var f$40704;(t$40703=[]);(f$40704=[]);(temp$40718=xs$40697);($length$40724=temp$40718.length);($index$40730=0);$40705:for(;($index$40730<$length$40724);($index$40730++)){var x$40752;var x$40747;var m$40739;(m$40739=temp$40718[$index$40730]);(x$40747=m$40739);if(predicate$40698(x$40747)){t$40703.push(x$40747);}else{(x$40752=m$40739);f$40704.push(x$40752);}}return [t$40703,f$40704];});(product$40309=function(a$40759,b$40760){var $index$40786;var $length$40780;var temp$40774;var results$40764;(results$40764=[]);(temp$40774=a$40759);($length$40780=temp$40774.length);($index$40786=0);$40765:for(;($index$40786<$length$40780);($index$40786++)){var $index$40828;var $length$40822;var temp$40816;var acc$40810;var x$40803;var m$40795;(m$40795=temp$40774[$index$40786]);(x$40803=m$40795);(results$40764=results$40764.concat((((acc$40810=[])),(((temp$40816=b$40760)),((($length$40822=temp$40816.length)),((($index$40828=0)),function(){$40805:for(;($index$40828<$length$40822);($index$40828++)){var y$40845;var m$40837;(m$40837=temp$40816[$index$40828]);(y$40845=m$40837);acc$40810.push([x$40803,y$40845]);}}()))),acc$40810)));}return results$40764;});(construct$40310=function($40852$40855,fn$40856,zero$40857){var x$40896;var rest$40897;var x$40891;var $40863$40878;var $40864$40879;var t0$40876;var $40859$40871;var ph$40865;(ph$40865=$40852$40855);($40859$40871=ph$40865);if((($40863$40878=($40859$40871 instanceof Array))&&(((t0$40876=$40859$40871.length)),(t0$40876===0)))){return zero$40857;}else{if(($40863$40878&&(t0$40876===1))){(x$40891=$40859$40871[0]);return x$40891;}else{if(($40863$40878&&(t0$40876>=1))){(x$40896=$40859$40871[0]);(rest$40897=Array.prototype.slice.call($40859$40871,1));return fn$40856(x$40896,construct$40310(rest$40897,fn$40856,zero$40857));}else{$41002($40859$40871);}}}});(mkset$40311=function(xs$40907){var $index$40933;var $length$40927;var temp$40921;var rval$40911;(rval$40911=({}));(temp$40921=xs$40907);($length$40927=temp$40921.length);($index$40933=0);$40912:for(;($index$40933<$length$40927);($index$40933++)){var x$40950;var m$40942;(m$40942=temp$40921[$index$40933]);(x$40950=m$40942);(rval$40911[x$40950]=true);}return rval$40911;});(exports["GenSym"]=GenSym$40301);(exports["gensym"]=gensym$40302);(exports["identity"]=identity$40303);(exports["binsearch"]=binsearch$40304);(exports["classify"]=classify$40305);(exports["classify_contiguous"]=classify_contiguous$40306);(exports["neighbours"]=neighbours$40307);(exports["partition"]=partition$40308);(exports["construct"]=construct$40310);(exports["mkset"]=mkset$40311);(exports["product"]=product$40309);
