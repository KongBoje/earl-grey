var $31324=function(type$31326){var f$31329;(f$31329=type$31326["::check"]);if((f$31329===(void 0))){return function(value$31334){return (value$31334 instanceof type$31326);};}else{return function(value$31337){return f$31329.call(type$31326,value$31337);};}};
var $31339=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $31340=function(dest$31342,values$31343){var k$31348;(k$31348=null);$31346:for(k$31348 in values$31343){if(values$31343.hasOwnProperty(k$31348)){(dest$31342[k$31348]=values$31343[k$31348]);}}return dest$31342;};
var $31355=function($31356$31358){var ph$31362;(ph$31362=$31356$31358);var $31360$31367;($31360$31367=ph$31362);var bridge$31361$31372;var x$31376;(bridge$31361$31372=$31360$31367);if((((typeof(bridge$31361$31372)==="string")&&((x$31376=bridge$31361$31372),true))||((typeof(bridge$31361$31372)==="number")&&((x$31376=bridge$31361$31372),true)))){return ["value",x$31376];}else{var other$31386;(other$31386=$31360$31367);return other$31386["::serialize_ast"]();}};
var send$31131;(send$31131=function(obj$31136,$31134$31137){var ph$31141;var msg$31142;var t0$31144;(t0$31144=$31134$31137);(msg$31142=t0$31144);(ph$31141=t0$31144);var $31139$31151;($31139$31151=ph$31141);var bridge$31140$31156;(bridge$31140$31156=$31139$31151);if(((typeof(bridge$31140$31156)==="string")||(typeof(bridge$31140$31156)==="number"))){return obj$31136[msg$31142];}else{var other$31167;(other$31167=$31139$31151);return obj$31136["::send"](msg$31142);}});(Array[":::project"]=function($31172$31174){var ph$31177;var value$31178;var t0$31180;(t0$31180=$31172$31174);(value$31178=t0$31180);(ph$31177=t0$31180);var $31176$31187;($31176$31187=ph$31177);if($31324(Array)($31176$31187)){return [true,value$31178];}else{$31176$31187;return [true,[value$31178]];}});(Array.prototype["::check"]=function(value$31204){if((value$31204 instanceof Array)){var i$31209;(i$31209=0);$31207:for(;(i$31209<this.length);(i$31209++)){if(($31339(this,i$31209)!==$31339(value$31204,i$31209))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $31340(this.slice(0),this);});(Array.prototype[":::project"]=function(value$31226){if((value$31226 instanceof Array)){var i$31231;(i$31231=0);$31229:for(;(i$31231<this.length);(i$31231++)){if(($31339(this,i$31231)!==$31339(value$31226,i$31231))){return [true,[value$31226]];}}return [true,value$31226.slice(this.length)];}else{return [true,[value$31226]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($31355));});(RegExp.prototype["::check"]=function($31247$31249){var ph$31252;(ph$31252=$31247$31249);var $31251$31257;($31251$31257=ph$31252);var value$31265;if((typeof($31251$31257)==="string")){(value$31265=$31251$31257);if(value$31265.match(this)){return true;}else{return false;}}else{var other$31270;(other$31270=$31251$31257);return false;}});(RegExp.prototype[":::project"]=function($31275$31277){var ph$31280;(ph$31280=$31275$31277);var $31279$31285;($31279$31285=ph$31280);var value$31293;if((typeof($31279$31285)==="string")){(value$31293=$31279$31285);var $31296$31298;($31296$31298=value$31293.match(this));var m$31306;if(($31296$31298===null)){(m$31306=$31296$31298);return [false,null];}else{var m$31311;(m$31311=$31296$31298);return [true,m$31311];}}else{var other$31315;(other$31315=$31279$31285);return [false,null];}});(Function.prototype["::send"]=function(args$31321){return this.apply(this,args$31321);});
var $32324=function(arr$32326){var results$32330;var l$32331;(results$32330=[]);(l$32331=arr$32326.length);var i$32339;(i$32339=0);$32329:for(;(i$32339<l$32331);(i$32339++)){results$32330.push([i$32339,$31339(arr$32326,i$32339)]);}return results$32330;};
var $32128=function(){var $32129$32131;($32129$32131=function(tags$32135){var it$0$32138;(it$0$32138=function(){if((!$31324($32129$32131)(this))){return Object.create($32129$32131.prototype);}else{return this;}}());(it$0$32138["tags"]=tags$32135);return it$0$32138;});($32129$32131.prototype["create"]=function(){var $32150$32152;($32150$32152=arguments);var t0$32157;var message$32161;var args$32162;(t0$32157=$32150$32152.length);if((t0$32157>=0)){(message$32161=function(){if((0>=t0$32157)){return "";}else{return $32150$32152[0];}}());(args$32162=Array.prototype.slice.call($32150$32152,1));var it$0$32169;(it$0$32169=this);var self$32174;(self$32174=this);var e$32179;(e$32179=Error(message$32161));(e$32179["::tags"]=it$0$32169.tags);(e$32179["args"]=args$32162);var temp$32193;(temp$32193=$32324(args$32162));var $length$32198;($length$32198=temp$32193.length);var $index$32203;($index$32203=0);$32180:for(;($index$32203<$length$32198);($index$32203++)){var m$32211;(m$32211=temp$32193[$index$32203]);var t0$32216;var t1$32217;var i$32221;var arg$32222;(t0$32216=m$32211);if(((t0$32216 instanceof Array)&&(((t1$32217=t0$32216.length)),(t1$32217===2)))){(i$32221=t0$32216[0]);(arg$32222=t0$32216[1]);(e$32179[i$32221]=arg$32222);}else{$32112(m$32211);}}(e$32179["length"]=args$32162.length);(e$32179["name"]=["E"].concat(it$0$32169.tags).join("."));return e$32179;}else{$32112($32150$32152);}});($32129$32131.prototype["::check"]=function(e$32248){var it$0$32251;(it$0$32251=this);var self$32256;(self$32256=this);var tags$32261;if(((!e$32248)||(!$31324(Error)(e$32248)))){return false;}(tags$32261=(e$32248["::tags"]||[]));var temp$32270;(temp$32270=it$0$32251.tags);var $length$32275;($length$32275=temp$32270.length);var $index$32280;($index$32280=0);$32262:for(;($index$32280<$length$32275);($index$32280++)){var m$32288;(m$32288=temp$32270[$index$32280]);var tag$32296;(tag$32296=m$32288);if((tags$32261.indexOf(tag$32296)===-1)){return false;}else{false;}}return true;});($32129$32131.prototype["::deconstruct"]=function(e$32304){var it$0$32307;(it$0$32307=this);var self$32312;(self$32312=this);return e$32304.args;});$31340($32129$32131,$31340(function(){var accum$32317;(accum$32317=({}));(accum$32317["::name"]="$32129");return accum$32317;}(),function(){var accum$32321;(accum$32321=({}));(accum$32321["::egclass"]=true);return accum$32321;}()));return $32129$32131;}();
var $32112=function(value$32114,url$32115,start$32116,end$32117){var err$32120;(err$32120=$32128(["match"]).create("Could not find a match for value",({"value":value$32114})));if(url$32115){(err$32120["location"]=["location",url$32115,start$32116,end$32117]);}throw err$32120;};var GenSym$31390;var gensym$31391;var uuid$31392;var identity$31393;var binsearch$31394;var __classify$31395;var classify$31396;var classify_contiguous$31397;var neighbours$31398;var partition$31399;var construct$31400;var mkset$31401;var make_object$31402;var product$31403;(GenSym$31390=function(prefix$31407){var id$31410;(id$31410=0);return function(){var r$31433;var pfx$31426;var t0$31422;var $31415$31417;($31415$31417=arguments);(t0$31422=$31415$31417.length);if(((t0$31422>=0)&&(t0$31422<=1))){(pfx$31426=function(){if((0>=t0$31422)){return null;}else{return $31415$31417[0];}}());(r$31433=(((pfx$31426||"")+prefix$31407)+[true,String(id$31410)][1]));(id$31410++);return r$31433;}else{$32112($31415$31417);}};});(gensym$31391=GenSym$31390("$"));(uuid$31392=function(){return gensym$31391("#");});(identity$31393=function(x$31451){return x$31451;});(binsearch$31394=function(xs$31457,x$31458){var lo$31461;var hi$31462;(lo$31461=0);(hi$31462=(xs$31457.length-1));$31469:while((lo$31461<=hi$31462)){var $31473$31483;var mid$31474;var v$31475;(mid$31474=(lo$31461+((hi$31462-lo$31461)>>1)));(v$31475=$31339(xs$31457,mid$31474));($31473$31483=$31339(xs$31457,mid$31474));if(($31473$31483<x$31458)){(lo$31461=(mid$31474+1));}else{if(($31473$31483>x$31458)){(hi$31462=(mid$31474-1));}else{$31473$31483;return (mid$31474+1);}}}return lo$31461;});(__classify$31395=function(xs$31510){var results$31513;(results$31513=({}));$31517:while(xs$31510.length){var cls$31549;var x$31550;var newxs$31537;var $31521$31532;var $31522$31533;var $31523$31534;var t0$31530;var $31520$31525;($31520$31525=xs$31510.shift());if((($31521$31532=($31520$31525 instanceof Array))&&(((t0$31530=$31520$31525.length)),(($31523$31534=(t0$31530===2))&&($31520$31525[0]==="splice"))))){(newxs$31537=$31520$31525[1]);(xs$31510=newxs$31537.concat(xs$31510));}else{if($31523$31534){(cls$31549=$31520$31525[0]);(x$31550=$31520$31525[1]);if((!$31339(results$31513,cls$31549))){(results$31513[cls$31549]=[]);}$31339(results$31513,cls$31549).push(x$31550);}else{$32112($31520$31525);}}}return results$31513;});(classify$31396=function(){var $index$31601;var $length$31596;var temp$31591;var results$31583;var classes$31575;var xs$31576;var t0$31571;var $31564$31566;($31564$31566=arguments);(t0$31571=$31564$31566.length);if((t0$31571>=1)){(classes$31575=Array.prototype.slice.call($31564$31566,0,-1));(xs$31576=$31564$31566[(t0$31571-1)]);(results$31583=({"rest":[]}));(temp$31591=classes$31575);($length$31596=temp$31591.length);($index$31601=0);$31584:for(;($index$31601<$length$31596);($index$31601++)){var cls$31617;var m$31609;(m$31609=temp$31591[$index$31601]);(cls$31617=m$31609);(results$31583[cls$31617]=[]);}$31622:while(xs$31576.length){var x$31650;var other$31669;var cls$31657;var x$31658;var newxs$31636;var t0$31632;var $31625$31627;($31625$31627=xs$31576.shift());if((($31625$31627 instanceof Array)&&(((t0$31632=$31625$31627.length)),((t0$31632>=1)&&($31625$31627[0]==="splice"))))){(newxs$31636=Array.prototype.slice.call($31625$31627,1));(xs$31576=newxs$31636.concat(xs$31576));}else{if((((x$31650=$31625$31627)),((x$31650 instanceof Array)&&(x$31650[0]==="ignore")))){null;}else{if((($31625$31627 instanceof Array)&&(((t0$31632=$31625$31627.length)),((t0$31632===2)&&((cls$31657=$31625$31627[0]),((x$31658=$31625$31627[1]),$31339(results$31583,cls$31657))))))){$31339(results$31583,cls$31657).push(x$31658);}else{(other$31669=$31625$31627);results$31583.rest.push(other$31669);}}}}return results$31583;}else{$32112($31564$31566);}});(classify_contiguous$31397=function(xs$31677,classifier$31678){var $index$31707;var $length$31702;var temp$31697;var groups$31681;var currcls$31682;var curr$31683;(groups$31681=[]);(currcls$31682=null);(curr$31683=null);(temp$31697=xs$31677);($length$31702=temp$31697.length);($index$31707=0);$31684:for(;($index$31707<$length$31702);($index$31707++)){var cls$31726;var x$31723;var m$31715;(m$31715=temp$31697[$index$31707]);(x$31723=m$31715);(cls$31726=classifier$31678(x$31723));if((cls$31726===currcls$31682)){curr$31683.push(x$31723);}else{if(curr$31683){groups$31681.push(curr$31683);}(curr$31683=[cls$31726,x$31723]);(currcls$31682=cls$31726);}}if(curr$31683){groups$31681.push(curr$31683);}return groups$31681;});(neighbours$31398=function($31742$31744){var x$31778;var y$31779;var rest$31780;var x$31773;var $31747$31761;var $31748$31762;var t0$31759;var $31746$31754;var ph$31749;(ph$31749=$31742$31744);($31746$31754=ph$31749);if((($31747$31761=($31746$31754 instanceof Array))&&(((t0$31759=$31746$31754.length)),(t0$31759===0)))){return [];}else{if(($31747$31761&&(t0$31759===1))){(x$31773=$31746$31754[0]);return [];}else{if(($31747$31761&&(t0$31759>=2))){(x$31778=$31746$31754[0]);(y$31779=$31746$31754[1]);(rest$31780=Array.prototype.slice.call($31746$31754,2));return [[x$31778,y$31779]].concat(neighbours$31398([y$31779].concat(rest$31780)));}else{$32112($31746$31754);}}}});(partition$31399=function(xs$31789,predicate$31790){var $index$31815;var $length$31810;var temp$31805;var t$31793;var f$31794;(t$31793=[]);(f$31794=[]);(temp$31805=xs$31789);($length$31810=temp$31805.length);($index$31815=0);$31795:for(;($index$31815<$length$31810);($index$31815++)){var x$31836;var x$31831;var m$31823;(m$31823=temp$31805[$index$31815]);(x$31831=m$31823);if(predicate$31790(x$31831)){t$31793.push(x$31831);}else{(x$31836=m$31823);f$31794.push(x$31836);}}return [t$31793,f$31794];});(construct$31400=function($31841$31843,fn$31844,zero$31845){var x$31879;var rest$31880;var x$31874;var $31848$31862;var $31849$31863;var t0$31860;var $31847$31855;var ph$31850;(ph$31850=$31841$31843);($31847$31855=ph$31850);if((($31848$31862=($31847$31855 instanceof Array))&&(((t0$31860=$31847$31855.length)),(t0$31860===0)))){return zero$31845;}else{if(($31848$31862&&(t0$31860===1))){(x$31874=$31847$31855[0]);return x$31874;}else{if(($31848$31862&&(t0$31860>=1))){(x$31879=$31847$31855[0]);(rest$31880=Array.prototype.slice.call($31847$31855,1));return fn$31844(x$31879,construct$31400(rest$31880,fn$31844,zero$31845));}else{$32112($31847$31855);}}}});(mkset$31401=function(xs$31889){var $index$31910;var $length$31905;var temp$31900;var rval$31892;(rval$31892=({}));(temp$31900=xs$31889);($length$31905=temp$31900.length);($index$31910=0);$31893:for(;($index$31910<$length$31905);($index$31910++)){var x$31926;var m$31918;(m$31918=temp$31900[$index$31910]);(x$31926=m$31918);(rval$31892[x$31926]=true);}return rval$31892;});(make_object$31402=function(pairs$31935){var $index$31956;var $length$31951;var temp$31946;var rval$31938;(rval$31938=({}));(temp$31946=pairs$31935);($length$31951=temp$31946.length);($index$31956=0);$31939:for(;($index$31956<$length$31951);($index$31956++)){var k$31974;var v$31975;var t0$31969;var t1$31970;var m$31964;(m$31964=temp$31946[$index$31956]);(t0$31969=m$31964);if(((t0$31969 instanceof Array)&&(((t1$31970=t0$31969.length)),(t1$31970===2)))){(k$31974=t0$31969[0]);(v$31975=t0$31969[1]);(rval$31938[k$31974]=v$31975);}else{$32112(m$31964,"/home/olivier/git/earl-grey/src/util.eg",2775,2817);}}return rval$31938;});(product$31403=function(a$31994,b$31995){var $index$32016;var $length$32011;var temp$32006;var results$31998;(results$31998=[]);(temp$32006=a$31994);($length$32011=temp$32006.length);($index$32016=0);$31999:for(;($index$32016<$length$32011);($index$32016++)){var $index$32052;var $length$32047;var temp$32042;var acc$32037;var x$32032;var m$32024;(m$32024=temp$32006[$index$32016]);(x$32032=m$32024);(results$31998=results$31998.concat((((acc$32037=[])),(((temp$32042=b$31995)),((($length$32047=temp$32042.length)),((($index$32052=0)),function(){$32034:for(;($index$32052<$length$32047);($index$32052++)){var y$32068;var m$32060;(m$32060=temp$32042[$index$32052]);(y$32068=m$32060);acc$32037.push([x$32032,y$32068]);}}()))),acc$32037)));}return results$31998;});(exports["GenSym"]=GenSym$31390);(exports["gensym"]=gensym$31391);(exports["uuid"]=uuid$31392);(exports["identity"]=identity$31393);(exports["binsearch"]=binsearch$31394);(exports["classify"]=classify$31396);(exports["classify_contiguous"]=classify_contiguous$31397);(exports["neighbours"]=neighbours$31398);(exports["partition"]=partition$31399);(exports["construct"]=construct$31400);(exports["mkset"]=mkset$31401);(exports["make_object"]=make_object$31402);(exports["product"]=product$31403);
