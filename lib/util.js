var $25004=function(type$25006){var f$25009;(f$25009=type$25006["::check"]);;if((f$25009===(void 0))){return function(value$25014){return (value$25014 instanceof type$25006);};}else{return function(value$25017){return f$25009.call(type$25006,value$25017);};}};
var $25019=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $25020=function($25021$25023){var ph$25027;(ph$25027=$25021$25023);;var $25025$25032;($25025$25032=ph$25027);;var bridge$25026$25037;var x$25041;(bridge$25026$25037=$25025$25032);if((((typeof(bridge$25026$25037)==="string")&&((x$25041=bridge$25026$25037),true))||((typeof(bridge$25026$25037)==="number")&&((x$25041=bridge$25026$25037),true)))){return ["value",x$25041];}else{var other$25048;(other$25048=$25025$25032);return other$25048["::serialize_ast"]();}};
var send$24844;(send$24844=function(obj$24849,$24847$24850){var ph$24854;var msg$24855;var t0$24857;(t0$24857=$24847$24850);(msg$24855=t0$24857);(ph$24854=t0$24857);;var $24852$24861;($24852$24861=ph$24854);;var bridge$24853$24866;(bridge$24853$24866=$24852$24861);if(((typeof(bridge$24853$24866)==="string")||(typeof(bridge$24853$24866)==="number"))){return obj$24849[msg$24855];}else{var other$24874;(other$24874=$24852$24861);return obj$24849["::send"](msg$24855);}});;(Array[":::project"]=function($24877$24879){var ph$24882;var value$24883;var t0$24885;(t0$24885=$24877$24879);(value$24883=t0$24885);(ph$24882=t0$24885);;var $24881$24889;($24881$24889=ph$24882);;if($25004(Array)($24881$24889)){return [true,value$24883];}else{$24881$24889;return [true,[value$24883]];}});(Array.prototype["::check"]=function(value$24903){if((value$24903 instanceof Array)){var i$24908;(i$24908=0);;$24906:for(;(i$24908<this.length);(i$24908++)){if(($25019(this,i$24908)!==$25019(value$24903,i$24908))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return this.slice(0);});(Array.prototype[":::project"]=function(value$24919){if((value$24919 instanceof Array)){var i$24924;(i$24924=0);;$24922:for(;(i$24924<this.length);(i$24924++)){if(($25019(this,i$24924)!==$25019(value$24919,i$24924))){return [true,[value$24919]];}}return [true,value$24919.slice(this.length)];}else{return [true,[value$24919]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($25020));});(RegExp.prototype["::check"]=function($24934$24936){var ph$24939;(ph$24939=$24934$24936);;var $24938$24944;($24938$24944=ph$24939);;var value$24952;if((typeof($24938$24944)==="string")){(value$24952=$24938$24944);if(value$24952.match(this)){return true;}else{return false;}}else{var other$24957;(other$24957=$24938$24944);return false;}});(RegExp.prototype[":::project"]=function($24959$24961){var ph$24964;(ph$24964=$24959$24961);;var $24963$24969;($24963$24969=ph$24964);;var value$24977;if((typeof($24963$24969)==="string")){(value$24977=$24963$24969);var $24980$24982;($24980$24982=value$24977.match(this));;var m$24990;if(($24980$24982===null)){(m$24990=$24980$24982);return [false,null];}else{var m$24995;(m$24995=$24980$24982);return [true,m$24995];}}else{var other$24999;(other$24999=$24963$24969);return [false,null];}});(Function.prototype["::send"]=function(args$25002){return this.apply(this,args$25002);});
var $25970=function(arr$25972){var results$25976;var l$25977;(results$25976=[]);;(l$25977=arr$25972.length);;var i$25985;(i$25985=0);;$25975:for(;(i$25985<l$25977);(i$25985++)){results$25976.push([i$25985,$25019(arr$25972,i$25985)]);}return results$25976;};
var $25992=function(dest$25994,values$25995){var k$26000;(k$26000=null);$25998:for(k$26000 in values$25995){if(values$25995.hasOwnProperty(k$26000)){(dest$25994[k$26000]=values$25995[k$26000]);}}return dest$25994;};
var $25801=function(){var $25802$25804;($25802$25804=function(tags$25808){var it$0$25811;(it$0$25811=function(){if((!$25004($25802$25804)(this))){return Object.create($25802$25804.prototype);}else{return this;}}());;(it$0$25811["tags"]=tags$25808);return it$0$25811;});;($25802$25804.prototype["create"]=function(){var $25820$25822;($25820$25822=arguments);;var t0$25827;var message$25831;var args$25832;(t0$25827=$25820$25822.length);if((t0$25827>=0)){(message$25831=function(){if((0>=t0$25827)){return "";}else{return $25820$25822[0];}}());(args$25832=Array.prototype.slice.call($25820$25822,1));var it$0$25836;(it$0$25836=this);;var self$25841;(self$25841=this);;var e$25846;(e$25846=Error(message$25831));;(e$25846["::tags"]=it$0$25836.tags);(e$25846["args"]=args$25832);var temp$25854;(temp$25854=$25970(args$25832));;var $length$25859;($length$25859=temp$25854.length);;var $index$25864;($index$25864=0);;$25847:for(;($index$25864<$length$25859);($index$25864++)){var m$25872;(m$25872=temp$25854[$index$25864]);;var t0$25877;var t1$25878;var i$25882;var arg$25883;(t0$25877=m$25872);if(((t0$25877 instanceof Array)&&((t1$25878=t0$25877.length),(t1$25878===2)))){(i$25882=t0$25877[0]);(arg$25883=t0$25877[1]);(e$25846[i$25882]=arg$25883);}else{$25788(m$25872);;}}(e$25846["length"]=args$25832.length);(e$25846["name"]=["E"].concat(it$0$25836.tags).join("."));return e$25846;}else{$25788($25820$25822);}});($25802$25804.prototype["::check"]=function(e$25894){var it$0$25897;(it$0$25897=this);;var self$25902;(self$25902=this);;var tags$25907;if(((!e$25894)||(!$25004(Error)(e$25894)))){return false;}(tags$25907=(e$25894["::tags"]||[]));;var temp$25916;(temp$25916=it$0$25897.tags);;var $length$25921;($length$25921=temp$25916.length);;var $index$25926;($index$25926=0);;$25908:for(;($index$25926<$length$25921);($index$25926++)){var m$25934;(m$25934=temp$25916[$index$25926]);;var tag$25942;(tag$25942=m$25934);if((tags$25907.indexOf(tag$25942)===-1)){return false;}else{false;;}}return true;});($25802$25804.prototype["::deconstruct"]=function(e$25950){var it$0$25953;(it$0$25953=this);;var self$25958;(self$25958=this);;return e$25950.args;});$25992($25802$25804,$25992(function(){var accum$25963;(accum$25963=({}));(accum$25963["::name"]="$25802");return accum$25963;}(),function(){var accum$25967;(accum$25967=({}));(accum$25967["::egclass"]=true);return accum$25967;}()));return $25802$25804;}();
var $25788=function(value$25790,url$25791,start$25792,end$25793){var err$25796;(err$25796=$25801(["match"]).create("Could not find a match for value",({"value":value$25790})));;if(url$25791){(err$25796["location"]=["location",url$25791,start$25792,end$25793]);}throw err$25796;};var GenSym$25051;var gensym$25052;var uuid$25053;var identity$25054;var items$25055;var keys$25056;var enumerate$25057;var binsearch$25058;var __classify$25059;var classify$25060;var classify_contiguous$25061;var neighbours$25062;var zip$25063;var partition$25064;var construct$25065;var set$25066;var make_object$25067;var product$25068;(GenSym$25051=function(prefix$25072){var id$25075;(id$25075=0);;return function(){var r$25095;var pfx$25091;var t0$25087;var $25080$25082;($25080$25082=arguments);;(t0$25087=$25080$25082.length);if(((t0$25087>=0)&&(t0$25087<=1))){(pfx$25091=function(){if((0>=t0$25087)){return null;}else{return $25080$25082[0];}}());(r$25095=(((pfx$25091||"")+prefix$25072)+[true,String(id$25075)][1]));;(id$25075++);return r$25095;}else{$25788($25080$25082);}};});;(gensym$25052=GenSym$25051("$"));;(uuid$25053=function(){return gensym$25052("#");});;(identity$25054=function(x$25113){return x$25113;});;(items$25055=function(obj$25119){var k$25128;var results$25123;(results$25123=[]);;(k$25128=null);$25122:for(k$25128 in obj$25119){if(Object.prototype.hasOwnProperty.call(obj$25119,k$25128)){results$25123.push([k$25128,$25019(obj$25119,k$25128)]);}}return results$25123;});;(keys$25056=function(obj$25136){var k$25145;var results$25140;(results$25140=[]);;(k$25145=null);$25139:for(k$25145 in obj$25136){if(Object.prototype.hasOwnProperty.call(obj$25136,k$25145)){results$25140.push(k$25145);}}return results$25140;});;(enumerate$25057=function(arr$25153){var i$25166;var results$25157;var l$25158;(results$25157=[]);;(l$25158=arr$25153.length);;(i$25166=0);;$25156:for(;(i$25166<l$25158);(i$25166++)){results$25157.push([i$25166,$25019(arr$25153,i$25166)]);}return results$25157;});;(binsearch$25058=function(xs$25177,x$25178){var lo$25181;var hi$25182;(lo$25181=0);;(hi$25182=(xs$25177.length-1));;$25189:while((lo$25181<=hi$25182)){var $25193$25203;var mid$25194;var v$25195;(mid$25194=(lo$25181+((hi$25182-lo$25181)>>1)));;(v$25195=$25019(xs$25177,mid$25194));;($25193$25203=$25019(xs$25177,mid$25194));;if(($25193$25203<x$25178)){(lo$25181=(mid$25194+1));}else{if(($25193$25203>x$25178)){(hi$25182=(mid$25194-1));}else{$25193$25203;return (mid$25194+1);}}}return lo$25181;});;(__classify$25059=function(xs$25224){var results$25227;(results$25227=({}));;$25231:while(xs$25224.length){var cls$25257;var x$25258;var newxs$25251;var $25235$25246;var $25236$25247;var $25237$25248;var t0$25244;var $25234$25239;($25234$25239=xs$25224.shift());;if((($25235$25246=($25234$25239 instanceof Array))&&((t0$25244=$25234$25239.length),(($25237$25248=(t0$25244===2))&&($25234$25239[0]==="splice"))))){(newxs$25251=$25234$25239[1]);(xs$25224=newxs$25251.concat(xs$25224));}else{if($25237$25248){(cls$25257=$25234$25239[0]);(x$25258=$25234$25239[1]);if((!$25019(results$25227,cls$25257))){(results$25227[cls$25257]=[]);}$25019(results$25227,cls$25257).push(x$25258);}else{$25788($25234$25239);;}}}return results$25227;});;(classify$25060=function(){var $index$25303;var $length$25298;var temp$25293;var results$25285;var classes$25280;var xs$25281;var t0$25276;var $25269$25271;($25269$25271=arguments);;(t0$25276=$25269$25271.length);if((t0$25276>=1)){(classes$25280=Array.prototype.slice.call($25269$25271,0,-1));(xs$25281=$25269$25271[(t0$25276-1)]);(results$25285=({"rest":[]}));;(temp$25293=classes$25280);;($length$25298=temp$25293.length);;($index$25303=0);;$25286:for(;($index$25303<$length$25298);($index$25303++)){var cls$25319;var m$25311;(m$25311=temp$25293[$index$25303]);;(cls$25319=m$25311);(results$25285[cls$25319]=[]);}$25321:while(xs$25281.length){var x$25343;var other$25359;var cls$25350;var x$25351;var newxs$25335;var t0$25331;var $25324$25326;($25324$25326=xs$25281.shift());;if((($25324$25326 instanceof Array)&&((t0$25331=$25324$25326.length),((t0$25331>=1)&&($25324$25326[0]==="splice"))))){(newxs$25335=Array.prototype.slice.call($25324$25326,1));(xs$25281=newxs$25335.concat(xs$25281));}else{if((((x$25343=$25324$25326)),((x$25343 instanceof Array)&&(x$25343[0]==="ignore")))){null;}else{if((($25324$25326 instanceof Array)&&((t0$25331=$25324$25326.length),((t0$25331===2)&&((cls$25350=$25324$25326[0]),((x$25351=$25324$25326[1]),$25019(results$25285,cls$25350))))))){$25019(results$25285,cls$25350).push(x$25351);}else{(other$25359=$25324$25326);results$25285.rest.push(other$25359);}}}}return results$25285;}else{$25788($25269$25271);}});;(classify_contiguous$25061=function(xs$25367,classifier$25368){var $index$25397;var $length$25392;var temp$25387;var groups$25371;var currcls$25372;var curr$25373;(groups$25371=[]);;(currcls$25372=null);;(curr$25373=null);;(temp$25387=xs$25367);;($length$25392=temp$25387.length);;($index$25397=0);;$25374:for(;($index$25397<$length$25392);($index$25397++)){var cls$25416;var x$25413;var m$25405;(m$25405=temp$25387[$index$25397]);;(x$25413=m$25405);(cls$25416=classifier$25368(x$25413));;if((cls$25416===currcls$25372)){curr$25373.push(x$25413);}else{if(curr$25373){groups$25371.push(curr$25373);}(curr$25373=[cls$25416,x$25413]);(currcls$25372=cls$25416);}}if(curr$25373){groups$25371.push(curr$25373);}return groups$25371;});;(neighbours$25062=function($25426$25428){var x$25459;var y$25460;var rest$25461;var x$25454;var $25431$25445;var $25432$25446;var t0$25443;var $25430$25438;var ph$25433;(ph$25433=$25426$25428);;($25430$25438=ph$25433);;if((($25431$25445=($25430$25438 instanceof Array))&&((t0$25443=$25430$25438.length),(t0$25443===0)))){return [];}else{if(($25431$25445&&(t0$25443===1))){(x$25454=$25430$25438[0]);return [];}else{if(($25431$25445&&(t0$25443>=2))){(x$25459=$25430$25438[0]);(y$25460=$25430$25438[1]);(rest$25461=Array.prototype.slice.call($25430$25438,2));return [[x$25459,y$25460]].concat(neighbours$25062([y$25460].concat(rest$25461)));}else{$25788($25430$25438);}}}});;(zip$25063=function(xs$25470,ys$25471){var $index$25491;var $length$25486;var temp$25481;var acc$25476;(acc$25476=[]);;(temp$25481=enumerate$25057(xs$25470));;($length$25486=temp$25481.length);;($index$25491=0);;$25473:for(;($index$25491<$length$25486);($index$25491++)){var i$25509;var x$25510;var t0$25504;var t1$25505;var m$25499;(m$25499=temp$25481[$index$25491]);;(t0$25504=m$25499);if(((t0$25504 instanceof Array)&&((t1$25505=t0$25504.length),(t1$25505===2)))){(i$25509=t0$25504[0]);(x$25510=t0$25504[1]);acc$25476.push([x$25510,$25019(ys$25471,i$25509)]);}else{$25788(m$25499,"/home/olivier/git/earl-grey/src/util.eg",2259,2311);;}}return acc$25476;});;(partition$25064=function(xs$25520,predicate$25521){var $index$25546;var $length$25541;var temp$25536;var t$25524;var f$25525;(t$25524=[]);;(f$25525=[]);;(temp$25536=xs$25520);;($length$25541=temp$25536.length);;($index$25546=0);;$25526:for(;($index$25546<$length$25541);($index$25546++)){var x$25567;var x$25562;var m$25554;(m$25554=temp$25536[$index$25546]);;(x$25562=m$25554);if(predicate$25521(x$25562)){t$25524.push(x$25562);}else{(x$25567=m$25554);f$25525.push(x$25567);}}return [t$25524,f$25525];});;(construct$25065=function($25572$25574,fn$25575,zero$25576){var x$25607;var rest$25608;var x$25602;var $25579$25593;var $25580$25594;var t0$25591;var $25578$25586;var ph$25581;(ph$25581=$25572$25574);;($25578$25586=ph$25581);;if((($25579$25593=($25578$25586 instanceof Array))&&((t0$25591=$25578$25586.length),(t0$25591===0)))){return zero$25576;}else{if(($25579$25593&&(t0$25591===1))){(x$25602=$25578$25586[0]);return x$25602;}else{if(($25579$25593&&(t0$25591>=1))){(x$25607=$25578$25586[0]);(rest$25608=Array.prototype.slice.call($25578$25586,1));return fn$25575(x$25607,construct$25065(rest$25608,fn$25575,zero$25576));}else{$25788($25578$25586);}}}});;(set$25066=function(xs$25617){var $index$25638;var $length$25633;var temp$25628;var rval$25620;(rval$25620=({}));;(temp$25628=xs$25617);;($length$25633=temp$25628.length);;($index$25638=0);;$25621:for(;($index$25638<$length$25633);($index$25638++)){var x$25654;var m$25646;(m$25646=temp$25628[$index$25638]);;(x$25654=m$25646);(rval$25620[x$25654]=true);}return rval$25620;});;(make_object$25067=function(pairs$25660){var $index$25681;var $length$25676;var temp$25671;var rval$25663;(rval$25663=({}));;(temp$25671=pairs$25660);;($length$25676=temp$25671.length);;($index$25681=0);;$25664:for(;($index$25681<$length$25676);($index$25681++)){var k$25699;var v$25700;var t0$25694;var t1$25695;var m$25689;(m$25689=temp$25671[$index$25681]);;(t0$25694=m$25689);if(((t0$25694 instanceof Array)&&((t1$25695=t0$25694.length),(t1$25695===2)))){(k$25699=t0$25694[0]);(v$25700=t0$25694[1]);(rval$25663[k$25699]=v$25700);}else{$25788(m$25689,"/home/olivier/git/earl-grey/src/util.eg",2663,2706);;}}return rval$25663;});;(product$25068=function(a$25710,b$25711){var $index$25732;var $length$25727;var temp$25722;var results$25714;(results$25714=[]);;(temp$25722=a$25710);;($length$25727=temp$25722.length);;($index$25732=0);;$25715:for(;($index$25732<$length$25727);($index$25732++)){var $index$25768;var $length$25763;var temp$25758;var acc$25753;var x$25748;var m$25740;(m$25740=temp$25722[$index$25732]);;(x$25748=m$25740);(results$25714=results$25714.concat((((acc$25753=[])),(((temp$25758=b$25711)),((($length$25763=temp$25758.length)),((($index$25768=0)),function(){$25750:for(;($index$25768<$length$25763);($index$25768++)){var y$25784;var m$25776;(m$25776=temp$25758[$index$25768]);;(y$25784=m$25776);acc$25753.push([x$25748,y$25784]);}}()))),acc$25753)));}return results$25714;});;(exports["GenSym"]=GenSym$25051);(exports["gensym"]=gensym$25052);(exports["uuid"]=uuid$25053);(exports["identity"]=identity$25054);(exports["items"]=items$25055);(exports["keys"]=keys$25056);(exports["enumerate"]=enumerate$25057);(exports["binsearch"]=binsearch$25058);(exports["classify"]=classify$25060);(exports["classify_contiguous"]=classify_contiguous$25061);(exports["neighbours"]=neighbours$25062);(exports["zip"]=zip$25063);(exports["partition"]=partition$25064);(exports["construct"]=construct$25065);(exports["set"]=set$25066);(exports["make_object"]=make_object$25067);(exports["product"]=product$25068);
