var $20922=function(type$20924){var f$20927;(f$20927=type$20924["::check"]);;if((f$20927===(void 0))){return function(value$20932){return (value$20932 instanceof type$20924);};}else{return function(value$20935){return f$20927.call(type$20924,value$20935);};}};
var $20937=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $20938=function($20939$20941){var ph$20945;(ph$20945=$20939$20941);;var $20943$20950;($20943$20950=ph$20945);;var bridge$20944$20955;var x$20959;(bridge$20944$20955=$20943$20950);if((((typeof(bridge$20944$20955)==="string")&&((x$20959=bridge$20944$20955),true))||((typeof(bridge$20944$20955)==="number")&&((x$20959=bridge$20944$20955),true)))){return ["value",x$20959];}else{var other$20966;(other$20966=$20943$20950);return other$20966["::serialize_ast"]();}};
var send$20785;(send$20785=function(obj$20790,$20788$20791){var ph$20795;var msg$20796;var t0$20798;(t0$20798=$20788$20791);(msg$20796=t0$20798);(ph$20795=t0$20798);;var $20793$20802;($20793$20802=ph$20795);;var bridge$20794$20807;(bridge$20794$20807=$20793$20802);if(((typeof(bridge$20794$20807)==="string")||(typeof(bridge$20794$20807)==="number"))){return obj$20790[msg$20796];}else{var other$20815;(other$20815=$20793$20802);return obj$20790["::send"](msg$20796);}});;(Array[":::project"]=function($20818$20820){var ph$20823;var value$20824;var t0$20826;(t0$20826=$20818$20820);(value$20824=t0$20826);(ph$20823=t0$20826);;var $20822$20830;($20822$20830=ph$20823);;if($20922(Array)($20822$20830)){return [true,value$20824];}else{$20822$20830;return [true,[value$20824]];}});(Array.prototype["::check"]=function(value$20844){if((value$20844 instanceof Array)){var i$20849;(i$20849=0);;$20847:for(;(i$20849<this.length);(i$20849++)){if(($20937(this,i$20849)!==$20937(value$20844,i$20849))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$20858){if((value$20858 instanceof Array)){var i$20863;(i$20863=0);;$20861:for(;(i$20863<this.length);(i$20863++)){if(($20937(this,i$20863)!==$20937(value$20858,i$20863))){return [true,[value$20858]];}}return [true,value$20858.slice(this.length)];}else{return [true,[value$20858]];}});(Array.prototype[":::deconstruct"]=function(value$20872){return [true,value$20872.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($20938));});(RegExp.prototype["::check"]=function(value$20877){return value$20877.match(this);});(RegExp.prototype[":::project"]=function(value$20880){var $20882$20884;($20882$20884=value$20880.match(this));;var m$20892;if(($20882$20884===null)){(m$20892=$20882$20884);return [false,null];}else{var m$20897;(m$20897=$20882$20884);return [true,m$20897];}});(RegExp.prototype[":::deconstruct"]=function(value$20900){var $20902$20904;($20902$20904=value$20900.match(this));;var m$20912;if(($20902$20904===null)){(m$20912=$20902$20904);return [false,null];}else{var m$20917;(m$20917=$20902$20904);return [true,m$20917];}});(Function.prototype["::send"]=function(args$20920){return this.apply(this,args$20920);});
var $21686=function(dest$21688,values$21689){var k$21694;(k$21694=null);$21692:for(k$21694 in values$21689){if(values$21689.hasOwnProperty(k$21694)){(dest$21688[k$21694]=values$21689[k$21694]);}}return dest$21688;};
var $21580=function(){var $21581$21583;($21581$21583=function(tags$21587){var it$0$21590;(it$0$21590=function(){if((!$20922($21581$21583)(this))){return Object.create($21581$21583.prototype);}else{return this;}}());;(it$0$21590["tags"]=tags$21587);return it$0$21590;});;($21581$21583.prototype["create"]=function(){var $21599$21601;($21599$21601=arguments);;var t0$21606;var message$21610;var args$21611;(t0$21606=$21599$21601.length);if((t0$21606>=0)){(message$21610=function(){if((0>=t0$21606)){return "";}else{return $21599$21601[0];}}());(args$21611=Array.prototype.slice.call($21599$21601,1));var it$0$21615;(it$0$21615=this);;var e$21620;(e$21620=Error(message$21610));;(e$21620["::tags"]=it$0$21615.tags);(e$21620["args"]=args$21611);(e$21620["name"]=["E"].concat(it$0$21615.tags).join("."));return e$21620;}else{$21567($21599$21601);}});($21581$21583.prototype["::check"]=function(e$21629){var it$0$21632;(it$0$21632=this);;var tags$21637;if(((!e$21629)||(!$20922(Error)(e$21629)))){return false;}(tags$21637=(e$21629["::tags"]||[]));;var temp$21645;(temp$21645=it$0$21632.tags);;var len$21650;(len$21650=temp$21645.length);;var i$21655;(i$21655=0);;$21638:for(;(i$21655<len$21650);(i$21655++)){var m$21663;(m$21663=temp$21645[i$21655]);;var tag$21671;(tag$21671=m$21663);if((tags$21637.indexOf(tag$21671)===(-1))){return false;}else{false;;}}return true;});($21581$21583.prototype["::deconstruct"]=function(e$21679){var it$0$21682;(it$0$21682=this);;return e$21679.args;});$21686($21581$21583,({}));return $21581$21583;}();
var $21567=function(value$21569,url$21570,start$21571,end$21572){var err$21575;(err$21575=$21580(["match"]).create("Could not find a match for value",({"value":value$21569})));;if(url$21570){(err$21575["location"]=["location",url$21570,start$21571,end$21572]);}throw err$21575;};var GenSym$20969;var gensym$20970;var uuid$20971;var identity$20972;var items$20973;var keys$20974;var enumerate$20975;var binsearch$20976;var __classify$20977;var classify$20978;var classify_contiguous$20979;var neighbours$20980;var zip$20981;var partition$20982;var construct$20983;var set$20984;(GenSym$20969=function(prefix$20988){var id$20991;(id$20991=0);;return function(){var r$21011;var pfx$21007;var t0$21003;var $20996$20998;($20996$20998=arguments);;(t0$21003=$20996$20998.length);if(((t0$21003>=0)&&(t0$21003<=1))){(pfx$21007=function(){if((0>=t0$21003)){return null;}else{return $20996$20998[0];}}());(r$21011=(((pfx$21007||"")+prefix$20988)+[true,String(id$20991)][1]));;(id$20991++);return r$21011;}else{$21567($20996$20998);}};});;(gensym$20970=GenSym$20969("$"));;(uuid$20971=function(){return gensym$20970("#");});;(identity$20972=function(x$21029){return x$21029;});;(items$20973=function(obj$21035){var k$21044;var results$21039;(results$21039=[]);;(k$21044=null);$21038:for(k$21044 in obj$21035){results$21039.push([k$21044,$20937(obj$21035,k$21044)]);}return results$21039;});;(keys$20974=function(obj$21051){var k$21060;var results$21055;(results$21055=[]);;(k$21060=null);$21054:for(k$21060 in obj$21051){results$21055.push(k$21060);}return results$21055;});;(enumerate$20975=function(arr$21067){var i$21080;var results$21071;var l$21072;(results$21071=[]);;(l$21072=arr$21067.length);;(i$21080=0);;$21070:for(;(i$21080<l$21072);(i$21080++)){results$21071.push([i$21080,$20937(arr$21067,i$21080)]);}return results$21071;});;(binsearch$20976=function(xs$21091,x$21092){var lo$21095;var hi$21096;(lo$21095=0);;(hi$21096=(xs$21091.length-1));;$21103:while((lo$21095<=hi$21096)){var $21107$21117;var mid$21108;var v$21109;(mid$21108=(lo$21095+((hi$21096-lo$21095)>>1)));;(v$21109=$20937(xs$21091,mid$21108));;($21107$21117=$20937(xs$21091,mid$21108));;if(($21107$21117<x$21092)){(lo$21095=(mid$21108+1));}else{if(($21107$21117>x$21092)){(hi$21096=(mid$21108-1));}else{$21107$21117;return (mid$21108+1);}}}return lo$21095;});;(__classify$20977=function(xs$21138){var results$21141;(results$21141=({}));;$21145:while(xs$21138.length){var cls$21171;var x$21172;var newxs$21165;var $21149$21160;var $21150$21161;var $21151$21162;var t0$21158;var $21148$21153;($21148$21153=xs$21138.shift());;if((($21149$21160=($21148$21153 instanceof Array))&&((t0$21158=$21148$21153.length),(($21151$21162=(t0$21158===2))&&($21148$21153[0]==="splice"))))){(newxs$21165=$21148$21153[1]);(xs$21138=newxs$21165.concat(xs$21138));}else{if($21151$21162){(cls$21171=$21148$21153[0]);(x$21172=$21148$21153[1]);if((!$20937(results$21141,cls$21171))){(results$21141[cls$21171]=[]);}$20937(results$21141,cls$21171).push(x$21172);}else{$21567($21148$21153);;}}}return results$21141;});;(classify$20978=function(){var i$21216;var len$21211;var temp$21206;var results$21199;var classes$21194;var xs$21195;var t0$21190;var $21183$21185;($21183$21185=arguments);;(t0$21190=$21183$21185.length);if((t0$21190>=1)){(classes$21194=Array.prototype.slice.call($21183$21185,0,-1));(xs$21195=$21183$21185[(t0$21190-1)]);(results$21199=({"rest":[]}));;(temp$21206=classes$21194);;(len$21211=temp$21206.length);;(i$21216=0);;$21200:for(;(i$21216<len$21211);(i$21216++)){var cls$21232;var m$21224;(m$21224=temp$21206[i$21216]);;(cls$21232=m$21224);(results$21199[cls$21232]=[]);}$21234:while(xs$21195.length){var x$21256;var other$21272;var cls$21263;var x$21264;var newxs$21248;var t0$21244;var $21237$21239;($21237$21239=xs$21195.shift());;if((($21237$21239 instanceof Array)&&((t0$21244=$21237$21239.length),((t0$21244>=1)&&($21237$21239[0]==="splice"))))){(newxs$21248=Array.prototype.slice.call($21237$21239,1));(xs$21195=newxs$21248.concat(xs$21195));}else{if((((x$21256=$21237$21239)),((x$21256 instanceof Array)&&(x$21256[0]==="ignore")))){null;}else{if((($21237$21239 instanceof Array)&&((t0$21244=$21237$21239.length),((t0$21244===2)&&((cls$21263=$21237$21239[0]),((x$21264=$21237$21239[1]),$20937(results$21199,cls$21263))))))){$20937(results$21199,cls$21263).push(x$21264);}else{(other$21272=$21237$21239);results$21199.rest.push(other$21272);}}}}return results$21199;}else{$21567($21183$21185);}});;(classify_contiguous$20979=function(xs$21280,classifier$21281){var i$21309;var len$21304;var temp$21299;var groups$21284;var currcls$21285;var curr$21286;(groups$21284=[]);;(currcls$21285=null);;(curr$21286=null);;(temp$21299=xs$21280);;(len$21304=temp$21299.length);;(i$21309=0);;$21287:for(;(i$21309<len$21304);(i$21309++)){var cls$21328;var x$21325;var m$21317;(m$21317=temp$21299[i$21309]);;(x$21325=m$21317);(cls$21328=classifier$21281(x$21325));;if((cls$21328===currcls$21285)){curr$21286.push(x$21325);}else{if(curr$21286){groups$21284.push(curr$21286);}(curr$21286=[cls$21328,x$21325]);(currcls$21285=cls$21328);}}if(curr$21286){groups$21284.push(curr$21286);}return groups$21284;});;(neighbours$20980=function($21338$21340){var x$21371;var y$21372;var rest$21373;var x$21366;var $21343$21357;var $21344$21358;var t0$21355;var $21342$21350;var ph$21345;(ph$21345=$21338$21340);;($21342$21350=ph$21345);;if((($21343$21357=($21342$21350 instanceof Array))&&((t0$21355=$21342$21350.length),(t0$21355===0)))){return [];}else{if(($21343$21357&&(t0$21355===1))){(x$21366=$21342$21350[0]);return [];}else{if(($21343$21357&&(t0$21355>=2))){(x$21371=$21342$21350[0]);(y$21372=$21342$21350[1]);(rest$21373=Array.prototype.slice.call($21342$21350,2));return [[x$21371,y$21372]].concat(neighbours$20980([y$21372].concat(rest$21373)));}else{$21567($21342$21350);}}}});;(zip$20981=function(xs$21382,ys$21383){var i$21402;var len$21397;var temp$21392;var acc$21387;(acc$21387=[]);;(temp$21392=enumerate$20975(xs$21382));;(len$21397=temp$21392.length);;(i$21402=0);;$21385:for(;(i$21402<len$21397);(i$21402++)){var i$21420;var x$21421;var t0$21415;var t1$21416;var m$21410;(m$21410=temp$21392[i$21402]);;(t0$21415=m$21410);if(((t0$21415 instanceof Array)&&((t1$21416=t0$21415.length),(t1$21416===2)))){(i$21420=t0$21415[0]);(x$21421=t0$21415[1]);acc$21387.push([x$21421,$20937(ys$21383,i$21420)]);}else{false;;}}return acc$21387;});;(partition$20982=function(xs$21431,predicate$21432){var i$21456;var len$21451;var temp$21446;var t$21435;var f$21436;(t$21435=[]);;(f$21436=[]);;(temp$21446=xs$21431);;(len$21451=temp$21446.length);;(i$21456=0);;$21437:for(;(i$21456<len$21451);(i$21456++)){var x$21477;var x$21472;var m$21464;(m$21464=temp$21446[i$21456]);;(x$21472=m$21464);if(predicate$21432(x$21472)){t$21435.push(x$21472);}else{(x$21477=m$21464);f$21436.push(x$21477);}}return [t$21435,f$21436];});;(construct$20983=function($21482$21484,fn$21485,zero$21486){var x$21517;var rest$21518;var x$21512;var $21489$21503;var $21490$21504;var t0$21501;var $21488$21496;var ph$21491;(ph$21491=$21482$21484);;($21488$21496=ph$21491);;if((($21489$21503=($21488$21496 instanceof Array))&&((t0$21501=$21488$21496.length),(t0$21501===0)))){return zero$21486;}else{if(($21489$21503&&(t0$21501===1))){(x$21512=$21488$21496[0]);return x$21512;}else{if(($21489$21503&&(t0$21501>=1))){(x$21517=$21488$21496[0]);(rest$21518=Array.prototype.slice.call($21488$21496,1));return fn$21485(x$21517,construct$20983(rest$21518,fn$21485,zero$21486));}else{$21567($21488$21496);}}}});;(set$20984=function(xs$21527){var i$21547;var len$21542;var temp$21537;var rval$21530;(rval$21530=({}));;(temp$21537=xs$21527);;(len$21542=temp$21537.length);;(i$21547=0);;$21531:for(;(i$21547<len$21542);(i$21547++)){var x$21563;var m$21555;(m$21555=temp$21537[i$21547]);;(x$21563=m$21555);(rval$21530[x$21563]=true);}return rval$21530;});;(exports["GenSym"]=GenSym$20969);(exports["gensym"]=gensym$20970);(exports["uuid"]=uuid$20971);(exports["identity"]=identity$20972);(exports["items"]=items$20973);(exports["keys"]=keys$20974);(exports["enumerate"]=enumerate$20975);(exports["binsearch"]=binsearch$20976);(exports["classify"]=classify$20978);(exports["classify_contiguous"]=classify_contiguous$20979);(exports["neighbours"]=neighbours$20980);(exports["zip"]=zip$20981);(exports["partition"]=partition$20982);(exports["construct"]=construct$20983);(exports["set"]=set$20984);
