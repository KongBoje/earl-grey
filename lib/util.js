var τ1845=function(type){var τ1846=type["::check"];var f;if((τ1846===(void 0))){return function(value){return (value instanceof type);};}else{if(((f=τ1846),true)){return function(value){return f.call(type,value);};}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1846}));}}};
var τ1847=function(dest,values){for(k in values){if(values.hasOwnProperty(k)){(dest[k]=send(values,k));}else{null;}}return dest;};
var τ1837=function(){var τ1838=function(tags){var τ1839=function(){if((!τ1845(τ1838)(this))){return Object.create(τ1838.prototype);}else{return this;}}();(τ1839["tags"]=tags);return τ1839;};τ1847(τ1838);(τ1838.prototype["create"]=function(){var τ1840=Array.prototype.slice.call(arguments,0);var τp0;var message;var args;if(((τ1840 instanceof Array)&&(((τp0=τ1840.length),true)&&((τp0>=0)&&((message=function(){if((0>=τp0)){return "";}else{return τ1840[0];}}()),true,(args=τ1840.slice(1)),true))))){var τ1839=this;var e=Error(message);(e["::tags"]=τ1839.tags);(e["args"]=args);(e["name"]=["E"].concat(τ1839.tags).join("."));return e;}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1840}));}});(τ1838.prototype["::check"]=function(e){var τ1839=this;if(((!e)||(!τ1845(Error)(e)))){return false;}else{null;}var tags=(e["::tags"]||[]);var τ1841=τ1839.tags;var τ1842=τ1841.length;for(var τ1843=0;(τ1843<τ1842);(τ1843++)){var τ1844=τ1841[τ1843];var tag;var other;if(((tag=τ1844),true,(tags.indexOf(tag)===(-1)))){return false;}else{if(((other=τ1844),true)){false;}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1844}));}}}false;return true;});(τ1838.prototype["::deconstruct"]=function(e){var τ1839=this;return e.args;});return τ1838;}();
var τ1848=function(){var r=[];for(var i=0;(i<arguments.length);(i++)){(r=r.concat(arguments[i]));}return r;};
var τ1849=function(τ1850){var τ1851=τ1850;var x;var x;var other;if((((typeof(τ1851)==="string")&&((x=τ1851),true))||((typeof(τ1851)==="number")&&((x=τ1851),true)))){return ["value",x];}else{if(((other=τ1851),true)){return other["::serialize_ast"]();}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1851}));}}};
var send=function(obj,τ1830){var msg;var τ1829;(msg=τ1830);true;(τ1829=τ1830);var τ1831=τ1829;var other;if(((typeof(τ1831)==="string")||(typeof(τ1831)==="number"))){return obj[msg];}else{if(((other=τ1831),true)){return obj["::send"](msg);}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1831}));}}};(Array[":::project"]=function(τ1833){var value;var τ1832;(value=τ1833);true;(τ1832=τ1833);var τ1834=τ1832;var _;if(τ1845(Array)(τ1834)){return [true,value];}else{if(((_=τ1834),true)){return [true,[value]];}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1834}));}}});(Array.prototype["::check"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){return false;}else{null;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value){if((value instanceof Array)){for(var i=0;(i<this.length);(i++)){if((send(this,i)!==send(value,i))){var rval=this.slice(0);rval.push(value);return [true,rval];}else{null;}}return [true,value];}else{var rval=this.slice(0);rval.push(value);return [true,rval];}});(Array.prototype[":::deconstruct"]=function(value){return [true,value.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return τ1848(["array"],this.map(τ1849));});(RegExp.prototype["::check"]=function(value){return value.match(this);});(RegExp.prototype[":::project"]=function(value){var τ1835=value.match(this);var m;var m;if(((τ1835===null)&&((m=τ1835),true))){return [false,null];}else{if(((m=τ1835),true)){return [true,m];}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1835}));}}});(RegExp.prototype[":::deconstruct"]=function(value){var τ1836=value.match(this);var m;var m;if(((τ1836===null)&&((m=τ1836),true))){return [false,null];}else{if(((m=τ1836),true)){return [true,m];}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1836}));}}});(Function.prototype["::send"]=function(args){return this.apply(this,args);});var items=function(obj){var results=[];for(k in obj){results.push([k,send(obj,k)]);}return results;};var keys=function(obj){var results=[];for(k in obj){results.push(k);}return results;};var enumerate=function(arr){var results=[];var l=arr.length;for(var i=0;(i<l);(i++)){results.push([i,send(arr,i)]);}return results;};var binsearch=function(xs,x){var lo=0;var hi=(xs.length-1);while((lo<=hi)){var mid=(lo+((hi-lo)>>1));var v=send(xs,mid);var τ1852=send(xs,mid);var _;if((τ1852<x)){(lo=(mid+1));}else{if((τ1852>x)){(hi=(mid-1));}else{if(((_=τ1852),true)){return (mid+1);}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1852}));}}}}return lo;};var __classify=function(xs){var results=({});while(xs.length){var τ1853=xs.shift();var τp0;var τp1;var newxs;var τp0;var cls;var x;var τ1854=false;var τ1855=false;var τ1856=false;if(((τ1854=(τ1853 instanceof Array))&&((τ1855=((τp0=τ1853.length),true))&&((τ1856=(τp0===2))&&(((τp1=τ1853[0]),(τp1==="splice"))&&((newxs=τ1853[1]),true)))))){(xs=newxs.concat(xs));}else{if((τ1856&&((cls=τ1853[0]),true,(x=τ1853[1]),true))){if((!send(results,cls))){(results[cls]=[]);}else{null;}send(results,cls).push(x);}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1853}));}}}return results;};var classify=function(){var τ1857=Array.prototype.slice.call(arguments,0);var τp0;var classes;var xs;if(((τ1857 instanceof Array)&&(((τp0=τ1857.length),true)&&((τp0>=1)&&((classes=τ1857.slice(0,-1)),true,(xs=send(τ1857,(τp0-1))),true))))){var results=({"rest":[]});var τ1858=classes;var τ1859=τ1858.length;for(var τ1860=0;(τ1860<τ1859);(τ1860++)){var τ1861=τ1858[τ1860];var cls;var other;if(((cls=τ1861),true)){(results[cls]=[]);}else{if(((other=τ1861),true)){false;}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1861}));}}}false;while(xs.length){var τ1862=xs.shift();var τp0;var τp1;var newxs;var τp0;var cls;var x;var other;var τ1863=false;if(((τ1863=(τ1862 instanceof Array))&&(((τp0=τ1862.length),true)&&((τp0>=1)&&(((τp1=τ1862[0]),(τp1==="splice"))&&((newxs=τ1862.slice(1)),true)))))){(xs=newxs.concat(xs));}else{if((τ1863&&(τ1862[0]==="ignore"))){null;}else{if((τ1863&&(((τp0=τ1862.length),true)&&((τp0===2)&&((cls=τ1862[0]),true,(x=τ1862[1]),true,send(results,cls)))))){send(results,cls).push(x);}else{if(((other=τ1862),true)){results.rest.push(other);}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1862}));}}}}}return results;}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1857}));}};var neighbours=function(τ1864){var τ1865=τ1864;var τp0;var τp0;var x;var τp0;var x;var y;var rest;var τ1866=false;var τ1867=false;if(((τ1866=(τ1865 instanceof Array))&&((τ1867=((τp0=τ1865.length),true))&&(τp0===0)))){return [];}else{if((τ1867&&((τp0===1)&&((x=τ1865[0]),true)))){return [];}else{if((τ1867&&((τp0>=2)&&((x=τ1865[0]),true,(y=τ1865[1]),true,(rest=τ1865.slice(2)),true)))){return [[x,y]].concat(neighbours([y].concat(rest)));}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1865}));}}}};var zip=function(xs,ys){var τ1868=[];var τ1869=enumerate(xs);var τ1870=τ1869.length;for(var τ1871=0;(τ1871<τ1870);(τ1871++)){var τ1872=τ1869[τ1871];var τp0;var i;var x;var other;if(((τ1872 instanceof Array)&&(((τp0=τ1872.length),true)&&((τp0===2)&&((i=τ1872[0]),true,(x=τ1872[1]),true))))){τ1868.push([x,send(ys,i)]);}else{if(((other=τ1872),true)){false;}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1872}));}}}return τ1868;};var partition=function(xs,predicate){var t=[];var f=[];var τ1873=xs;var τ1874=τ1873.length;for(var τ1875=0;(τ1875<τ1874);(τ1875++)){var τ1876=τ1873[τ1875];var x;var x;var other;if(((x=τ1876),true,predicate(x))){t.push(x);}else{if(((x=τ1876),true)){f.push(x);}else{if(((other=τ1876),true)){false;}else{throw τ1837(["match"]).create("Could not find a match",({"value":τ1876}));}}}}false;return [t,f];};(exports["items"]=items);(exports["keys"]=keys);(exports["enumerate"]=enumerate);(exports["binsearch"]=binsearch);(exports["classify"]=classify);(exports["neighbours"]=neighbours);(exports["zip"]=zip);(exports["partition"]=partition);
