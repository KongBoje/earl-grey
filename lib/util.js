var $39481=function(type$39484){var f$39488;(f$39488=type$39484["::check"]);if((f$39488===(void 0))){return function(value$39494){return (value$39494 instanceof type$39484);};}else{return function(value$39498){return f$39488.call(type$39484,value$39498);};}};
var $39500=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $39501=function(dest$39504,values$39505){var k$39510;(k$39510=null);$39508:for(k$39510 in values$39505){if(values$39505.hasOwnProperty(k$39510)){(dest$39504[k$39510]=values$39505[k$39510]);}}return dest$39504;};
var $39518=function($39520$39523){var ph$39529;(ph$39529=$39520$39523);var $39525$39535;($39525$39535=ph$39529);var bridge$39527$39540;var x$39544;(bridge$39527$39540=$39525$39535);if((((typeof(bridge$39527$39540)==="string")&&((x$39544=bridge$39527$39540),true))||((typeof(bridge$39527$39540)==="number")&&((x$39544=bridge$39527$39540),true)))){return ["value",x$39544];}else{var other$39555;(other$39555=$39525$39535);return other$39555["::serialize_ast"]();}};
var send$39255;(send$39255=function(obj$39262,$39259$39263){var ph$39269;var msg$39270;var t0$39272;(t0$39272=$39259$39263);(msg$39270=t0$39272);(ph$39269=t0$39272);var $39265$39281;($39265$39281=ph$39269);var bridge$39267$39286;(bridge$39267$39286=$39265$39281);if(((typeof(bridge$39267$39286)==="string")||(typeof(bridge$39267$39286)==="number"))){return obj$39262[msg$39270];}else{var other$39298;(other$39298=$39265$39281);return obj$39262["::send"](msg$39270);}});(Array[":::project"]=function($39304$39307){var ph$39312;var value$39313;var t0$39315;(t0$39315=$39304$39307);(value$39313=t0$39315);(ph$39312=t0$39315);var $39309$39324;($39309$39324=ph$39312);if($39481(Array)($39309$39324)){return [true,value$39313];}else{$39309$39324;return [true,[value$39313]];}});(Array.prototype["::check"]=function(value$39342){if((value$39342 instanceof Array)){var i$39348;(i$39348=0);$39345:for(;(i$39348<this.length);(i$39348++)){if(($39500(this,i$39348)!==$39500(value$39342,i$39348))){return false;}}return true;}else{return false;}});(Array.prototype["::clone"]=function(){return $39501(this.slice(0),this);});(Array.prototype[":::project"]=function(value$39367){if((value$39367 instanceof Array)){var i$39373;(i$39373=0);$39370:for(;(i$39373<this.length);(i$39373++)){if(($39500(this,i$39373)!==$39500(value$39367,i$39373))){return [true,[value$39367]];}}return [true,value$39367.slice(this.length)];}else{return [true,[value$39367]];}});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($39518));});(RegExp.prototype["::check"]=function($39391$39394){var ph$39399;(ph$39399=$39391$39394);var $39396$39405;($39396$39405=ph$39399);var value$39413;if((typeof($39396$39405)==="string")){(value$39413=$39396$39405);if(value$39413.match(this)){return true;}else{return false;}}else{var other$39418;(other$39418=$39396$39405);return false;}});(RegExp.prototype[":::project"]=function($39424$39427){var ph$39432;(ph$39432=$39424$39427);var $39429$39438;($39429$39438=ph$39432);var value$39446;if((typeof($39429$39438)==="string")){(value$39446=$39429$39438);var $39449$39454;($39449$39454=value$39446.match(this));var m$39462;if(($39449$39454===null)){(m$39462=$39449$39454);return [false,null];}else{var m$39467;(m$39467=$39449$39454);return [true,m$39467];}}else{var other$39471;(other$39471=$39429$39438);return [false,null];}});(Function.prototype["::send"]=function(args$39478){return this.apply(this,args$39478);});
var $40523=function(arr$40526){var results$40532;var l$40533;(results$40532=[]);(l$40533=arr$40526.length);var i$40542;(i$40542=0);$40531:for(;(i$40542<l$40533);(i$40542++)){results$40532.push([i$40542,$39500(arr$40526,i$40542)]);}return results$40532;};
var $40290=function(){var $40291$40297;($40291$40297=function(tags$40302){var it$0$40305;(it$0$40305=function(){if((!$39481($40291$40297)(this))){return Object.create($40291$40297.prototype);}else{return this;}}());(it$0$40305["tags"]=tags$40302);return it$0$40305;});($40291$40297.prototype["create"]=function(){var it$0$40325;var self$40326;(it$0$40325=this);(self$40326=this);var $40323$40335;($40323$40335=arguments);var t0$40340;var message$40344;var args$40345;(t0$40340=$40323$40335.length);if((t0$40340>=0)){(message$40344=function(){if((0>=t0$40340)){return "";}else{return $40323$40335[0];}}());(args$40345=Array.prototype.slice.call($40323$40335,1));var e$40358;(e$40358=Error(message$40344));(e$40358["::tags"]=it$0$40325.tags);(e$40358["args"]=args$40345);var temp$40374;(temp$40374=$40523(args$40345));var $length$40380;($length$40380=temp$40374.length);var $index$40386;($index$40386=0);$40359:for(;($index$40386<$length$40380);($index$40386++)){var m$40395;(m$40395=temp$40374[$index$40386]);var t0$40400;var t1$40401;var i$40405;var arg$40406;(t0$40400=m$40395);if(((t0$40400 instanceof Array)&&(((t1$40401=t0$40400.length)),(t1$40401===2)))){(i$40405=t0$40400[0]);(arg$40406=t0$40400[1]);(e$40358[i$40405]=arg$40406);}else{$40271(m$40395);}}(e$40358["length"]=args$40345.length);(e$40358["name"]=["E"].concat(it$0$40325.tags).join("."));return e$40358;}else{$40271($40323$40335);}});($40291$40297.prototype["::check"]=function(e$40436){var it$0$40440;var self$40441;(it$0$40440=this);(self$40441=this);var tags$40451;if(((!e$40436)||(!$39481(Error)(e$40436)))){return false;}(tags$40451=(e$40436["::tags"]||[]));var temp$40462;(temp$40462=it$0$40440.tags);var $length$40468;($length$40468=temp$40462.length);var $index$40474;($index$40474=0);$40452:for(;($index$40474<$length$40468);($index$40474++)){var m$40483;(m$40483=temp$40462[$index$40474]);var tag$40491;(tag$40491=m$40483);if((tags$40451.indexOf(tag$40491)===-1)){return false;}else{false;}}return true;});($40291$40297.prototype["::deconstruct"]=function(e$40500){var it$0$40504;var self$40505;(it$0$40504=this);(self$40505=this);return e$40500.args;});$39501($40291$40297,$39501(function(){var accum$40516;(accum$40516=({}));(accum$40516["::name"]="$40291");return accum$40516;}(),function(){var accum$40520;(accum$40520=({}));(accum$40520["::egclass"]=true);return accum$40520;}()));return $40291$40297;}();
var $40271=function(value$40274,url$40275,start$40276,end$40277){var err$40281;(err$40281=$40290(["match"]).create("Could not find a match for value",({"value":value$40274})));if(url$40275){(err$40281["location"]=["location",url$40275,start$40276,end$40277]);}throw err$40281;};var GenSym$39570;var gensym$39571;var identity$39572;var binsearch$39573;var classify$39574;var classify_contiguous$39575;var neighbours$39576;var partition$39577;var product$39578;var construct$39579;var mkset$39580;(GenSym$39570=function(prefix$39585){var id$39590;(id$39590=0);return function(){var r$39617;var pfx$39608;var t0$39604;var $39595$39599;($39595$39599=arguments);(t0$39604=$39595$39599.length);if(((t0$39604>=0)&&(t0$39604<=1))){(pfx$39608=function(){if((0>=t0$39604)){return "";}else{return $39595$39599[0];}}());(r$39617=((pfx$39608+prefix$39585)+[true,String(id$39590)][1]));(id$39590++);return r$39617;}else{$40271($39595$39599);}};});(gensym$39571=GenSym$39570("$"));(identity$39572=function(x$39631){return x$39631;});(binsearch$39573=function(xs$39638,x$39639){var lo$39644;var hi$39645;(lo$39644=0);(hi$39645=(xs$39638.length-1));$39652:while((lo$39644<=hi$39645)){var $39658$39672;var mid$39662;var v$39663;(mid$39662=(lo$39644+((hi$39645-lo$39644)>>1)));(v$39663=$39500(xs$39638,mid$39662));($39658$39672=$39500(xs$39638,mid$39662));if(($39658$39672<x$39639)){(lo$39644=(mid$39662+1));}else{if(($39658$39672>x$39639)){(hi$39645=(mid$39662-1));}else{$39658$39672;return (mid$39662+1);}}}return lo$39644;});(classify$39574=function(){var $index$39747;var $length$39741;var temp$39735;var results$39725;var classes$39715;var xs$39716;var t0$39711;var $39702$39706;($39702$39706=arguments);(t0$39711=$39702$39706.length);if((t0$39711>=1)){(classes$39715=Array.prototype.slice.call($39702$39706,0,-1));(xs$39716=$39702$39706[(t0$39711-1)]);(results$39725=({"rest":[]}));(temp$39735=classes$39715);($length$39741=temp$39735.length);($index$39747=0);$39726:for(;($index$39747<$length$39741);($index$39747++)){var cls$39764;var m$39756;(m$39756=temp$39735[$index$39747]);(cls$39764=m$39756);(results$39725[cls$39764]=[]);}$39770:while(xs$39716.length){var x$39806;var other$39826;var cls$39813;var x$39814;var newxs$39789;var t0$39785;var $39773$39780;($39773$39780=xs$39716.shift());if((($39773$39780 instanceof Array)&&(((t0$39785=$39773$39780.length)),((t0$39785>=1)&&($39773$39780[0]==="splice"))))){(newxs$39789=Array.prototype.slice.call($39773$39780,1));(xs$39716=newxs$39789.concat(xs$39716));}else{if((((x$39806=$39773$39780)),((x$39806 instanceof Array)&&(x$39806[0]==="ignore")))){null;}else{if((($39773$39780 instanceof Array)&&(((t0$39785=$39773$39780.length)),((t0$39785===2)&&((cls$39813=$39773$39780[0]),((x$39814=$39773$39780[1]),$39500(results$39725,cls$39813))))))){$39500(results$39725,cls$39813).push(x$39814);}else{(other$39826=$39773$39780);results$39725.rest.push(other$39826);}}}}return results$39725;}else{$40271($39702$39706);}});(classify_contiguous$39575=function(xs$39835,classifier$39836){var $index$39872;var $length$39866;var temp$39860;var groups$39842;var currcls$39843;var curr$39844;(groups$39842=[]);(currcls$39843=null);(curr$39844=null);(temp$39860=xs$39835);($length$39866=temp$39860.length);($index$39872=0);$39845:for(;($index$39872<$length$39866);($index$39872++)){var cls$39893;var x$39889;var m$39881;(m$39881=temp$39860[$index$39872]);(x$39889=m$39881);(cls$39893=classifier$39836(x$39889));if((cls$39893===currcls$39843)){curr$39844.push(x$39889);}else{if(curr$39844){groups$39842.push(curr$39844);}(curr$39844=[cls$39893,x$39889]);(currcls$39843=cls$39893);}}if(curr$39844){groups$39842.push(curr$39844);}return groups$39842;});(neighbours$39576=function($39912$39915){var x$39954;var y$39955;var rest$39956;var x$39949;var $39921$39936;var $39922$39937;var t0$39934;var $39917$39929;var ph$39923;(ph$39923=$39912$39915);($39917$39929=ph$39923);if((($39921$39936=($39917$39929 instanceof Array))&&(((t0$39934=$39917$39929.length)),(t0$39934===0)))){return [];}else{if(($39921$39936&&(t0$39934===1))){(x$39949=$39917$39929[0]);return [];}else{if(($39921$39936&&(t0$39934>=2))){(x$39954=$39917$39929[0]);(y$39955=$39917$39929[1]);(rest$39956=Array.prototype.slice.call($39917$39929,2));return [[x$39954,y$39955]].concat(neighbours$39576([y$39955].concat(rest$39956)));}else{$40271($39917$39929);}}}});(partition$39577=function(xs$39966,predicate$39967){var $index$39999;var $length$39993;var temp$39987;var t$39972;var f$39973;(t$39972=[]);(f$39973=[]);(temp$39987=xs$39966);($length$39993=temp$39987.length);($index$39999=0);$39974:for(;($index$39999<$length$39993);($index$39999++)){var x$40021;var x$40016;var m$40008;(m$40008=temp$39987[$index$39999]);(x$40016=m$40008);if(predicate$39967(x$40016)){t$39972.push(x$40016);}else{(x$40021=m$40008);f$39973.push(x$40021);}}return [t$39972,f$39973];});(product$39578=function(a$40028,b$40029){var $index$40055;var $length$40049;var temp$40043;var results$40033;(results$40033=[]);(temp$40043=a$40028);($length$40049=temp$40043.length);($index$40055=0);$40034:for(;($index$40055<$length$40049);($index$40055++)){var $index$40097;var $length$40091;var temp$40085;var acc$40079;var x$40072;var m$40064;(m$40064=temp$40043[$index$40055]);(x$40072=m$40064);(results$40033=results$40033.concat((((acc$40079=[])),(((temp$40085=b$40029)),((($length$40091=temp$40085.length)),((($index$40097=0)),function(){$40074:for(;($index$40097<$length$40091);($index$40097++)){var y$40114;var m$40106;(m$40106=temp$40085[$index$40097]);(y$40114=m$40106);acc$40079.push([x$40072,y$40114]);}}()))),acc$40079)));}return results$40033;});(construct$39579=function($40121$40124,fn$40125,zero$40126){var x$40165;var rest$40166;var x$40160;var $40132$40147;var $40133$40148;var t0$40145;var $40128$40140;var ph$40134;(ph$40134=$40121$40124);($40128$40140=ph$40134);if((($40132$40147=($40128$40140 instanceof Array))&&(((t0$40145=$40128$40140.length)),(t0$40145===0)))){return zero$40126;}else{if(($40132$40147&&(t0$40145===1))){(x$40160=$40128$40140[0]);return x$40160;}else{if(($40132$40147&&(t0$40145>=1))){(x$40165=$40128$40140[0]);(rest$40166=Array.prototype.slice.call($40128$40140,1));return fn$40125(x$40165,construct$39579(rest$40166,fn$40125,zero$40126));}else{$40271($40128$40140);}}}});(mkset$39580=function(xs$40176){var $index$40202;var $length$40196;var temp$40190;var rval$40180;(rval$40180=({}));(temp$40190=xs$40176);($length$40196=temp$40190.length);($index$40202=0);$40181:for(;($index$40202<$length$40196);($index$40202++)){var x$40219;var m$40211;(m$40211=temp$40190[$index$40202]);(x$40219=m$40211);(rval$40180[x$40219]=true);}return rval$40180;});(exports["GenSym"]=GenSym$39570);(exports["gensym"]=gensym$39571);(exports["identity"]=identity$39572);(exports["binsearch"]=binsearch$39573);(exports["classify"]=classify$39574);(exports["classify_contiguous"]=classify_contiguous$39575);(exports["neighbours"]=neighbours$39576);(exports["partition"]=partition$39577);(exports["construct"]=construct$39579);(exports["mkset"]=mkset$39580);(exports["product"]=product$39578);
