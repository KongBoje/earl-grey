var $41080=(function(type$41083){var f$41087;(f$41087=type$41083["::check"]);if((f$41087===(void 0))){return (function(value$41093){return (value$41093 instanceof type$41083);});}else{return (function(value$41097){return f$41087.call(type$41083,value$41097);});}});
var $41099=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $41100=(function(dest$41103,values$41104){var k$41109;(k$41109=null);$41107:for(k$41109 in values$41104){if(values$41104.hasOwnProperty(k$41109)){(dest$41103[k$41109]=values$41104[k$41109]);}}return dest$41103;});
var $41117=(function($41119$41122){var ph$41128;(ph$41128=$41119$41122);var $41124$41134;($41124$41134=ph$41128);var bridge$41126$41139;var x$41143;(bridge$41126$41139=$41124$41134);if((((typeof(bridge$41126$41139)==="string")&&((x$41143=bridge$41126$41139),true))||((typeof(bridge$41126$41139)==="number")&&((x$41143=bridge$41126$41139),true)))){return ["value",x$41143];}else{var other$41154;(other$41154=$41124$41134);return other$41154["::serialize_ast"]();}});
var send$40854;(send$40854=(function(obj$40861,$40858$40862){var ph$40868;var msg$40869;var t0$40871;(t0$40871=$40858$40862);(msg$40869=t0$40871);(ph$40868=t0$40871);var $40864$40880;($40864$40880=ph$40868);var bridge$40866$40885;(bridge$40866$40885=$40864$40880);if(((typeof(bridge$40866$40885)==="string")||(typeof(bridge$40866$40885)==="number"))){return obj$40861[msg$40869];}else{var other$40897;(other$40897=$40864$40880);return obj$40861["::send"](msg$40869);}}));(Array[":::project"]=(function($40903$40906){var ph$40911;var value$40912;var t0$40914;(t0$40914=$40903$40906);(value$40912=t0$40914);(ph$40911=t0$40914);var $40908$40923;($40908$40923=ph$40911);if($41080(Array)($40908$40923)){return [true,value$40912];}else{$40908$40923;return [true,[value$40912]];}}));(Array.prototype["::check"]=(function(value$40941){if((value$40941 instanceof Array)){var i$40947;(i$40947=0);$40944:for(;(i$40947<this.length);(i$40947++)){if(($41099(this,i$40947)!==$41099(value$40941,i$40947))){return false;}}return true;}else{return false;}}));(Array.prototype["::clone"]=(function(){return $41100(this.slice(0),this);}));(Array.prototype[":::project"]=(function(value$40966){if((value$40966 instanceof Array)){var i$40972;(i$40972=0);$40969:for(;(i$40972<this.length);(i$40972++)){if(($41099(this,i$40972)!==$41099(value$40966,i$40972))){return [true,[value$40966]];}}return [true,value$40966.slice(this.length)];}else{return [true,[value$40966]];}}));(Array.prototype["::serialize_ast"]=(function(){return ["array"].concat(this.map($41117));}));(RegExp.prototype["::check"]=(function($40990$40993){var ph$40998;(ph$40998=$40990$40993);var $40995$41004;($40995$41004=ph$40998);var value$41012;if((typeof($40995$41004)==="string")){(value$41012=$40995$41004);if(value$41012.match(this)){return true;}else{return false;}}else{var other$41017;(other$41017=$40995$41004);return false;}}));(RegExp.prototype[":::project"]=(function($41023$41026){var ph$41031;(ph$41031=$41023$41026);var $41028$41037;($41028$41037=ph$41031);var value$41045;if((typeof($41028$41037)==="string")){(value$41045=$41028$41037);var $41048$41053;($41048$41053=value$41045.match(this));var m$41061;if(($41048$41053===null)){(m$41061=$41048$41053);return [false,null];}else{var m$41066;(m$41066=$41048$41053);return [true,m$41066];}}else{var other$41070;(other$41070=$41028$41037);return [false,null];}}));(Function.prototype["::send"]=(function(args$41077){return this.apply(this,args$41077);}));
var $42122=(function(arr$42125){var results$42131;var l$42132;(results$42131=[]);(l$42132=arr$42125.length);var i$42141;(i$42141=0);$42130:for(;(i$42141<l$42132);(i$42141++)){results$42131.push([i$42141,$41099(arr$42125,i$42141)]);}return results$42131;});
var $41889=(function(){var $41890$41896;($41890$41896=(function(tags$41901){var it$0$41904;(it$0$41904=(function(){if((!$41080($41890$41896)(this))){return Object.create($41890$41896.prototype);}else{return this;}})());(it$0$41904["tags"]=tags$41901);return it$0$41904;}));($41890$41896.prototype["create"]=(function(){var it$0$41924;var self$41925;(it$0$41924=this);(self$41925=this);var $41922$41934;($41922$41934=arguments);var t0$41939;var message$41943;var args$41944;(t0$41939=$41922$41934.length);if((t0$41939>=0)){(message$41943=(function(){if((0>=t0$41939)){return "";}else{return $41922$41934[0];}})());(args$41944=Array.prototype.slice.call($41922$41934,1));var e$41957;(e$41957=Error(message$41943));(e$41957["::tags"]=it$0$41924.tags);(e$41957["args"]=args$41944);var temp$41973;(temp$41973=$42122(args$41944));var $length$41979;($length$41979=temp$41973.length);var $index$41985;($index$41985=0);$41958:for(;($index$41985<$length$41979);($index$41985++)){var m$41994;(m$41994=temp$41973[$index$41985]);var t0$41999;var t1$42000;var i$42004;var arg$42005;(t0$41999=m$41994);if(((t0$41999 instanceof Array)&&(((t1$42000=t0$41999.length)),(t1$42000===2)))){(i$42004=t0$41999[0]);(arg$42005=t0$41999[1]);(e$41957[i$42004]=arg$42005);}else{$41870(m$41994);}}(e$41957["length"]=args$41944.length);(e$41957["name"]=["E"].concat(it$0$41924.tags).join("."));return e$41957;}else{$41870($41922$41934);}}));($41890$41896.prototype["::check"]=(function(e$42035){var it$0$42039;var self$42040;(it$0$42039=this);(self$42040=this);var tags$42050;if(((!e$42035)||(!$41080(Error)(e$42035)))){return false;}(tags$42050=(e$42035["::tags"]||[]));var temp$42061;(temp$42061=it$0$42039.tags);var $length$42067;($length$42067=temp$42061.length);var $index$42073;($index$42073=0);$42051:for(;($index$42073<$length$42067);($index$42073++)){var m$42082;(m$42082=temp$42061[$index$42073]);var tag$42090;(tag$42090=m$42082);if((tags$42050.indexOf(tag$42090)===-1)){return false;}else{false;}}return true;}));($41890$41896.prototype["::deconstruct"]=(function(e$42099){var it$0$42103;var self$42104;(it$0$42103=this);(self$42104=this);return e$42099.args;}));$41100($41890$41896,$41100((function(){var accum$42115;(accum$42115=({}));(accum$42115["::name"]="$41890");return accum$42115;})(),(function(){var accum$42119;(accum$42119=({}));(accum$42119["::egclass"]=true);return accum$42119;})()));return $41890$41896;})();
var $41870=(function(value$41873,url$41874,start$41875,end$41876){var err$41880;(err$41880=$41889(["match"]).create("Could not find a match for value",({"value":value$41873})));if(url$41874){(err$41880["location"]=["location",url$41874,start$41875,end$41876]);}throw err$41880;});var GenSym$41169;var gensym$41170;var identity$41171;var binsearch$41172;var classify$41173;var classify_contiguous$41174;var neighbours$41175;var partition$41176;var product$41177;var construct$41178;var mkset$41179;(GenSym$41169=(function(prefix$41184){var id$41189;(id$41189=0);return (function(){var r$41216;var pfx$41207;var t0$41203;var $41194$41198;($41194$41198=arguments);(t0$41203=$41194$41198.length);if(((t0$41203>=0)&&(t0$41203<=1))){(pfx$41207=(function(){if((0>=t0$41203)){return "";}else{return $41194$41198[0];}})());(r$41216=((pfx$41207+prefix$41184)+[true,String(id$41189)][1]));(id$41189++);return r$41216;}else{$41870($41194$41198);}});}));(gensym$41170=GenSym$41169("$"));(identity$41171=(function(x$41230){return x$41230;}));(binsearch$41172=(function(xs$41237,x$41238){var lo$41243;var hi$41244;(lo$41243=0);(hi$41244=(xs$41237.length-1));$41251:while((lo$41243<=hi$41244)){var $41257$41271;var mid$41261;var v$41262;(mid$41261=(lo$41243+((hi$41244-lo$41243)>>1)));(v$41262=$41099(xs$41237,mid$41261));($41257$41271=$41099(xs$41237,mid$41261));if(($41257$41271<x$41238)){(lo$41243=(mid$41261+1));}else{if(($41257$41271>x$41238)){(hi$41244=(mid$41261-1));}else{$41257$41271;return (mid$41261+1);}}}return lo$41243;}));(classify$41173=(function(){var $index$41346;var $length$41340;var temp$41334;var results$41324;var classes$41314;var xs$41315;var t0$41310;var $41301$41305;($41301$41305=arguments);(t0$41310=$41301$41305.length);if((t0$41310>=1)){(classes$41314=Array.prototype.slice.call($41301$41305,0,-1));(xs$41315=$41301$41305[(t0$41310-1)]);(results$41324=({"rest":[]}));(temp$41334=classes$41314);($length$41340=temp$41334.length);($index$41346=0);$41325:for(;($index$41346<$length$41340);($index$41346++)){var cls$41363;var m$41355;(m$41355=temp$41334[$index$41346]);(cls$41363=m$41355);(results$41324[cls$41363]=[]);}$41369:while(xs$41315.length){var x$41405;var other$41425;var cls$41412;var x$41413;var newxs$41388;var t0$41384;var $41372$41379;($41372$41379=xs$41315.shift());if((($41372$41379 instanceof Array)&&(((t0$41384=$41372$41379.length)),((t0$41384>=1)&&($41372$41379[0]==="splice"))))){(newxs$41388=Array.prototype.slice.call($41372$41379,1));(xs$41315=newxs$41388.concat(xs$41315));}else{if((((x$41405=$41372$41379)),((x$41405 instanceof Array)&&(x$41405[0]==="ignore")))){null;}else{if((($41372$41379 instanceof Array)&&(((t0$41384=$41372$41379.length)),((t0$41384===2)&&((cls$41412=$41372$41379[0]),((x$41413=$41372$41379[1]),$41099(results$41324,cls$41412))))))){$41099(results$41324,cls$41412).push(x$41413);}else{(other$41425=$41372$41379);results$41324.rest.push(other$41425);}}}}return results$41324;}else{$41870($41301$41305);}}));(classify_contiguous$41174=(function(xs$41434,classifier$41435){var $index$41471;var $length$41465;var temp$41459;var groups$41441;var currcls$41442;var curr$41443;(groups$41441=[]);(currcls$41442=null);(curr$41443=null);(temp$41459=xs$41434);($length$41465=temp$41459.length);($index$41471=0);$41444:for(;($index$41471<$length$41465);($index$41471++)){var cls$41492;var x$41488;var m$41480;(m$41480=temp$41459[$index$41471]);(x$41488=m$41480);(cls$41492=classifier$41435(x$41488));if((cls$41492===currcls$41442)){curr$41443.push(x$41488);}else{if(curr$41443){groups$41441.push(curr$41443);}(curr$41443=[cls$41492,x$41488]);(currcls$41442=cls$41492);}}if(curr$41443){groups$41441.push(curr$41443);}return groups$41441;}));(neighbours$41175=(function($41511$41514){var x$41553;var y$41554;var rest$41555;var x$41548;var $41520$41535;var $41521$41536;var t0$41533;var $41516$41528;var ph$41522;(ph$41522=$41511$41514);($41516$41528=ph$41522);if((($41520$41535=($41516$41528 instanceof Array))&&(((t0$41533=$41516$41528.length)),(t0$41533===0)))){return [];}else{if(($41520$41535&&(t0$41533===1))){(x$41548=$41516$41528[0]);return [];}else{if(($41520$41535&&(t0$41533>=2))){(x$41553=$41516$41528[0]);(y$41554=$41516$41528[1]);(rest$41555=Array.prototype.slice.call($41516$41528,2));return [[x$41553,y$41554]].concat(neighbours$41175([y$41554].concat(rest$41555)));}else{$41870($41516$41528);}}}}));(partition$41176=(function(xs$41565,predicate$41566){var $index$41598;var $length$41592;var temp$41586;var t$41571;var f$41572;(t$41571=[]);(f$41572=[]);(temp$41586=xs$41565);($length$41592=temp$41586.length);($index$41598=0);$41573:for(;($index$41598<$length$41592);($index$41598++)){var x$41620;var x$41615;var m$41607;(m$41607=temp$41586[$index$41598]);(x$41615=m$41607);if(predicate$41566(x$41615)){t$41571.push(x$41615);}else{(x$41620=m$41607);f$41572.push(x$41620);}}return [t$41571,f$41572];}));(product$41177=(function(a$41627,b$41628){var $index$41654;var $length$41648;var temp$41642;var results$41632;(results$41632=[]);(temp$41642=a$41627);($length$41648=temp$41642.length);($index$41654=0);$41633:for(;($index$41654<$length$41648);($index$41654++)){var $index$41696;var $length$41690;var temp$41684;var acc$41678;var x$41671;var m$41663;(m$41663=temp$41642[$index$41654]);(x$41671=m$41663);(results$41632=results$41632.concat((((acc$41678=[])),(((temp$41684=b$41628)),((($length$41690=temp$41684.length)),((($index$41696=0)),(function(){$41673:for(;($index$41696<$length$41690);($index$41696++)){var y$41713;var m$41705;(m$41705=temp$41684[$index$41696]);(y$41713=m$41705);acc$41678.push([x$41671,y$41713]);}})()))),acc$41678)));}return results$41632;}));(construct$41178=(function($41720$41723,fn$41724,zero$41725){var x$41764;var rest$41765;var x$41759;var $41731$41746;var $41732$41747;var t0$41744;var $41727$41739;var ph$41733;(ph$41733=$41720$41723);($41727$41739=ph$41733);if((($41731$41746=($41727$41739 instanceof Array))&&(((t0$41744=$41727$41739.length)),(t0$41744===0)))){return zero$41725;}else{if(($41731$41746&&(t0$41744===1))){(x$41759=$41727$41739[0]);return x$41759;}else{if(($41731$41746&&(t0$41744>=1))){(x$41764=$41727$41739[0]);(rest$41765=Array.prototype.slice.call($41727$41739,1));return fn$41724(x$41764,construct$41178(rest$41765,fn$41724,zero$41725));}else{$41870($41727$41739);}}}}));(mkset$41179=(function(xs$41775){var $index$41801;var $length$41795;var temp$41789;var rval$41779;(rval$41779=({}));(temp$41789=xs$41775);($length$41795=temp$41789.length);($index$41801=0);$41780:for(;($index$41801<$length$41795);($index$41801++)){var x$41818;var m$41810;(m$41810=temp$41789[$index$41801]);(x$41818=m$41810);(rval$41779[x$41818]=true);}return rval$41779;}));(exports["GenSym"]=GenSym$41169);(exports["gensym"]=gensym$41170);(exports["identity"]=identity$41171);(exports["binsearch"]=binsearch$41172);(exports["classify"]=classify$41173);(exports["classify_contiguous"]=classify_contiguous$41174);(exports["neighbours"]=neighbours$41175);(exports["partition"]=partition$41176);(exports["construct"]=construct$41178);(exports["mkset"]=mkset$41179);(exports["product"]=product$41177);
