var τ34=function(type$4782){var f$4785;(f$4785=type$4782["::check"]);;if((f$4785===(void 0))){return function(value$4790){return (value$4790 instanceof type$4782);};}else{return function(value$4793){return f$4785.call(type$4782,value$4793);};}};
var τ35=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var τ36=function(temp$4795$4797){var ph$4801;(ph$4801=temp$4795$4797);;var m$4799$4806;(m$4799$4806=ph$4801);;var bridge$4800$4811;var x$4815;(bridge$4800$4811=m$4799$4806);if((((typeof(bridge$4800$4811)==="string")&&((x$4815=bridge$4800$4811),true))||((typeof(bridge$4800$4811)==="number")&&((x$4815=bridge$4800$4811),true)))){return ["value",x$4815];}else{var other$4822;(other$4822=m$4799$4806);return other$4822["::serialize_ast"]();}};
var send$4644;(send$4644=function(obj$4649,temp$4647$4650){var ph$4654;var msg$4655;var t0$4657;(t0$4657=temp$4647$4650);(msg$4655=t0$4657);(ph$4654=t0$4657);;var m$4652$4661;(m$4652$4661=ph$4654);;var bridge$4653$4666;(bridge$4653$4666=m$4652$4661);if(((typeof(bridge$4653$4666)==="string")||(typeof(bridge$4653$4666)==="number"))){return obj$4649[msg$4655];}else{var other$4674;(other$4674=m$4652$4661);return obj$4649["::send"](msg$4655);}});;(Array[":::project"]=function(temp$4677$4679){var ph$4682;var value$4683;var t0$4685;(t0$4685=temp$4677$4679);(value$4683=t0$4685);(ph$4682=t0$4685);;var m$4681$4689;(m$4681$4689=ph$4682);;if(τ34(Array)(m$4681$4689)){return [true,value$4683];}else{m$4681$4689;return [true,[value$4683]];}});(Array.prototype["::check"]=function(value$4703){if((value$4703 instanceof Array)){var i$4708;(i$4708=0);;$4706:for(;(i$4708<this.length);(i$4708++)){if((τ35(this,i$4708)!==τ35(value$4703,i$4708))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$4717){if((value$4717 instanceof Array)){var i$4722;(i$4722=0);;$4720:for(;(i$4722<this.length);(i$4722++)){if((τ35(this,i$4722)!==τ35(value$4717,i$4722))){return [true,[value$4717]];}}return [true,value$4717.slice(this.length)];}else{return [true,[value$4717]];}});(Array.prototype[":::deconstruct"]=function(value$4731){return [true,value$4731.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map(τ36));});(RegExp.prototype["::check"]=function(value$4736){return value$4736.match(this);});(RegExp.prototype[":::project"]=function(value$4739){var m$4741$4743;(m$4741$4743=value$4739.match(this));;var m$4751;if((m$4741$4743===null)){(m$4751=m$4741$4743);return [false,null];}else{var m$4756;(m$4756=m$4741$4743);return [true,m$4756];}});(RegExp.prototype[":::deconstruct"]=function(value$4759){var m$4761$4763;(m$4761$4763=value$4759.match(this));;var m$4771;if((m$4761$4763===null)){(m$4771=m$4761$4763);return [false,null];}else{var m$4776;(m$4776=m$4761$4763);return [true,m$4776];}});(Function.prototype["::send"]=function(args$4779){return this.apply(this,args$4779);});
var τ37=function(dest$6285,values$6286){var k$6291;(k$6291=null);$6289:for(k$6291 in values$6286){if(values$6286.hasOwnProperty(k$6291)){(dest$6285[k$6291]=values$6286[k$6291]);}}return dest$6285;};
var τ39=function(type$6400){return function(value$6403){var f$6406;(f$6406=type$6400[":::project"]);;if((f$6406===(void 0))){var f$6411;(f$6411=type$6400["::project"]);;if((f$6411===(void 0))){return [true,type$6400(value$6403)];}else{var rval$6416;(rval$6416=false);;try{(rval$6416=[true,f$6411(value$6403)]);}catch(excv$6422){var e$6428;(e$6428=excv$6422);(rval$6416=[false,null]);}return rval$6416;}}else{return f$6406.call(type$6400,value$6403);}};};
var τ38=function(){var $6295$6297;($6295$6297=function(temp$6300$6303,temp$6301$6304){var classes$6306;var children$6307;var t0$6309;(t0$6309=τ39(Array)(temp$6300$6303));if(t0$6309[0]){(classes$6306=t0$6309[1]);;}else{throw Error("Mismatch");}var t0$6314;(t0$6314=τ39(Array)(temp$6301$6304));if(t0$6314[0]){(children$6307=t0$6314[1]);;}else{throw Error("Mismatch");}var it$0$6319;(it$0$6319=function(){if((!τ34($6295$6297)(this))){return Object.create($6295$6297.prototype);}else{return this;}}());;(it$0$6319["classes"]=classes$6306.sort());(it$0$6319["children"]=children$6307);return it$0$6319;});;τ37(function(){var accum$6327;(accum$6327=({}));(accum$6327["::check"]=function(x$6331){return ((x$6331&&x$6331.classes)&&x$6331.children);});return accum$6327;}(),function(){var accum$6334;(accum$6334=({}));(accum$6334["::deconstruct"]=function(x$6338){return [x$6338.classes,x$6338.children];});return accum$6334;}());($6295$6297.prototype["::check"]=function(n$6343){var it$0$6346;(it$0$6346=this);;var temp$6354;(temp$6354=it$0$6346.classes);;var len$6359;(len$6359=temp$6354.length);;var i$6364;(i$6364=0);;$6351:for(;(i$6364<len$6359);(i$6364++)){var m$6372;(m$6372=temp$6354[i$6364]);;var c$6380;(c$6380=m$6372);if((n$6343.classes.indexOf(c$6380)===(-1))){return false;}else{false;;}}return true;});τ37($6295$6297,τ37(function(){var accum$6386;(accum$6386=({}));(accum$6386["::check"]=function(x$6390){return ((x$6390&&x$6390.classes)&&x$6390.children);});return accum$6386;}(),function(){var accum$6393;(accum$6393=({}));(accum$6393["::deconstruct"]=function(x$6397){return [x$6397.classes,x$6397.children];});return accum$6393;}()));return $6295$6297;}();
var τ40=function(from$6431,to$6432){var rval$6436;(rval$6436=[]);;var i$6441;(i$6441=from$6431);;$6435:for(;(i$6441<=to$6432);(i$6441++)){rval$6436.push(i$6441);}return rval$6436;};
var τ41=function(){var $6448$6450;($6448$6450=function(tags$6454){var it$0$6457;(it$0$6457=function(){if((!τ34($6448$6450)(this))){return Object.create($6448$6450.prototype);}else{return this;}}());;(it$0$6457["tags"]=tags$6454);return it$0$6457;});;($6448$6450.prototype["create"]=function(){var m$6466$6468;(m$6466$6468=arguments);;var t0$6473;var message$6477;var args$6478;(t0$6473=m$6466$6468.length);if((t0$6473>=0)){(message$6477=function(){if((0>=t0$6473)){return "";}else{return m$6466$6468[0];}}());(args$6478=Array.prototype.slice.call(m$6466$6468,1));var it$0$6482;(it$0$6482=this);;var e$6487;(e$6487=Error(message$6477));;(e$6487["::tags"]=it$0$6482.tags);(e$6487["args"]=args$6478);(e$6487["name"]=["E"].concat(it$0$6482.tags).join("."));return e$6487;}else{throw Error("mismatch!!");}});($6448$6450.prototype["::check"]=function(e$6496){var it$0$6499;(it$0$6499=this);;var tags$6504;if(((!e$6496)||(!τ34(Error)(e$6496)))){return false;}(tags$6504=(e$6496["::tags"]||[]));;var temp$6512;(temp$6512=it$0$6499.tags);;var len$6517;(len$6517=temp$6512.length);;var i$6522;(i$6522=0);;$6509:for(;(i$6522<len$6517);(i$6522++)){var m$6530;(m$6530=temp$6512[i$6522]);;var tag$6538;(tag$6538=m$6530);if((tags$6504.indexOf(tag$6538)===(-1))){return false;}else{false;;}}return true;});($6448$6450.prototype["::deconstruct"]=function(e$6546){var it$0$6549;(it$0$6549=this);;return e$6546.args;});τ37($6448$6450,({}));return $6448$6450;}();
var τ42=function(temp$6553$6555,key$6556){var ph$6560;(ph$6560=temp$6553$6555);;var m$6558$6565;(m$6558$6565=ph$6560);;var bridge$6559$6570;(bridge$6559$6570=m$6558$6565);if(((bridge$6559$6570===null)||(bridge$6559$6570===(void 0)))){return false;}else{var x$6578;if((typeof(m$6558$6565)==="string")){(x$6578=m$6558$6565);return (key$6556 in String.prototype);}else{var x$6583;if((typeof(m$6558$6565)==="number")){(x$6583=m$6558$6565);return (key$6556 in Number.prototype);}else{var x$6588;(x$6588=m$6558$6565);return (key$6556 in x$6588);}}}};var $4826$4828;var binsearch$4829;var items$4830;var enumerate$4831;var $4827$4832;var Node$4833;var __lt____gt__$4834;var repr$4835;var fs$4836;var Source$4837;var Location$4838;var highlight$4839;var highlight_lines$4840;var clamp$4841;var morsel$4842;var highlight_locations$4843;var highlight_locations_same_source$4844;var merge_locations$4845;var __lt____lt____colon__$4846;var __plus____plus____colon__$4847;var format_error$4848;var display_error$4849;($4826$4828=require("./util"));;(binsearch$4829=$4826$4828.binsearch);;(items$4830=$4826$4828.items);;(enumerate$4831=$4826$4828.enumerate);;($4827$4832=require("./pp"));;(Node$4833=$4827$4832.Node);;(__lt____gt__$4834=$4827$4832["<>"]);;(repr$4835=$4827$4832.repr);;(fs$4836=require("fs"));;(Source$4837=function(){var i$4919;var len$4914;var temp$4909;var curr$4902;var it$0$4896;var text$4891;var url$4892;var t0$4887;var m$4880$4882;(m$4880$4882=arguments);;(t0$4887=m$4880$4882.length);if(((t0$4887>=1)&&(t0$4887<=2))){(text$4891=m$4880$4882[0]);(url$4892=function(){if((1>=t0$4887)){return false;}else{return m$4880$4882[1];}}());(it$0$4896=function(){if((!τ34(Source$4837)(this))){return Object.create(Source$4837.prototype);}else{return this;}}());;(it$0$4896["text"]=text$4891);(it$0$4896["url"]=url$4892);(it$0$4896["counts"]=[]);(curr$4902=0);;(temp$4909=text$4891.split("\n"));;(len$4914=temp$4909.length);;(i$4919=0);;$4906:for(;(i$4919<len$4914);(i$4919++)){var line$4935;var m$4927;(m$4927=temp$4909[i$4919]);;(line$4935=m$4927);it$0$4896.counts.push(curr$4902);(curr$4902=(curr$4902+(line$4935.length+1)));}it$0$4896.counts.push(curr$4902);(it$0$4896["nlines"]=(it$0$4896.counts.length-1));return it$0$4896;}else{throw Error("mismatch!!");}});;(Source$4837.prototype["linecol"]=function(pos$4944){var line$4952;var col$4953;var it$0$4947;(it$0$4947=this);;(line$4952=binsearch$4829(it$0$4947.counts,pos$4944));;(col$4953=(pos$4944-τ35(it$0$4947.counts,(line$4952-1))));;return [line$4952,col$4953];});(Source$4837.prototype["highlight_lines"]=function(l1$4963,l2$4964,spans$4965){var it$0$4968;(it$0$4968=this);;return highlight_lines$4840(it$0$4968.text,it$0$4968.counts,[(l1$4963-1),(l2$4964-1)],spans$4965);});τ37(Source$4837,({}));Source$4837;(Location$4838=function(source$4975,start$4976,end$4977){var it$0$4980;(it$0$4980=function(){if((!τ34(Location$4838)(this))){return Object.create(Location$4838.prototype);}else{return this;}}());;(it$0$4980["source"]=(source$4975||Source$4837("",null)));(it$0$4980["start"]=start$4976);(it$0$4980["end"]=end$4977);return it$0$4980;});;(Location$4838.prototype["text"]=function(){var it$0$4992;(it$0$4992=this);;return it$0$4992.source.text.slice(it$0$4992.start,it$0$4992.end);});(Location$4838.prototype["linerange"]=function(){var l2$5036;var t0$5027;var t1$5028;var l1$5019;var ph$5002$5020;var t0$5013;var t1$5014;var t2$5015;var m$5001$5008;var it$0$5003;(it$0$5003=this);;(m$5001$5008=it$0$5003.linecol());;if(((m$5001$5008 instanceof Array)&&((t0$5013=m$5001$5008.length),((t0$5013===2)&&((t1$5014=m$5001$5008[0]),((t1$5014 instanceof Array)&&((t2$5015=t1$5014.length),(t2$5015===2)))))))){(l1$5019=t1$5014[0]);t1$5014[1];(ph$5002$5020=m$5001$5008[1]);if((ph$5002$5020===null)){return [l1$5019,l1$5019];}else{(t0$5027=ph$5002$5020);if(((t0$5027 instanceof Array)&&((t1$5028=t0$5027.length),(t1$5028===2)))){(l2$5036=t0$5027[0]);t0$5027[1];return [l1$5019,l2$5036];}else{throw Error("mismatch!!");}}}else{throw Error("mismatch!!");}});(Location$4838.prototype["linecol"]=function(){var start$5054;var end$5055;var it$0$5049;(it$0$5049=this);;(start$5054=it$0$5049.source.linecol(it$0$5049.start));;(end$5055=function(){if((it$0$5049.start===it$0$5049.end)){return null;}else{return it$0$5049.source.linecol((it$0$5049.end-1));}}());;return [start$5054,end$5055];});(Location$4838.prototype["ref"]=function(){var otherwise$5138;var $5119$5127;var m$5118$5121;var l2$5110;var c2$5111;var t0$5099;var t1$5100;var t2$5101;var t3$5102;var l1$5087;var c1$5088;var ph$5068$5089;var t0$5079;var t1$5080;var t2$5081;var t3$5082;var t4$5083;var m$5067$5074;var it$0$5069;(it$0$5069=this);;(m$5067$5074=it$0$5069.linecol());;if(((m$5067$5074 instanceof Array)&&((t0$5079=m$5067$5074.length),((t0$5079===2)&&((t1$5080=m$5067$5074[0]),((t1$5080 instanceof Array)&&((t2$5081=t1$5080.length),((t2$5081===2)&&((t3$5082=[true,String(t1$5080[0])]),(t3$5082[0]&&((l1$5087=t3$5082[1]),((t4$5083=[true,String(t1$5080[1])]),t4$5083[0])))))))))))){(c1$5088=t4$5083[1]);(ph$5068$5089=m$5067$5074[1]);if((ph$5068$5089===null)){return ((l1$5087+":")+c1$5088);}else{(t0$5099=ph$5068$5089);if(((t0$5099 instanceof Array)&&((t1$5100=t0$5099.length),((t1$5100===2)&&((t2$5101=[true,String(t0$5099[0])]),(t2$5101[0]&&((l2$5110=t2$5101[1]),((t3$5102=[true,String(t0$5099[1])]),t3$5102[0])))))))){(c2$5111=t3$5102[1]);(m$5118$5121=null);;m$5118$5121;if(((l1$5087===l2$5110)&&(c1$5088===c2$5111))){return ((l1$5087+":")+c1$5088);}else{if((l1$5087===l2$5110)){return ((((l1$5087+":")+c1$5088)+"-")+c2$5111);}else{(otherwise$5138=m$5118$5121);return ((((((l1$5087+":")+c1$5088)+"-")+l1$5087)+":")+c2$5111);}}}else{throw Error("mismatch!!");}}}else{throw Error("mismatch!!");}});(Location$4838.prototype["highlight"]=function(){var it$0$5163;var cls$5158;var context$5159;var t0$5154;var m$5147$5149;(m$5147$5149=arguments);;(t0$5154=m$5147$5149.length);if(((t0$5154>=0)&&(t0$5154<=2))){(cls$5158=function(){if((0>=t0$5154)){return "hl1";}else{return m$5147$5149[0];}}());(context$5159=function(){if((1>=t0$5154)){return 0;}else{return m$5147$5149[1];}}());(it$0$5163=this);;return highlight_locations$4843([[it$0$5163,cls$5158]],context$5159);}else{throw Error("mismatch!!");}});τ37(Location$4838,({}));Location$4838;(highlight$4839=function(){var i$5205;var len$5200;var temp$5195;var acc$5190;var text$5183;var spans$5184;var offset$5185;var t0$5179;var m$5172$5174;(m$5172$5174=arguments);;(t0$5179=m$5172$5174.length);if(((t0$5179>=2)&&(t0$5179<=3))){(text$5183=m$5172$5174[0]);(spans$5184=m$5172$5174[1]);(offset$5185=function(){if((2>=t0$5179)){return 0;}else{return m$5172$5174[2];}}());return τ38([],(((acc$5190=[])),(((temp$5195=morsel$4842(spans$5184))),(((len$5200=temp$5195.length)),(((i$5205=0)),function(){$5188:for(;(i$5205<len$5200);(i$5205++)){var xstart$5230;var xend$5231;var start$5223;var end$5224;var attributes$5225;var t0$5218;var t1$5219;var m$5213;(m$5213=temp$5195[i$5205]);;(t0$5218=m$5213);if(((t0$5218 instanceof Array)&&((t1$5219=t0$5218.length),(t1$5219===3)))){(start$5223=t0$5218[0]);(end$5224=t0$5218[1]);(attributes$5225=t0$5218[2]);acc$5190.push((((xstart$5230=Math.max((start$5223-offset$5185),0))),((xend$5231=Math.min((end$5224-offset$5185),text$5183.length))),Node$4833(attributes$5225,[text$5183.slice(xstart$5230,xend$5231)])));}else{false;;}}}()))),acc$5190));}else{throw Error("mismatch!!");}});;(highlight_lines$4840=function(text$5247,linelocs$5248,temp$5245$5249,spans$5250){var t0$5255;var t1$5256;var i$5278;var len$5273;var temp$5268;var acc$5263;var l1$5252;var l2$5253;(t0$5255=temp$5245$5249);if(((t0$5255 instanceof Array)&&((t1$5256=t0$5255.length),(t1$5256===2)))){(l1$5252=t0$5255[0]);(l2$5253=t0$5255[1]);;}else{throw Error("Mismatch");}return τ38(["+span"],(((acc$5263=[])),(((temp$5268=τ40(l1$5252,l2$5253))),(((len$5273=temp$5268.length)),(((i$5278=0)),function(){$5261:for(;(i$5278<len$5273);(i$5278++)){var start$5297;var end$5298;var lineno$5294;var m$5286;(m$5286=temp$5268[i$5278]);;(lineno$5294=m$5286);acc$5263.push((((start$5297=τ35(linelocs$5248,lineno$5294))),((end$5298=τ35(linelocs$5248,(lineno$5294+1)))),τ38(["+span"],[τ38(["lineno"],(lineno$5294+1)),τ38(["source"],highlight$4839(text$5247,[[start$5297,end$5298,[]]].concat(clamp$4841(spans$5250,start$5297,end$5298))))])));}}()))),acc$5263));});;(clamp$4841=function(spans$5309,bot$5310,top$5311){var i$5330;var len$5325;var temp$5320;var acc$5315;(acc$5315=[]);;(temp$5320=spans$5309);;(len$5325=temp$5320.length);;(i$5330=0);;$5313:for(;(i$5330<len$5325);(i$5330++)){var start$5348;var end$5349;var attr$5350;var t0$5343;var t1$5344;var m$5338;(m$5338=temp$5320[i$5330]);;(t0$5343=m$5338);if(((t0$5343 instanceof Array)&&((t1$5344=t0$5343.length),((t1$5344===3)&&((start$5348=t0$5343[0]),((end$5349=t0$5343[1]),((attr$5350=t0$5343[2]),((end$5349>=bot$5310)&&(start$5348<=top$5311))))))))){acc$5315.push([Math.max(start$5348,bot$5310),Math.min(end$5349,top$5311),attr$5350]);}else{false;;}}return acc$5315;});;(morsel$4842=function(spans$5363){var jump$5366;var jumptill$5367;var process$5368;var thespans$5369;(jump$5366=function(active$5373,bot$5374,top$5375){var i$5400;var len$5395;var temp$5390;var acc$5385;var i$5441;var len$5436;var temp$5431;var e$5378;var attributes$5379;(e$5378=τ35(Math.min,[top$5375].concat((((acc$5385=[])),(((temp$5390=active$5373)),(((len$5395=temp$5390.length)),(((i$5400=0)),function(){$5383:for(;(i$5400<len$5395);(i$5400++)){var x$5418;var t0$5413;var t1$5414;var m$5408;(m$5408=temp$5390[i$5400]);;(t0$5413=m$5408);if(((t0$5413 instanceof Array)&&((t1$5414=t0$5413.length),(t1$5414===3)))){t0$5413[0];(x$5418=t0$5413[1]);t0$5413[2];acc$5385.push(x$5418);}else{false;;}}}()))),acc$5385))));;(attributes$5379=[]);;(temp$5431=active$5373);;(len$5436=temp$5431.length);;(i$5441=0);;$5428:for(;(i$5441<len$5436);(i$5441++)){var X$5459;var t0$5454;var t1$5455;var m$5449;(m$5449=temp$5431[i$5441]);;(t0$5454=m$5449);if(((t0$5454 instanceof Array)&&((t1$5455=t0$5454.length),(t1$5455===3)))){t0$5454[0];t0$5454[1];(X$5459=t0$5454[2]);(attributes$5379=attributes$5379.concat(X$5459));}else{false;;}}return [e$5378,[bot$5374,e$5378,attributes$5379]];});;(jumptill$5367=function(active$5469,bot$5470,top$5471){var t0$5480;var t1$5481;var i$5505;var len$5500;var temp$5495;var acc$5490;var t0$5536;var t1$5537;var newbot$5474;var span$5475;var newactive$5476;var spans$5477;var remainder$5478;if((bot$5470===top$5471)){return [[],active$5469];}else{(t0$5480=jump$5366(active$5469,bot$5470,top$5471));if(((t0$5480 instanceof Array)&&((t1$5481=t0$5480.length),(t1$5481===2)))){(newbot$5474=t0$5480[0]);(span$5475=t0$5480[1]);;}else{throw Error("Mismatch");}(newactive$5476=(((acc$5490=[])),(((temp$5495=active$5469)),(((len$5500=temp$5495.length)),(((i$5505=0)),function(){$5488:for(;(i$5505<len$5500);(i$5505++)){var x$5523;var e$5524;var attr$5525;var t0$5518;var t1$5519;var m$5513;(m$5513=temp$5495[i$5505]);;(t0$5518=m$5513);(x$5523=t0$5518);if(((t0$5518 instanceof Array)&&((t1$5519=t0$5518.length),((t1$5519===3)&&(t0$5518[0],((e$5524=t0$5518[1]),((attr$5525=t0$5518[2]),(e$5524>newbot$5474)))))))){acc$5490.push(x$5523);}else{false;;}}}()))),acc$5490));;(t0$5536=jumptill$5367(newactive$5476,newbot$5474,top$5471));if(((t0$5536 instanceof Array)&&((t1$5537=t0$5536.length),(t1$5537===2)))){(spans$5477=t0$5536[0]);(remainder$5478=t0$5536[1]);;}else{throw Error("Mismatch");}return [[span$5475].concat(spans$5477),remainder$5478];}});;(process$5368=function(start$5546,active$5547,rem$5548){var i$5612;var len$5607;var temp$5602;var acc$5597;var t0$5641;var t1$5642;var top$5590;var bot$5591;var spans$5592;var t0$5669;var t1$5670;var spans$5666;var newactive$5667;var start$5649;var active$5650;var next$5651;var target$5652;var end$5653;var attr$5654;var rest$5655;var start$5581;var active$5582;var $5551$5566;var $5552$5567;var $5553$5568;var t0$5560;var t1$5561;var t2$5562;var t3$5563;var t4$5564;var m$5550$5555;(m$5550$5555=[start$5546,active$5547,rem$5548]);;if((($5551$5566=(m$5550$5555 instanceof Array))&&((t0$5560=m$5550$5555.length),(($5553$5568=(t0$5560===3))&&(m$5550$5555[0],((t1$5561=m$5550$5555[1]),((t1$5561 instanceof Array)&&((t2$5562=t1$5561.length),((t2$5562===0)&&((t3$5563=m$5550$5555[2]),((t3$5563 instanceof Array)&&((t4$5564=t3$5563.length),(t4$5564===0))))))))))))){return [];}else{if(($5553$5568&&((start$5581=m$5550$5555[0]),((active$5582=m$5550$5555[1]),((t1$5561=m$5550$5555[2]),((t1$5561 instanceof Array)&&((t2$5562=t1$5561.length),(t2$5562===0)))))))){(top$5590=τ35(Math.max,(((acc$5597=[])),(((temp$5602=active$5582)),(((len$5607=temp$5602.length)),(((i$5612=0)),function(){$5595:for(;(i$5612<len$5607);(i$5612++)){var e$5630;var t0$5625;var t1$5626;var m$5620;(m$5620=temp$5602[i$5612]);;(t0$5625=m$5620);if(((t0$5625 instanceof Array)&&((t1$5626=t0$5625.length),(t1$5626===3)))){t0$5625[0];(e$5630=t0$5625[1]);t0$5625[2];acc$5597.push(e$5630);}else{false;;}}}()))),acc$5597)));;(bot$5591=Math.min(start$5581,top$5590));;(t0$5641=jumptill$5367(active$5582,start$5581,top$5590));if(((t0$5641 instanceof Array)&&((t1$5642=t0$5641.length),(t1$5642===2)))){(spans$5592=t0$5641[0]);t0$5641[1];;}else{throw Error("Mismatch");}return spans$5592;}else{if(($5553$5568&&((start$5649=m$5550$5555[0]),((active$5650=m$5550$5555[1]),((t1$5561=m$5550$5555[2]),((t1$5561 instanceof Array)&&((t2$5562=t1$5561.length),((t2$5562>=1)&&((t3$5563=t1$5561[0]),((next$5651=t3$5563),((t3$5563 instanceof Array)&&((t4$5564=t3$5563.length),(t4$5564===3))))))))))))){(target$5652=t3$5563[0]);(end$5653=t3$5563[1]);(attr$5654=t3$5563[2]);(rest$5655=Array.prototype.slice.call(t1$5561,1));(t0$5669=jumptill$5367(active$5650,start$5649,target$5652));if(((t0$5669 instanceof Array)&&((t1$5670=t0$5669.length),(t1$5670===2)))){(spans$5666=t0$5669[0]);(newactive$5667=t0$5669[1]);;}else{throw Error("Mismatch");}return spans$5666.concat(process$5368(target$5652,[next$5651].concat(newactive$5667),rest$5655));}else{throw Error("mismatch!!");}}}});;(thespans$5369=spans$5363.sort(function(temp$5680$5683,temp$5681$5684){var t0$5691;var t1$5692;var t0$5698;var t1$5699;var s1$5686;var e1$5687;var s2$5688;var e2$5689;(t0$5691=temp$5680$5683);if(((t0$5691 instanceof Array)&&((t1$5692=t0$5691.length),(t1$5692===3)))){(s1$5686=t0$5691[0]);(e1$5687=t0$5691[1]);t0$5691[2];;}else{throw Error("Mismatch");}(t0$5698=temp$5681$5684);if(((t0$5698 instanceof Array)&&((t1$5699=t0$5698.length),(t1$5699===3)))){(s2$5688=t0$5698[0]);(e2$5689=t0$5698[1]);t0$5698[2];;}else{throw Error("Mismatch");}if((s1$5686===s2$5688)){return (e1$5687-e2$5689);}else{return (s1$5686-s2$5688);}}));;return process$5368(thespans$5369[0][0],[],thespans$5369);});;(highlight_locations$4843=function(){var i$5742;var len$5737;var temp$5732;var i$5790;var len$5785;var temp$5780;var acc$5775;var srcs$5725;var locations$5720;var context$5721;var t0$5716;var m$5709$5711;(m$5709$5711=arguments);;(t0$5716=m$5709$5711.length);if(((t0$5716>=1)&&(t0$5716<=2))){(locations$5720=m$5709$5711[0]);(context$5721=function(){if((1>=t0$5716)){return 0;}else{return m$5709$5711[1];}}());(srcs$5725=({}));;(temp$5732=locations$5720);;(len$5737=temp$5732.length);;(i$5742=0);;$5729:for(;(i$5742<len$5737);(i$5742++)){var key$5766;var loc$5760;var cls$5761;var t0$5755;var t1$5756;var m$5750;(m$5750=temp$5732[i$5742]);;(t0$5755=m$5750);if(((t0$5755 instanceof Array)&&((t1$5756=t0$5755.length),(t1$5756===2)))){(loc$5760=t0$5755[0]);(cls$5761=t0$5755[1]);(key$5766=String((loc$5760.source&&loc$5760.source.url)));;if((!τ35(srcs$5725,key$5766))){(srcs$5725[key$5766]=[]);}τ35(srcs$5725,key$5766).push([loc$5760,cls$5761]);}else{false;;}}return τ38(["+div"],(((acc$5775=[])),(((temp$5780=items$4830(srcs$5725))),(((len$5785=temp$5780.length)),(((i$5790=0)),function(){$5773:for(;(i$5790<len$5785);(i$5790++)){var locs$5808;var t0$5803;var t1$5804;var m$5798;(m$5798=temp$5780[i$5790]);;(t0$5803=m$5798);if(((t0$5803 instanceof Array)&&((t1$5804=t0$5803.length),(t1$5804===2)))){t0$5803[0];(locs$5808=t0$5803[1]);acc$5775.push(highlight_locations_same_source$4844(locs$5808,context$5721));}else{false;;}}}()))),acc$5775));}else{throw Error("mismatch!!");}});;(highlight_locations_same_source$4844=function(){var i$5861;var len$5856;var temp$5851;var acc$5846;var t0$5891;var t1$5892;var i$5920;var len$5915;var temp$5910;var acc$5905;var i$5962;var len$5957;var temp$5952;var acc$5947;var loc$5836;var src$5837;var l1$5838;var l2$5839;var first$5840;var last$5841;var locations$5831;var context$5832;var t0$5827;var m$5820$5822;(m$5820$5822=arguments);;(t0$5827=m$5820$5822.length);if(((t0$5827>=1)&&(t0$5827<=2))){(locations$5831=m$5820$5822[0]);(context$5832=function(){if((1>=t0$5827)){return 0;}else{return m$5820$5822[1];}}());(loc$5836=merge_locations$4845((((acc$5846=[])),(((temp$5851=locations$5831)),(((len$5856=temp$5851.length)),(((i$5861=0)),function(){$5844:for(;(i$5861<len$5856);(i$5861++)){var x$5879;var cls$5880;var t0$5874;var t1$5875;var m$5869;(m$5869=temp$5851[i$5861]);;(t0$5874=m$5869);if(((t0$5874 instanceof Array)&&((t1$5875=t0$5874.length),(t1$5875===2)))){(x$5879=t0$5874[0]);(cls$5880=t0$5874[1]);acc$5846.push(x$5879);}else{false;;}}}()))),acc$5846)));;(src$5837=loc$5836.source);;(t0$5891=loc$5836.linerange());if(((t0$5891 instanceof Array)&&((t1$5892=t0$5891.length),(t1$5892===2)))){(l1$5838=t0$5891[0]);(l2$5839=t0$5891[1]);;}else{throw Error("Mismatch");}(first$5840=Math.max(1,(l1$5838-context$5832)));;(last$5841=Math.min(src$5837.nlines,(l2$5839+context$5832)));;return τ38(["+div","location"],[τ38(["+div","source"],[τ38(["sourcefile"],(src$5837.url||"???")),(((acc$5905=[])),(((temp$5910=locations$5831)),(((len$5915=temp$5910.length)),(((i$5920=0)),function(){$5903:for(;(i$5920<len$5915);(i$5920++)){var loc$5938;var cls$5939;var t0$5933;var t1$5934;var m$5928;(m$5928=temp$5910[i$5920]);;(t0$5933=m$5928);if(((t0$5933 instanceof Array)&&((t1$5934=t0$5933.length),(t1$5934===2)))){(loc$5938=t0$5933[0]);(cls$5939=t0$5933[1]);acc$5905.push(Node$4833([cls$5939,"sourcepos"],loc$5938.ref()));}else{false;;}}}()))),acc$5905)]),src$5837.highlight_lines(first$5840,last$5841,(((acc$5947=[])),(((temp$5952=locations$5831)),(((len$5957=temp$5952.length)),(((i$5962=0)),function(){$5945:for(;(i$5962<len$5957);(i$5962++)){var loc$5980;var cls$5981;var t0$5975;var t1$5976;var m$5970;(m$5970=temp$5952[i$5962]);;(t0$5975=m$5970);if(((t0$5975 instanceof Array)&&((t1$5976=t0$5975.length),(t1$5976===2)))){(loc$5980=t0$5975[0]);(cls$5981=t0$5975[1]);acc$5947.push([loc$5980.start,loc$5980.end,[cls$5981]]);}else{false;;}}}()))),acc$5947))]);}else{throw Error("mismatch!!");}});;(merge_locations$4845=function(temp$5992$5994){var i$6050;var len$6045;var temp$6040;var acc$6035;var i$6088;var len$6083;var temp$6078;var acc$6073;var start$6029;var end$6030;var locs$6025;var loc$6020;var $5997$6011;var $5998$6012;var t0$6009;var m$5996$6004;var ph$5999;(ph$5999=temp$5992$5994);;(m$5996$6004=ph$5999);;if((($5997$6011=(m$5996$6004 instanceof Array))&&((t0$6009=m$5996$6004.length),(t0$6009===0)))){return Location$4838(null,0,0);}else{if(($5997$6011&&(t0$6009===1))){(loc$6020=m$5996$6004[0]);return loc$6020;}else{if(($5997$6011&&(t0$6009>=0))){(locs$6025=Array.prototype.slice.call(m$5996$6004,0));(start$6029=τ35(Math.min,(((acc$6035=[])),(((temp$6040=locs$6025)),(((len$6045=temp$6040.length)),(((i$6050=0)),function(){$6033:for(;(i$6050<len$6045);(i$6050++)){var loc$6066;var m$6058;(m$6058=temp$6040[i$6050]);;(loc$6066=m$6058);acc$6035.push(loc$6066.start);}}()))),acc$6035)));;(end$6030=τ35(Math.max,(((acc$6073=[])),(((temp$6078=locs$6025)),(((len$6083=temp$6078.length)),(((i$6088=0)),function(){$6071:for(;(i$6088<len$6083);(i$6088++)){var loc$6104;var m$6096;(m$6096=temp$6078[i$6088]);;(loc$6104=m$6096);acc$6073.push(loc$6104.end);}}()))),acc$6073)));;return Location$4838(locs$6025[0].source,start$6029,end$6030);}else{throw Error("mismatch!!");}}}});;(__lt____lt____colon__$4846=function(x$6113,y$6114){if((!x$6113.location)){(x$6113["location"]=function(){if(((!y$6114)||τ34(Location$4838)(y$6114))){return y$6114;}else{return y$6114.location;}}());}return x$6113;});;(__plus____plus____colon__$4847=function(x$6122,y$6123){var rval$6127;(x$6122=function(){if(((!x$6122)||τ34(Location$4838)(x$6122))){return x$6122;}else{return x$6122.location;}}());(y$6123=function(){if(((!y$6123)||τ34(Location$4838)(y$6123))){return y$6123;}else{return y$6123.location;}}());(rval$6127=false);;try{(rval$6127=merge_locations$4845([x$6122,y$6123]));}catch(excv$6133){var e$6139;(e$6139=excv$6133);(rval$6127=(void 0));}return rval$6127;});;(format_error$4848=function(temp$6144$6146){var t0$6154;var i$6199;var len$6194;var temp$6189;var acc$6184;var hls$6175;var locs$6176;var rval$6252;var loc$6268;var data$6248;var other$6274;var url$6241;var start$6242;var end$6243;var loc$6235;var args$6170;var $6149$6166;var $6150$6167;var t0$6163;var t1$6164;var m$6148$6158;var ph$6151;var e$6152;(t0$6154=temp$6144$6146);(e$6152=t0$6154);(ph$6151=t0$6154);;(m$6148$6158=ph$6151);;if((τ34(τ41(["syntax"]))(m$6148$6158)&&((t0$6163=m$6148$6158.length),(t0$6163===1)))){(args$6170=m$6148$6158[0]);(hls$6175=["hl1","hl2","hl3","hl4"]);;(locs$6176=(((acc$6184=[])),(((temp$6189=enumerate$4831(items$4830(args$6170)))),(((len$6194=temp$6189.length)),(((i$6199=0)),function(){$6182:for(;(i$6199<len$6194);(i$6199++)){var i$6219;var key$6220;var arg$6221;var t0$6212;var t1$6213;var t2$6214;var t3$6215;var m$6207;(m$6207=temp$6189[i$6199]);;(t0$6212=m$6207);if(((t0$6212 instanceof Array)&&((t1$6213=t0$6212.length),((t1$6213===2)&&((i$6219=t0$6212[0]),((t2$6214=t0$6212[1]),((t2$6214 instanceof Array)&&((t3$6215=t2$6214.length),((t3$6215===2)&&((key$6220=t2$6214[0]),((arg$6221=t2$6214[1]),(arg$6221&&arg$6221.location)))))))))))){acc$6184.push([arg$6221.location,τ35(hls$6175,(i$6219%4))]);}else{false;;}}}()))),acc$6184));;return τ38(["+div"],[τ38(["+div"],[τ38(["error_type"],e$6152.name),τ38(["error_message"],e$6152.message)]),repr$4835(args$6170),highlight_locations$4843(locs$6176)]);}else{if((($6149$6166=τ42(m$6148$6158,"location"))&&((t0$6163=m$6148$6158.location),τ34(Location$4838)(t0$6163)))){(loc$6235=t0$6163);return τ38(["+div"],[τ38(["+div"],[τ38(["error_type"],e$6152.name),τ38(["error_message"],e$6152.message)]),function(){if(e$6152.args){return repr$4835(e$6152.args);}else{return "";}}(),highlight_locations$4843([[loc$6235,"hl1"]]),τ38(["traceback"],(e$6152.stack||""))]);}else{if(($6149$6166&&((t0$6163 instanceof Array)&&((t1$6164=t0$6163.length),((t1$6164===4)&&(t0$6163[0]==="location")))))){(url$6241=t0$6163[1]);(start$6242=t0$6163[2]);(end$6243=t0$6163[3]);(data$6248=(((rval$6252=false)),(function(){try{(rval$6252=fs$4836.readFileSync(url$6241,"utf8"));}catch(excv$6258){var e$6264;(e$6264=excv$6258);(rval$6252=null);}}(),rval$6252)));;if(data$6248){(loc$6268=Location$4838(Source$4837(data$6248,url$6241),start$6242,end$6243));;return τ38(["+div"],[τ38(["+div"],[τ38(["error_type"],e$6152.name),τ38(["error_message"],e$6152.message)]),function(){if(e$6152.args){return repr$4835(e$6152.args);}else{return "";}}(),highlight_locations$4843([[loc$6268,"hl1"]]),τ38(["traceback"],(e$6152.stack||""))]);}else{return τ38(["+div"],τ38(["traceback"],(e$6152.stack||e$6152)));}}else{(other$6274=m$6148$6158);return τ38(["traceback"],(e$6152.stack||e$6152));}}}});;(display_error$4849=function(e$6280){return __lt____gt__$4834(null,format_error$4848(e$6280));});;(exports["Source"]=Source$4837);(exports["Location"]=Location$4838);(exports["highlight"]=highlight$4839);(exports["highlight_locations"]=highlight_locations$4843);(exports["merge_locations"]=merge_locations$4845);(exports["<<:"]=__lt____lt____colon__$4846);(exports["++:"]=__plus____plus____colon__$4847);(exports["format_error"]=format_error$4848);(exports["display_error"]=display_error$4849);
