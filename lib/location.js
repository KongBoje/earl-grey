var $3331=function(type$3333){var f$3336;(f$3336=type$3333["::check"]);;if((f$3336===(void 0))){return function(value$3341){return (value$3341 instanceof type$3333);};}else{return function(value$3344){return f$3336.call(type$3333,value$3344);};}};
var $3346=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var $3347=function(temp$3348$3350){var ph$3354;(ph$3354=temp$3348$3350);;var m$3352$3359;(m$3352$3359=ph$3354);;var bridge$3353$3364;var x$3368;(bridge$3353$3364=m$3352$3359);if((((typeof(bridge$3353$3364)==="string")&&((x$3368=bridge$3353$3364),true))||((typeof(bridge$3353$3364)==="number")&&((x$3368=bridge$3353$3364),true)))){return ["value",x$3368];}else{var other$3375;(other$3375=m$3352$3359);return other$3375["::serialize_ast"]();}};
var send$3194;(send$3194=function(obj$3199,temp$3197$3200){var ph$3204;var msg$3205;var t0$3207;(t0$3207=temp$3197$3200);(msg$3205=t0$3207);(ph$3204=t0$3207);;var m$3202$3211;(m$3202$3211=ph$3204);;var bridge$3203$3216;(bridge$3203$3216=m$3202$3211);if(((typeof(bridge$3203$3216)==="string")||(typeof(bridge$3203$3216)==="number"))){return obj$3199[msg$3205];}else{var other$3224;(other$3224=m$3202$3211);return obj$3199["::send"](msg$3205);}});;(Array[":::project"]=function(temp$3227$3229){var ph$3232;var value$3233;var t0$3235;(t0$3235=temp$3227$3229);(value$3233=t0$3235);(ph$3232=t0$3235);;var m$3231$3239;(m$3231$3239=ph$3232);;if($3331(Array)(m$3231$3239)){return [true,value$3233];}else{m$3231$3239;return [true,[value$3233]];}});(Array.prototype["::check"]=function(value$3253){if((value$3253 instanceof Array)){var i$3258;(i$3258=0);;$3256:for(;(i$3258<this.length);(i$3258++)){if(($3346(this,i$3258)!==$3346(value$3253,i$3258))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$3267){if((value$3267 instanceof Array)){var i$3272;(i$3272=0);;$3270:for(;(i$3272<this.length);(i$3272++)){if(($3346(this,i$3272)!==$3346(value$3267,i$3272))){return [true,[value$3267]];}}return [true,value$3267.slice(this.length)];}else{return [true,[value$3267]];}});(Array.prototype[":::deconstruct"]=function(value$3281){return [true,value$3281.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map($3347));});(RegExp.prototype["::check"]=function(value$3286){return value$3286.match(this);});(RegExp.prototype[":::project"]=function(value$3289){var m$3291$3293;(m$3291$3293=value$3289.match(this));;var m$3301;if((m$3291$3293===null)){(m$3301=m$3291$3293);return [false,null];}else{var m$3306;(m$3306=m$3291$3293);return [true,m$3306];}});(RegExp.prototype[":::deconstruct"]=function(value$3309){var m$3311$3313;(m$3311$3313=value$3309.match(this));;var m$3321;if((m$3311$3313===null)){(m$3321=m$3311$3313);return [false,null];}else{var m$3326;(m$3326=m$3311$3313);return [true,m$3326];}});(Function.prototype["::send"]=function(args$3329){return this.apply(this,args$3329);});
var $4838=function(dest$4840,values$4841){var k$4846;(k$4846=null);$4844:for(k$4846 in values$4841){if(values$4841.hasOwnProperty(k$4846)){(dest$4840[k$4846]=values$4841[k$4846]);}}return dest$4840;};
var $4955=function(type$4957){return function(value$4960){var f$4963;(f$4963=type$4957[":::project"]);;if((f$4963===(void 0))){var f$4968;(f$4968=type$4957["::project"]);;if((f$4968===(void 0))){return [true,type$4957(value$4960)];}else{var rval$4973;(rval$4973=false);;try{(rval$4973=[true,f$4968(value$4960)]);}catch(excv$4979){var e$4985;(e$4985=excv$4979);(rval$4973=[false,null]);}return rval$4973;}}else{return f$4963.call(type$4957,value$4960);}};};
var $4850=function(){var $4851$4853;($4851$4853=function(temp$4856$4859,temp$4857$4860){var classes$4862;var children$4863;var t0$4865;(t0$4865=$4955(Array)(temp$4856$4859));if(t0$4865[0]){(classes$4862=t0$4865[1]);;}else{throw Error("Mismatch");}var t0$4870;(t0$4870=$4955(Array)(temp$4857$4860));if(t0$4870[0]){(children$4863=t0$4870[1]);;}else{throw Error("Mismatch");}var it$0$4875;(it$0$4875=function(){if((!$3331($4851$4853)(this))){return Object.create($4851$4853.prototype);}else{return this;}}());;(it$0$4875["classes"]=classes$4862.sort());(it$0$4875["children"]=children$4863);return it$0$4875;});;$4838(function(){var accum$4883;(accum$4883=({}));(accum$4883["::check"]=function(x$4887){return ((x$4887&&x$4887.classes)&&x$4887.children);});return accum$4883;}(),function(){var accum$4890;(accum$4890=({}));(accum$4890["::deconstruct"]=function(x$4894){return [x$4894.classes,x$4894.children];});return accum$4890;}());($4851$4853.prototype["::check"]=function(n$4899){var it$0$4902;(it$0$4902=this);;var temp$4910;(temp$4910=it$0$4902.classes);;var len$4915;(len$4915=temp$4910.length);;var i$4920;(i$4920=0);;$4907:for(;(i$4920<len$4915);(i$4920++)){var m$4928;(m$4928=temp$4910[i$4920]);;var c$4936;(c$4936=m$4928);if((n$4899.classes.indexOf(c$4936)===(-1))){return false;}else{false;;}}return true;});$4838($4851$4853,$4838(function(){var accum$4942;(accum$4942=({}));(accum$4942["::check"]=function(x$4946){return ((x$4946&&x$4946.classes)&&x$4946.children);});return accum$4942;}(),function(){var accum$4949;(accum$4949=({}));(accum$4949["::deconstruct"]=function(x$4953){return [x$4953.classes,x$4953.children];});return accum$4949;}()));return $4851$4853;}();
var $4987=function(from$4989,to$4990){var rval$4994;(rval$4994=[]);;var i$4999;(i$4999=from$4989);;$4993:for(;(i$4999<=to$4990);(i$4999++)){rval$4994.push(i$4999);}return rval$4994;};
var $5006=function(){var $5007$5009;($5007$5009=function(tags$5013){var it$0$5016;(it$0$5016=function(){if((!$3331($5007$5009)(this))){return Object.create($5007$5009.prototype);}else{return this;}}());;(it$0$5016["tags"]=tags$5013);return it$0$5016;});;($5007$5009.prototype["create"]=function(){var m$5025$5027;(m$5025$5027=arguments);;var t0$5032;var message$5036;var args$5037;(t0$5032=m$5025$5027.length);if((t0$5032>=0)){(message$5036=function(){if((0>=t0$5032)){return "";}else{return m$5025$5027[0];}}());(args$5037=Array.prototype.slice.call(m$5025$5027,1));var it$0$5041;(it$0$5041=this);;var e$5046;(e$5046=Error(message$5036));;(e$5046["::tags"]=it$0$5041.tags);(e$5046["args"]=args$5037);(e$5046["name"]=["E"].concat(it$0$5041.tags).join("."));return e$5046;}else{throw Error("mismatch!!");}});($5007$5009.prototype["::check"]=function(e$5055){var it$0$5058;(it$0$5058=this);;var tags$5063;if(((!e$5055)||(!$3331(Error)(e$5055)))){return false;}(tags$5063=(e$5055["::tags"]||[]));;var temp$5071;(temp$5071=it$0$5058.tags);;var len$5076;(len$5076=temp$5071.length);;var i$5081;(i$5081=0);;$5068:for(;(i$5081<len$5076);(i$5081++)){var m$5089;(m$5089=temp$5071[i$5081]);;var tag$5097;(tag$5097=m$5089);if((tags$5063.indexOf(tag$5097)===(-1))){return false;}else{false;;}}return true;});($5007$5009.prototype["::deconstruct"]=function(e$5105){var it$0$5108;(it$0$5108=this);;return e$5105.args;});$4838($5007$5009,({}));return $5007$5009;}();
var $5112=function(temp$5113$5115,key$5116){var ph$5120;(ph$5120=temp$5113$5115);;var m$5118$5125;(m$5118$5125=ph$5120);;var bridge$5119$5130;(bridge$5119$5130=m$5118$5125);if(((bridge$5119$5130===null)||(bridge$5119$5130===(void 0)))){return false;}else{var x$5138;if((typeof(m$5118$5125)==="string")){(x$5138=m$5118$5125);return (key$5116 in String.prototype);}else{var x$5143;if((typeof(m$5118$5125)==="number")){(x$5143=m$5118$5125);return (key$5116 in Number.prototype);}else{var x$5148;(x$5148=m$5118$5125);return (key$5116 in x$5148);}}}};var $3379$3381;var binsearch$3382;var items$3383;var enumerate$3384;var $3380$3385;var Node$3386;var __lt____gt__$3387;var repr$3388;var fs$3389;var Source$3390;var Location$3391;var highlight$3392;var highlight_lines$3393;var clamp$3394;var morsel$3395;var highlight_locations$3396;var highlight_locations_same_source$3397;var merge_locations$3398;var __lt____lt____colon__$3399;var __plus____plus____colon__$3400;var format_error$3401;var display_error$3402;($3379$3381=require("./util"));;(binsearch$3382=$3379$3381.binsearch);;(items$3383=$3379$3381.items);;(enumerate$3384=$3379$3381.enumerate);;($3380$3385=require("./pp"));;(Node$3386=$3380$3385.Node);;(__lt____gt__$3387=$3380$3385["<>"]);;(repr$3388=$3380$3385.repr);;(fs$3389=require("fs"));;(Source$3390=function(){var i$3472;var len$3467;var temp$3462;var curr$3455;var it$0$3449;var text$3444;var url$3445;var t0$3440;var m$3433$3435;(m$3433$3435=arguments);;(t0$3440=m$3433$3435.length);if(((t0$3440>=1)&&(t0$3440<=2))){(text$3444=m$3433$3435[0]);(url$3445=function(){if((1>=t0$3440)){return false;}else{return m$3433$3435[1];}}());(it$0$3449=function(){if((!$3331(Source$3390)(this))){return Object.create(Source$3390.prototype);}else{return this;}}());;(it$0$3449["text"]=text$3444);(it$0$3449["url"]=url$3445);(it$0$3449["counts"]=[]);(curr$3455=0);;(temp$3462=text$3444.split("\n"));;(len$3467=temp$3462.length);;(i$3472=0);;$3459:for(;(i$3472<len$3467);(i$3472++)){var line$3488;var m$3480;(m$3480=temp$3462[i$3472]);;(line$3488=m$3480);it$0$3449.counts.push(curr$3455);(curr$3455=(curr$3455+(line$3488.length+1)));}it$0$3449.counts.push(curr$3455);(it$0$3449["nlines"]=(it$0$3449.counts.length-1));return it$0$3449;}else{throw Error("mismatch!!");}});;(Source$3390.prototype["linecol"]=function(pos$3497){var line$3505;var col$3506;var it$0$3500;(it$0$3500=this);;(line$3505=binsearch$3382(it$0$3500.counts,pos$3497));;(col$3506=(pos$3497-$3346(it$0$3500.counts,(line$3505-1))));;return [line$3505,col$3506];});(Source$3390.prototype["highlight_lines"]=function(l1$3516,l2$3517,spans$3518){var it$0$3521;(it$0$3521=this);;return highlight_lines$3393(it$0$3521.text,it$0$3521.counts,[(l1$3516-1),(l2$3517-1)],spans$3518);});$4838(Source$3390,({}));Source$3390;(Location$3391=function(source$3528,start$3529,end$3530){var it$0$3533;(it$0$3533=function(){if((!$3331(Location$3391)(this))){return Object.create(Location$3391.prototype);}else{return this;}}());;(it$0$3533["source"]=(source$3528||Source$3390("",null)));(it$0$3533["start"]=start$3529);(it$0$3533["end"]=end$3530);return it$0$3533;});;(Location$3391.prototype["text"]=function(){var it$0$3545;(it$0$3545=this);;return it$0$3545.source.text.slice(it$0$3545.start,it$0$3545.end);});(Location$3391.prototype["linerange"]=function(){var l2$3589;var t0$3580;var t1$3581;var l1$3572;var ph$3555$3573;var t0$3566;var t1$3567;var t2$3568;var m$3554$3561;var it$0$3556;(it$0$3556=this);;(m$3554$3561=it$0$3556.linecol());;if(((m$3554$3561 instanceof Array)&&((t0$3566=m$3554$3561.length),((t0$3566===2)&&((t1$3567=m$3554$3561[0]),((t1$3567 instanceof Array)&&((t2$3568=t1$3567.length),(t2$3568===2)))))))){(l1$3572=t1$3567[0]);t1$3567[1];(ph$3555$3573=m$3554$3561[1]);if((ph$3555$3573===null)){return [l1$3572,l1$3572];}else{(t0$3580=ph$3555$3573);if(((t0$3580 instanceof Array)&&((t1$3581=t0$3580.length),(t1$3581===2)))){(l2$3589=t0$3580[0]);t0$3580[1];return [l1$3572,l2$3589];}else{throw Error("mismatch!!");}}}else{throw Error("mismatch!!");}});(Location$3391.prototype["linecol"]=function(){var start$3607;var end$3608;var it$0$3602;(it$0$3602=this);;(start$3607=it$0$3602.source.linecol(it$0$3602.start));;(end$3608=function(){if((it$0$3602.start===it$0$3602.end)){return null;}else{return it$0$3602.source.linecol((it$0$3602.end-1));}}());;return [start$3607,end$3608];});(Location$3391.prototype["ref"]=function(){var otherwise$3691;var $3672$3680;var m$3671$3674;var l2$3663;var c2$3664;var t0$3652;var t1$3653;var t2$3654;var t3$3655;var l1$3640;var c1$3641;var ph$3621$3642;var t0$3632;var t1$3633;var t2$3634;var t3$3635;var t4$3636;var m$3620$3627;var it$0$3622;(it$0$3622=this);;(m$3620$3627=it$0$3622.linecol());;if(((m$3620$3627 instanceof Array)&&((t0$3632=m$3620$3627.length),((t0$3632===2)&&((t1$3633=m$3620$3627[0]),((t1$3633 instanceof Array)&&((t2$3634=t1$3633.length),((t2$3634===2)&&((t3$3635=[true,String(t1$3633[0])]),(t3$3635[0]&&((l1$3640=t3$3635[1]),((t4$3636=[true,String(t1$3633[1])]),t4$3636[0])))))))))))){(c1$3641=t4$3636[1]);(ph$3621$3642=m$3620$3627[1]);if((ph$3621$3642===null)){return ((l1$3640+":")+c1$3641);}else{(t0$3652=ph$3621$3642);if(((t0$3652 instanceof Array)&&((t1$3653=t0$3652.length),((t1$3653===2)&&((t2$3654=[true,String(t0$3652[0])]),(t2$3654[0]&&((l2$3663=t2$3654[1]),((t3$3655=[true,String(t0$3652[1])]),t3$3655[0])))))))){(c2$3664=t3$3655[1]);(m$3671$3674=null);;m$3671$3674;if(((l1$3640===l2$3663)&&(c1$3641===c2$3664))){return ((l1$3640+":")+c1$3641);}else{if((l1$3640===l2$3663)){return ((((l1$3640+":")+c1$3641)+"-")+c2$3664);}else{(otherwise$3691=m$3671$3674);return ((((((l1$3640+":")+c1$3641)+"-")+l1$3640)+":")+c2$3664);}}}else{throw Error("mismatch!!");}}}else{throw Error("mismatch!!");}});(Location$3391.prototype["highlight"]=function(){var it$0$3716;var cls$3711;var context$3712;var t0$3707;var m$3700$3702;(m$3700$3702=arguments);;(t0$3707=m$3700$3702.length);if(((t0$3707>=0)&&(t0$3707<=2))){(cls$3711=function(){if((0>=t0$3707)){return "hl1";}else{return m$3700$3702[0];}}());(context$3712=function(){if((1>=t0$3707)){return 0;}else{return m$3700$3702[1];}}());(it$0$3716=this);;return highlight_locations$3396([[it$0$3716,cls$3711]],context$3712);}else{throw Error("mismatch!!");}});$4838(Location$3391,({}));Location$3391;(highlight$3392=function(){var i$3758;var len$3753;var temp$3748;var acc$3743;var text$3736;var spans$3737;var offset$3738;var t0$3732;var m$3725$3727;(m$3725$3727=arguments);;(t0$3732=m$3725$3727.length);if(((t0$3732>=2)&&(t0$3732<=3))){(text$3736=m$3725$3727[0]);(spans$3737=m$3725$3727[1]);(offset$3738=function(){if((2>=t0$3732)){return 0;}else{return m$3725$3727[2];}}());return $4850([],(((acc$3743=[])),(((temp$3748=morsel$3395(spans$3737))),(((len$3753=temp$3748.length)),(((i$3758=0)),function(){$3741:for(;(i$3758<len$3753);(i$3758++)){var xstart$3783;var xend$3784;var start$3776;var end$3777;var attributes$3778;var t0$3771;var t1$3772;var m$3766;(m$3766=temp$3748[i$3758]);;(t0$3771=m$3766);if(((t0$3771 instanceof Array)&&((t1$3772=t0$3771.length),(t1$3772===3)))){(start$3776=t0$3771[0]);(end$3777=t0$3771[1]);(attributes$3778=t0$3771[2]);acc$3743.push((((xstart$3783=Math.max((start$3776-offset$3738),0))),((xend$3784=Math.min((end$3777-offset$3738),text$3736.length))),Node$3386(attributes$3778,[text$3736.slice(xstart$3783,xend$3784)])));}else{false;;}}}()))),acc$3743));}else{throw Error("mismatch!!");}});;(highlight_lines$3393=function(text$3800,linelocs$3801,temp$3798$3802,spans$3803){var t0$3808;var t1$3809;var i$3831;var len$3826;var temp$3821;var acc$3816;var l1$3805;var l2$3806;(t0$3808=temp$3798$3802);if(((t0$3808 instanceof Array)&&((t1$3809=t0$3808.length),(t1$3809===2)))){(l1$3805=t0$3808[0]);(l2$3806=t0$3808[1]);;}else{throw Error("Mismatch");}return $4850(["+span"],(((acc$3816=[])),(((temp$3821=$4987(l1$3805,l2$3806))),(((len$3826=temp$3821.length)),(((i$3831=0)),function(){$3814:for(;(i$3831<len$3826);(i$3831++)){var start$3850;var end$3851;var lineno$3847;var m$3839;(m$3839=temp$3821[i$3831]);;(lineno$3847=m$3839);acc$3816.push((((start$3850=$3346(linelocs$3801,lineno$3847))),((end$3851=$3346(linelocs$3801,(lineno$3847+1)))),$4850(["+span"],[$4850(["lineno"],(lineno$3847+1)),$4850(["source"],highlight$3392(text$3800,[[start$3850,end$3851,[]]].concat(clamp$3394(spans$3803,start$3850,end$3851))))])));}}()))),acc$3816));});;(clamp$3394=function(spans$3862,bot$3863,top$3864){var i$3883;var len$3878;var temp$3873;var acc$3868;(acc$3868=[]);;(temp$3873=spans$3862);;(len$3878=temp$3873.length);;(i$3883=0);;$3866:for(;(i$3883<len$3878);(i$3883++)){var start$3901;var end$3902;var attr$3903;var t0$3896;var t1$3897;var m$3891;(m$3891=temp$3873[i$3883]);;(t0$3896=m$3891);if(((t0$3896 instanceof Array)&&((t1$3897=t0$3896.length),((t1$3897===3)&&((start$3901=t0$3896[0]),((end$3902=t0$3896[1]),((attr$3903=t0$3896[2]),((end$3902>=bot$3863)&&(start$3901<=top$3864))))))))){acc$3868.push([Math.max(start$3901,bot$3863),Math.min(end$3902,top$3864),attr$3903]);}else{false;;}}return acc$3868;});;(morsel$3395=function(spans$3916){var jump$3919;var jumptill$3920;var process$3921;var thespans$3922;(jump$3919=function(active$3926,bot$3927,top$3928){var i$3953;var len$3948;var temp$3943;var acc$3938;var i$3994;var len$3989;var temp$3984;var e$3931;var attributes$3932;(e$3931=$3346(Math.min,[top$3928].concat((((acc$3938=[])),(((temp$3943=active$3926)),(((len$3948=temp$3943.length)),(((i$3953=0)),function(){$3936:for(;(i$3953<len$3948);(i$3953++)){var x$3971;var t0$3966;var t1$3967;var m$3961;(m$3961=temp$3943[i$3953]);;(t0$3966=m$3961);if(((t0$3966 instanceof Array)&&((t1$3967=t0$3966.length),(t1$3967===3)))){t0$3966[0];(x$3971=t0$3966[1]);t0$3966[2];acc$3938.push(x$3971);}else{false;;}}}()))),acc$3938))));;(attributes$3932=[]);;(temp$3984=active$3926);;(len$3989=temp$3984.length);;(i$3994=0);;$3981:for(;(i$3994<len$3989);(i$3994++)){var X$4012;var t0$4007;var t1$4008;var m$4002;(m$4002=temp$3984[i$3994]);;(t0$4007=m$4002);if(((t0$4007 instanceof Array)&&((t1$4008=t0$4007.length),(t1$4008===3)))){t0$4007[0];t0$4007[1];(X$4012=t0$4007[2]);(attributes$3932=attributes$3932.concat(X$4012));}else{false;;}}return [e$3931,[bot$3927,e$3931,attributes$3932]];});;(jumptill$3920=function(active$4022,bot$4023,top$4024){var t0$4033;var t1$4034;var i$4058;var len$4053;var temp$4048;var acc$4043;var t0$4089;var t1$4090;var newbot$4027;var span$4028;var newactive$4029;var spans$4030;var remainder$4031;if((bot$4023===top$4024)){return [[],active$4022];}else{(t0$4033=jump$3919(active$4022,bot$4023,top$4024));if(((t0$4033 instanceof Array)&&((t1$4034=t0$4033.length),(t1$4034===2)))){(newbot$4027=t0$4033[0]);(span$4028=t0$4033[1]);;}else{throw Error("Mismatch");}(newactive$4029=(((acc$4043=[])),(((temp$4048=active$4022)),(((len$4053=temp$4048.length)),(((i$4058=0)),function(){$4041:for(;(i$4058<len$4053);(i$4058++)){var x$4076;var e$4077;var attr$4078;var t0$4071;var t1$4072;var m$4066;(m$4066=temp$4048[i$4058]);;(t0$4071=m$4066);(x$4076=t0$4071);if(((t0$4071 instanceof Array)&&((t1$4072=t0$4071.length),((t1$4072===3)&&(t0$4071[0],((e$4077=t0$4071[1]),((attr$4078=t0$4071[2]),(e$4077>newbot$4027)))))))){acc$4043.push(x$4076);}else{false;;}}}()))),acc$4043));;(t0$4089=jumptill$3920(newactive$4029,newbot$4027,top$4024));if(((t0$4089 instanceof Array)&&((t1$4090=t0$4089.length),(t1$4090===2)))){(spans$4030=t0$4089[0]);(remainder$4031=t0$4089[1]);;}else{throw Error("Mismatch");}return [[span$4028].concat(spans$4030),remainder$4031];}});;(process$3921=function(start$4099,active$4100,rem$4101){var i$4165;var len$4160;var temp$4155;var acc$4150;var t0$4194;var t1$4195;var top$4143;var bot$4144;var spans$4145;var t0$4222;var t1$4223;var spans$4219;var newactive$4220;var start$4202;var active$4203;var next$4204;var target$4205;var end$4206;var attr$4207;var rest$4208;var start$4134;var active$4135;var $4104$4119;var $4105$4120;var $4106$4121;var t0$4113;var t1$4114;var t2$4115;var t3$4116;var t4$4117;var m$4103$4108;(m$4103$4108=[start$4099,active$4100,rem$4101]);;if((($4104$4119=(m$4103$4108 instanceof Array))&&((t0$4113=m$4103$4108.length),(($4106$4121=(t0$4113===3))&&(m$4103$4108[0],((t1$4114=m$4103$4108[1]),((t1$4114 instanceof Array)&&((t2$4115=t1$4114.length),((t2$4115===0)&&((t3$4116=m$4103$4108[2]),((t3$4116 instanceof Array)&&((t4$4117=t3$4116.length),(t4$4117===0))))))))))))){return [];}else{if(($4106$4121&&((start$4134=m$4103$4108[0]),((active$4135=m$4103$4108[1]),((t1$4114=m$4103$4108[2]),((t1$4114 instanceof Array)&&((t2$4115=t1$4114.length),(t2$4115===0)))))))){(top$4143=$3346(Math.max,(((acc$4150=[])),(((temp$4155=active$4135)),(((len$4160=temp$4155.length)),(((i$4165=0)),function(){$4148:for(;(i$4165<len$4160);(i$4165++)){var e$4183;var t0$4178;var t1$4179;var m$4173;(m$4173=temp$4155[i$4165]);;(t0$4178=m$4173);if(((t0$4178 instanceof Array)&&((t1$4179=t0$4178.length),(t1$4179===3)))){t0$4178[0];(e$4183=t0$4178[1]);t0$4178[2];acc$4150.push(e$4183);}else{false;;}}}()))),acc$4150)));;(bot$4144=Math.min(start$4134,top$4143));;(t0$4194=jumptill$3920(active$4135,start$4134,top$4143));if(((t0$4194 instanceof Array)&&((t1$4195=t0$4194.length),(t1$4195===2)))){(spans$4145=t0$4194[0]);t0$4194[1];;}else{throw Error("Mismatch");}return spans$4145;}else{if(($4106$4121&&((start$4202=m$4103$4108[0]),((active$4203=m$4103$4108[1]),((t1$4114=m$4103$4108[2]),((t1$4114 instanceof Array)&&((t2$4115=t1$4114.length),((t2$4115>=1)&&((t3$4116=t1$4114[0]),((next$4204=t3$4116),((t3$4116 instanceof Array)&&((t4$4117=t3$4116.length),(t4$4117===3))))))))))))){(target$4205=t3$4116[0]);(end$4206=t3$4116[1]);(attr$4207=t3$4116[2]);(rest$4208=Array.prototype.slice.call(t1$4114,1));(t0$4222=jumptill$3920(active$4203,start$4202,target$4205));if(((t0$4222 instanceof Array)&&((t1$4223=t0$4222.length),(t1$4223===2)))){(spans$4219=t0$4222[0]);(newactive$4220=t0$4222[1]);;}else{throw Error("Mismatch");}return spans$4219.concat(process$3921(target$4205,[next$4204].concat(newactive$4220),rest$4208));}else{throw Error("mismatch!!");}}}});;(thespans$3922=spans$3916.sort(function(temp$4233$4236,temp$4234$4237){var t0$4244;var t1$4245;var t0$4251;var t1$4252;var s1$4239;var e1$4240;var s2$4241;var e2$4242;(t0$4244=temp$4233$4236);if(((t0$4244 instanceof Array)&&((t1$4245=t0$4244.length),(t1$4245===3)))){(s1$4239=t0$4244[0]);(e1$4240=t0$4244[1]);t0$4244[2];;}else{throw Error("Mismatch");}(t0$4251=temp$4234$4237);if(((t0$4251 instanceof Array)&&((t1$4252=t0$4251.length),(t1$4252===3)))){(s2$4241=t0$4251[0]);(e2$4242=t0$4251[1]);t0$4251[2];;}else{throw Error("Mismatch");}if((s1$4239===s2$4241)){return (e1$4240-e2$4242);}else{return (s1$4239-s2$4241);}}));;return process$3921(thespans$3922[0][0],[],thespans$3922);});;(highlight_locations$3396=function(){var i$4295;var len$4290;var temp$4285;var i$4343;var len$4338;var temp$4333;var acc$4328;var srcs$4278;var locations$4273;var context$4274;var t0$4269;var m$4262$4264;(m$4262$4264=arguments);;(t0$4269=m$4262$4264.length);if(((t0$4269>=1)&&(t0$4269<=2))){(locations$4273=m$4262$4264[0]);(context$4274=function(){if((1>=t0$4269)){return 0;}else{return m$4262$4264[1];}}());(srcs$4278=({}));;(temp$4285=locations$4273);;(len$4290=temp$4285.length);;(i$4295=0);;$4282:for(;(i$4295<len$4290);(i$4295++)){var key$4319;var loc$4313;var cls$4314;var t0$4308;var t1$4309;var m$4303;(m$4303=temp$4285[i$4295]);;(t0$4308=m$4303);if(((t0$4308 instanceof Array)&&((t1$4309=t0$4308.length),(t1$4309===2)))){(loc$4313=t0$4308[0]);(cls$4314=t0$4308[1]);(key$4319=String((loc$4313.source&&loc$4313.source.url)));;if((!$3346(srcs$4278,key$4319))){(srcs$4278[key$4319]=[]);}$3346(srcs$4278,key$4319).push([loc$4313,cls$4314]);}else{false;;}}return $4850(["+div"],(((acc$4328=[])),(((temp$4333=items$3383(srcs$4278))),(((len$4338=temp$4333.length)),(((i$4343=0)),function(){$4326:for(;(i$4343<len$4338);(i$4343++)){var locs$4361;var t0$4356;var t1$4357;var m$4351;(m$4351=temp$4333[i$4343]);;(t0$4356=m$4351);if(((t0$4356 instanceof Array)&&((t1$4357=t0$4356.length),(t1$4357===2)))){t0$4356[0];(locs$4361=t0$4356[1]);acc$4328.push(highlight_locations_same_source$3397(locs$4361,context$4274));}else{false;;}}}()))),acc$4328));}else{throw Error("mismatch!!");}});;(highlight_locations_same_source$3397=function(){var i$4414;var len$4409;var temp$4404;var acc$4399;var t0$4444;var t1$4445;var i$4473;var len$4468;var temp$4463;var acc$4458;var i$4515;var len$4510;var temp$4505;var acc$4500;var loc$4389;var src$4390;var l1$4391;var l2$4392;var first$4393;var last$4394;var locations$4384;var context$4385;var t0$4380;var m$4373$4375;(m$4373$4375=arguments);;(t0$4380=m$4373$4375.length);if(((t0$4380>=1)&&(t0$4380<=2))){(locations$4384=m$4373$4375[0]);(context$4385=function(){if((1>=t0$4380)){return 0;}else{return m$4373$4375[1];}}());(loc$4389=merge_locations$3398((((acc$4399=[])),(((temp$4404=locations$4384)),(((len$4409=temp$4404.length)),(((i$4414=0)),function(){$4397:for(;(i$4414<len$4409);(i$4414++)){var x$4432;var cls$4433;var t0$4427;var t1$4428;var m$4422;(m$4422=temp$4404[i$4414]);;(t0$4427=m$4422);if(((t0$4427 instanceof Array)&&((t1$4428=t0$4427.length),(t1$4428===2)))){(x$4432=t0$4427[0]);(cls$4433=t0$4427[1]);acc$4399.push(x$4432);}else{false;;}}}()))),acc$4399)));;(src$4390=loc$4389.source);;(t0$4444=loc$4389.linerange());if(((t0$4444 instanceof Array)&&((t1$4445=t0$4444.length),(t1$4445===2)))){(l1$4391=t0$4444[0]);(l2$4392=t0$4444[1]);;}else{throw Error("Mismatch");}(first$4393=Math.max(1,(l1$4391-context$4385)));;(last$4394=Math.min(src$4390.nlines,(l2$4392+context$4385)));;return $4850(["+div","location"],[$4850(["+div","source"],[$4850(["sourcefile"],(src$4390.url||"???")),(((acc$4458=[])),(((temp$4463=locations$4384)),(((len$4468=temp$4463.length)),(((i$4473=0)),function(){$4456:for(;(i$4473<len$4468);(i$4473++)){var loc$4491;var cls$4492;var t0$4486;var t1$4487;var m$4481;(m$4481=temp$4463[i$4473]);;(t0$4486=m$4481);if(((t0$4486 instanceof Array)&&((t1$4487=t0$4486.length),(t1$4487===2)))){(loc$4491=t0$4486[0]);(cls$4492=t0$4486[1]);acc$4458.push(Node$3386([cls$4492,"sourcepos"],loc$4491.ref()));}else{false;;}}}()))),acc$4458)]),src$4390.highlight_lines(first$4393,last$4394,(((acc$4500=[])),(((temp$4505=locations$4384)),(((len$4510=temp$4505.length)),(((i$4515=0)),function(){$4498:for(;(i$4515<len$4510);(i$4515++)){var loc$4533;var cls$4534;var t0$4528;var t1$4529;var m$4523;(m$4523=temp$4505[i$4515]);;(t0$4528=m$4523);if(((t0$4528 instanceof Array)&&((t1$4529=t0$4528.length),(t1$4529===2)))){(loc$4533=t0$4528[0]);(cls$4534=t0$4528[1]);acc$4500.push([loc$4533.start,loc$4533.end,[cls$4534]]);}else{false;;}}}()))),acc$4500))]);}else{throw Error("mismatch!!");}});;(merge_locations$3398=function(temp$4545$4547){var i$4603;var len$4598;var temp$4593;var acc$4588;var i$4641;var len$4636;var temp$4631;var acc$4626;var start$4582;var end$4583;var locs$4578;var loc$4573;var $4550$4564;var $4551$4565;var t0$4562;var m$4549$4557;var ph$4552;(ph$4552=temp$4545$4547);;(m$4549$4557=ph$4552);;if((($4550$4564=(m$4549$4557 instanceof Array))&&((t0$4562=m$4549$4557.length),(t0$4562===0)))){return Location$3391(null,0,0);}else{if(($4550$4564&&(t0$4562===1))){(loc$4573=m$4549$4557[0]);return loc$4573;}else{if(($4550$4564&&(t0$4562>=0))){(locs$4578=Array.prototype.slice.call(m$4549$4557,0));(start$4582=$3346(Math.min,(((acc$4588=[])),(((temp$4593=locs$4578)),(((len$4598=temp$4593.length)),(((i$4603=0)),function(){$4586:for(;(i$4603<len$4598);(i$4603++)){var loc$4619;var m$4611;(m$4611=temp$4593[i$4603]);;(loc$4619=m$4611);acc$4588.push(loc$4619.start);}}()))),acc$4588)));;(end$4583=$3346(Math.max,(((acc$4626=[])),(((temp$4631=locs$4578)),(((len$4636=temp$4631.length)),(((i$4641=0)),function(){$4624:for(;(i$4641<len$4636);(i$4641++)){var loc$4657;var m$4649;(m$4649=temp$4631[i$4641]);;(loc$4657=m$4649);acc$4626.push(loc$4657.end);}}()))),acc$4626)));;return Location$3391(locs$4578[0].source,start$4582,end$4583);}else{throw Error("mismatch!!");}}}});;(__lt____lt____colon__$3399=function(x$4666,y$4667){if((!x$4666.location)){(x$4666["location"]=function(){if(((!y$4667)||$3331(Location$3391)(y$4667))){return y$4667;}else{return y$4667.location;}}());}return x$4666;});;(__plus____plus____colon__$3400=function(x$4675,y$4676){var rval$4680;(x$4675=function(){if(((!x$4675)||$3331(Location$3391)(x$4675))){return x$4675;}else{return x$4675.location;}}());(y$4676=function(){if(((!y$4676)||$3331(Location$3391)(y$4676))){return y$4676;}else{return y$4676.location;}}());(rval$4680=false);;try{(rval$4680=merge_locations$3398([x$4675,y$4676]));}catch(excv$4686){var e$4692;(e$4692=excv$4686);(rval$4680=(void 0));}return rval$4680;});;(format_error$3401=function(temp$4697$4699){var t0$4707;var i$4753;var len$4748;var temp$4743;var acc$4738;var hls$4729;var locs$4730;var rval$4806;var loc$4822;var data$4802;var other$4828;var url$4795;var start$4796;var end$4797;var loc$4789;var args$4723;var $4702$4719;var $4703$4720;var t0$4716;var t1$4717;var m$4701$4711;var ph$4704;var e$4705;(t0$4707=temp$4697$4699);(e$4705=t0$4707);(ph$4704=t0$4707);;(m$4701$4711=ph$4704);;if(($3331($5006(["syntax"]))(m$4701$4711)&&($5112(m$4701$4711,"args")&&((t0$4716=m$4701$4711.args),((t0$4716 instanceof Array)&&((t1$4717=t0$4716.length),(t1$4717===1))))))){(args$4723=t0$4716[0]);(hls$4729=["hl1","hl2","hl3","hl4"]);;(locs$4730=(((acc$4738=[])),(((temp$4743=enumerate$3384(items$3383(args$4723)))),(((len$4748=temp$4743.length)),(((i$4753=0)),function(){$4736:for(;(i$4753<len$4748);(i$4753++)){var i$4773;var key$4774;var arg$4775;var t0$4766;var t1$4767;var t2$4768;var t3$4769;var m$4761;(m$4761=temp$4743[i$4753]);;(t0$4766=m$4761);if(((t0$4766 instanceof Array)&&((t1$4767=t0$4766.length),((t1$4767===2)&&((i$4773=t0$4766[0]),((t2$4768=t0$4766[1]),((t2$4768 instanceof Array)&&((t3$4769=t2$4768.length),((t3$4769===2)&&((key$4774=t2$4768[0]),((arg$4775=t2$4768[1]),(arg$4775&&arg$4775.location)))))))))))){acc$4738.push([arg$4775.location,$3346(hls$4729,(i$4773%4))]);}else{false;;}}}()))),acc$4738));;return $4850(["+div"],[$4850(["+div"],[$4850(["error_type"],e$4705.name),$4850(["error_message"],e$4705.message)]),repr$3388(args$4723),highlight_locations$3396(locs$4730)]);}else{if((($4702$4719=$5112(m$4701$4711,"location"))&&((t0$4716=m$4701$4711.location),$3331(Location$3391)(t0$4716)))){(loc$4789=t0$4716);return $4850(["+div"],[$4850(["+div"],[$4850(["error_type"],e$4705.name),$4850(["error_message"],e$4705.message)]),function(){if(e$4705.args){return repr$3388(e$4705.args);}else{return "";}}(),highlight_locations$3396([[loc$4789,"hl1"]]),$4850(["traceback"],(e$4705.stack||""))]);}else{if(($4702$4719&&((t0$4716 instanceof Array)&&((t1$4717=t0$4716.length),((t1$4717===4)&&(t0$4716[0]==="location")))))){(url$4795=t0$4716[1]);(start$4796=t0$4716[2]);(end$4797=t0$4716[3]);(data$4802=(((rval$4806=false)),(function(){try{(rval$4806=fs$3389.readFileSync(url$4795,"utf8"));}catch(excv$4812){var e$4818;(e$4818=excv$4812);(rval$4806=null);}}(),rval$4806)));;if(data$4802){(loc$4822=Location$3391(Source$3390(data$4802,url$4795),start$4796,end$4797));;return $4850(["+div"],[$4850(["+div"],[$4850(["error_type"],e$4705.name),$4850(["error_message"],e$4705.message)]),function(){if(e$4705.args){return repr$3388(e$4705.args);}else{return "";}}(),highlight_locations$3396([[loc$4822,"hl1"]]),$4850(["traceback"],(e$4705.stack||""))]);}else{return $4850(["+div"],$4850(["traceback"],(e$4705.stack||e$4705)));}}else{(other$4828=m$4701$4711);return $4850(["traceback"],(e$4705.stack||e$4705));}}}});;(display_error$3402=function(e$4834){return __lt____gt__$3387(null,format_error$3401(e$4834));});;(exports["Source"]=Source$3390);(exports["Location"]=Location$3391);(exports["highlight"]=highlight$3392);(exports["highlight_locations"]=highlight_locations$3396);(exports["merge_locations"]=merge_locations$3398);(exports["<<:"]=__lt____lt____colon__$3399);(exports["++:"]=__plus____plus____colon__$3400);(exports["format_error"]=format_error$3401);(exports["display_error"]=display_error$3402);
