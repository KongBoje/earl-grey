var τ47=function(type$7039){var f$7042;(f$7042=type$7039["::check"]);;if((f$7042===(void 0))){return function(value$7047){return (value$7047 instanceof type$7039);};}else{return function(value$7050){return f$7042.call(type$7039,value$7050);};}};
var τ48=(function(o,m){if(typeof(m)==='string'||typeof(m)==='number'){return o[m];}else{return o['::send'](m);}});
var τ49=function(temp$7052$7054){var ph$7058;(ph$7058=temp$7052$7054);;var m$7056$7063;(m$7056$7063=ph$7058);;var bridge$7057$7068;var x$7072;(bridge$7057$7068=m$7056$7063);if((((typeof(bridge$7057$7068)==="string")&&((x$7072=bridge$7057$7068),true))||((typeof(bridge$7057$7068)==="number")&&((x$7072=bridge$7057$7068),true)))){return ["value",x$7072];}else{var other$7079;(other$7079=m$7056$7063);return other$7079["::serialize_ast"]();}};
var send$6901;(send$6901=function(obj$6906,temp$6904$6907){var ph$6911;var msg$6912;var t0$6914;(t0$6914=temp$6904$6907);(msg$6912=t0$6914);(ph$6911=t0$6914);;var m$6909$6918;(m$6909$6918=ph$6911);;var bridge$6910$6923;(bridge$6910$6923=m$6909$6918);if(((typeof(bridge$6910$6923)==="string")||(typeof(bridge$6910$6923)==="number"))){return obj$6906[msg$6912];}else{var other$6931;(other$6931=m$6909$6918);return obj$6906["::send"](msg$6912);}});;(Array[":::project"]=function(temp$6934$6936){var ph$6939;var value$6940;var t0$6942;(t0$6942=temp$6934$6936);(value$6940=t0$6942);(ph$6939=t0$6942);;var m$6938$6946;(m$6938$6946=ph$6939);;if(τ47(Array)(m$6938$6946)){return [true,value$6940];}else{m$6938$6946;return [true,[value$6940]];}});(Array.prototype["::check"]=function(value$6960){if((value$6960 instanceof Array)){var i$6965;(i$6965=0);;$6963:for(;(i$6965<this.length);(i$6965++)){if((τ48(this,i$6965)!==τ48(value$6960,i$6965))){return false;}}return true;}else{return false;}});(Array.prototype[":::project"]=function(value$6974){if((value$6974 instanceof Array)){var i$6979;(i$6979=0);;$6977:for(;(i$6979<this.length);(i$6979++)){if((τ48(this,i$6979)!==τ48(value$6974,i$6979))){return [true,[value$6974]];}}return [true,value$6974.slice(this.length)];}else{return [true,[value$6974]];}});(Array.prototype[":::deconstruct"]=function(value$6988){return [true,value$6988.slice(this.length)];});(Array.prototype["::serialize_ast"]=function(){return ["array"].concat(this.map(τ49));});(RegExp.prototype["::check"]=function(value$6993){return value$6993.match(this);});(RegExp.prototype[":::project"]=function(value$6996){var m$6998$7000;(m$6998$7000=value$6996.match(this));;var m$7008;if((m$6998$7000===null)){(m$7008=m$6998$7000);return [false,null];}else{var m$7013;(m$7013=m$6998$7000);return [true,m$7013];}});(RegExp.prototype[":::deconstruct"]=function(value$7016){var m$7018$7020;(m$7018$7020=value$7016.match(this));;var m$7028;if((m$7018$7020===null)){(m$7028=m$7018$7020);return [false,null];}else{var m$7033;(m$7033=m$7018$7020);return [true,m$7033];}});(Function.prototype["::send"]=function(args$7036){return this.apply(this,args$7036);});
var τ51=function(dest$7444,values$7445){var k$7450;(k$7450=null);$7448:for(k$7450 in values$7445){if(values$7445.hasOwnProperty(k$7450)){(dest$7444[k$7450]=values$7445[k$7450]);}}return dest$7444;};
var τ50=function(){var $7338$7340;($7338$7340=function(tags$7344){var it$0$7347;(it$0$7347=function(){if((!τ47($7338$7340)(this))){return Object.create($7338$7340.prototype);}else{return this;}}());;(it$0$7347["tags"]=tags$7344);return it$0$7347;});;($7338$7340.prototype["create"]=function(){var m$7356$7358;(m$7356$7358=arguments);;var t0$7363;var message$7367;var args$7368;(t0$7363=m$7356$7358.length);if((t0$7363>=0)){(message$7367=function(){if((0>=t0$7363)){return "";}else{return m$7356$7358[0];}}());(args$7368=Array.prototype.slice.call(m$7356$7358,1));var it$0$7372;(it$0$7372=this);;var e$7377;(e$7377=Error(message$7367));;(e$7377["::tags"]=it$0$7372.tags);(e$7377["args"]=args$7368);(e$7377["name"]=["E"].concat(it$0$7372.tags).join("."));return e$7377;}else{throw Error("mismatch!!");}});($7338$7340.prototype["::check"]=function(e$7386){var it$0$7389;(it$0$7389=this);;var tags$7394;if(((!e$7386)||(!τ47(Error)(e$7386)))){return false;}(tags$7394=(e$7386["::tags"]||[]));;var temp$7402;(temp$7402=it$0$7389.tags);;var len$7407;(len$7407=temp$7402.length);;var i$7412;(i$7412=0);;$7399:for(;(i$7412<len$7407);(i$7412++)){var m$7420;(m$7420=temp$7402[i$7412]);;var tag$7428;(tag$7428=m$7420);if((tags$7394.indexOf(tag$7428)===(-1))){return false;}else{false;;}}return true;});($7338$7340.prototype["::deconstruct"]=function(e$7436){var it$0$7439;(it$0$7439=this);;return e$7436.args;});τ51($7338$7340,({}));return $7338$7340;}();var hoist$7083;var hoistable$7084;var not_hoistable$7085;var hoist_helper$7086;(hoist$7083=function(expr$7090){var t0$7096;var t1$7097;var b$7093;var inner$7094;(t0$7096=hoist_helper$7086(expr$7090));if(((t0$7096 instanceof Array)&&((t1$7097=t0$7096.length),(t1$7097===2)))){(b$7093=t0$7096[0]);(inner$7094=t0$7096[1]);;}else{throw Error("Mismatch");}return ["scope",inner$7094,b$7093];});;(hoistable$7084=["send","array","object","multi","if","assign","js_break","js_continue","js_return","js_delete","js_throw","js_try","js_new"]);;(not_hoistable$7085=["void","js_while","js_for","js_for_in","js_label"]);;(hoist_helper$7086=function(temp$7111$7113){var t0$7124;var x$7146;var x$7151;var bridge$7117$7143;var x$7156;var t0$7172;var t1$7173;var newbody$7169;var inner$7170;var t0$7188;var t1$7189;var newbody$7185;var inner$7186;var i$7227;var len$7222;var temp$7217;var acc$7212;var accum$7203;var newargs$7204;var i$7285;var len$7280;var temp$7275;var acc$7270;var newargs$7265;var other$7334;var type$7258;var args$7259;var type$7196;var args$7197;var vars$7180;var body$7181;var vars$7163;var body$7164;var $7118$7136;var $7119$7137;var $7120$7138;var bridge$7116$7133;var t0$7134;var m$7115$7128;var ph$7121;var expr$7122;(t0$7124=temp$7111$7113);(ph$7121=t0$7124);(expr$7122=t0$7124);;(m$7115$7128=ph$7121);;(bridge$7116$7133=m$7115$7128);if((((bridge$7117$7143=bridge$7116$7133),((((x$7146=bridge$7117$7143)),((x$7146 instanceof Array)&&(x$7146[0]==="symbol")))||(((x$7151=bridge$7117$7143)),((x$7151 instanceof Array)&&(x$7151[0]==="value")))))||(((x$7156=bridge$7116$7133)),((x$7156 instanceof Array)&&(x$7156[0]==="variable"))))){return [expr$7122,[]];}else{if((($7118$7136=(m$7115$7128 instanceof Array))&&((t0$7134=m$7115$7128.length),(($7120$7138=(t0$7134===3))&&(m$7115$7128[0]==="scope"))))){(vars$7163=m$7115$7128[1]);(body$7164=m$7115$7128[2]);(t0$7172=hoist_helper$7086(body$7164));if(((t0$7172 instanceof Array)&&((t1$7173=t0$7172.length),(t1$7173===2)))){(newbody$7169=t0$7172[0]);(inner$7170=t0$7172[1]);;}else{throw Error("Mismatch");}return [newbody$7169,inner$7170.concat(vars$7163)];}else{if(($7120$7138&&(m$7115$7128[0]==="lambda"))){(vars$7180=m$7115$7128[1]);(body$7181=m$7115$7128[2]);(t0$7188=hoist_helper$7086(body$7181));if(((t0$7188 instanceof Array)&&((t1$7189=t0$7188.length),(t1$7189===2)))){(newbody$7185=t0$7188[0]);(inner$7186=t0$7188[1]);;}else{throw Error("Mismatch");}return [["lambda",vars$7180,["scope",inner$7186,newbody$7185]],[]];}else{if(($7118$7136&&(($7120$7138=(t0$7134>=1))&&((type$7196=m$7115$7128[0]),((args$7197=Array.prototype.slice.call(m$7115$7128,1)),(hoistable$7084.indexOf(type$7196)!==(-1))))))){(accum$7203=[]);;(newargs$7204=(((acc$7212=[])),(((temp$7217=args$7197)),(((len$7222=temp$7217.length)),(((i$7227=0)),function(){$7210:for(;(i$7227<len$7222);(i$7227++)){var t0$7249;var t1$7250;var b$7246;var inner$7247;var arg$7243;var m$7235;(m$7235=temp$7217[i$7227]);;(arg$7243=m$7235);acc$7212.push((((t0$7249=hoist_helper$7086(arg$7243)),function(){if(((t0$7249 instanceof Array)&&((t1$7250=t0$7249.length),(t1$7250===2)))){(b$7246=t0$7249[0]);(inner$7247=t0$7249[1]);}else{throw Error("Mismatch");}}()),(accum$7203=accum$7203.concat(inner$7247)),b$7246));}}()))),acc$7212));;return [[type$7196].concat(newargs$7204),accum$7203];}else{if(($7120$7138&&((type$7258=m$7115$7128[0]),((args$7259=Array.prototype.slice.call(m$7115$7128,1)),(not_hoistable$7085.indexOf(type$7258)!==(-1)))))){(newargs$7265=(((acc$7270=[])),(((temp$7275=args$7259)),(((len$7280=temp$7275.length)),(((i$7285=0)),function(){$7268:for(;(i$7285<len$7280);(i$7285++)){var t0$7308;var t1$7309;var other$7329;var t0$7320;var m$7304$7315;var b$7305;var inner$7306;var arg$7301;var m$7293;(m$7293=temp$7275[i$7285]);;(arg$7301=m$7293);acc$7270.push((((t0$7308=hoist_helper$7086(arg$7301)),function(){if(((t0$7308 instanceof Array)&&((t1$7309=t0$7308.length),(t1$7309===2)))){(b$7305=t0$7308[0]);(inner$7306=t0$7308[1]);}else{throw Error("Mismatch");}}()),(((m$7304$7315=inner$7306)),function(){if(((m$7304$7315 instanceof Array)&&((t0$7320=m$7304$7315.length),(t0$7320===0)))){return b$7305;}else{(other$7329=m$7304$7315);return ["scope",inner$7306,b$7305];}}())));}}()))),acc$7270));;return [[type$7258].concat(newargs$7265),[]];}else{(other$7334=m$7115$7128);throw τ50(["syntax","illegal"]).create("Illegal node -- this should not happen.",({"node":other$7334}));}}}}}});;(exports["hoist"]=hoist$7083);
